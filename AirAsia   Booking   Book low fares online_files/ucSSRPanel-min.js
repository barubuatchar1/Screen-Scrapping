if(!ucComfortKitPanel){var ucComfortKitPanel={};}if(!ucMealPanel){var ucMealPanel={};}if(!ucDutyFreePanel){var ucDutyFreePanel={};}(function(a){a.fn.ucMealPanel=function(m,k,b){var h={count:0,max:10,freeMealCount:0,freeMealPolicy:0,selectedTab:0,disabled:false,commaReplacement:"",previousSelectedMeals:"",MUPGCount:"",upSizeCode:"",selectedItems:{},onchange:null};var f=a(this).eq(0);if(a(this).attr("data-ucmp-id")){var c=a(this).eq(0).attr("data-ucmp-id");var d=ucMealPanel[c];}switch(m){case"count":return d.count;break;case"freeMealCount":if(k!=undefined&&k!=null){d.freeMealCount=k;}else{return d.freeMealCount;}break;case"freeMealPolicy":if(k!=undefined&&k!=null){d.freeMealPolicy=k;}else{return d.freeMealPolicy;}break;case"disabled":if(k==undefined||k==null){return d.disabled;}f.ucMealPanel("disableControl",k);break;case"commaReplacement":if(k!=undefined&&k!=null){d.commaReplacement=k;}else{return d.commaReplacement;}break;case"previousSelectedMeals":if(k!=undefined&&k!=null){d.previousSelectedMeals=k;}else{return d.previousSelectedMeals;}break;case"MUPGCount":if(k!=undefined&&k!=null){d.MUPGCount=k;}else{return d.MUPGCount;}break;case"upSizeCode":if(k!=undefined&&k!=null){d.upSizeCode=k;}else{return d.upSizeCode;}break;case"staticInit":if(ucMealPanel.staticInit){return;}ucMealPanel.staticInit=true;a(document).on("click",".ucmealpanel .ucmealpanel-tab-item a",function(){var s=a(this);if(s.hasClass("disabled")){return false;}var i=s.parent(".ucmealpanel-tab-item"),t=s.closest(".ucmealpanel");var u=i.attr("data-for");s.closest("ul").children(".ucmealpanel-tab-item").removeClass("ucmealpanel-selected");i.addClass("ucmealpanel-selected");t.find(".ucmealpanel-item-container").hide();a("#"+u).fadeIn();var o=t.find(".ucmealpanel-tab-item").not(".hidden").length;var r=t.find(".ucmealpanel-tab-item").not(".hidden").index(s.closest(".ucmealpanel").find(".ucmealpanel-tab-item.ucmealpanel-selected"));var p=(r+1)%o;var n=(r-1+o)%o;var q=a("#"+u).find("li.ucmealpanel-item").length;t.find(".ucmealpanel-content-slider-left").addClass("disabled");a("#"+u).scrollLeft(0);if(a("body").css("direction")=="rtl"&&a.browser.mozilla){a("#"+u).scrollLeft(-514);}if(q<=4){t.find(".ucmealpanel-content-slider-right").addClass("disabled");}else{t.find(".ucmealpanel-content-slider-right").removeClass("disabled");}t.find(".ucmealpanel-footnav-next-btn").html(a(this).closest("ul").find(".ucmealpanel-tab-item:not(.hidden)").eq(p).find("a").html()+" &gt;");t.find(".ucmealpanel-footnav-prev-btn").html("&lt; "+a(this).closest("ul").find(".ucmealpanel-tab-item:not(.hidden)").eq(n).find("a").html());return false;});a(document).on("click",".ucmealpanel-content-slider-left",function(){if(a(this).hasClass("disabled")){return false;}var i=a(this).closest(".ucmealpanel-content").children(".ucmealpanel-item-container").not(":hidden");var o=i.scrollLeft();var n=i.width();if(o-n<=0){if(a("body").css("direction").toLowerCase()=="rtl"&&a.browser.mozilla){a(i).animate({scrollLeft:-514},500);}else{a(i).animate({scrollLeft:0},500);}}else{a(i).animate({scrollLeft:o-n-13},500);}return false;});a(document).on("click",".ucmealpanel-content-slider-right",function(){if(a(this).hasClass("disabled")){return false;}var i=a(this).closest(".ucmealpanel-content").children(".ucmealpanel-item-container").not(":hidden");var p=i.scrollLeft();var o=i.children(".ucmealpanel-item").length;var n=i.width();var q=i.children(".ucmealpanel-item").first().outerWidth();if(p+n>=o*q-n){if(a("body").css("direction").toLowerCase()=="rtl"&&a.browser.mozilla){a(i).not(":animated").animate({scrollLeft:0},500);}else{a(i).not(":animated").animate({scrollLeft:o*q-n+40},500);}}else{a(i).not(":animated").animate({scrollLeft:p+n+13},500);}return false;});a(document).on("change",".ucmealpanel-item-check",function(B){var u=a(this).closest(".ucmealpanel");var E=a(this).parent(".ucmealpanel-item-selection");var o=E.children(".ucmealpanel-item-selection-form").find(".ucmealpanel-item-sf-count-input");var y=(a(this).prop("id").indexOf("LTML"))!=-1?true:false;if(y){a(this).prop("disabled",true);B.preventDefault();return false;}var s=(d.previousSelectedMeals).split("/");var v="";for(var A=0;A<s.length;A++){var r=s[A].split(":");if(this.id.indexOf(r[0])>=0){v=r[1].split(",");break;}}if(a(this).is(":checked")){E.children(".ucmealpanel-item-selection-form").show();if(!(o.val()>1)){o.val("1");}var D=E.find(".ucmealpanel-item-sf-count-input").prop("onchange");var x=E.find(".ucmealpanel-item-sf-count-input");SKYSALES.Util.updatePriceDisplay(o);var w=a("#upSizeMealCheckBoxStatusId").val();var n=false;if(v!=""&&a.inArray(d.upSizeCode,v)<0){for(previousMealCount=0;previousMealCount<v.length;previousMealCount++){if(String((this.id)||"").match(v[previousMealCount])!=null){n=true;break;}}}var z=u.find(".upsizeMeal").find(".ucmealpanel-item-selection-form").find(".ucmealpanel-item-sf-count-input");if(z.length>0){var C=0,p=0;C=z.eq(0).val();u.find(".ucmealpanel-item-check:checked").each(function(F,G){var i=parseInt(a(this).parent(".ucmealpanel-item-selection").find(".ucmealpanel-item-sf-count-input").val());p+=i;});if(parseInt(p)==1&&parseInt(C)==0&&((w==""&&w!=undefined)||(n==false))){u.find(".upsizeMeal").find(".ucmealpanel-item-selection").find(".ucmealpanel-item-check1").attr("checked",true);z.eq(0).val(1);}else{if(parseInt(p)==2&&((w==""&&w!=undefined)||(n==false))){if(parseInt(C)==0){u.find(".upsizeMeal").find(".ucmealpanel-item-selection").find(".ucmealpanel-item-check1").attr("checked",true);z.eq(0).val(1);}else{if(parseInt(C)==1){z.eq(0).val(2);}}}else{if(z.eq(0).val()==0){u.find(".upsizeMeal").find(".ucmealpanel-item-selection").find(".ucmealpanel-item-check1").attr("checked",false);}}}var D=z.attr("onchange");SKYSALES.Util.updatePriceDisplay(z);}}else{if(o.val()!="0"){var z=u.find(".upsizeMeal").find(".ucmealpanel-item-selection-form").find(".ucmealpanel-item-sf-count-input");var n=false;if(v!=""){var t=u.find('div[id^="BodyContent_ucTravelerForm"][id$="divSelectedMealsContainer"] > input');for(currMealCount=0;currMealCount<t.length;currMealCount++){var q=t[currMealCount].value;if(a.inArray(String((q)||""),v)>=0&&String((this.id)||"").match(q)==null){n=true;break;}}}if(v.length<=1&&n==true){z.eq(0).val(z.eq(0).val()-1);if(z.eq(0).val()==0){u.find(".upsizeMeal").find(".ucmealpanel-item-selection").find(".ucmealpanel-item-check1").attr("checked",false);}var D=z.attr("onchange");SKYSALES.Util.updatePriceDisplay(z);}else{if(z.eq(0).val()==0){u.find(".upsizeMeal").find(".ucmealpanel-item-selection").find(".ucmealpanel-item-check1").attr("checked",false);}else{u.find(".upsizeMeal").find(".ucmealpanel-item-selection").find(".ucmealpanel-item-check1").attr("checked",true);}var D=z.attr("onchange");SKYSALES.Util.updatePriceDisplay(z);}o.val("0");if(u.find(".upsizeMeal .ucmealpanel-item-selection-form .ucmealpanel-item-sf-count-input").length>0){var C=u.find(".upsizeMeal .ucmealpanel-item-selection-form .ucmealpanel-item-sf-count-input").val()-1;u.find(".upsizeMeal .ucmealpanel-item-selection-form .ucmealpanel-item-sf-count-input").val(C);}SKYSALES.Util.updatePriceDisplay(o);var z=u.find(".upsizeMeal .ucmealpanel-item-selection-form .ucmealpanel-item-sf-count-input");if(z.length!=0){SKYSALES.Util.updatePriceDisplay(z);}}E.children(".ucmealpanel-item-selection-form").hide();}u.ucMealPanel("updateMealPanel");});a(document).on("change",".ucmealpanel-item-check1",function(w){var t=a(this).closest(".ucmealpanel");var x=a(this).parent(".ucmealpanel-item-selection");var p=x.children(".ucmealpanel-item-selection-form").find(".ucmealpanel-item-sf-count-input");var C=(a(this).prop("id").indexOf("LTML"))!=-1?true:false;var v=d.MUPGCount;if(C){a(this).prop("disabled",true);w.preventDefault();return false;}var r=(d.previousSelectedMeals).split("/");var q="";for(var s=0;s<r.length;s++){var o=r[s].split(":");if(this.id.indexOf(o[0])>=0){q=o[1].split(",");break;}}if(a(this).is(":checked")){x.children(".ucmealpanel-item-selection-form").show();if(!(p.val()>1)){p.val("1");}var B=x.find(".ucmealpanel-item-sf-count-input").prop("onchange");var u=x.find(".ucmealpanel-item-sf-count-input");SKYSALES.Util.updatePriceDisplay(p);var z=a("#upSizeMealCheckBoxStatusId").val();var y=t.find(".upsizeMeal").find(".ucmealpanel-item-selection-form").find(".ucmealpanel-item-sf-count-input");if(v>0&&z!=""&&z!=undefined){var n=t.find(".ucmealpanel-divSelectedMealsContainer input");var A=0;for(s=0;s<n.length;s++){if(n.eq(s).val()==d.upSizeCode){A++;}}y.eq(0).val(A);}var B=y.attr("onchange");SKYSALES.Util.updatePriceDisplay(y);}else{if(p.val()!="0"){p.val("0");SKYSALES.Util.updatePriceDisplay(p);}x.children(".ucmealpanel-item-selection-form").hide();}t.ucMealPanel("updateMealPanel");});a(document).on("click",".ucmealpanel .ucmealpanel-item-image img",function(){var n=a(this).closest(".ucmealpanel");var i=a(this).closest(".ucmealpanel-item").find(".ucmealpanel-item-check");if(i.prop("disabled")){return;}else{if(i.is(":checked")){i.prop("checked",false);i.change();}else{i.prop("checked",true);i.change();}}});a(document).on("click",".ucmealpanel .ucmealpanel-item-sf-min-btn",function(){var q=a(this).closest(".ucmealpanel");if(a(this).hasClass("disabled")){return false;}var i=a(this).parent(".ucmealpanel-item-selection-form").children(".ucmealpanel-item-sf-count-input");var r=i.val();if(i.prop("id").indexOf("LTML")!=-1){return false;}if(parseInt(r)==""||parseInt(r)<=0){i.val("0");}else{i.val(parseInt(r)-1);var o=i.prop("onchange");SKYSALES.Util.updatePriceDisplay(i);}if(i.val()=="0"){if(i.attr("upsize")==""){a(this).closest(".ucmealpanel-item-selection").children(".ucmealpanel-item-check1").prop("checked",false).change();}else{a(this).closest(".ucmealpanel-item-selection").children(".ucmealpanel-item-check").prop("checked",false).change();}}if(i.attr("id").indexOf(d.upSizeCode)==-1){if(q.find(".upsizeMeal .ucmealpanel-item-selection-form .ucmealpanel-item-sf-count-input").length>0){var p=q.find(".upsizeMeal").find(".ucmealpanel-item-selection-form").find(".ucmealpanel-item-sf-count-input").eq(0).val();var n=0;q.find(".ucmealpanel-item-check:checked").each(function(t,u){var s=parseInt(a(this).parent(".ucmealpanel-item-selection").find(".ucmealpanel-item-sf-count-input").val());n+=s;});var i=q.find(".upsizeMeal").find(".ucmealpanel-item-selection-form").find(".ucmealpanel-item-sf-count-input");if(parseInt(p)!==0&&n!==parseInt(p)){i.eq(0).val(parseInt(p)-1);var o=i.attr("onchange");SKYSALES.Util.updatePriceDisplay(i);}}}q.ucMealPanel("updateMealPanel");return false;});a(document).on("click",".ucmealpanel .ucmealpanel-item-sf-plus-btn",function(){var p=a(this).parents(".ucmealpanel");if(a(this).hasClass("disabled")){return false;}var i=a(this).parent(".ucmealpanel-item-selection-form").children(".ucmealpanel-item-sf-count-input");var q=i.val();if(i.prop("id").indexOf("LTML")!=-1){return false;}if(parseInt(q)==""){i.val("1");a(this).closest(".ucmealpanel-item-selection").children(".ucmealpanel-item-check1").prop("checked",true);var o=i.prop("onchange");SKYSALES.Util.updatePriceDisplay(i);}else{i.val(parseInt(q)+1);var o=i.prop("onchange");SKYSALES.Util.updatePriceDisplay(i);}if(i.attr("id").indexOf(d.upSizeCode)==-1){if(p.find(".upsizeMeal .ucmealpanel-item-selection-form .ucmealpanel-item-sf-count-input").length>0){var i=p.find(".upsizeMeal").find(".ucmealpanel-item-selection-form").find(".ucmealpanel-item-sf-count-input");p.find(".upsizeMeal").find(".ucmealpanel-item-selection").find(".ucmealpanel-item-check1").attr("checked",true);var n=i.eq(0).val();p.find(".upsizeMeal").find(".ucmealpanel-item-selection-form").find(".ucmealpanel-item-sf-count-input").eq(0).val(parseInt(n)+1);var o=i.attr("onchange");SKYSALES.Util.updatePriceDisplay(i);}}p.ucMealPanel("updateMealPanel");return false;});a(document).on("click",".ucmealpanel .ucmealpanel-footnav-next-btn",function(){if(a(this).hasClass("disabled")){return false;}var p=a(this).parents(".ucmealpanel").find(".ucmealpanel-tab-item:not(.hidden)").length;var o=a(this).parents(".ucmealpanel").find(".ucmealpanel-tab-item:not(.hidden)").index(a(this).parents(".ucmealpanel").find(".ucmealpanel-tab-item.ucmealpanel-selected"));var i=(o+1)%p;var n=(o-1+p)%p;a(this).parents(".ucmealpanel").find(".ucmealpanel-tab-item:not(.hidden)").eq(i).find("a").click();return false;});a(document).on("click",".ucmealpanel .ucmealpanel-footnav-prev-btn",function(){if(a(this).hasClass("disabled")){return false;}var p=a(this).parents(".ucmealpanel").find(".ucmealpanel-tab-item:not(.hidden)").length;var o=a(this).parents(".ucmealpanel").find(".ucmealpanel-tab-item:not(.hidden)").index(a(this).parents(".ucmealpanel").find(".ucmealpanel-tab-item.ucmealpanel-selected"));var i=(o+1)%p;var n=(o-1+p)%p;a(this).parents(".ucmealpanel").find(".ucmealpanel-tab-item:not(.hidden)").eq(n).find("a").click();return false;});break;case"getSelectedItems":var l=[];f.find(".ucmealpanel-item-check:checked").each(function(i,n){var n={};ucmealItem=a(this).parents(".ucmealpanel-item");n.ssrcode=ucmealItem.eq(0).attr("data-ssr-id");n.description=ucmealItem.eq(0).find(".ucmealpanel-item-name").text();n.currency=ucmealItem.eq(0).attr("data-currency");n.price=parseFloat(ucmealItem.attr("data-price").replace(",","."));n.originalPrice=parseFloat(ucmealItem.attr("data-price").replace(",","."));n.quantity=parseInt(a(this).parent(".ucmealpanel-item-selection").find(".ucmealpanel-item-sf-count-input").val());l.push(n);});if(d.freeMealPolicy>0){l.sort(function(n,i){return i.price-n.price;});}else{if(d.freeMealPolicy<0){l.sort(function(n,i){return n.price-i.price;});}}if(d.freeMealPolicy!=0&&l.length>0){var e=0;for(var g=0;g<d.freeMealCount;e++){if(l[e].quantity>d.freeMealCount-g){l.push({ssrcode:l[e].ssrcode,description:l[e].description,currency:l[e].currency,price:l[e].price,originalPrice:l[e].originalPrice,quantity:l[e].quantity-(d.freeMealCount-g)});l[e].quantity=d.freeMealCount-g;l[e].price=0;g+=l[e].quantity;}else{l[e].price=0;g+=l[e].quantity;}}}return l;break;}return this.each(function(){var v=a(this);var z=v.attr("data-ucmp-id");if(z){var C=ucMealPanel[z];}else{z=v.prop("id")+Math.floor(Math.random()*10000).toString();var C=a.extend({},h);ucMealPanel[z]=C;v.attr("data-ucmp-id",z);}switch(m){default:k=m;case"init":a.extend(C,k);v.ucMealPanel("staticInit");v.find(".ucmealpanel-tab").find(".ucmealpanel-tab-item").eq(C.selectedTab).find("a").click();C.currency=v.find(".ucmealpanel-item").eq(0).attr("data-currency");if(C.disabled){v.ucMealPanel("disableControl",true);}v.ucMealPanel("updateFromHiddenFields");v.find(".ucmealpanel-item-container").scroll(function(){var K=a(this);var i=K.scrollLeft();var J=K.children(".ucmealpanel-item").length;var L=K.children(".ucmealpanel-item").eq(0).outerWidth();var I=K.width();var H=K.closest(".ucmealpanel-content");H.find(".ucmealpanel-content-slider-left").addClass("disabled");H.find(".ucmealpanel-content-slider-right").addClass("disabled");if(a("body").css("direction").toLowerCase()=="rtl"&&a.browser.mozilla&&i==0&&J>4){a(this).closest(".ucmealpanel-content").find(".ucmealpanel-content-slider-left").removeClass("disabled");}else{if(i>0&&J>4){H.find(".ucmealpanel-content-slider-left").removeClass("disabled");}if(i<J*L-I&&J>4){H.find(".ucmealpanel-content-slider-right").removeClass("disabled");}}});return;break;case"updateMealPanel":var s=0,r=0,p=0,u=[],F=[],q=C.currency,B=C.commaReplacement,G=v.find(".ucmealpanel-headerimage-container").find(".ucmealpanel-headerimage-box"),t=v.find(".upsizeMeal").find(".ucmealpanel-headerimage-box");v.find(".ucmealpanel-item-check:checked").each(function(L,O){var N=a(this).parents(".ucmealpanel-item"),M=parseInt(a(this).parent(".ucmealpanel-item-selection").find(".ucmealpanel-item-sf-count-input").val());var H=a(this).parents(".ucmealpanel-item").attr("data-ssr-id");var P=false;for(var J=0;J<B.length;J++){if(q==B[J]){P=true;break;}}if(P==true){var K=parseFloat(N.attr("data-price").replace(",",""));}else{var K=parseFloat(N.attr("data-price").replace(",","."));}for(I=s;I<s+M;I++){G.eq(I).find("img").prop("src",N.find(".ucmealpanel-item-image img").prop("src")).show().prop("title",N.find(".ucmealpanel-item-name").text());v.find(".ucmealpanel-divSelectedMealsContainer input").eq(I).val(N.attr("data-ssr-id"));if(I==0){v.parent().parent().find(".complimentaryMealVal").val(N.attr("data-ssr-id"));v.parent().parent().find(".complimentaryMealVal").trigger("change");}}for(var I=0;I<M;I++){u.push(K);F.push(H);}p+=M*K;s+=M;});v.find(".upsizeMeal").find(".ucmealpanel-item-check1:checked").each(function(M,U){var Q=a(this),P=Q.parents(".upsizeMeal"),S=parseInt(P.find(".ucmealpanel-item-selection").find(".ucmealpanel-item-sf-count-input").val()),N=parseInt(C.MUPGCount),R=C.currency,O=C.commaReplacement,H=Q.parents(".upsizeMeal").attr("data-ssr-id");var V=false;for(var L=0;L<O.length;L++){if(R==O[L]){V=true;break;}}if(V==true){var K=parseFloat(P.attr("data-price").replace(",",""));}else{var K=parseFloat(P.attr("data-price").replace(",","."));}for(J=r;J<r+S;J++){t.eq(J).find("img").prop("src",P.find(".ucmealpanel-item-image img").prop("src")).show().prop("title",P.find(".ucmealpanel-item-name").text());}var I=0;var T=v.find(".ucmealpanel-divSelectedMealsContainer input");for(var J=0;J<T.length;J++){if(T.eq(J).val()==C.upSizeCode){I++;}}if(N>0&&I<N){for(j=0;j<N;j++){T.eq((j+2)).val(P.attr("data-ssr-id"));}}for(var J=0;J<S;J++){}p+=S*K;r+=S;});for(A=s;A<C.max;A++){G.eq(A).find("img").hide().prop("title","");v.find(".ucmealpanel-divSelectedMealsContainer").find("input").eq(A).val("");if(A==0){v.parent().parent().find(".complimentaryMealVal").val("").trigger("change");}}for(A=r;A<C.max;A++){t.eq(A).find("img").hide().prop("title","");v.find(".ucmealpanel-divSelectedMealsContainer").find("input").eq((A+2)).val("");}if(s>=C.max){v.find(".ucmealpanel-item:has(.ucmealpanel-item-check:not(:checked))").addClass("disabled");v.find(".ucmealpanel-item-check:not(:checked)").prop("disabled",true);v.find(".ucmealpanel-item-selection:has(.ucmealpanel-item-check:checked)").find(".ucmealpanel-item-sf-plus-btn").addClass("disabled");}else{v.find(".ucmealpanel-item:has(.ucmealpanel-item-check:not(:checked))").removeClass("disabled");v.find(".ucmealpanel-item-check:not(:checked)").prop("disabled",false);v.find(".ucmealpanel-item-selection:has(.ucmealpanel-item-check:checked)").find(".ucmealpanel-item-sf-plus-btn").removeClass("disabled");}if(r>=C.max){v.find(".ucmealpanel-item:has(.ucmealpanel-item-check1:not(:checked))").addClass("disabled");v.find(".ucmealpanel-item-check1:not(:checked)").prop("disabled",true);v.find(".ucmealpanel-item-selection:has(.ucmealpanel-item-check1:checked)").find(".ucmealpanel-item-sf-plus-btn").addClass("disabled");}else{v.find(".ucmealpanel-item:has(.ucmealpanel-item-check1:not(:checked))").removeClass("disabled");v.find(".ucmealpanel-item-check1:not(:checked)").prop("disabled",false);v.find(".ucmealpanel-item-selection:has(.ucmealpanel-item-check1:checked)").find(".ucmealpanel-item-sf-plus-btn").removeClass("disabled");}var n=v.find(".upsizeMeal");if(s==1){n.removeClass("hidden");v.find("span[class$='upsizeMealHeader']").addClass("hidden");n.find(".ucmealpanel-headerimage-box#ssrUpsize2").addClass("hidden");n.find(".ucmealpanel-item-selection-form").eq(0).hide();if(n.find(".ucmealpanel-item-sf-count-input").eq(0).val()>s){n.find(".ucmealpanel-item-sf-count-input").eq(0).val(1);var y=n.find(".ucmealpanel-item-sf-count-input");var D=y.prop("onchange");SKYSALES.Util.updatePriceDisplay(y);}}else{if(s==2){n.removeClass("hidden");v.find("span[class$='upsizeMealHeader']").addClass("hidden");n.find(".ucmealpanel-headerimage-box#ssrUpsize2").removeClass("hidden");n.find(".ucmealpanel-item-selection-form").eq(0).show();}else{n.addClass("hidden");v.find("span[class$='upsizeMealHeader']").addClass("hidden");n.find(".ucmealpanel-item-selection-form").find(".ucmealpanel-item-sf-count-input").eq(0).val(0);if(n.find(".ucmealpanel-item-check1").prop("checked")=="checked"){n.find(".ucmealpanel-item-check1").prop("checked",false);var y=v.find(".upsizeMeal").find(".ucmealpanel-item-selection-form").find(".ucmealpanel-item-sf-count-input");var D=y.prop("onchange");SKYSALES.Util.updatePriceDisplay(y);}}}var w=p;if(C.freeMealPolicy>0){u.sort(function(H,i){return i-H;});}else{if(C.freeMealPolicy<0){u.sort(function(H,i){return H-i;});}}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(H){var i=this.length>>>0;var I=Number(arguments[1])||0;I=(I<0)?Math.ceil(I):Math.floor(I);if(I<0){I+=i;}for(;I<i;I++){if(I in this&&this[I]===H){return I;}}return -1;};}if(F.length>0&&!(F.indexOf("LTML")>-1)){if(C.freeMealPolicy!=0&&s>0){for(var A=0;A<C.freeMealCount;A++){p-=u[A];}}}C.count=s;C.totalPrice=p.toString().indexOf(".")!=-1?p.toFixed(2):p;C.totalOriginalPrice=w.toString().indexOf(".")!=-1?w.toFixed(2):w;if(C.onchange){C.onchange(v,{max:C.max,count:C.count,totalPrice:C.totalPrice,totalOriginalPrice:C.totalOriginalPrice,currency:C.currency});}return;break;case"updateFromHiddenFields":var x={};v.find(".ucmealpanel-divSelectedMealsContainer").find("input").each(function(){var i=a(this).val();if(x[i]==undefined||x[i]==null){x[i]=1;}else{x[i]++;}});a.each(x,function(I,H){if(I==""){return;}var i=v.find(".ucmealpanel-item[data-ssr-id="+I+"]");if(i.length==0){return;}i.eq(0).removeClass("disabled");i.find(".ucmealpanel-item-check").eq(0).prop("disabled",false).prop("checked",true);if(!(x.LTML>0)){i.find(".ucmealpanel-item-selection-form").eq(0).show().find(".ucmealpanel-item-sf-count-input").eq(0).val(H);}});v.ucMealPanel("updateMealPanel");break;case"disableControl":if(k==undefined||k==null){break;}C.disabled=k;var E=v.children(".ucmealpanel-wrapper").eq(0);if(k){E.children(".ucmealpanel-header-container").eq(0).hide();E.children(".ucmealpanel-tab").eq(0).hide();E.children(".ucmealpanel-content").eq(0).hide();E.children(".ucmealpanel-footer").children(".ucmealpanel-footnav").eq(0).hide();var o=E.children(".ucmealpanel-footer").children(".ucmealpanel-footnote").eq(0);o.children(".ucmealpanel-footnote-disabled").show();o.children(".ucmealpanel-footnote-enabled").hide();}else{E.children(".ucmealpanel-header-container").eq(0).show();E.children(".ucmealpanel-tab").eq(0).show();E.children(".ucmealpanel-content").eq(0).show();E.children(".ucmealpanel-footer").children(".ucmealpanel-footnav").eq(0).show();var o=E.children(".ucmealpanel-footer").children(".ucmealpanel-footnote").eq(0);o.children(".ucmealpanel-footnote-disabled").hide();o.children(".ucmealpanel-footnote-enabled").show();}break;case"onchange":if(C.onchange){C.onchange(v,{max:C.max,count:C.count,totalPrice:C.totalPrice,totalOriginalPrice:C.totalOriginalPrice,currency:C.currency});}return;}});};a.fn.ucComfortKitPanel=function(m,k,b){var h={count:0,max:10,freeMealCount:0,freeMealPolicy:0,selectedTab:0,disabled:false,commaReplacement:"",selectedItems:{},onchange:null};var f=a(this).eq(0);if(a(this).attr("data-ucckp-id")){var c=f.attr("data-ucckp-id");var d=ucComfortKitPanel[c];}switch(m){case"count":return d.count;break;case"freeMealCount":if(k!=undefined&&k!=null){d.freeMealCount=k;}else{return d.freeMealCount;}break;case"freeMealPolicy":if(k!=undefined&&k!=null){d.freeMealPolicy=k;}else{return d.freeMealPolicy;}break;case"disabled":if(k==undefined||k==null){return d.disabled;}f.ucComfortKitPanel("disableControl",k);break;case"commaReplacement":if(k!=undefined&&k!=null){d.commaReplacement=k;}else{return d.commaReplacement;}break;case"staticInit":if(ucComfortKitPanel.staticInit){return;}ucComfortKitPanel.staticInit=true;a(document).on("click",".uccomfortkitpanel .uccomfortkitpanel-tab-item a",function(){var t=a(this);if(t.hasClass("disabled")){return false;}var n=t.parent(".uccomfortkitpanel-tab-item"),q=t.closest(".uccomfortkitpanel"),u=n.attr("data-for");t.closest("ul").children(".uccomfortkitpanel-tab-item").removeClass("uccomfortkitpanel-selected");n.addClass("uccomfortkitpanel-selected");q.find(".uccomfortkitpanel-item-container").hide();a("#"+u).fadeIn();var o=q.find(".uccomfortkitpanel-tab-item").not(".hidden").length,s=q.find(".uccomfortkitpanel-tab-item").not(".hidden").index(q.find(".uccomfortkitpanel-tab-item.uccomfortkitpanel-selected")),p=(s+1)%o,i=(s-1+o)%o,r=a("#"+u).find("li.uccomfortkitpanel-item").length;q.find(".uccomfortkitpanel-content-slider-left").addClass("disabled");a("#"+u).scrollLeft(0);if(r<=4){q.find(".uccomfortkitpanel-content-slider-right").addClass("disabled");}else{q.find(".uccomfortkitpanel-content-slider-right").removeClass("disabled");}q.find(".uccomfortkitpanel-footnav-next-btn").html(t.closest("ul").find(".uccomfortkitpanel-tab-item:not(.hidden)").eq(p).find("a").html()+" &gt;");q.find(".uccomfortkitpanel-footnav-prev-btn").html("&lt; "+t.closest("ul").find(".uccomfortkitpanel-tab-item:not(.hidden)").eq(i).find("a").html());return false;});a(document).on("click",".uccomfortkitpanel-content-slider-left",function(){if(a(this).hasClass("disabled")){return false;}var i=a(this).closest(".uccomfortkitpanel-content").children(".uccomfortkitpanel-item-container").not(":hidden"),o=i.scrollLeft(),n=i.width();if(o-n<=0){i.animate({scrollLeft:0},500);}else{i.animate({scrollLeft:o-n},500);}return false;});a(document).on("click",".uccomfortkitpanel-content-slider-right",function(){if(a(this).hasClass("disabled")){return false;}var i=a(this).closest(".uccomfortkitpanel-content").children(".uccomfortkitpanel-item-container").not(":hidden"),p=i.scrollLeft(),o=i.children(".uccomfortkitpanel-item").length,n=i.width(),q=i.children(".uccomfortkitpanel-item").first().outerWidth();if(p+n>=o*q-n){i.not(":animated").animate({scrollLeft:o*q-n},500);}else{i.not(":animated").animate({scrollLeft:p+n},500);}return false;});a(document).on("change",".uccomfortkitpanel-item-check",function(s){var r=a(this).closest(".uccomfortkitpanel"),q=a(this).parent(".uccomfortkitpanel-item-selection"),n=q.children(".uccomfortkitpanel-item-selection-form").find(".uccomfortkitpanel-item-sf-count-input"),p=(a(this).prop("id").indexOf("LTML"))!=-1?true:false;if(p){a(this).prop("disabled",true);s.preventDefault();return false;}if(a(this).is(":checked")){n.val("1");var o=q.find(".uccomfortkitpanel-item-sf-count-input");var i=o.prop("onchange");SKYSALES.Util.updatePriceDisplay(n);}else{if(n.val()!="0"){n.val("0");var i=n.prop("onchange");var o=q.find(".uccomfortkitpanel-item-sf-count-input");SKYSALES.Util.updatePriceDisplay(n);}q.children(".uccomfortkitpanel-item-selection-form").hide();}r.ucComfortKitPanel("updatecomfortKitPanel");});a(document).on("click",".uccomfortkitpanel .uccomfortkitpanel-item-image img",function(){var n=a(this).closest(".uccomfortkitpanel");var i=a(this).closest(".uccomfortkitpanel-item").find(".uccomfortkitpanel-item-check");if(i.prop("disabled")=="disabled"){return;}else{if(i.is(":checked")){i.prop("checked",false);i.change();}else{i.prop("checked",true);i.change();}}});a(document).on("click",".uccomfortkitpanel .uccomfortkitpanel-item-sf-min-btn",function(){var n=a(this).closest(".uccomfortkitpanel");if(a(this).hasClass("disabled")){return false;}var i=a(this).parent(".uccomfortkitpanel-item-selection-form").find(".uccomfortkitpanel-item-sf-count-input");var o=i.val();if(i.prop("id").indexOf("LTML")!=-1){return false;}if(parseInt(o)==""||parseInt(o)<=0){i.val("0");}else{i.val(parseInt(o)-1);SKYSALES.Util.updatePriceDisplay(i);}if(i.val()=="0"){a(this).closest(".uccomfortkitpanel-item-selection").find(".uccomfortkitpanel-item-check").attr("checked",false).change();}n.ucComfortKitPanel("updatecomfortKitPanel");return false;});a(document).on("click",".uccomfortkitpanel .uccomfortkitpanel-item-sf-plus-btn",function(){var n=a(this).parents(".uccomfortkitpanel");if(a(this).hasClass("disabled")){return false;}var i=a(this).parent(".uccomfortkitpanel-item-selection-form").find(".uccomfortkitpanel-item-sf-count-input");var o=i.val();if(i.prop("id").indexOf("LTML")!=-1){return false;}if(parseInt(o)==""){i.val("1");SKYSALES.Util.updatePriceDisplay(i);}else{i.val(parseInt(o)+1);SKYSALES.Util.updatePriceDisplay(i);}n.ucComfortKitPanel("updatecomfortKitPanel");return false;});a(document).on("click",".uccomfortkitpanel .uccomfortkitpanel-footnav-next-btn",function(){if(a(this).hasClass("disabled")){return false;}var q=a(this).parents(".uccomfortkitpanel");var p=q.find(".uccomfortkitpanel-tab-item:not(.hidden)").length;var o=q.find(".uccomfortkitpanel-tab-item:not(.hidden)").index(q.find(".uccomfortkitpanel-tab-item.uccomfortkitpanel-selected"));var i=(o+1)%p;var n=(o-1+p)%p;q.find(".uccomfortkitpanel-tab-item:not(.hidden)").eq(i).find("a").click();return false;});a(document).on("click",".uccomfortkitpanel .uccomfortkitpanel-footnav-prev-btn",function(){if(a(this).hasClass("disabled")){return false;}var q=a(this).parents(".uccomfortkitpanel");var p=q.find(".uccomfortkitpanel-tab-item:not(.hidden)").length;var o=q.find(".uccomfortkitpanel-tab-item:not(.hidden)").index(q.find(".uccomfortkitpanel-tab-item.uccomfortkitpanel-selected"));var i=(o+1)%p;var n=(o-1+p)%p;q.find(".uccomfortkitpanel-tab-item:not(.hidden)").eq(n).find("a").click();return false;});break;case"getSelectedItems":var l=[];f.find(".uccomfortkitpanel-item-check:checked").each(function(i,o){var o={};var n=a(this).parents(".uccomfortkitpanel-item");o.ssrcode=n.eq(0).attr("data-ssr-id");o.description=n.eq(0).find(".uccomfortkitpanel-item-name").text();o.currency=n.eq(0).attr("data-currency");o.price=parseFloat(n.attr("data-price").replace(",","."));o.originalPrice=parseFloat(n.attr("data-price").replace(",","."));o.quantity=parseInt(a(this).parent(".uccomfortkitpanel-item-selection").find(".uccomfortkitpanel-item-sf-count-input").val());l.push(o);});if(d.freeMealPolicy>0){l.sort(function(n,i){return i.price-n.price;});}else{if(d.freeMealPolicy<0){l.sort(function(n,i){return n.price-i.price;});}}if(d.freeMealPolicy!=0&&l.length>0){var e=0;for(var g=0;g<d.freeMealCount;e++){if(l[e].quantity>d.freeMealCount-g){l.push({ssrcode:l[e].ssrcode,description:l[e].description,currency:l[e].currency,price:l[e].price,originalPrice:l[e].originalPrice,quantity:l[e].quantity-(d.freeMealCount-g)});l[e].quantity=d.freeMealCount-g;l[e].price=0;g+=l[e].quantity;}else{l[e].price=0;g+=l[e].quantity;}}}return l;break;}return this.each(function(){var u=a(this);var o=u.attr("data-ucckp-id");if(o){var r=ucComfortKitPanel[o];}else{var o=u.prop("id")+Math.floor(Math.random()*10000).toString();var r=a.extend({},h);ucComfortKitPanel[o]=r;u.attr("data-ucckp-id",o);}switch(m){default:k=m;case"init":a.extend(r,k);u.ucComfortKitPanel("staticInit");u.find(".uccomfortkitpanel-tab").find(".uccomfortkitpanel-tab-item").eq(r.selectedTab).find("a").click();r.currency=u.find(".uccomfortkitpanel-item").eq(0).attr("data-currency");if(r.disabled){u.ucComfortKitPanel("disableControl",true);}u.ucComfortKitPanel("updateFromHiddenFields");u.find(".uccomfortkitpanel-item-container").scroll(function(){var E=a(this);var i=E.scrollLeft();var D=E.children(".uccomfortkitpanel-item").length;var F=E.eq(0).outerWidth();var C=E.width();var B=E.closest(".uccomfortkitpanel-content");B.find(".uccomfortkitpanel-content-slider-left").addClass("disabled");B.find(".uccomfortkitpanel-content-slider-right").addClass("disabled");if(i>0&&D>4){B.find(".uccomfortkitpanel-content-slider-left").removeClass("disabled");}if(i<D*F-C&&D>4){B.find(".uccomfortkitpanel-content-slider-right").removeClass("disabled");}});return;break;case"updatecomfortKitPanel":var x=0;var A=0;var v=[];var z=r.currency;var y=r.commaReplacement;var s=u.find(".uccomfortkitpanel-headerimage-container").find(".uccomfortkitpanel-headerimage-box");u.find(".uccomfortkitpanel-item-check:checked").each(function(E,I){var H=a(this);var G=H.parents(".uccomfortkitpanel-item");var F=parseInt(H.parent(".uccomfortkitpanel-item-selection").find(".uccomfortkitpanel-item-sf-count-input").val());var J=false;for(var C=0;C<y.length;C++){if(z==y[C]){J=true;break;}}if(J==true){var D=parseFloat(G.attr("data-price").replace(",",""));}else{var D=parseFloat(G.attr("data-price").replace(",","."));}for(B=x;B<x+F;B++){s.eq(B).find("img").prop("src",G.find(".uccomfortkitpanel-item-image").find("img").prop("src")).show().prop("title",G.find(".uccomfortkitpanel-item-name").text());u.find(".uccomfortkitpanel-divSelectedMealsContainer").find("input").eq(B).val(G.attr("data-ssr-id"));}for(var B=0;B<F;B++){v.push(D);}A+=F*D;x+=F;});for(t=x;t<r.max;t++){s.eq(t).find("img").hide().prop("title","");u.find(".uccomfortkitpanel-divSelectedMealsContainer").find("input").eq(t).val("");}if(x>=r.max){u.find(".uccomfortkitpanel-item:has(.uccomfortkitpanel-item-check:not(:checked))").addClass("disabled");u.find(".uccomfortkitpanel-item-check:not(:checked)").prop("disabled",true);u.find(".uccomfortkitpanel-item-selection:has(.uccomfortkitpanel-item-check:checked)").find(".uccomfortkitpanel-item-sf-plus-btn").addClass("disabled");}else{u.find(".uccomfortkitpanel-item:has(.uccomfortkitpanel-item-check:not(:checked))").removeClass("disabled");u.find(".uccomfortkitpanel-item-check:not(:checked)").prop("disabled",false);u.find(".uccomfortkitpanel-item-selection:has(.uccomfortkitpanel-item-check:checked)").find(".uccomfortkitpanel-item-sf-plus-btn").removeClass("disabled");}var q=A;if(r.freeMealPolicy>0){v.sort(function(B,i){return i-B;});}else{if(r.freeMealPolicy<0){v.sort(function(B,i){return B-i;});}}if(r.freeMealPolicy!=0&&x>0){for(var t=0;t<r.freeMealCount;t++){A-=v[t];}}r.count=x;r.totalPrice=A.toString().indexOf(".")!=-1?A.toFixed(2):A;r.totalOriginalPrice=q.toString().indexOf(".")!=-1?q.toFixed(2):q;if(r.onchange){r.onchange(u,{max:r.max,count:r.count,totalPrice:r.totalPrice,totalOriginalPrice:r.totalOriginalPrice,currency:r.currency});}return;break;case"updateFromHiddenFields":var n={};u.find(".uccomfortkitpanel-divSelectedMealsContainer").find("input").each(function(){var i=a(this).val();if(n[i]==undefined||n[i]==null){n[i]=1;}else{n[i]++;}});a.each(n,function(B,i){if(B==""){return;}var C=u.find(".uccomfortkitpanel-item[data-ssr-id="+B+"]");if(C.length==0){return;}C.eq(0).removeClass("disabled");C.find(".uccomfortkitpanel-item-check").eq(0).prop("disabled",false).prop("checked",true);C.find(".uccomfortkitpanel-item-selection-form").eq(0).show().find(".uccomfortkitpanel-item-sf-count-input").eq(0).val(i);});u.ucComfortKitPanel("updatecomfortKitPanel");break;case"disableControl":if(k==undefined||k==null){break;}r.disabled=k;var w=u.children(".uccomfortkitpanel-wrapper").eq(0);if(k){w.children(".uccomfortkitpanel-header-container").eq(0).hide();w.children(".uccomfortkitpanel-tab").eq(0).hide();w.children(".uccomfortkitpanel-content").eq(0).hide();w.children(".uccomfortkitpanel-footer").children(".uccomfortkitpanel-footnav").eq(0).hide();var p=w.children(".uccomfortkitpanel-footer").children(".uccomfortkitpanel-footnote").eq(0);p.children(".uccomfortkitpanel-footnote-disabled").show();p.children(".uccomfortkitpanel-footnote-enabled").hide();}else{w.children(".uccomfortkitpanel-header-container").eq(0).show();w.children(".uccomfortkitpanel-tab").eq(0).show();w.children(".uccomfortkitpanel-content").eq(0).show();w.children(".uccomfortkitpanel-footer").children(".uccomfortkitpanel-footnav").eq(0).show();var p=w.children(".uccomfortkitpanel-footer").children(".uccomfortkitpanel-footnote").eq(0);p.children(".uccomfortkitpanel-footnote-disabled").hide();p.children(".uccomfortkitpanel-footnote-enabled").show();}break;case"onchange":if(r.onchange){r.onchange(u,{max:r.max,count:r.count,totalPrice:r.totalPrice,totalOriginalPrice:r.totalOriginalPrice,currency:r.currency});}return;}});};a.fn.ucDutyFreePanel=function(m,k,b){var h={count:0,max:10,freeMealCount:0,freeMealPolicy:0,selectedTab:0,disabled:false,commaReplacement:"",selectedItems:{},onchange:null};var f=a(this).eq(0);if(a(this).attr("data-ucckp-id")){var c=f.attr("data-ucckp-id");var d=ucDutyFreePanel[c];}switch(m){case"count":return d.count;break;case"freeMealCount":if(k!=undefined&&k!=null){d.freeMealCount=k;}else{return d.freeMealCount;}break;case"freeMealPolicy":if(k!=undefined&&k!=null){d.freeMealPolicy=k;}else{return d.freeMealPolicy;}break;case"disabled":if(k==undefined||k==null){return d.disabled;}f.ucDutyFreePanel("disableControl",k);break;case"commaReplacement":if(k!=undefined&&k!=null){d.commaReplacement=k;}else{return d.commaReplacement;}break;case"staticInit":if(ucDutyFreePanel.staticInit){return;}ucDutyFreePanel.staticInit=true;a(document).on("click",".ucdutyfreepanel .ucdutyfreepanel-tab-item a",function(){var t=a(this);if(t.hasClass("disabled")){return false;}var n=t.parent(".ucdutyfreepanel-tab-item"),q=t.closest(".ucdutyfreepanel"),u=n.attr("data-for");t.closest("ul").children(".ucdutyfreepanel-tab-item").removeClass("ucdutyfreepanel-selected");n.addClass("ucdutyfreepanel-selected");q.find(".ucdutyfreepanel-item-container").hide();a("#"+u).fadeIn();var o=q.find(".ucdutyfreepanel-tab-item").not(".hidden").length,s=q.find(".ucdutyfreepanel-tab-item").not(".hidden").index(q.find(".ucdutyfreepanel-tab-item.ucdutyfreepanel-selected")),p=(s+1)%o,i=(s-1+o)%o,r=a("#"+u).find("li.ucdutyfreepanel-item").length;q.find(".ucdutyfreepanel-content-slider-left").addClass("disabled");a("#"+u).scrollLeft(0);if(r<=4){q.find(".ucdutyfreepanel-content-slider-right").addClass("disabled");}else{q.find(".ucdutyfreepanel-content-slider-right").removeClass("disabled");}q.find(".ucdutyfreepanel-footnav-next-btn").html(t.closest("ul").find(".ucdutyfreepanel-tab-item:not(.hidden)").eq(p).find("a").html()+" &gt;");q.find(".ucdutyfreepanel-footnav-prev-btn").html("&lt; "+t.closest("ul").find(".ucdutyfreepanel-tab-item:not(.hidden)").eq(i).find("a").html());return false;});a(document).on("click",".ucdutyfreepanel-content-slider-left",function(){if(a(this).hasClass("disabled")){return false;}var i=a(this).closest(".ucdutyfreepanel-content").children(".ucdutyfreepanel-item-container").not(":hidden"),o=i.scrollLeft(),n=i.width();if(o-n<=0){i.animate({scrollLeft:0},500);}else{i.animate({scrollLeft:o-n},500);}return false;});a(document).on("click",".ucdutyfreepanel-content-slider-right",function(){if(a(this).hasClass("disabled")){return false;}var i=a(this).closest(".ucdutyfreepanel-content").children(".ucdutyfreepanel-item-container").not(":hidden"),p=i.scrollLeft(),o=i.children(".ucdutyfreepanel-item").length,n=i.width(),q=i.children(".ucdutyfreepanel-item").first().outerWidth();if(p+n>=o*q-n){i.not(":animated").animate({scrollLeft:o*q-n},500);}else{i.not(":animated").animate({scrollLeft:p+n},500);}return false;});a(document).on("change",".ucdutyfreepanel-item-check",function(s){var r=a(this).closest(".ucdutyfreepanel"),q=a(this).parent(".ucdutyfreepanel-item-selection"),n=q.children(".ucdutyfreepanel-item-selection-form").find(".ucdutyfreepanel-item-sf-count-input"),p=(a(this).prop("id").indexOf("LTML"))!=-1?true:false;if(p){a(this).prop("disabled",true);s.preventDefault();return false;}if(a(this).is(":checked")){n.val("1");var o=q.find(".ucdutyfreepanel-item-sf-count-input");var i=o.prop("onchange");SKYSALES.Util.updatePriceDisplay(n);}else{if(n.val()!="0"){n.val("0");var i=n.prop("onchange");var o=q.find(".ucdutyfreepanel-item-sf-count-input");SKYSALES.Util.updatePriceDisplay(n);}q.children(".ucdutyfreepanel-item-selection-form").hide();}r.ucDutyFreePanel("updatedutyFreePanel");});a(document).on("click",".ucdutyfreepanel .ucdutyfreepanel-item-image img",function(){var n=a(this).closest(".ucdutyfreepanel");var i=a(this).closest(".ucdutyfreepanel-item").find(".ucdutyfreepanel-item-check");if(i.prop("disabled")){return;}else{if(i.is(":checked")){i.prop("checked",false);i.change();}else{i.prop("checked",true);i.change();}}});a(document).on("click",".ucdutyfreepanel .ucdutyfreepanel-item-sf-min-btn",function(){var n=a(this).closest(".ucdutyfreepanel");if(a(this).hasClass("disabled")){return false;}var i=a(this).parent(".ucdutyfreepanel-item-selection-form").find(".ucdutyfreepanel-item-sf-count-input");var o=i.val();if(i.prop("id").indexOf("LTML")!=-1){return false;}if(parseInt(o)==""||parseInt(o)<=0){i.val("0");}else{i.val(parseInt(o)-1);SKYSALES.Util.updatePriceDisplay(i);}if(i.val()=="0"){a(this).closest(".ucdutyfreepanel-item-selection").find(".ucdutyfreepanel-item-check").attr("checked",false).change();}n.ucDutyFreePanel("updatedutyFreePanel");return false;});a(document).on("click",".ucdutyfreepanel .ucdutyfreepanel-item-sf-plus-btn",function(){var n=a(this).parents(".ucdutyfreepanel");if(a(this).hasClass("disabled")){return false;}var i=a(this).parent(".ucdutyfreepanel-item-selection-form").find(".ucdutyfreepanel-item-sf-count-input");var o=i.val();if(i.prop("id").indexOf("LTML")!=-1){return false;}if(parseInt(o)==""){i.val("1");SKYSALES.Util.updatePriceDisplay(i);}else{i.val(parseInt(o)+1);SKYSALES.Util.updatePriceDisplay(i);}n.ucDutyFreePanel("updatedutyFreePanel");return false;});a(document).on("click",".ucdutyfreepanel .ucdutyfreepanel-footnav-next-btn",function(){if(a(this).hasClass("disabled")){return false;}var i=a(this).parents(".ucdutyfreepanel");var q=i.find(".ucdutyfreepanel-tab-item:not(.hidden)").length;var p=i.find(".ucdutyfreepanel-tab-item:not(.hidden)").index(i.find(".ucdutyfreepanel-tab-item.ucdutyfreepanel-selected"));var n=(p+1)%q;var o=(p-1+q)%q;i.find(".ucdutyfreepanel-tab-item:not(.hidden)").eq(n).find("a").click();return false;});a(document).on("click",".ucdutyfreepanel .ucdutyfreepanel-footnav-prev-btn",function(){if(a(this).hasClass("disabled")){return false;}var i=a(this).parents(".ucdutyfreepanel");var q=i.find(".ucdutyfreepanel-tab-item:not(.hidden)").length;var p=i.find(".ucdutyfreepanel-tab-item:not(.hidden)").index(i.find(".ucdutyfreepanel-tab-item.ucdutyfreepanel-selected"));var n=(p+1)%q;var o=(p-1+q)%q;i.find(".ucdutyfreepanel-tab-item:not(.hidden)").eq(o).find("a").click();return false;});break;case"getSelectedItems":var l=[];f.find(".ucdutyfreepanel-item-check:checked").each(function(i,o){var o={};var n=a(this).parents(".ucdutyfreepanel-item");o.ssrcode=n.eq(0).attr("data-ssr-id");o.description=n.eq(0).find(".ucdutyfreepanel-item-name").text();o.currency=n.eq(0).attr("data-currency");o.price=parseFloat(n.attr("data-price").replace(",","."));o.originalPrice=parseFloat(n.attr("data-price").replace(",","."));o.quantity=parseInt(a(this).parent(".ucdutyfreepanel-item-selection").find(".ucdutyfreepanel-item-sf-count-input").val());l.push(o);});if(d.freeMealPolicy>0){l.sort(function(n,i){return i.price-n.price;});}else{if(d.freeMealPolicy<0){l.sort(function(n,i){return n.price-i.price;});}}if(d.freeMealPolicy!=0&&l.length>0){var e=0;for(var g=0;g<d.freeMealCount;e++){if(l[e].quantity>d.freeMealCount-g){l.push({ssrcode:l[e].ssrcode,description:l[e].description,currency:l[e].currency,price:l[e].price,originalPrice:l[e].originalPrice,quantity:l[e].quantity-(d.freeMealCount-g)});l[e].quantity=d.freeMealCount-g;l[e].price=0;g+=l[e].quantity;}else{l[e].price=0;g+=l[e].quantity;}}}return l;break;}return this.each(function(){var u=a(this);var o=u.attr("data-ucckp-id");if(o){var r=ucDutyFreePanel[o];}else{var o=u.prop("id")+Math.floor(Math.random()*10000).toString();var r=a.extend({},h);ucDutyFreePanel[o]=r;u.attr("data-ucckp-id",o);}switch(m){default:k=m;case"init":a.extend(r,k);u.ucDutyFreePanel("staticInit");u.find(".ucdutyfreepanel-tab").find(".ucdutyfreepanel-tab-item").eq(r.selectedTab).find("a").click();r.currency=u.find(".ucdutyfreepanel-item").eq(0).attr("data-currency");if(r.disabled){u.ucDutyFreePanel("disableControl",true);}u.ucDutyFreePanel("updateFromHiddenFields");u.find(".ucdutyfreepanel-item-container").scroll(function(){var E=a(this);var i=E.scrollLeft();var D=E.children(".ucdutyfreepanel-item").length;var F=E.eq(0).outerWidth();var C=E.width();var B=E.closest(".ucdutyfreepanel-content");B.find(".ucdutyfreepanel-content-slider-left").addClass("disabled");B.find(".ucdutyfreepanel-content-slider-right").addClass("disabled");if(i>0&&D>4){B.find(".ucdutyfreepanel-content-slider-left").removeClass("disabled");}if(i<D*F-C&&D>4){B.find(".ucdutyfreepanel-content-slider-right").removeClass("disabled");}});return;break;case"updatedutyFreePanel":var x=0;var A=0;var v=[];var z=r.currency;var y=r.commaReplacement;var s=u.find(".ucdutyfreepanel-headerimage-container").find(".ucdutyfreepanel-headerimage-box");u.find(".ucdutyfreepanel-item-check:checked").each(function(E,I){var G=a(this);var H=G.parents(".ucdutyfreepanel-item");var F=parseInt(G.parent(".ucdutyfreepanel-item-selection").find(".ucdutyfreepanel-item-sf-count-input").val());var J=false;for(var C=0;C<y.length;C++){if(z==y[C]){J=true;break;}}if(J==true){var D=parseFloat(H.attr("data-price").replace(",",""));}else{var D=parseFloat(H.attr("data-price").replace(",","."));}for(B=x;B<x+F;B++){s.eq(B).find("img").prop("src",H.find(".ucdutyfreepanel-item-image").find("img").prop("src")).show().prop("title",H.find(".ucdutyfreepanel-item-name").text());u.find(".ucdutyfreepanel-divSelectedMealsContainer").find("input").eq(B).val(H.attr("data-ssr-id"));}for(var B=0;B<F;B++){v.push(D);}A+=F*D;x+=F;});for(t=x;t<r.max;t++){s.eq(t).find("img").hide().prop("title","");u.find(".ucdutyfreepanel-divSelectedMealsContainer").find("input").eq(t).val("");}if(x>=r.max){u.find(".ucdutyfreepanel-item:has(.ucdutyfreepanel-item-check:not(:checked))").addClass("disabled");u.find(".ucdutyfreepanel-item-check:not(:checked)").prop("disabled",true);u.find(".ucdutyfreepanel-item-selection:has(.ucdutyfreepanel-item-check:checked)").find(".ucdutyfreepanel-item-sf-plus-btn").addClass("disabled");}else{u.find(".ucdutyfreepanel-item:has(.ucdutyfreepanel-item-check:not(:checked))").removeClass("disabled");u.find(".ucdutyfreepanel-item-check:not(:checked)").prop("disabled",false);u.find(".ucdutyfreepanel-item-selection:has(.ucdutyfreepanel-item-check:checked)").find(".ucdutyfreepanel-item-sf-plus-btn").removeClass("disabled");}var q=A;if(r.freeMealPolicy>0){v.sort(function(B,i){return i-B;});}else{if(r.freeMealPolicy<0){v.sort(function(B,i){return B-i;});}}if(r.freeMealPolicy!=0&&x>0){for(var t=0;t<r.freeMealCount;t++){A-=v[t];}}r.count=x;r.totalPrice=A.toString().indexOf(".")!=-1?A.toFixed(2):A;r.totalOriginalPrice=q.toString().indexOf(".")!=-1?q.toFixed(2):q;if(r.onchange){r.onchange(u,{max:r.max,count:r.count,totalPrice:r.totalPrice,totalOriginalPrice:r.totalOriginalPrice,currency:r.currency});}return;break;case"updateFromHiddenFields":var n={};u.find(".ucdutyfreepanel-divSelectedMealsContainer").find("input").each(function(){var i=a(this).val();if(n[i]==undefined||n[i]==null){n[i]=1;}else{n[i]++;}});a.each(n,function(B,i){if(B==""){return;}var C=u.find(".ucdutyfreepanel-item[data-ssr-id="+B+"]");if(C.length==0){return;}C.eq(0).removeClass("disabled");C.find(".ucdutyfreepanel-item-check").eq(0).prop("disabled",false).prop("checked",true);C.find(".ucdutyfreepanel-item-selection-form").eq(0).show().find(".ucdutyfreepanel-item-sf-count-input").eq(0).val(i);});u.ucDutyFreePanel("updatedutyFreePanel");break;case"disableControl":if(k==undefined||k==null){break;}r.disabled=k;var w=u.children(".ucdutyfreepanel-wrapper").eq(0);if(k){w.children(".ucdutyfreepanel-header-container").eq(0).hide();w.children(".ucdutyfreepanel-tab").eq(0).hide();w.children(".ucdutyfreepanel-content").eq(0).hide();w.children(".ucdutyfreepanel-footer").children(".ucdutyfreepanel-footnav").eq(0).hide();var p=w.children(".ucdutyfreepanel-footer").children(".ucdutyfreepanel-footnote").eq(0);p.children(".ucdutyfreepanel-footnote-disabled").show();p.children(".ucdutyfreepanel-footnote-enabled").hide();}else{w.children(".ucdutyfreepanel-header-container").eq(0).show();w.children(".ucdutyfreepanel-tab").eq(0).show();w.children(".ucdutyfreepanel-content").eq(0).show();w.children(".ucdutyfreepanel-footer").children(".ucdutyfreepanel-footnav").eq(0).show();var p=w.children(".ucdutyfreepanel-footer").children(".ucdutyfreepanel-footnote").eq(0);p.children(".ucdutyfreepanel-footnote-disabled").hide();p.children(".ucdutyfreepanel-footnote-enabled").show();}break;case"onchange":if(r.onchange){r.onchange(u,{max:r.max,count:r.count,totalPrice:r.totalPrice,totalOriginalPrice:r.totalOriginalPrice,currency:r.currency});}return;}});};})(jQuery);
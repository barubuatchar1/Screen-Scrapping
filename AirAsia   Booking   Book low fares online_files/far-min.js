if(typeof JSON!=="object"){JSON={};}(function(){function f(n){return n<10?"0"+n:n;}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null;};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf();};}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4);})+'"':'"'+string+'"';}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key);}if(typeof rep==="function"){value=rep.call(holder,key,value);}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null";}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null";}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v;}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v);}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v);}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v;}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" ";}}else{if(typeof space==="string"){indent=space;}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify");}return str("",{"":value});};}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v;}else{delete value[k];}}}}return reviver.call(holder,key,value);}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4);});}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j;}throw new SyntaxError("JSON.parse");};}}());(function(bo,W){var aG=bo.document,bF=bo.navigator,bx=bo.location;var b=(function(){var bQ=function(cb,cc){return new bQ.fn.init(cb,cc,bO);},b5=bo.jQuery,bS=bo.$,bO,b9=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,bX=/\S/,bT=/^\s+/,bP=/\s+$/,bL=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,bY=/^[\],:{}\s]*$/,b7=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,b0=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,bU=/(?:^|:|,)(?:\s*\[)+/g,bJ=/(webkit)[ \/]([\w.]+)/,b2=/(opera)(?:.*version)?[ \/]([\w.]+)/,b1=/(msie) ([\w.]+)/,b3=/(mozilla)(?:.*? rv:([\w.]+))?/,bM=/-([a-z]|[0-9])/ig,ca=/^-ms-/,b4=function(cb,cc){return(cc+"").toUpperCase();},b8=bF.userAgent,b6,bN,e,bW=Object.prototype.toString,bR=Object.prototype.hasOwnProperty,bK=Array.prototype.push,bV=Array.prototype.slice,bZ=String.prototype.trim,bG=Array.prototype.indexOf,bI={};bQ.fn=bQ.prototype={constructor:bQ,init:function(cb,cf,ce){var cd,cg,cc,ch;if(!cb){return this;}if(cb.nodeType){this.context=this[0]=cb;this.length=1;return this;}if(cb==="body"&&!cf&&aG.body){this.context=aG;this[0]=aG.body;this.selector=cb;this.length=1;return this;}if(typeof cb==="string"){if(cb.charAt(0)==="<"&&cb.charAt(cb.length-1)===">"&&cb.length>=3){cd=[null,cb,null];}else{cd=b9.exec(cb);}if(cd&&(cd[1]||!cf)){if(cd[1]){cf=cf instanceof bQ?cf[0]:cf;ch=(cf?cf.ownerDocument||cf:aG);cc=bL.exec(cb);if(cc){if(bQ.isPlainObject(cf)){cb=[aG.createElement(cc[1])];bQ.fn.attr.call(cb,cf,true);}else{cb=[ch.createElement(cc[1])];}}else{cc=bQ.buildFragment([cd[1]],[ch]);cb=(cc.cacheable?bQ.clone(cc.fragment):cc.fragment).childNodes;}return bQ.merge(this,cb);}else{cg=aG.getElementById(cd[2]);if(cg&&cg.parentNode){if(cg.id!==cd[2]){return ce.find(cb);}this.length=1;this[0]=cg;}this.context=aG;this.selector=cb;return this;}}else{if(!cf||cf.jquery){return(cf||ce).find(cb);}else{return this.constructor(cf).find(cb);}}}else{if(bQ.isFunction(cb)){return ce.ready(cb);}}if(cb.selector!==W){this.selector=cb.selector;this.context=cb.context;}return bQ.makeArray(cb,this);},selector:"",jquery:"1.7.2",length:0,size:function(){return this.length;},toArray:function(){return bV.call(this,0);},get:function(cb){return cb==null?this.toArray():(cb<0?this[this.length+cb]:this[cb]);},pushStack:function(cc,ce,cb){var cd=this.constructor();if(bQ.isArray(cc)){bK.apply(cd,cc);}else{bQ.merge(cd,cc);}cd.prevObject=this;cd.context=this.context;if(ce==="find"){cd.selector=this.selector+(this.selector?" ":"")+cb;}else{if(ce){cd.selector=this.selector+"."+ce+"("+cb+")";}}return cd;},each:function(cc,cb){return bQ.each(this,cc,cb);},ready:function(cb){bQ.bindReady();bN.add(cb);return this;},eq:function(cb){cb=+cb;return cb===-1?this.slice(cb):this.slice(cb,cb+1);},first:function(){return this.eq(0);},last:function(){return this.eq(-1);},slice:function(){return this.pushStack(bV.apply(this,arguments),"slice",bV.call(arguments).join(","));},map:function(cb){return this.pushStack(bQ.map(this,function(cd,cc){return cb.call(cd,cc,cd);}));},end:function(){return this.prevObject||this.constructor(null);},push:bK,sort:[].sort,splice:[].splice};bQ.fn.init.prototype=bQ.fn;bQ.extend=bQ.fn.extend=function(){var ck,cd,cb,cc,ch,ci,cg=arguments[0]||{},cf=1,ce=arguments.length,cj=false;if(typeof cg==="boolean"){cj=cg;cg=arguments[1]||{};cf=2;}if(typeof cg!=="object"&&!bQ.isFunction(cg)){cg={};}if(ce===cf){cg=this;--cf;}for(;cf<ce;cf++){if((ck=arguments[cf])!=null){for(cd in ck){cb=cg[cd];cc=ck[cd];if(cg===cc){continue;}if(cj&&cc&&(bQ.isPlainObject(cc)||(ch=bQ.isArray(cc)))){if(ch){ch=false;ci=cb&&bQ.isArray(cb)?cb:[];}else{ci=cb&&bQ.isPlainObject(cb)?cb:{};}cg[cd]=bQ.extend(cj,ci,cc);}else{if(cc!==W){cg[cd]=cc;}}}}}return cg;};bQ.extend({noConflict:function(cb){if(bo.$===bQ){bo.$=bS;}if(cb&&bo.jQuery===bQ){bo.jQuery=b5;}return bQ;},isReady:false,readyWait:1,holdReady:function(cb){if(cb){bQ.readyWait++;}else{bQ.ready(true);}},ready:function(cb){if((cb===true&&!--bQ.readyWait)||(cb!==true&&!bQ.isReady)){if(!aG.body){return setTimeout(bQ.ready,1);}bQ.isReady=true;if(cb!==true&&--bQ.readyWait>0){return;}bN.fireWith(aG,[bQ]);if(bQ.fn.trigger){bQ(aG).trigger("ready").off("ready");}}},bindReady:function(){if(bN){return;}bN=bQ.Callbacks("once memory");if(aG.readyState==="complete"){return setTimeout(bQ.ready,1);}if(aG.addEventListener){aG.addEventListener("DOMContentLoaded",e,false);bo.addEventListener("load",bQ.ready,false);}else{if(aG.attachEvent){aG.attachEvent("onreadystatechange",e);bo.attachEvent("onload",bQ.ready);var cb=false;try{cb=bo.frameElement==null;}catch(cc){}if(aG.documentElement.doScroll&&cb){bH();}}}},isFunction:function(cb){return bQ.type(cb)==="function";},isArray:Array.isArray||function(cb){return bQ.type(cb)==="array";},isWindow:function(cb){return cb!=null&&cb==cb.window;},isNumeric:function(cb){return !isNaN(parseFloat(cb))&&isFinite(cb);},type:function(cb){return cb==null?String(cb):bI[bW.call(cb)]||"object";},isPlainObject:function(cd){if(!cd||bQ.type(cd)!=="object"||cd.nodeType||bQ.isWindow(cd)){return false;}try{if(cd.constructor&&!bR.call(cd,"constructor")&&!bR.call(cd.constructor.prototype,"isPrototypeOf")){return false;}}catch(cc){return false;}var cb;for(cb in cd){}return cb===W||bR.call(cd,cb);},isEmptyObject:function(cc){for(var cb in cc){return false;}return true;},error:function(cb){throw new Error(cb);},parseJSON:function(cb){if(typeof cb!=="string"||!cb){return null;}cb=bQ.trim(cb);if(bo.JSON&&bo.JSON.parse){return bo.JSON.parse(cb);}if(bY.test(cb.replace(b7,"@").replace(b0,"]").replace(bU,""))){return(new Function("return "+cb))();}bQ.error("Invalid JSON: "+cb);},parseXML:function(cd){if(typeof cd!=="string"||!cd){return null;}var cb,cc;try{if(bo.DOMParser){cc=new DOMParser();cb=cc.parseFromString(cd,"text/xml");}else{cb=new ActiveXObject("Microsoft.XMLDOM");cb.async="false";cb.loadXML(cd);}}catch(ce){cb=W;}if(!cb||!cb.documentElement||cb.getElementsByTagName("parsererror").length){bQ.error("Invalid XML: "+cd);}return cb;},noop:function(){},globalEval:function(cb){if(cb&&bX.test(cb)){(bo.execScript||function(cc){bo["eval"].call(bo,cc);})(cb);}},camelCase:function(cb){return cb.replace(ca,"ms-").replace(bM,b4);},nodeName:function(cc,cb){return cc.nodeName&&cc.nodeName.toUpperCase()===cb.toUpperCase();},each:function(ce,ch,cd){var cc,cf=0,cg=ce.length,cb=cg===W||bQ.isFunction(ce);if(cd){if(cb){for(cc in ce){if(ch.apply(ce[cc],cd)===false){break;}}}else{for(;cf<cg;){if(ch.apply(ce[cf++],cd)===false){break;}}}}else{if(cb){for(cc in ce){if(ch.call(ce[cc],cc,ce[cc])===false){break;}}}else{for(;cf<cg;){if(ch.call(ce[cf],cf,ce[cf++])===false){break;}}}}return ce;},trim:bZ?function(cb){return cb==null?"":bZ.call(cb);}:function(cb){return cb==null?"":cb.toString().replace(bT,"").replace(bP,"");},makeArray:function(ce,cc){var cb=cc||[];if(ce!=null){var cd=bQ.type(ce);if(ce.length==null||cd==="string"||cd==="function"||cd==="regexp"||bQ.isWindow(ce)){bK.call(cb,ce);}else{bQ.merge(cb,ce);}}return cb;},inArray:function(cd,ce,cc){var cb;if(ce){if(bG){return bG.call(ce,cd,cc);}cb=ce.length;cc=cc?cc<0?Math.max(0,cb+cc):cc:0;for(;cc<cb;cc++){if(cc in ce&&ce[cc]===cd){return cc;}}}return -1;},merge:function(cf,cd){var ce=cf.length,cc=0;if(typeof cd.length==="number"){for(var cb=cd.length;cc<cb;cc++){cf[ce++]=cd[cc];}}else{while(cd[cc]!==W){cf[ce++]=cd[cc++];}}cf.length=ce;return cf;},grep:function(cc,ch,cb){var cd=[],cg;cb=!!cb;for(var ce=0,cf=cc.length;ce<cf;ce++){cg=!!ch(cc[ce],ce);if(cb!==cg){cd.push(cc[ce]);}}return cd;},map:function(cb,ci,cj){var cg,ch,cf=[],cd=0,cc=cb.length,ce=cb instanceof bQ||cc!==W&&typeof cc==="number"&&((cc>0&&cb[0]&&cb[cc-1])||cc===0||bQ.isArray(cb));if(ce){for(;cd<cc;cd++){cg=ci(cb[cd],cd,cj);if(cg!=null){cf[cf.length]=cg;}}}else{for(ch in cb){cg=ci(cb[ch],ch,cj);if(cg!=null){cf[cf.length]=cg;}}}return cf.concat.apply([],cf);},guid:1,proxy:function(cf,ce){if(typeof ce==="string"){var cd=cf[ce];ce=cf;cf=cd;}if(!bQ.isFunction(cf)){return W;}var cb=bV.call(arguments,2),cc=function(){return cf.apply(ce,cb.concat(bV.call(arguments)));};cc.guid=cf.guid=cf.guid||cc.guid||bQ.guid++;return cc;},access:function(cb,ch,ck,ci,cf,cl,cj){var cd,cg=ck==null,ce=0,cc=cb.length;if(ck&&typeof ck==="object"){for(ce in ck){bQ.access(cb,ch,ce,ck[ce],1,cl,ci);}cf=1;}else{if(ci!==W){cd=cj===W&&bQ.isFunction(ci);if(cg){if(cd){cd=ch;ch=function(cn,cm,co){return cd.call(bQ(cn),co);};}else{ch.call(cb,ci);ch=null;}}if(ch){for(;ce<cc;ce++){ch(cb[ce],ck,cd?ci.call(cb[ce],ce,ch(cb[ce],ck)):ci,cj);}}cf=1;}}return cf?cb:cg?ch.call(cb):cc?ch(cb[0],ck):cl;},now:function(){return(new Date()).getTime();},uaMatch:function(cc){cc=cc.toLowerCase();var cb=bJ.exec(cc)||b2.exec(cc)||b1.exec(cc)||cc.indexOf("compatible")<0&&b3.exec(cc)||[];return{browser:cb[1]||"",version:cb[2]||"0"};},sub:function(){function cb(ce,cf){return new cb.fn.init(ce,cf);}bQ.extend(true,cb,this);cb.superclass=this;cb.fn=cb.prototype=this();cb.fn.constructor=cb;cb.sub=this.sub;cb.fn.init=function cd(ce,cf){if(cf&&cf instanceof bQ&&!(cf instanceof cb)){cf=cb(cf);}return bQ.fn.init.call(this,ce,cf,cc);};cb.fn.init.prototype=cb.fn;var cc=cb(aG);return cb;},browser:{}});bQ.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(cc,cb){bI["[object "+cb+"]"]=cb.toLowerCase();});b6=bQ.uaMatch(b8);if(b6.browser){bQ.browser[b6.browser]=true;bQ.browser.version=b6.version;}if(bQ.browser.webkit){bQ.browser.safari=true;}if(bX.test("\xA0")){bT=/^[\s\xA0]+/;bP=/[\s\xA0]+$/;}bO=bQ(aG);if(aG.addEventListener){e=function(){aG.removeEventListener("DOMContentLoaded",e,false);bQ.ready();};}else{if(aG.attachEvent){e=function(){if(aG.readyState==="complete"){aG.detachEvent("onreadystatechange",e);bQ.ready();}};}}function bH(){if(bQ.isReady){return;}try{aG.documentElement.doScroll("left");}catch(cb){setTimeout(bH,1);return;}bQ.ready();}return bQ;})();var be={};function ai(e){var bG=be[e]={},bH,bI;e=e.split(/\s+/);for(bH=0,bI=e.length;bH<bI;bH++){bG[e[bH]]=true;}return bG;}b.Callbacks=function(bI){bI=bI?(be[bI]||ai(bI)):{};var bN=[],bO=[],bJ,e,bK,bH,bL,bM,bQ=function(bR){var bS,bV,bU,bT,bW;for(bS=0,bV=bR.length;bS<bV;bS++){bU=bR[bS];bT=b.type(bU);if(bT==="array"){bQ(bU);}else{if(bT==="function"){if(!bI.unique||!bP.has(bU)){bN.push(bU);}}}}},bG=function(bS,bR){bR=bR||[];bJ=!bI.memory||[bS,bR];e=true;bK=true;bM=bH||0;bH=0;bL=bN.length;for(;bN&&bM<bL;bM++){if(bN[bM].apply(bS,bR)===false&&bI.stopOnFalse){bJ=true;break;}}bK=false;if(bN){if(!bI.once){if(bO&&bO.length){bJ=bO.shift();bP.fireWith(bJ[0],bJ[1]);}}else{if(bJ===true){bP.disable();}else{bN=[];}}}},bP={add:function(){if(bN){var bR=bN.length;bQ(arguments);if(bK){bL=bN.length;}else{if(bJ&&bJ!==true){bH=bR;bG(bJ[0],bJ[1]);}}}return this;},remove:function(){if(bN){var bR=arguments,bT=0,bU=bR.length;for(;bT<bU;bT++){for(var bS=0;bS<bN.length;bS++){if(bR[bT]===bN[bS]){if(bK){if(bS<=bL){bL--;if(bS<=bM){bM--;}}}bN.splice(bS--,1);if(bI.unique){break;}}}}}return this;},has:function(bS){if(bN){var bR=0,bT=bN.length;for(;bR<bT;bR++){if(bS===bN[bR]){return true;}}}return false;},empty:function(){bN=[];return this;},disable:function(){bN=bO=bJ=W;return this;},disabled:function(){return !bN;},lock:function(){bO=W;if(!bJ||bJ===true){bP.disable();}return this;},locked:function(){return !bO;},fireWith:function(bS,bR){if(bO){if(bK){if(!bI.once){bO.push([bS,bR]);}}else{if(!(bI.once&&bJ)){bG(bS,bR);}}}return this;},fire:function(){bP.fireWith(this,arguments);return this;},fired:function(){return !!e;}};return bP;};var aV=[].slice;b.extend({Deferred:function(bJ){var bI=b.Callbacks("once memory"),bH=b.Callbacks("once memory"),bG=b.Callbacks("memory"),e="pending",bL={resolve:bI,reject:bH,notify:bG},bN={done:bI.add,fail:bH.add,progress:bG.add,state:function(){return e;},isResolved:bI.fired,isRejected:bH.fired,then:function(bP,bO,bQ){bM.done(bP).fail(bO).progress(bQ);return this;},always:function(){bM.done.apply(bM,arguments).fail.apply(bM,arguments);return this;},pipe:function(bQ,bP,bO){return b.Deferred(function(bR){b.each({done:[bQ,"resolve"],fail:[bP,"reject"],progress:[bO,"notify"]},function(bT,bW){var bS=bW[0],bV=bW[1],bU;if(b.isFunction(bS)){bM[bT](function(){bU=bS.apply(this,arguments);if(bU&&b.isFunction(bU.promise)){bU.promise().then(bR.resolve,bR.reject,bR.notify);}else{bR[bV+"With"](this===bM?bR:this,[bU]);}});}else{bM[bT](bR[bV]);}});}).promise();},promise:function(bP){if(bP==null){bP=bN;}else{for(var bO in bN){bP[bO]=bN[bO];}}return bP;}},bM=bN.promise({}),bK;for(bK in bL){bM[bK]=bL[bK].fire;bM[bK+"With"]=bL[bK].fireWith;}bM.done(function(){e="resolved";},bH.disable,bG.lock).fail(function(){e="rejected";},bI.disable,bG.lock);if(bJ){bJ.call(bM,bM);}return bM;},when:function(bL){var bI=aV.call(arguments,0),bG=0,e=bI.length,bM=new Array(e),bH=e,bJ=e,bN=e<=1&&bL&&b.isFunction(bL.promise)?bL:b.Deferred(),bP=bN.promise();function bO(bQ){return function(bR){bI[bQ]=arguments.length>1?aV.call(arguments,0):bR;if(!(--bH)){bN.resolveWith(bN,bI);}};}function bK(bQ){return function(bR){bM[bQ]=arguments.length>1?aV.call(arguments,0):bR;bN.notifyWith(bP,bM);};}if(e>1){for(;bG<e;bG++){if(bI[bG]&&bI[bG].promise&&b.isFunction(bI[bG].promise)){bI[bG].promise().then(bO(bG),bN.reject,bK(bG));}else{--bH;}}if(!bH){bN.resolveWith(bN,bI);}}else{if(bN!==bL){bN.resolveWith(bN,e?[bL]:[]);}}return bP;}});b.support=(function(){var bT,bS,bP,bQ,bI,bO,bN,bK,bU,bL,bJ,bH,bG=aG.createElement("div"),bR=aG.documentElement;bG.setAttribute("className","t");bG.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>";bS=bG.getElementsByTagName("*");bP=bG.getElementsByTagName("a")[0];if(!bS||!bS.length||!bP){return{};}bQ=aG.createElement("select");bI=bQ.appendChild(aG.createElement("option"));bO=bG.getElementsByTagName("input")[0];bT={leadingWhitespace:(bG.firstChild.nodeType===3),tbody:!bG.getElementsByTagName("tbody").length,htmlSerialize:!!bG.getElementsByTagName("link").length,style:/top/.test(bP.getAttribute("style")),hrefNormalized:(bP.getAttribute("href")==="/a"),opacity:/^0.55/.test(bP.style.opacity),cssFloat:!!bP.style.cssFloat,checkOn:(bO.value==="on"),optSelected:bI.selected,getSetAttribute:bG.className!=="t",enctype:!!aG.createElement("form").enctype,html5Clone:aG.createElement("nav").cloneNode(true).outerHTML!=="<:nav></:nav>",submitBubbles:true,changeBubbles:true,focusinBubbles:false,deleteExpando:true,noCloneEvent:true,inlineBlockNeedsLayout:false,shrinkWrapBlocks:false,reliableMarginRight:true,pixelMargin:true};b.boxModel=bT.boxModel=(aG.compatMode==="CSS1Compat");bO.checked=true;bT.noCloneChecked=bO.cloneNode(true).checked;bQ.disabled=true;bT.optDisabled=!bI.disabled;try{delete bG.test;}catch(bM){bT.deleteExpando=false;}if(!bG.addEventListener&&bG.attachEvent&&bG.fireEvent){bG.attachEvent("onclick",function(){bT.noCloneEvent=false;});bG.cloneNode(true).fireEvent("onclick");}bO=aG.createElement("input");bO.value="t";bO.setAttribute("type","radio");bT.radioValue=bO.value==="t";bO.setAttribute("checked","checked");bO.setAttribute("name","t");bG.appendChild(bO);bN=aG.createDocumentFragment();bN.appendChild(bG.lastChild);bT.checkClone=bN.cloneNode(true).cloneNode(true).lastChild.checked;bT.appendChecked=bO.checked;bN.removeChild(bO);bN.appendChild(bG);if(bG.attachEvent){for(bJ in {submit:1,change:1,focusin:1}){bL="on"+bJ;bH=(bL in bG);if(!bH){bG.setAttribute(bL,"return;");bH=(typeof bG[bL]==="function");}bT[bJ+"Bubbles"]=bH;}}bN.removeChild(bG);bN=bQ=bI=bG=bO=null;b(function(){var bX,b6,b7,b5,bZ,b0,b2,bW,bV,b1,bY,e,b4,b3=aG.getElementsByTagName("body")[0];if(!b3){return;}bW=1;b4="padding:0;margin:0;border:";bY="position:absolute;top:0;left:0;width:1px;height:1px;";e=b4+"0;visibility:hidden;";bV="style='"+bY+b4+"5px solid #000;";b1="<div "+bV+"display:block;'><div style='"+b4+"0;display:block;overflow:hidden;'></div></div>"+"<table "+bV+"' cellpadding='0' cellspacing='0'>"+"<tr><td></td></tr></table>";bX=aG.createElement("div");bX.style.cssText=e+"width:0;height:0;position:static;top:0;margin-top:"+bW+"px";b3.insertBefore(bX,b3.firstChild);bG=aG.createElement("div");bX.appendChild(bG);bG.innerHTML="<table><tr><td style='"+b4+"0;display:none'></td><td>t</td></tr></table>";bK=bG.getElementsByTagName("td");bH=(bK[0].offsetHeight===0);bK[0].style.display="";bK[1].style.display="none";bT.reliableHiddenOffsets=bH&&(bK[0].offsetHeight===0);if(bo.getComputedStyle){bG.innerHTML="";b2=aG.createElement("div");b2.style.width="0";b2.style.marginRight="0";bG.style.width="2px";bG.appendChild(b2);bT.reliableMarginRight=(parseInt((bo.getComputedStyle(b2,null)||{marginRight:0}).marginRight,10)||0)===0;}if(typeof bG.style.zoom!=="undefined"){bG.innerHTML="";bG.style.width=bG.style.padding="1px";bG.style.border=0;bG.style.overflow="hidden";bG.style.display="inline";bG.style.zoom=1;bT.inlineBlockNeedsLayout=(bG.offsetWidth===3);bG.style.display="block";bG.style.overflow="visible";bG.innerHTML="<div style='width:5px;'></div>";bT.shrinkWrapBlocks=(bG.offsetWidth!==3);}bG.style.cssText=bY+e;bG.innerHTML=b1;b6=bG.firstChild;b7=b6.firstChild;bZ=b6.nextSibling.firstChild.firstChild;b0={doesNotAddBorder:(b7.offsetTop!==5),doesAddBorderForTableAndCells:(bZ.offsetTop===5)};b7.style.position="fixed";b7.style.top="20px";b0.fixedPosition=(b7.offsetTop===20||b7.offsetTop===15);b7.style.position=b7.style.top="";b6.style.overflow="hidden";b6.style.position="relative";b0.subtractsBorderForOverflowNotVisible=(b7.offsetTop===-5);b0.doesNotIncludeMarginInBodyOffset=(b3.offsetTop!==bW);if(bo.getComputedStyle){bG.style.marginTop="1%";bT.pixelMargin=(bo.getComputedStyle(bG,null)||{marginTop:0}).marginTop!=="1%";}if(typeof bX.style.zoom!=="undefined"){bX.style.zoom=1;}b3.removeChild(bX);b2=bG=bX=null;b.extend(bT,b0);});return bT;})();var a4=/^(?:\{.*\}|\[.*\])$/,aL=/([A-Z])/g;b.extend({cache:{},uuid:0,expando:"jQuery"+(b.fn.jquery+Math.random()).replace(/\D/g,""),noData:{"embed":true,"object":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000","applet":true},hasData:function(e){e=e.nodeType?b.cache[e[b.expando]]:e[b.expando];return !!e&&!ad(e);},data:function(bI,bG,bK,bJ){if(!b.acceptData(bI)){return;}var bR,bL,bO,bP=b.expando,bN=typeof bG==="string",bQ=bI.nodeType,e=bQ?b.cache:bI,bH=bQ?bI[bP]:bI[bP]&&bP,bM=bG==="events";if((!bH||!e[bH]||(!bM&&!bJ&&!e[bH].data))&&bN&&bK===W){return;}if(!bH){if(bQ){bI[bP]=bH=++b.uuid;}else{bH=bP;}}if(!e[bH]){e[bH]={};if(!bQ){e[bH].toJSON=b.noop;}}if(typeof bG==="object"||typeof bG==="function"){if(bJ){e[bH]=b.extend(e[bH],bG);}else{e[bH].data=b.extend(e[bH].data,bG);}}bR=bL=e[bH];if(!bJ){if(!bL.data){bL.data={};}bL=bL.data;}if(bK!==W){bL[b.camelCase(bG)]=bK;}if(bM&&!bL[bG]){return bR.events;}if(bN){bO=bL[bG];if(bO==null){bO=bL[b.camelCase(bG)];}}else{bO=bL;}return bO;},removeData:function(bI,bG,bJ){if(!b.acceptData(bI)){return;}var bM,bL,bK,bN=b.expando,bO=bI.nodeType,e=bO?b.cache:bI,bH=bO?bI[bN]:bN;if(!e[bH]){return;}if(bG){bM=bJ?e[bH]:e[bH].data;if(bM){if(!b.isArray(bG)){if(bG in bM){bG=[bG];}else{bG=b.camelCase(bG);if(bG in bM){bG=[bG];}else{bG=bG.split(" ");}}}for(bL=0,bK=bG.length;bL<bK;bL++){delete bM[bG[bL]];}if(!(bJ?ad:b.isEmptyObject)(bM)){return;}}}if(!bJ){delete e[bH].data;if(!ad(e[bH])){return;}}if(b.support.deleteExpando||!e.setInterval){delete e[bH];}else{e[bH]=null;}if(bO){if(b.support.deleteExpando){delete bI[bN];}else{if(bI.removeAttribute){bI.removeAttribute(bN);}else{bI[bN]=null;}}}},_data:function(bG,e,bH){return b.data(bG,e,bH,true);},acceptData:function(bG){if(bG.nodeName){var e=b.noData[bG.nodeName.toLowerCase()];if(e){return !(e===true||bG.getAttribute("classid")!==e);}}return true;}});b.fn.extend({data:function(bO,bN){var bJ,bG,bM,e,bI,bH=this[0],bL=0,bK=null;if(bO===W){if(this.length){bK=b.data(bH);if(bH.nodeType===1&&!b._data(bH,"parsedAttrs")){bM=bH.attributes;for(bI=bM.length;bL<bI;bL++){e=bM[bL].name;if(e.indexOf("data-")===0){e=b.camelCase(e.substring(5));bh(bH,e,bK[e]);}}b._data(bH,"parsedAttrs",true);}}return bK;}if(typeof bO==="object"){return this.each(function(){b.data(this,bO);});}bJ=bO.split(".",2);bJ[1]=bJ[1]?"."+bJ[1]:"";bG=bJ[1]+"!";return b.access(this,function(bP){if(bP===W){bK=this.triggerHandler("getData"+bG,[bJ[0]]);if(bK===W&&bH){bK=b.data(bH,bO);bK=bh(bH,bO,bK);}return bK===W&&bJ[1]?this.data(bJ[0]):bK;}bJ[1]=bP;this.each(function(){var bQ=b(this);bQ.triggerHandler("setData"+bG,bJ);b.data(this,bO,bP);bQ.triggerHandler("changeData"+bG,bJ);});},null,bN,arguments.length>1,null,false);},removeData:function(e){return this.each(function(){b.removeData(this,e);});}});function bh(bI,bH,bJ){if(bJ===W&&bI.nodeType===1){var bG="data-"+bH.replace(aL,"-$1").toLowerCase();bJ=bI.getAttribute(bG);if(typeof bJ==="string"){try{bJ=bJ==="true"?true:bJ==="false"?false:bJ==="null"?null:b.isNumeric(bJ)?+bJ:a4.test(bJ)?b.parseJSON(bJ):bJ;}catch(bK){}b.data(bI,bH,bJ);}else{bJ=W;}}return bJ;}function ad(bG){for(var e in bG){if(e==="data"&&b.isEmptyObject(bG[e])){continue;}if(e!=="toJSON"){return false;}}return true;}function bu(bJ,bI,bL){var bH=bI+"defer",bG=bI+"queue",e=bI+"mark",bK=b._data(bJ,bH);if(bK&&(bL==="queue"||!b._data(bJ,bG))&&(bL==="mark"||!b._data(bJ,e))){setTimeout(function(){if(!b._data(bJ,bG)&&!b._data(bJ,e)){b.removeData(bJ,bH,true);bK.fire();}},0);}}b.extend({_mark:function(bG,e){if(bG){e=(e||"fx")+"mark";b._data(bG,e,(b._data(bG,e)||0)+1);}},_unmark:function(bJ,bI,bG){if(bJ!==true){bG=bI;bI=bJ;bJ=false;}if(bI){bG=bG||"fx";var e=bG+"mark",bH=bJ?0:((b._data(bI,e)||1)-1);if(bH){b._data(bI,e,bH);}else{b.removeData(bI,e,true);bu(bI,bG,"mark");}}},queue:function(bG,e,bI){var bH;if(bG){e=(e||"fx")+"queue";bH=b._data(bG,e);if(bI){if(!bH||b.isArray(bI)){bH=b._data(bG,e,b.makeArray(bI));}else{bH.push(bI);}}return bH||[];}},dequeue:function(bJ,bI){bI=bI||"fx";var bG=b.queue(bJ,bI),bH=bG.shift(),e={};if(bH==="inprogress"){bH=bG.shift();}if(bH){if(bI==="fx"){bG.unshift("inprogress");}b._data(bJ,bI+".run",e);bH.call(bJ,function(){b.dequeue(bJ,bI);},e);}if(!bG.length){b.removeData(bJ,bI+"queue "+bI+".run",true);bu(bJ,bI,"queue");}}});b.fn.extend({queue:function(e,bG){var bH=2;if(typeof e!=="string"){bG=e;e="fx";bH--;}if(arguments.length<bH){return b.queue(this[0],e);}return bG===W?this:this.each(function(){var bI=b.queue(this,e,bG);if(e==="fx"&&bI[0]!=="inprogress"){b.dequeue(this,e);}});},dequeue:function(e){return this.each(function(){b.dequeue(this,e);});},delay:function(bG,e){bG=b.fx?b.fx.speeds[bG]||bG:bG;e=e||"fx";return this.queue(e,function(bI,bH){var bJ=setTimeout(bI,bG);bH.stop=function(){clearTimeout(bJ);};});},clearQueue:function(e){return this.queue(e||"fx",[]);},promise:function(bO,bH){if(typeof bO!=="string"){bH=bO;bO=W;}bO=bO||"fx";var e=b.Deferred(),bG=this,bJ=bG.length,bM=1,bK=bO+"defer",bL=bO+"queue",bN=bO+"mark",bI;function bP(){if(!(--bM)){e.resolveWith(bG,[bG]);}}while(bJ--){if((bI=b.data(bG[bJ],bK,W,true)||(b.data(bG[bJ],bL,W,true)||b.data(bG[bJ],bN,W,true))&&b.data(bG[bJ],bK,b.Callbacks("once memory"),true))){bM++;bI.add(bP);}}bP();return e.promise(bH);}});var a1=/[\n\t\r]/g,ar=/\s+/,a6=/\r/g,m=/^(?:button|input)$/i,N=/^(?:button|input|object|select|textarea)$/i,u=/^a(?:rea)?$/i,aA=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,P=b.support.getSetAttribute,bq,ba,aR;b.fn.extend({attr:function(e,bG){return b.access(this,b.attr,e,bG,arguments.length>1);},removeAttr:function(e){return this.each(function(){b.removeAttr(this,e);});},prop:function(e,bG){return b.access(this,b.prop,e,bG,arguments.length>1);},removeProp:function(e){e=b.propFix[e]||e;return this.each(function(){try{this[e]=W;delete this[e];}catch(bG){}});},addClass:function(bJ){var bL,bH,bG,bI,bK,bM,e;if(b.isFunction(bJ)){return this.each(function(bN){b(this).addClass(bJ.call(this,bN,this.className));});}if(bJ&&typeof bJ==="string"){bL=bJ.split(ar);for(bH=0,bG=this.length;bH<bG;bH++){bI=this[bH];if(bI.nodeType===1){if(!bI.className&&bL.length===1){bI.className=bJ;}else{bK=" "+bI.className+" ";for(bM=0,e=bL.length;bM<e;bM++){if(!~bK.indexOf(" "+bL[bM]+" ")){bK+=bL[bM]+" ";}}bI.className=b.trim(bK);}}}}return this;},removeClass:function(bK){var bL,bH,bG,bJ,bI,bM,e;if(b.isFunction(bK)){return this.each(function(bN){b(this).removeClass(bK.call(this,bN,this.className));});}if((bK&&typeof bK==="string")||bK===W){bL=(bK||"").split(ar);for(bH=0,bG=this.length;bH<bG;bH++){bJ=this[bH];if(bJ.nodeType===1&&bJ.className){if(bK){bI=(" "+bJ.className+" ").replace(a1," ");for(bM=0,e=bL.length;bM<e;bM++){bI=bI.replace(" "+bL[bM]+" "," ");}bJ.className=b.trim(bI);}else{bJ.className="";}}}}return this;},toggleClass:function(bI,bG){var bH=typeof bI,e=typeof bG==="boolean";if(b.isFunction(bI)){return this.each(function(bJ){b(this).toggleClass(bI.call(this,bJ,this.className,bG),bG);});}return this.each(function(){if(bH==="string"){var bL,bK=0,bJ=b(this),bM=bG,bN=bI.split(ar);while((bL=bN[bK++])){bM=e?bM:!bJ.hasClass(bL);bJ[bM?"addClass":"removeClass"](bL);}}else{if(bH==="undefined"||bH==="boolean"){if(this.className){b._data(this,"__className__",this.className);}this.className=this.className||bI===false?"":b._data(this,"__className__")||"";}}});},hasClass:function(e){var bI=" "+e+" ",bH=0,bG=this.length;for(;bH<bG;bH++){if(this[bH].nodeType===1&&(" "+this[bH].className+" ").replace(a1," ").indexOf(bI)>-1){return true;}}return false;},val:function(bI){var e,bG,bJ,bH=this[0];if(!arguments.length){if(bH){e=b.valHooks[bH.type]||b.valHooks[bH.nodeName.toLowerCase()];if(e&&"get" in e&&(bG=e.get(bH,"value"))!==W){return bG;}bG=bH.value;return typeof bG==="string"?bG.replace(a6,""):bG==null?"":bG;}return;}bJ=b.isFunction(bI);return this.each(function(bL){var bK=b(this),bM;if(this.nodeType!==1){return;}if(bJ){bM=bI.call(this,bL,bK.val());}else{bM=bI;}if(bM==null){bM="";}else{if(typeof bM==="number"){bM+="";}else{if(b.isArray(bM)){bM=b.map(bM,function(bN){return bN==null?"":bN+"";});}}}e=b.valHooks[this.type]||b.valHooks[this.nodeName.toLowerCase()];if(!e||!("set" in e)||e.set(this,bM,"value")===W){this.value=bM;}});}});b.extend({valHooks:{option:{get:function(e){var bG=e.attributes.value;return !bG||bG.specified?e.value:e.text;}},select:{get:function(e){var bL,bG,bK,bI,bJ=e.selectedIndex,bM=[],bN=e.options,bH=e.type==="select-one";if(bJ<0){return null;}bG=bH?bJ:0;bK=bH?bJ+1:bN.length;for(;bG<bK;bG++){bI=bN[bG];if(bI.selected&&(b.support.optDisabled?!bI.disabled:bI.getAttribute("disabled")===null)&&(!bI.parentNode.disabled||!b.nodeName(bI.parentNode,"optgroup"))){bL=b(bI).val();if(bH){return bL;}bM.push(bL);}}if(bH&&!bM.length&&bN.length){return b(bN[bJ]).val();}return bM;},set:function(bG,bH){var e=b.makeArray(bH);b(bG).find("option").each(function(){this.selected=b.inArray(b(this).val(),e)>=0;});if(!e.length){bG.selectedIndex=-1;}return e;}}},attrFn:{val:true,css:true,html:true,text:true,data:true,width:true,height:true,offset:true},attr:function(bL,bI,bM,bK){var bH,e,bJ,bG=bL.nodeType;if(!bL||bG===3||bG===8||bG===2){return;}if(bK&&bI in b.attrFn){return b(bL)[bI](bM);}if(typeof bL.getAttribute==="undefined"){return b.prop(bL,bI,bM);}bJ=bG!==1||!b.isXMLDoc(bL);if(bJ){bI=bI.toLowerCase();e=b.attrHooks[bI]||(aA.test(bI)?ba:bq);}if(bM!==W){if(bM===null){b.removeAttr(bL,bI);return;}else{if(e&&"set" in e&&bJ&&(bH=e.set(bL,bM,bI))!==W){return bH;}else{bL.setAttribute(bI,""+bM);return bM;}}}else{if(e&&"get" in e&&bJ&&(bH=e.get(bL,bI))!==null){return bH;}else{bH=bL.getAttribute(bI);return bH===null?W:bH;}}},removeAttr:function(bJ,bL){var bK,bM,bH,e,bG,bI=0;if(bL&&bJ.nodeType===1){bM=bL.toLowerCase().split(ar);e=bM.length;for(;bI<e;bI++){bH=bM[bI];if(bH){bK=b.propFix[bH]||bH;bG=aA.test(bH);if(!bG){b.attr(bJ,bH,"");}bJ.removeAttribute(P?bH:bK);if(bG&&bK in bJ){bJ[bK]=false;}}}}},attrHooks:{type:{set:function(e,bG){if(m.test(e.nodeName)&&e.parentNode){b.error("type property can't be changed");}else{if(!b.support.radioValue&&bG==="radio"&&b.nodeName(e,"input")){var bH=e.value;e.setAttribute("type",bG);if(bH){e.value=bH;}return bG;}}}},value:{get:function(bG,e){if(bq&&b.nodeName(bG,"button")){return bq.get(bG,e);}return e in bG?bG.value:null;},set:function(bG,bH,e){if(bq&&b.nodeName(bG,"button")){return bq.set(bG,bH,e);}bG.value=bH;}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(bK,bI,bL){var bH,e,bJ,bG=bK.nodeType;if(!bK||bG===3||bG===8||bG===2){return;}bJ=bG!==1||!b.isXMLDoc(bK);if(bJ){bI=b.propFix[bI]||bI;e=b.propHooks[bI];}if(bL!==W){if(e&&"set" in e&&(bH=e.set(bK,bL,bI))!==W){return bH;}else{return(bK[bI]=bL);}}else{if(e&&"get" in e&&(bH=e.get(bK,bI))!==null){return bH;}else{return bK[bI];}}},propHooks:{tabIndex:{get:function(bG){var e=bG.getAttributeNode("tabindex");return e&&e.specified?parseInt(e.value,10):N.test(bG.nodeName)||u.test(bG.nodeName)&&bG.href?0:W;}}}});b.attrHooks.tabindex=b.propHooks.tabIndex;ba={get:function(bG,e){var bI,bH=b.prop(bG,e);return bH===true||typeof bH!=="boolean"&&(bI=bG.getAttributeNode(e))&&bI.nodeValue!==false?e.toLowerCase():W;},set:function(bG,bI,e){var bH;if(bI===false){b.removeAttr(bG,e);}else{bH=b.propFix[e]||e;if(bH in bG){bG[bH]=true;}bG.setAttribute(e,e.toLowerCase());}return e;}};if(!P){aR={name:true,id:true,coords:true};bq=b.valHooks.button={get:function(bH,bG){var e;e=bH.getAttributeNode(bG);return e&&(aR[bG]?e.nodeValue!=="":e.specified)?e.nodeValue:W;},set:function(bH,bI,bG){var e=bH.getAttributeNode(bG);if(!e){e=aG.createAttribute(bG);bH.setAttributeNode(e);}return(e.nodeValue=bI+"");}};b.attrHooks.tabindex.set=bq.set;b.each(["width","height"],function(bG,e){b.attrHooks[e]=b.extend(b.attrHooks[e],{set:function(bH,bI){if(bI===""){bH.setAttribute(e,"auto");return bI;}}});});b.attrHooks.contenteditable={get:bq.get,set:function(bG,bH,e){if(bH===""){bH="false";}bq.set(bG,bH,e);}};}if(!b.support.hrefNormalized){b.each(["href","src","width","height"],function(bG,e){b.attrHooks[e]=b.extend(b.attrHooks[e],{get:function(bI){var bH=bI.getAttribute(e,2);return bH===null?W:bH;}});});}if(!b.support.style){b.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||W;},set:function(e,bG){return(e.style.cssText=""+bG);}};}if(!b.support.optSelected){b.propHooks.selected=b.extend(b.propHooks.selected,{get:function(bG){var e=bG.parentNode;if(e){e.selectedIndex;if(e.parentNode){e.parentNode.selectedIndex;}}return null;}});}if(!b.support.enctype){b.propFix.enctype="encoding";}if(!b.support.checkOn){b.each(["radio","checkbox"],function(){b.valHooks[this]={get:function(e){return e.getAttribute("value")===null?"on":e.value;}};});}b.each(["radio","checkbox"],function(){b.valHooks[this]=b.extend(b.valHooks[this],{set:function(e,bG){if(b.isArray(bG)){return(e.checked=b.inArray(b(e).val(),bG)>=0);}}});});var bp=/^(?:textarea|input|select)$/i,w=/^([^\.]*)?(?:\.(.+))?$/,U=/(?:^|\s)hover(\.\S+)?\b/,a0=/^key/,br=/^(?:mouse|contextmenu)|click/,ae=/^(?:focusinfocus|focusoutblur)$/,af=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,aj=function(e){var bG=af.exec(e);if(bG){bG[1]=(bG[1]||"").toLowerCase();bG[3]=bG[3]&&new RegExp("(?:^|\\s)"+bG[3]+"(?:\\s|$)");}return bG;},s=function(bH,e){var bG=bH.attributes||{};return((!e[1]||bH.nodeName.toLowerCase()===e[1])&&(!e[2]||(bG.id||{}).value===e[2])&&(!e[3]||e[3].test((bG["class"]||{}).value)));},bE=function(e){return b.event.special.hover?e:e.replace(U,"mouseenter$1 mouseleave$1");};b.event={add:function(bI,bN,bU,bL,bJ){var bO,bM,bV,bT,bS,bQ,e,bR,bG,bK,bH,bP;if(bI.nodeType===3||bI.nodeType===8||!bN||!bU||!(bO=b._data(bI))){return;}if(bU.handler){bG=bU;bU=bG.handler;bJ=bG.selector;}if(!bU.guid){bU.guid=b.guid++;}bV=bO.events;if(!bV){bO.events=bV={};}bM=bO.handle;if(!bM){bO.handle=bM=function(bW){return typeof b!=="undefined"&&(!bW||b.event.triggered!==bW.type)?b.event.dispatch.apply(bM.elem,arguments):W;};bM.elem=bI;}bN=b.trim(bE(bN)).split(" ");for(bT=0;bT<bN.length;bT++){bS=w.exec(bN[bT])||[];bQ=bS[1];e=(bS[2]||"").split(".").sort();bP=b.event.special[bQ]||{};bQ=(bJ?bP.delegateType:bP.bindType)||bQ;bP=b.event.special[bQ]||{};bR=b.extend({type:bQ,origType:bS[1],data:bL,handler:bU,guid:bU.guid,selector:bJ,quick:bJ&&aj(bJ),namespace:e.join(".")},bG);bH=bV[bQ];if(!bH){bH=bV[bQ]=[];bH.delegateCount=0;if(!bP.setup||bP.setup.call(bI,bL,e,bM)===false){if(bI.addEventListener){bI.addEventListener(bQ,bM,false);}else{if(bI.attachEvent){bI.attachEvent("on"+bQ,bM);}}}}if(bP.add){bP.add.call(bI,bR);if(!bR.handler.guid){bR.handler.guid=bU.guid;}}if(bJ){bH.splice(bH.delegateCount++,0,bR);}else{bH.push(bR);}b.event.global[bQ]=true;}bI=null;},global:{},remove:function(bU,bP,bG,bS,bM){var bT=b.hasData(bU)&&b._data(bU),bQ,bI,bK,bW,bN,bL,bR,bH,bJ,bV,bO,e;if(!bT||!(bH=bT.events)){return;}bP=b.trim(bE(bP||"")).split(" ");for(bQ=0;bQ<bP.length;bQ++){bI=w.exec(bP[bQ])||[];bK=bW=bI[1];bN=bI[2];if(!bK){for(bK in bH){b.event.remove(bU,bK+bP[bQ],bG,bS,true);}continue;}bJ=b.event.special[bK]||{};bK=(bS?bJ.delegateType:bJ.bindType)||bK;bO=bH[bK]||[];bL=bO.length;bN=bN?new RegExp("(^|\\.)"+bN.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;for(bR=0;bR<bO.length;bR++){e=bO[bR];if((bM||bW===e.origType)&&(!bG||bG.guid===e.guid)&&(!bN||bN.test(e.namespace))&&(!bS||bS===e.selector||bS==="**"&&e.selector)){bO.splice(bR--,1);if(e.selector){bO.delegateCount--;}if(bJ.remove){bJ.remove.call(bU,e);}}}if(bO.length===0&&bL!==bO.length){if(!bJ.teardown||bJ.teardown.call(bU,bN)===false){b.removeEvent(bU,bK,bT.handle);}delete bH[bK];}}if(b.isEmptyObject(bH)){bV=bT.handle;if(bV){bV.elem=null;}b.removeData(bU,["events","handle"],true);}},customEvent:{"getData":true,"setData":true,"changeData":true},trigger:function(bG,bO,bL,bU){if(bL&&(bL.nodeType===3||bL.nodeType===8)){return;}var bR=bG.type||bG,bI=[],e,bH,bN,bS,bK,bJ,bQ,bP,bM,bT;if(ae.test(bR+b.event.triggered)){return;}if(bR.indexOf("!")>=0){bR=bR.slice(0,-1);bH=true;}if(bR.indexOf(".")>=0){bI=bR.split(".");bR=bI.shift();bI.sort();}if((!bL||b.event.customEvent[bR])&&!b.event.global[bR]){return;}bG=typeof bG==="object"?bG[b.expando]?bG:new b.Event(bR,bG):new b.Event(bR);bG.type=bR;bG.isTrigger=true;bG.exclusive=bH;bG.namespace=bI.join(".");bG.namespace_re=bG.namespace?new RegExp("(^|\\.)"+bI.join("\\.(?:.*\\.)?")+"(\\.|$)"):null;bJ=bR.indexOf(":")<0?"on"+bR:"";if(!bL){e=b.cache;for(bN in e){if(e[bN].events&&e[bN].events[bR]){b.event.trigger(bG,bO,e[bN].handle.elem,true);}}return;}bG.result=W;if(!bG.target){bG.target=bL;}bO=bO!=null?b.makeArray(bO):[];bO.unshift(bG);bQ=b.event.special[bR]||{};if(bQ.trigger&&bQ.trigger.apply(bL,bO)===false){return;}bM=[[bL,bQ.bindType||bR]];if(!bU&&!bQ.noBubble&&!b.isWindow(bL)){bT=bQ.delegateType||bR;bS=ae.test(bT+bR)?bL:bL.parentNode;bK=null;for(;bS;bS=bS.parentNode){bM.push([bS,bT]);bK=bS;}if(bK&&bK===bL.ownerDocument){bM.push([bK.defaultView||bK.parentWindow||bo,bT]);}}for(bN=0;bN<bM.length&&!bG.isPropagationStopped();bN++){bS=bM[bN][0];bG.type=bM[bN][1];bP=(b._data(bS,"events")||{})[bG.type]&&b._data(bS,"handle");if(bP){bP.apply(bS,bO);}bP=bJ&&bS[bJ];if(bP&&b.acceptData(bS)&&bP.apply(bS,bO)===false){bG.preventDefault();}}bG.type=bR;if(!bU&&!bG.isDefaultPrevented()){if((!bQ._default||bQ._default.apply(bL.ownerDocument,bO)===false)&&!(bR==="click"&&b.nodeName(bL,"a"))&&b.acceptData(bL)){if(bJ&&bL[bR]&&((bR!=="focus"&&bR!=="blur")||bG.target.offsetWidth!==0)&&!b.isWindow(bL)){bK=bL[bJ];if(bK){bL[bJ]=null;}b.event.triggered=bR;bL[bR]();b.event.triggered=W;if(bK){bL[bJ]=bK;}}}}return bG.result;},dispatch:function(bS){bS=b.event.fix(bS||bo.event);var bO=((b._data(this,"events")||{})[bS.type]||[]),bN=bO.delegateCount,bI=[].slice.call(arguments,0),bP=!bS.exclusive&&!bS.namespace,bK=b.event.special[bS.type]||{},bG=[],bU,bR,bJ,bL,bV,bT,bM,bH,e,bQ,bW;bI[0]=bS;bS.delegateTarget=this;if(bK.preDispatch&&bK.preDispatch.call(this,bS)===false){return;}if(bN&&!(bS.button&&bS.type==="click")){bL=b(this);bL.context=this.ownerDocument||this;for(bJ=bS.target;bJ!=this;bJ=bJ.parentNode||this){if(bJ.disabled!==true){bT={};bH=[];bL[0]=bJ;for(bU=0;bU<bN;bU++){e=bO[bU];bQ=e.selector;if(bT[bQ]===W){bT[bQ]=(e.quick?s(bJ,e.quick):bL.is(bQ));}if(bT[bQ]){bH.push(e);}}if(bH.length){bG.push({elem:bJ,matches:bH});}}}}if(bO.length>bN){bG.push({elem:this,matches:bO.slice(bN)});}for(bU=0;bU<bG.length&&!bS.isPropagationStopped();bU++){bM=bG[bU];bS.currentTarget=bM.elem;for(bR=0;bR<bM.matches.length&&!bS.isImmediatePropagationStopped();bR++){e=bM.matches[bR];if(bP||(!bS.namespace&&!e.namespace)||bS.namespace_re&&bS.namespace_re.test(e.namespace)){bS.data=e.data;bS.handleObj=e;bV=((b.event.special[e.origType]||{}).handle||e.handler).apply(bM.elem,bI);if(bV!==W){bS.result=bV;if(bV===false){bS.preventDefault();bS.stopPropagation();}}}}}if(bK.postDispatch){bK.postDispatch.call(this,bS);}return bS.result;},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(bG,e){if(bG.which==null){bG.which=e.charCode!=null?e.charCode:e.keyCode;}return bG;}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(bI,bH){var bJ,bK,e,bG=bH.button,bL=bH.fromElement;if(bI.pageX==null&&bH.clientX!=null){bJ=bI.target.ownerDocument||aG;bK=bJ.documentElement;e=bJ.body;bI.pageX=bH.clientX+(bK&&bK.scrollLeft||e&&e.scrollLeft||0)-(bK&&bK.clientLeft||e&&e.clientLeft||0);bI.pageY=bH.clientY+(bK&&bK.scrollTop||e&&e.scrollTop||0)-(bK&&bK.clientTop||e&&e.clientTop||0);}if(!bI.relatedTarget&&bL){bI.relatedTarget=bL===bI.target?bH.toElement:bL;}if(!bI.which&&bG!==W){bI.which=(bG&1?1:(bG&2?3:(bG&4?2:0)));}return bI;}},fix:function(bH){if(bH[b.expando]){return bH;}var bG,bK,e=bH,bI=b.event.fixHooks[bH.type]||{},bJ=bI.props?this.props.concat(bI.props):this.props;bH=b.Event(e);for(bG=bJ.length;bG;){bK=bJ[--bG];bH[bK]=e[bK];}if(!bH.target){bH.target=e.srcElement||aG;}if(bH.target.nodeType===3){bH.target=bH.target.parentNode;}if(bH.metaKey===W){bH.metaKey=bH.ctrlKey;}return bI.filter?bI.filter(bH,e):bH;},special:{ready:{setup:b.bindReady},load:{noBubble:true},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(bH,bG,e){if(b.isWindow(this)){this.onbeforeunload=e;}},teardown:function(bG,e){if(this.onbeforeunload===e){this.onbeforeunload=null;}}}},simulate:function(bH,bJ,bI,bG){var bK=b.extend(new b.Event(),bI,{type:bH,isSimulated:true,originalEvent:{}});if(bG){b.event.trigger(bK,null,bJ);}else{b.event.dispatch.call(bJ,bK);}if(bK.isDefaultPrevented()){bI.preventDefault();}}};b.event.handle=b.event.dispatch;b.removeEvent=aG.removeEventListener?function(bG,e,bH){if(bG.removeEventListener){bG.removeEventListener(e,bH,false);}}:function(bG,e,bH){if(bG.detachEvent){bG.detachEvent("on"+e,bH);}};b.Event=function(bG,e){if(!(this instanceof b.Event)){return new b.Event(bG,e);}if(bG&&bG.type){this.originalEvent=bG;this.type=bG.type;this.isDefaultPrevented=(bG.defaultPrevented||bG.returnValue===false||bG.getPreventDefault&&bG.getPreventDefault())?r:bw;}else{this.type=bG;}if(e){b.extend(this,e);}this.timeStamp=bG&&bG.timeStamp||b.now();this[b.expando]=true;};function bw(){return false;}function r(){return true;}b.Event.prototype={preventDefault:function(){this.isDefaultPrevented=r;var bG=this.originalEvent;if(!bG){return;}if(bG.preventDefault){bG.preventDefault();}else{bG.returnValue=false;}},stopPropagation:function(){this.isPropagationStopped=r;var bG=this.originalEvent;if(!bG){return;}if(bG.stopPropagation){bG.stopPropagation();}bG.cancelBubble=true;},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=r;this.stopPropagation();},isDefaultPrevented:bw,isPropagationStopped:bw,isImmediatePropagationStopped:bw};b.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(bG,e){b.event.special[bG]={delegateType:e,bindType:e,handle:function(bK){var bM=this,bL=bK.relatedTarget,bJ=bK.handleObj,bH=bJ.selector,bI;if(!bL||(bL!==bM&&!b.contains(bM,bL))){bK.type=bJ.origType;bI=bJ.handler.apply(this,arguments);bK.type=e;}return bI;}};});if(!b.support.submitBubbles){b.event.special.submit={setup:function(){if(b.nodeName(this,"form")){return false;}b.event.add(this,"click._submit keypress._submit",function(bI){var bH=bI.target,bG=b.nodeName(bH,"input")||b.nodeName(bH,"button")?bH.form:W;if(bG&&!bG._submit_attached){b.event.add(bG,"submit._submit",function(e){e._submit_bubble=true;});bG._submit_attached=true;}});},postDispatch:function(e){if(e._submit_bubble){delete e._submit_bubble;if(this.parentNode&&!e.isTrigger){b.event.simulate("submit",this.parentNode,e,true);}}},teardown:function(){if(b.nodeName(this,"form")){return false;}b.event.remove(this,"._submit");}};}if(!b.support.changeBubbles){b.event.special.change={setup:function(){if(bp.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio"){b.event.add(this,"propertychange._change",function(e){if(e.originalEvent.propertyName==="checked"){this._just_changed=true;}});b.event.add(this,"click._change",function(e){if(this._just_changed&&!e.isTrigger){this._just_changed=false;b.event.simulate("change",this,e,true);}});}return false;}b.event.add(this,"beforeactivate._change",function(bH){var bG=bH.target;if(bp.test(bG.nodeName)&&!bG._change_attached){b.event.add(bG,"change._change",function(e){if(this.parentNode&&!e.isSimulated&&!e.isTrigger){b.event.simulate("change",this.parentNode,e,true);}});bG._change_attached=true;}});},handle:function(bG){var e=bG.target;if(this!==e||bG.isSimulated||bG.isTrigger||(e.type!=="radio"&&e.type!=="checkbox")){return bG.handleObj.handler.apply(this,arguments);}},teardown:function(){b.event.remove(this,"._change");return bp.test(this.nodeName);}};}if(!b.support.focusinBubbles){b.each({focus:"focusin",blur:"focusout"},function(bI,e){var bG=0,bH=function(bJ){b.event.simulate(e,bJ.target,b.event.fix(bJ),true);};b.event.special[e]={setup:function(){if(bG++===0){aG.addEventListener(bI,bH,true);}},teardown:function(){if(--bG===0){aG.removeEventListener(bI,bH,true);}}};});}b.fn.extend({on:function(bH,e,bK,bJ,bG){var bL,bI;if(typeof bH==="object"){if(typeof e!=="string"){bK=bK||e;e=W;}for(bI in bH){this.on(bI,e,bK,bH[bI],bG);}return this;}if(bK==null&&bJ==null){bJ=e;bK=e=W;}else{if(bJ==null){if(typeof e==="string"){bJ=bK;bK=W;}else{bJ=bK;bK=e;e=W;}}}if(bJ===false){bJ=bw;}else{if(!bJ){return this;}}if(bG===1){bL=bJ;bJ=function(bM){b().off(bM);return bL.apply(this,arguments);};bJ.guid=bL.guid||(bL.guid=b.guid++);}return this.each(function(){b.event.add(this,bH,bJ,bK,e);});},one:function(bG,e,bI,bH){return this.on(bG,e,bI,bH,1);},off:function(bH,e,bJ){if(bH&&bH.preventDefault&&bH.handleObj){var bG=bH.handleObj;b(bH.delegateTarget).off(bG.namespace?bG.origType+"."+bG.namespace:bG.origType,bG.selector,bG.handler);return this;}if(typeof bH==="object"){for(var bI in bH){this.off(bI,e,bH[bI]);}return this;}if(e===false||typeof e==="function"){bJ=e;e=W;}if(bJ===false){bJ=bw;}return this.each(function(){b.event.remove(this,bH,bJ,e);});},bind:function(e,bH,bG){return this.on(e,null,bH,bG);},unbind:function(e,bG){return this.off(e,null,bG);},live:function(e,bH,bG){b(this.context).on(e,this.selector,bH,bG);return this;},die:function(e,bG){b(this.context).off(e,this.selector||"**",bG);return this;},delegate:function(e,bG,bI,bH){return this.on(bG,e,bI,bH);},undelegate:function(e,bG,bH){return arguments.length==1?this.off(e,"**"):this.off(bG,e,bH);},trigger:function(e,bG){return this.each(function(){b.event.trigger(e,bG,this);});},triggerHandler:function(e,bG){if(this[0]){return b.event.trigger(e,bG,this[0],true);}},toggle:function(bI){var bG=arguments,e=bI.guid||b.guid++,bH=0,bJ=function(bK){var bL=(b._data(this,"lastToggle"+bI.guid)||0)%bH;b._data(this,"lastToggle"+bI.guid,bL+1);bK.preventDefault();return bG[bL].apply(this,arguments)||false;};bJ.guid=e;while(bH<bG.length){bG[bH++].guid=e;}return this.click(bJ);},hover:function(e,bG){return this.mouseenter(e).mouseleave(bG||e);}});b.each(("blur focus focusin focusout load resize scroll unload click dblclick "+"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave "+"change select submit keydown keypress keyup error contextmenu").split(" "),function(bG,e){b.fn[e]=function(bI,bH){if(bH==null){bH=bI;bI=null;}return arguments.length>0?this.on(e,null,bI,bH):this.trigger(e);};if(b.attrFn){b.attrFn[e]=true;}if(a0.test(e)){b.event.fixHooks[e]=b.event.keyHooks;}if(br.test(e)){b.event.fixHooks[e]=b.event.mouseHooks;}});
/*!
    * Sizzle CSS Selector Engine
    *  Copyright 2011, The Dojo Foundation
    *  Released under the MIT, BSD, and GPL Licenses.
    *  More information: http://sizzlejs.com/
    */
(function(){var bS=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,bN="sizcache"+(Math.random()+"").replace(".",""),bT=0,bW=Object.prototype.toString,bM=false,bL=true,bV=/\\/g,bZ=/\r\n/g,b1=/\W/;[0,0].sort(function(){bL=false;return 0;});var bJ=function(b6,e,b9,ca){b9=b9||[];e=e||aG;var cc=e;if(e.nodeType!==1&&e.nodeType!==9){return[];}if(!b6||typeof b6!=="string"){return b9;}var b3,ce,ch,b2,cd,cg,cf,b8,b5=true,b4=bJ.isXML(e),b7=[],cb=b6;do{bS.exec("");b3=bS.exec(cb);if(b3){cb=b3[3];b7.push(b3[1]);if(b3[2]){b2=b3[3];break;}}}while(b3);if(b7.length>1&&bO.exec(b6)){if(b7.length===2&&bP.relative[b7[0]]){ce=bX(b7[0]+b7[1],e,ca);}else{ce=bP.relative[b7[0]]?[e]:bJ(b7.shift(),e);while(b7.length){b6=b7.shift();if(bP.relative[b6]){b6+=b7.shift();}ce=bX(b6,ce,ca);}}}else{if(!ca&&b7.length>1&&e.nodeType===9&&!b4&&bP.match.ID.test(b7[0])&&!bP.match.ID.test(b7[b7.length-1])){cd=bJ.find(b7.shift(),e,b4);e=cd.expr?bJ.filter(cd.expr,cd.set)[0]:cd.set[0];}if(e){cd=ca?{expr:b7.pop(),set:bQ(ca)}:bJ.find(b7.pop(),b7.length===1&&(b7[0]==="~"||b7[0]==="+")&&e.parentNode?e.parentNode:e,b4);ce=cd.expr?bJ.filter(cd.expr,cd.set):cd.set;if(b7.length>0){ch=bQ(ce);}else{b5=false;}while(b7.length){cg=b7.pop();cf=cg;if(!bP.relative[cg]){cg="";}else{cf=b7.pop();}if(cf==null){cf=e;}bP.relative[cg](ch,cf,b4);}}else{ch=b7=[];}}if(!ch){ch=ce;}if(!ch){bJ.error(cg||b6);}if(bW.call(ch)==="[object Array]"){if(!b5){b9.push.apply(b9,ch);}else{if(e&&e.nodeType===1){for(b8=0;ch[b8]!=null;b8++){if(ch[b8]&&(ch[b8]===true||ch[b8].nodeType===1&&bJ.contains(e,ch[b8]))){b9.push(ce[b8]);}}}else{for(b8=0;ch[b8]!=null;b8++){if(ch[b8]&&ch[b8].nodeType===1){b9.push(ce[b8]);}}}}}else{bQ(ch,b9);}if(b2){bJ(b2,cc,b9,ca);bJ.uniqueSort(b9);}return b9;};bJ.uniqueSort=function(b2){if(bU){bM=bL;b2.sort(bU);if(bM){for(var e=1;e<b2.length;e++){if(b2[e]===b2[e-1]){b2.splice(e--,1);}}}}return b2;};bJ.matches=function(e,b2){return bJ(e,null,null,b2);};bJ.matchesSelector=function(e,b2){return bJ(b2,null,null,[e]).length>0;};bJ.find=function(b8,e,b9){var b7,b3,b5,b4,b6,b2;if(!b8){return[];}for(b3=0,b5=bP.order.length;b3<b5;b3++){b6=bP.order[b3];if((b4=bP.leftMatch[b6].exec(b8))){b2=b4[1];b4.splice(1,1);if(b2.substr(b2.length-1)!=="\\"){b4[1]=(b4[1]||"").replace(bV,"");b7=bP.find[b6](b4,e,b9);if(b7!=null){b8=b8.replace(bP.match[b6],"");break;}}}}if(!b7){b7=typeof e.getElementsByTagName!=="undefined"?e.getElementsByTagName("*"):[];}return{set:b7,expr:b8};};bJ.filter=function(cc,cb,cf,b5){var b7,e,ca,ch,ce,b2,b4,b6,cd,b3=cc,cg=[],b9=cb,b8=cb&&cb[0]&&bJ.isXML(cb[0]);while(cc&&cb.length){for(ca in bP.filter){if((b7=bP.leftMatch[ca].exec(cc))!=null&&b7[2]){b2=bP.filter[ca];b4=b7[1];e=false;b7.splice(1,1);if(b4.substr(b4.length-1)==="\\"){continue;}if(b9===cg){cg=[];}if(bP.preFilter[ca]){b7=bP.preFilter[ca](b7,b9,cf,cg,b5,b8);if(!b7){e=ch=true;}else{if(b7===true){continue;}}}if(b7){for(b6=0;(ce=b9[b6])!=null;b6++){if(ce){ch=b2(ce,b7,b6,b9);cd=b5^ch;if(cf&&ch!=null){if(cd){e=true;}else{b9[b6]=false;}}else{if(cd){cg.push(ce);e=true;}}}}}if(ch!==W){if(!cf){b9=cg;}cc=cc.replace(bP.match[ca],"");if(!e){return[];}break;}}}if(cc===b3){if(e==null){bJ.error(cc);}else{break;}}b3=cc;}return b9;};bJ.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e);};var bH=bJ.getText=function(b5){var b3,b4,e=b5.nodeType,b2="";if(e){if(e===1||e===9||e===11){if(typeof b5.textContent==="string"){return b5.textContent;}else{if(typeof b5.innerText==="string"){return b5.innerText.replace(bZ,"");}else{for(b5=b5.firstChild;b5;b5=b5.nextSibling){b2+=bH(b5);}}}}else{if(e===3||e===4){return b5.nodeValue;}}}else{for(b3=0;(b4=b5[b3]);b3++){if(b4.nodeType!==8){b2+=bH(b4);}}}return b2;};var bP=bJ.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href");},type:function(e){return e.getAttribute("type");}},relative:{"+":function(b7,b2){var b4=typeof b2==="string",b6=b4&&!b1.test(b2),b8=b4&&!b6;if(b6){b2=b2.toLowerCase();}for(var b3=0,e=b7.length,b5;b3<e;b3++){if((b5=b7[b3])){while((b5=b5.previousSibling)&&b5.nodeType!==1){}b7[b3]=b8||b5&&b5.nodeName.toLowerCase()===b2?b5||false:b5===b2;}}if(b8){bJ.filter(b2,b7,true);}},">":function(b7,b2){var b6,b5=typeof b2==="string",b3=0,e=b7.length;if(b5&&!b1.test(b2)){b2=b2.toLowerCase();for(;b3<e;b3++){b6=b7[b3];if(b6){var b4=b6.parentNode;b7[b3]=b4.nodeName.toLowerCase()===b2?b4:false;}}}else{for(;b3<e;b3++){b6=b7[b3];if(b6){b7[b3]=b5?b6.parentNode:b6.parentNode===b2;}}if(b5){bJ.filter(b2,b7,true);}}},"":function(b4,b2,b6){var b5,b3=bT++,e=bY;if(typeof b2==="string"&&!b1.test(b2)){b2=b2.toLowerCase();b5=b2;e=bG;}e("parentNode",b2,b3,b4,b5,b6);},"~":function(b4,b2,b6){var b5,b3=bT++,e=bY;if(typeof b2==="string"&&!b1.test(b2)){b2=b2.toLowerCase();b5=b2;e=bG;}e("previousSibling",b2,b3,b4,b5,b6);}},find:{ID:function(b2,b3,b4){if(typeof b3.getElementById!=="undefined"&&!b4){var e=b3.getElementById(b2[1]);return e&&e.parentNode?[e]:[];}},NAME:function(b3,b6){if(typeof b6.getElementsByName!=="undefined"){var b2=[],b5=b6.getElementsByName(b3[1]);for(var b4=0,e=b5.length;b4<e;b4++){if(b5[b4].getAttribute("name")===b3[1]){b2.push(b5[b4]);}}return b2.length===0?null:b2;}},TAG:function(e,b2){if(typeof b2.getElementsByTagName!=="undefined"){return b2.getElementsByTagName(e[1]);}}},preFilter:{CLASS:function(b4,b2,b3,e,b7,b8){b4=" "+b4[1].replace(bV,"")+" ";if(b8){return b4;}for(var b5=0,b6;(b6=b2[b5])!=null;b5++){if(b6){if(b7^(b6.className&&(" "+b6.className+" ").replace(/[\t\n\r]/g," ").indexOf(b4)>=0)){if(!b3){e.push(b6);}}else{if(b3){b2[b5]=false;}}}}return false;},ID:function(e){return e[1].replace(bV,"");},TAG:function(b2,e){return b2[1].replace(bV,"").toLowerCase();},CHILD:function(e){if(e[1]==="nth"){if(!e[2]){bJ.error(e[0]);}e[2]=e[2].replace(/^\+|\s*/g,"");var b2=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(e[2]==="even"&&"2n"||e[2]==="odd"&&"2n+1"||!/\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=(b2[1]+(b2[2]||1))-0;e[3]=b2[3]-0;}else{if(e[2]){bJ.error(e[0]);}}e[0]=bT++;return e;},ATTR:function(b5,b2,b3,e,b6,b7){var b4=b5[1]=b5[1].replace(bV,"");if(!b7&&bP.attrMap[b4]){b5[1]=bP.attrMap[b4];}b5[4]=(b5[4]||b5[5]||"").replace(bV,"");if(b5[2]==="~="){b5[4]=" "+b5[4]+" ";}return b5;},PSEUDO:function(b5,b2,b3,e,b6){if(b5[1]==="not"){if((bS.exec(b5[3])||"").length>1||/^\w/.test(b5[3])){b5[3]=bJ(b5[3],null,null,b2);}else{var b4=bJ.filter(b5[3],b2,b3,true^b6);if(!b3){e.push.apply(e,b4);}return false;}}else{if(bP.match.POS.test(b5[0])||bP.match.CHILD.test(b5[0])){return true;}}return b5;},POS:function(e){e.unshift(true);return e;}},filters:{enabled:function(e){return e.disabled===false&&e.type!=="hidden";},disabled:function(e){return e.disabled===true;},checked:function(e){return e.checked===true;},selected:function(e){if(e.parentNode){e.parentNode.selectedIndex;}return e.selected===true;},parent:function(e){return !!e.firstChild;},empty:function(e){return !e.firstChild;},has:function(b3,b2,e){return !!bJ(e[3],b3).length;},header:function(e){return(/h\d/i).test(e.nodeName);},text:function(b3){var e=b3.getAttribute("type"),b2=b3.type;return b3.nodeName.toLowerCase()==="input"&&"text"===b2&&(e===b2||e===null);},radio:function(e){return e.nodeName.toLowerCase()==="input"&&"radio"===e.type;},checkbox:function(e){return e.nodeName.toLowerCase()==="input"&&"checkbox"===e.type;},file:function(e){return e.nodeName.toLowerCase()==="input"&&"file"===e.type;},password:function(e){return e.nodeName.toLowerCase()==="input"&&"password"===e.type;},submit:function(b2){var e=b2.nodeName.toLowerCase();return(e==="input"||e==="button")&&"submit"===b2.type;},image:function(e){return e.nodeName.toLowerCase()==="input"&&"image"===e.type;},reset:function(b2){var e=b2.nodeName.toLowerCase();return(e==="input"||e==="button")&&"reset"===b2.type;},button:function(b2){var e=b2.nodeName.toLowerCase();return e==="input"&&"button"===b2.type||e==="button";},input:function(e){return(/input|select|textarea|button/i).test(e.nodeName);},focus:function(e){return e===e.ownerDocument.activeElement;}},setFilters:{first:function(b2,e){return e===0;},last:function(b3,b2,e,b4){return b2===b4.length-1;},even:function(b2,e){return e%2===0;},odd:function(b2,e){return e%2===1;},lt:function(b3,b2,e){return b2<e[3]-0;},gt:function(b3,b2,e){return b2>e[3]-0;},nth:function(b3,b2,e){return e[3]-0===b2;},eq:function(b3,b2,e){return e[3]-0===b2;}},filter:{PSEUDO:function(b3,b8,b7,b9){var e=b8[1],b2=bP.filters[e];if(b2){return b2(b3,b7,b8,b9);}else{if(e==="contains"){return(b3.textContent||b3.innerText||bH([b3])||"").indexOf(b8[3])>=0;}else{if(e==="not"){var b4=b8[3];for(var b6=0,b5=b4.length;b6<b5;b6++){if(b4[b6]===b3){return false;}}return true;}else{bJ.error(e);}}}},CHILD:function(b3,b5){var b4,cb,b7,ca,e,b6,b9,b8=b5[1],b2=b3;switch(b8){case"only":case"first":while((b2=b2.previousSibling)){if(b2.nodeType===1){return false;}}if(b8==="first"){return true;}b2=b3;case"last":while((b2=b2.nextSibling)){if(b2.nodeType===1){return false;}}return true;case"nth":b4=b5[2];cb=b5[3];if(b4===1&&cb===0){return true;}b7=b5[0];ca=b3.parentNode;if(ca&&(ca[bN]!==b7||!b3.nodeIndex)){b6=0;for(b2=ca.firstChild;b2;b2=b2.nextSibling){if(b2.nodeType===1){b2.nodeIndex=++b6;}}ca[bN]=b7;}b9=b3.nodeIndex-cb;if(b4===0){return b9===0;}else{return(b9%b4===0&&b9/b4>=0);}}},ID:function(b2,e){return b2.nodeType===1&&b2.getAttribute("id")===e;},TAG:function(b2,e){return(e==="*"&&b2.nodeType===1)||!!b2.nodeName&&b2.nodeName.toLowerCase()===e;},CLASS:function(b2,e){return(" "+(b2.className||b2.getAttribute("class"))+" ").indexOf(e)>-1;},ATTR:function(b6,b4){var b3=b4[1],e=bJ.attr?bJ.attr(b6,b3):bP.attrHandle[b3]?bP.attrHandle[b3](b6):b6[b3]!=null?b6[b3]:b6.getAttribute(b3),b7=e+"",b5=b4[2],b2=b4[4];return e==null?b5==="!=":!b5&&bJ.attr?e!=null:b5==="="?b7===b2:b5==="*="?b7.indexOf(b2)>=0:b5==="~="?(" "+b7+" ").indexOf(b2)>=0:!b2?b7&&e!==false:b5==="!="?b7!==b2:b5==="^="?b7.indexOf(b2)===0:b5==="$="?b7.substr(b7.length-b2.length)===b2:b5==="|="?b7===b2||b7.substr(0,b2.length+1)===b2+"-":false;},POS:function(b5,b2,b3,b6){var e=b2[2],b4=bP.setFilters[e];if(b4){return b4(b5,b3,b2,b6);}}}};var bO=bP.match.POS,bI=function(b2,e){return"\\"+(e-0+1);};for(var bK in bP.match){bP.match[bK]=new RegExp(bP.match[bK].source+(/(?![^\[]*\])(?![^\(]*\))/.source));bP.leftMatch[bK]=new RegExp(/(^(?:.|\r|\n)*?)/.source+bP.match[bK].source.replace(/\\(\d+)/g,bI));}bP.match.globalPOS=bO;var bQ=function(b2,e){b2=Array.prototype.slice.call(b2,0);if(e){e.push.apply(e,b2);return e;}return b2;};try{Array.prototype.slice.call(aG.documentElement.childNodes,0)[0].nodeType;}catch(b0){bQ=function(b5,b4){var b3=0,b2=b4||[];if(bW.call(b5)==="[object Array]"){Array.prototype.push.apply(b2,b5);}else{if(typeof b5.length==="number"){for(var e=b5.length;b3<e;b3++){b2.push(b5[b3]);}}else{for(;b5[b3];b3++){b2.push(b5[b3]);}}}return b2;};}var bU,bR;if(aG.documentElement.compareDocumentPosition){bU=function(b2,e){if(b2===e){bM=true;return 0;}if(!b2.compareDocumentPosition||!e.compareDocumentPosition){return b2.compareDocumentPosition?-1:1;}return b2.compareDocumentPosition(e)&4?-1:1;};}else{bU=function(b9,b8){if(b9===b8){bM=true;return 0;}else{if(b9.sourceIndex&&b8.sourceIndex){return b9.sourceIndex-b8.sourceIndex;}}var b6,b2,b3=[],e=[],b5=b9.parentNode,b7=b8.parentNode,ca=b5;if(b5===b7){return bR(b9,b8);}else{if(!b5){return -1;}else{if(!b7){return 1;}}}while(ca){b3.unshift(ca);ca=ca.parentNode;}ca=b7;while(ca){e.unshift(ca);ca=ca.parentNode;}b6=b3.length;b2=e.length;for(var b4=0;b4<b6&&b4<b2;b4++){if(b3[b4]!==e[b4]){return bR(b3[b4],e[b4]);}}return b4===b6?bR(b9,e[b4],-1):bR(b3[b4],b8,1);};bR=function(b2,e,b3){if(b2===e){return b3;}var b4=b2.nextSibling;while(b4){if(b4===e){return -1;}b4=b4.nextSibling;}return 1;};}(function(){var b2=aG.createElement("div"),b3="script"+(new Date()).getTime(),e=aG.documentElement;b2.innerHTML="<a name='"+b3+"'/>";e.insertBefore(b2,e.firstChild);if(aG.getElementById(b3)){bP.find.ID=function(b5,b6,b7){if(typeof b6.getElementById!=="undefined"&&!b7){var b4=b6.getElementById(b5[1]);return b4?b4.id===b5[1]||typeof b4.getAttributeNode!=="undefined"&&b4.getAttributeNode("id").nodeValue===b5[1]?[b4]:W:[];}};bP.filter.ID=function(b6,b4){var b5=typeof b6.getAttributeNode!=="undefined"&&b6.getAttributeNode("id");return b6.nodeType===1&&b5&&b5.nodeValue===b4;};}e.removeChild(b2);e=b2=null;})();(function(){var e=aG.createElement("div");e.appendChild(aG.createComment(""));if(e.getElementsByTagName("*").length>0){bP.find.TAG=function(b2,b6){var b5=b6.getElementsByTagName(b2[1]);if(b2[1]==="*"){var b4=[];for(var b3=0;b5[b3];b3++){if(b5[b3].nodeType===1){b4.push(b5[b3]);}}b5=b4;}return b5;};}e.innerHTML="<a href='#'></a>";if(e.firstChild&&typeof e.firstChild.getAttribute!=="undefined"&&e.firstChild.getAttribute("href")!=="#"){bP.attrHandle.href=function(b2){return b2.getAttribute("href",2);};}e=null;})();if(aG.querySelectorAll){(function(){var e=bJ,b4=aG.createElement("div"),b3="__sizzle__";b4.innerHTML="<p class='TEST'></p>";if(b4.querySelectorAll&&b4.querySelectorAll(".TEST").length===0){return;}bJ=function(cf,b6,ca,ce){b6=b6||aG;if(!ce&&!bJ.isXML(b6)){var cd=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(cf);if(cd&&(b6.nodeType===1||b6.nodeType===9)){if(cd[1]){return bQ(b6.getElementsByTagName(cf),ca);}else{if(cd[2]&&bP.find.CLASS&&b6.getElementsByClassName){return bQ(b6.getElementsByClassName(cd[2]),ca);}}}if(b6.nodeType===9){if(cf==="body"&&b6.body){return bQ([b6.body],ca);}else{if(cd&&cd[3]){var b9=b6.getElementById(cd[3]);if(b9&&b9.parentNode){if(b9.id===cd[3]){return bQ([b9],ca);}}else{return bQ([],ca);}}}try{return bQ(b6.querySelectorAll(cf),ca);}catch(cb){}}else{if(b6.nodeType===1&&b6.nodeName.toLowerCase()!=="object"){var b7=b6,b8=b6.getAttribute("id"),b5=b8||b3,ch=b6.parentNode,cg=/^\s*[+~]/.test(cf);if(!b8){b6.setAttribute("id",b5);}else{b5=b5.replace(/'/g,"\\$&");}if(cg&&ch){b6=b6.parentNode;}try{if(!cg||ch){return bQ(b6.querySelectorAll("[id='"+b5+"'] "+cf),ca);}}catch(cc){}finally{if(!b8){b7.removeAttribute("id");}}}}}return e(cf,b6,ca,ce);};for(var b2 in e){bJ[b2]=e[b2];}b4=null;})();}(function(){var e=aG.documentElement,b3=e.matchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.msMatchesSelector;if(b3){var b5=!b3.call(aG.createElement("div"),"div"),b2=false;try{b3.call(aG.documentElement,"[test!='']:sizzle");}catch(b4){b2=true;}bJ.matchesSelector=function(b7,b9){b9=b9.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!bJ.isXML(b7)){try{if(b2||!bP.match.PSEUDO.test(b9)&&!/!=/.test(b9)){var b6=b3.call(b7,b9);if(b6||!b5||b7.document&&b7.document.nodeType!==11){return b6;}}}catch(b8){}}return bJ(b9,null,null,[b7]).length>0;};}})();(function(){var e=aG.createElement("div");e.innerHTML="<div class='test e'></div><div class='test'></div>";if(!e.getElementsByClassName||e.getElementsByClassName("e").length===0){return;}e.lastChild.className="e";if(e.getElementsByClassName("e").length===1){return;}bP.order.splice(1,0,"CLASS");bP.find.CLASS=function(b2,b3,b4){if(typeof b3.getElementsByClassName!=="undefined"&&!b4){return b3.getElementsByClassName(b2[1]);}};e=null;})();function bG(b2,b7,b6,ca,b8,b9){for(var b4=0,b3=ca.length;b4<b3;b4++){var e=ca[b4];if(e){var b5=false;e=e[b2];while(e){if(e[bN]===b6){b5=ca[e.sizset];break;}if(e.nodeType===1&&!b9){e[bN]=b6;e.sizset=b4;}if(e.nodeName.toLowerCase()===b7){b5=e;break;}e=e[b2];}ca[b4]=b5;}}}function bY(b2,b7,b6,ca,b8,b9){for(var b4=0,b3=ca.length;b4<b3;b4++){var e=ca[b4];if(e){var b5=false;e=e[b2];while(e){if(e[bN]===b6){b5=ca[e.sizset];break;}if(e.nodeType===1){if(!b9){e[bN]=b6;e.sizset=b4;}if(typeof b7!=="string"){if(e===b7){b5=true;break;}}else{if(bJ.filter(b7,[e]).length>0){b5=e;break;}}}e=e[b2];}ca[b4]=b5;}}}if(aG.documentElement.contains){bJ.contains=function(b2,e){return b2!==e&&(b2.contains?b2.contains(e):true);};}else{if(aG.documentElement.compareDocumentPosition){bJ.contains=function(b2,e){return !!(b2.compareDocumentPosition(e)&16);};}else{bJ.contains=function(){return false;};}}bJ.isXML=function(e){var b2=(e?e.ownerDocument||e:0).documentElement;return b2?b2.nodeName!=="HTML":false;};var bX=function(b3,e,b7){var b6,b8=[],b5="",b9=e.nodeType?[e]:e;while((b6=bP.match.PSEUDO.exec(b3))){b5+=b6[0];b3=b3.replace(bP.match.PSEUDO,"");}b3=bP.relative[b3]?b3+"*":b3;for(var b4=0,b2=b9.length;b4<b2;b4++){bJ(b3,b9[b4],b8,b7);}return bJ.filter(b5,b8);};bJ.attr=b.attr;bJ.selectors.attrMap={};b.find=bJ;b.expr=bJ.selectors;b.expr[":"]=b.expr.filters;b.unique=bJ.uniqueSort;b.text=bJ.getText;b.isXMLDoc=bJ.isXML;b.contains=bJ.contains;})();var am=/Until$/,aC=/^(?:parents|prevUntil|prevAll)/,bm=/,/,bA=/^.[^:#\[\.,]*$/,aa=Array.prototype.slice,S=b.expr.match.globalPOS,aJ={children:true,contents:true,next:true,prev:true};b.fn.extend({find:function(e){var bH=this,bJ,bG;if(typeof e!=="string"){return b(e).filter(function(){for(bJ=0,bG=bH.length;bJ<bG;bJ++){if(b.contains(bH[bJ],this)){return true;}}});}var bI=this.pushStack("","find",e),bL,bM,bK;for(bJ=0,bG=this.length;bJ<bG;bJ++){bL=bI.length;b.find(e,this[bJ],bI);if(bJ>0){for(bM=bL;bM<bI.length;bM++){for(bK=0;bK<bL;bK++){if(bI[bK]===bI[bM]){bI.splice(bM--,1);break;}}}}}return bI;},has:function(bG){var e=b(bG);return this.filter(function(){for(var bI=0,bH=e.length;bI<bH;bI++){if(b.contains(this,e[bI])){return true;}}});},not:function(e){return this.pushStack(aS(this,e,false),"not",e);},filter:function(e){return this.pushStack(aS(this,e,true),"filter",e);},is:function(e){return !!e&&(typeof e==="string"?S.test(e)?b(e,this.context).index(this[0])>=0:b.filter(e,this).length>0:this.filter(e).length>0);},closest:function(bJ,bI){var bG=[],bH,e,bK=this[0];if(b.isArray(bJ)){var bM=1;while(bK&&bK.ownerDocument&&bK!==bI){for(bH=0;bH<bJ.length;bH++){if(b(bK).is(bJ[bH])){bG.push({selector:bJ[bH],elem:bK,level:bM});}}bK=bK.parentNode;bM++;}return bG;}var bL=S.test(bJ)||typeof bJ!=="string"?b(bJ,bI||this.context):0;for(bH=0,e=this.length;bH<e;bH++){bK=this[bH];while(bK){if(bL?bL.index(bK)>-1:b.find.matchesSelector(bK,bJ)){bG.push(bK);break;}else{bK=bK.parentNode;if(!bK||!bK.ownerDocument||bK===bI||bK.nodeType===11){break;}}}}bG=bG.length>1?b.unique(bG):bG;return this.pushStack(bG,"closest",bJ);},index:function(e){if(!e){return(this[0]&&this[0].parentNode)?this.prevAll().length:-1;}if(typeof e==="string"){return b.inArray(this[0],b(e));}return b.inArray(e.jquery?e[0]:e,this);},add:function(e,bG){var bI=typeof e==="string"?b(e,bG):b.makeArray(e&&e.nodeType?[e]:e),bH=b.merge(this.get(),bI);return this.pushStack(M(bI[0])||M(bH[0])?bH:b.unique(bH));},andSelf:function(){return this.add(this.prevObject);}});function M(e){return !e||!e.parentNode||e.parentNode.nodeType===11;}b.each({parent:function(bG){var e=bG.parentNode;return e&&e.nodeType!==11?e:null;},parents:function(e){return b.dir(e,"parentNode");},parentsUntil:function(bG,e,bH){return b.dir(bG,"parentNode",bH);},next:function(e){return b.nth(e,2,"nextSibling");},prev:function(e){return b.nth(e,2,"previousSibling");},nextAll:function(e){return b.dir(e,"nextSibling");},prevAll:function(e){return b.dir(e,"previousSibling");},nextUntil:function(bG,e,bH){return b.dir(bG,"nextSibling",bH);},prevUntil:function(bG,e,bH){return b.dir(bG,"previousSibling",bH);},siblings:function(e){return b.sibling((e.parentNode||{}).firstChild,e);},children:function(e){return b.sibling(e.firstChild);},contents:function(e){return b.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:b.makeArray(e.childNodes);}},function(e,bG){b.fn[e]=function(bJ,bH){var bI=b.map(this,bG,bJ);if(!am.test(e)){bH=bJ;}if(bH&&typeof bH==="string"){bI=b.filter(bH,bI);}bI=this.length>1&&!aJ[e]?b.unique(bI):bI;if((this.length>1||bm.test(bH))&&aC.test(e)){bI=bI.reverse();}return this.pushStack(bI,e,aa.call(arguments).join(","));};});b.extend({filter:function(bH,e,bG){if(bG){bH=":not("+bH+")";}return e.length===1?b.find.matchesSelector(e[0],bH)?[e[0]]:[]:b.find.matches(bH,e);},dir:function(bH,bG,bJ){var e=[],bI=bH[bG];while(bI&&bI.nodeType!==9&&(bJ===W||bI.nodeType!==1||!b(bI).is(bJ))){if(bI.nodeType===1){e.push(bI);}bI=bI[bG];}return e;},nth:function(bJ,e,bH,bI){e=e||1;var bG=0;for(;bJ;bJ=bJ[bH]){if(bJ.nodeType===1&&++bG===e){break;}}return bJ;},sibling:function(bH,bG){var e=[];for(;bH;bH=bH.nextSibling){if(bH.nodeType===1&&bH!==bG){e.push(bH);}}return e;}});function aS(bI,bH,e){bH=bH||0;if(b.isFunction(bH)){return b.grep(bI,function(bK,bJ){var bL=!!bH.call(bK,bJ,bK);return bL===e;});}else{if(bH.nodeType){return b.grep(bI,function(bK,bJ){return(bK===bH)===e;});}else{if(typeof bH==="string"){var bG=b.grep(bI,function(bJ){return bJ.nodeType===1;});if(bA.test(bH)){return b.filter(bH,bG,!e);}else{bH=b.filter(bH,bG);}}}}return b.grep(bI,function(bK,bJ){return(b.inArray(bK,bH)>=0)===e;});}function a(e){var bH=a3.split("|"),bG=e.createDocumentFragment();if(bG.createElement){while(bH.length){bG.createElement(bH.pop());}}return bG;}var a3="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|"+"header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",at=/ jQuery\d+="(?:\d+|null)"/g,aD=/^\s+/,ac=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,f=/<([\w:]+)/,G=/<tbody/i,ah=/<|&#?\w+;/,ap=/<(?:script|style)/i,Z=/<(?:script|object|embed|option|style)/i,au=new RegExp("<(?:"+a3+")[\\s/>]","i"),z=/checked\s*(?:[^=]|=\s*.checked.)/i,by=/\/(java|ecma)script/i,aZ=/^\s*<!(?:\[CDATA\[|\-\-)/,aI={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},an=a(aG);aI.optgroup=aI.option;aI.tbody=aI.tfoot=aI.colgroup=aI.caption=aI.thead;aI.th=aI.td;if(!b.support.htmlSerialize){aI._default=[1,"div<div>","</div>"];}b.fn.extend({text:function(e){return b.access(this,function(bG){return bG===W?b.text(this):this.empty().append((this[0]&&this[0].ownerDocument||aG).createTextNode(bG));},null,e,arguments.length);},wrapAll:function(e){if(b.isFunction(e)){return this.each(function(bH){b(this).wrapAll(e.call(this,bH));});}if(this[0]){var bG=b(e,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){bG.insertBefore(this[0]);}bG.map(function(){var bH=this;while(bH.firstChild&&bH.firstChild.nodeType===1){bH=bH.firstChild;}return bH;}).append(this);}return this;},wrapInner:function(e){if(b.isFunction(e)){return this.each(function(bG){b(this).wrapInner(e.call(this,bG));});}return this.each(function(){var bG=b(this),bH=bG.contents();if(bH.length){bH.wrapAll(e);}else{bG.append(e);}});},wrap:function(e){var bG=b.isFunction(e);return this.each(function(bH){b(this).wrapAll(bG?e.call(this,bH):e);});},unwrap:function(){return this.parent().each(function(){if(!b.nodeName(this,"body")){b(this).replaceWith(this.childNodes);}}).end();},append:function(){return this.domManip(arguments,true,function(e){if(this.nodeType===1){this.appendChild(e);}});},prepend:function(){return this.domManip(arguments,true,function(e){if(this.nodeType===1){this.insertBefore(e,this.firstChild);}});},before:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,false,function(bG){this.parentNode.insertBefore(bG,this);});}else{if(arguments.length){var e=b.clean(arguments);e.push.apply(e,this.toArray());return this.pushStack(e,"before",arguments);}}},after:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,false,function(bG){this.parentNode.insertBefore(bG,this.nextSibling);});}else{if(arguments.length){var e=this.pushStack(this,"after",arguments);e.push.apply(e,b.clean(arguments));return e;}}},remove:function(e,bI){for(var bG=0,bH;(bH=this[bG])!=null;bG++){if(!e||b.filter(e,[bH]).length){if(!bI&&bH.nodeType===1){b.cleanData(bH.getElementsByTagName("*"));b.cleanData([bH]);}if(bH.parentNode){bH.parentNode.removeChild(bH);}}}return this;},empty:function(){for(var e=0,bG;(bG=this[e])!=null;e++){if(bG.nodeType===1){b.cleanData(bG.getElementsByTagName("*"));}while(bG.firstChild){bG.removeChild(bG.firstChild);}}return this;},clone:function(bG,e){bG=bG==null?false:bG;e=e==null?bG:e;return this.map(function(){return b.clone(this,bG,e);});},html:function(e){return b.access(this,function(bJ){var bI=this[0]||{},bH=0,bG=this.length;if(bJ===W){return bI.nodeType===1?bI.innerHTML.replace(at,""):null;}if(typeof bJ==="string"&&!ap.test(bJ)&&(b.support.leadingWhitespace||!aD.test(bJ))&&!aI[(f.exec(bJ)||["",""])[1].toLowerCase()]){bJ=bJ.replace(ac,"<$1></$2>");try{for(;bH<bG;bH++){bI=this[bH]||{};if(bI.nodeType===1){b.cleanData(bI.getElementsByTagName("*"));bI.innerHTML=bJ;}}bI=0;}catch(bK){}}if(bI){this.empty().append(bJ);}},null,e,arguments.length);},replaceWith:function(e){if(this[0]&&this[0].parentNode){if(b.isFunction(e)){return this.each(function(bI){var bH=b(this),bG=bH.html();bH.replaceWith(e.call(this,bI,bG));});}if(typeof e!=="string"){e=b(e).detach();}return this.each(function(){var bH=this.nextSibling,bG=this.parentNode;b(this).remove();if(bH){b(bH).before(e);}else{b(bG).append(e);}});}else{return this.length?this.pushStack(b(b.isFunction(e)?e():e),"replaceWith",e):this;}},detach:function(e){return this.remove(e,true);},domManip:function(bM,bQ,bP){var bI,bJ,bL,bO,bN=bM[0],bG=[];if(!b.support.checkClone&&arguments.length===3&&typeof bN==="string"&&z.test(bN)){return this.each(function(){b(this).domManip(bM,bQ,bP,true);});}if(b.isFunction(bN)){return this.each(function(bS){var bR=b(this);bM[0]=bN.call(this,bS,bQ?bR.html():W);bR.domManip(bM,bQ,bP);});}if(this[0]){bO=bN&&bN.parentNode;if(b.support.parentNode&&bO&&bO.nodeType===11&&bO.childNodes.length===this.length){bI={fragment:bO};}else{bI=b.buildFragment(bM,this,bG);}bL=bI.fragment;if(bL.childNodes.length===1){bJ=bL=bL.firstChild;}else{bJ=bL.firstChild;}if(bJ){bQ=bQ&&b.nodeName(bJ,"tr");for(var bH=0,e=this.length,bK=e-1;bH<e;bH++){bP.call(bQ?bn(this[bH],bJ):this[bH],bI.cacheable||(e>1&&bH<bK)?b.clone(bL,true,true):bL);}}if(bG.length){b.each(bG,function(bR,bS){if(bS.src){b.ajax({type:"GET",global:false,url:bS.src,async:false,dataType:"script"});}else{b.globalEval((bS.text||bS.textContent||bS.innerHTML||"").replace(aZ,"/*$0*/"));}if(bS.parentNode){bS.parentNode.removeChild(bS);}});}}return this;}});function bn(e,bG){return b.nodeName(e,"table")?(e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody"))):e;}function D(bM,bG){if(bG.nodeType!==1||!b.hasData(bM)){return;}var bJ,bI,e,bL=b._data(bM),bK=b._data(bG,bL),bH=bL.events;if(bH){delete bK.handle;bK.events={};for(bJ in bH){for(bI=0,e=bH[bJ].length;bI<e;bI++){b.event.add(bG,bJ,bH[bJ][bI]);}}}if(bK.data){bK.data=b.extend({},bK.data);}}function av(bG,e){var bH;if(e.nodeType!==1){return;}if(e.clearAttributes){e.clearAttributes();}if(e.mergeAttributes){e.mergeAttributes(bG);}bH=e.nodeName.toLowerCase();if(bH==="object"){e.outerHTML=bG.outerHTML;}else{if(bH==="input"&&(bG.type==="checkbox"||bG.type==="radio")){if(bG.checked){e.defaultChecked=e.checked=bG.checked;}if(e.value!==bG.value){e.value=bG.value;}}else{if(bH==="option"){e.selected=bG.defaultSelected;}else{if(bH==="input"||bH==="textarea"){e.defaultValue=bG.defaultValue;}else{if(bH==="script"&&e.text!==bG.text){e.text=bG.text;}}}}}e.removeAttribute(b.expando);e.removeAttribute("_submit_attached");e.removeAttribute("_change_attached");}b.buildFragment=function(bK,bI,bG){var bJ,e,bH,bL,bM=bK[0];if(bI&&bI[0]){bL=bI[0].ownerDocument||bI[0];}if(!bL.createDocumentFragment){bL=aG;}if(bK.length===1&&typeof bM==="string"&&bM.length<512&&bL===aG&&bM.charAt(0)==="<"&&!Z.test(bM)&&(b.support.checkClone||!z.test(bM))&&(b.support.html5Clone||!au.test(bM))){e=true;bH=b.fragments[bM];if(bH&&bH!==1){bJ=bH;}}if(!bJ){bJ=bL.createDocumentFragment();b.clean(bK,bL,bJ,bG);}if(e){b.fragments[bM]=bH?bJ:1;}return{fragment:bJ,cacheable:e};};b.fragments={};b.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,bG){b.fn[e]=function(bH){var bK=[],bN=b(bH),bM=this.length===1&&this[0].parentNode;if(bM&&bM.nodeType===11&&bM.childNodes.length===1&&bN.length===1){bN[bG](this[0]);return this;}else{for(var bL=0,bI=bN.length;bL<bI;bL++){var bJ=(bL>0?this.clone(true):this).get();b(bN[bL])[bG](bJ);bK=bK.concat(bJ);}return this.pushStack(bK,e,bN.selector);}};});function bs(e){if(typeof e.getElementsByTagName!=="undefined"){return e.getElementsByTagName("*");}else{if(typeof e.querySelectorAll!=="undefined"){return e.querySelectorAll("*");}else{return[];}}}function aK(e){if(e.type==="checkbox"||e.type==="radio"){e.defaultChecked=e.checked;}}function O(e){var bG=(e.nodeName||"").toLowerCase();if(bG==="input"){aK(e);}else{if(bG!=="script"&&typeof e.getElementsByTagName!=="undefined"){b.grep(e.getElementsByTagName("input"),aK);}}}function ay(e){var bG=aG.createElement("div");an.appendChild(bG);bG.innerHTML=e.outerHTML;return bG.firstChild;}b.extend({clone:function(bJ,bL,bH){var e,bG,bI,bK=b.support.html5Clone||b.isXMLDoc(bJ)||!au.test("<"+bJ.nodeName+">")?bJ.cloneNode(true):ay(bJ);if((!b.support.noCloneEvent||!b.support.noCloneChecked)&&(bJ.nodeType===1||bJ.nodeType===11)&&!b.isXMLDoc(bJ)){av(bJ,bK);e=bs(bJ);bG=bs(bK);for(bI=0;e[bI];++bI){if(bG[bI]){av(e[bI],bG[bI]);}}}if(bL){D(bJ,bK);if(bH){e=bs(bJ);bG=bs(bK);for(bI=0;e[bI];++bI){D(e[bI],bG[bI]);}}}e=bG=null;return bK;},clean:function(bT,bH,bG,bI){var bL,bS,bO,bU=[];bH=bH||aG;if(typeof bH.createElement==="undefined"){bH=bH.ownerDocument||bH[0]&&bH[0].ownerDocument||aG;}for(var bP=0,bR;(bR=bT[bP])!=null;bP++){if(typeof bR==="number"){bR+="";}if(!bR){continue;}if(typeof bR==="string"){if(!ah.test(bR)){bR=bH.createTextNode(bR);}else{bR=bR.replace(ac,"<$1></$2>");var bY=(f.exec(bR)||["",""])[1].toLowerCase(),bK=aI[bY]||aI._default,bV=bK[0],bM=bH.createElement("div"),bW=an.childNodes,bX;if(bH===aG){an.appendChild(bM);}else{a(bH).appendChild(bM);}bM.innerHTML=bK[1]+bR+bK[2];while(bV--){bM=bM.lastChild;}if(!b.support.tbody){var bJ=G.test(bR),e=bY==="table"&&!bJ?bM.firstChild&&bM.firstChild.childNodes:bK[1]==="<table>"&&!bJ?bM.childNodes:[];for(bO=e.length-1;bO>=0;--bO){if(b.nodeName(e[bO],"tbody")&&!e[bO].childNodes.length){e[bO].parentNode.removeChild(e[bO]);}}}if(!b.support.leadingWhitespace&&aD.test(bR)){bM.insertBefore(bH.createTextNode(aD.exec(bR)[0]),bM.firstChild);}bR=bM.childNodes;if(bM){bM.parentNode.removeChild(bM);if(bW.length>0){bX=bW[bW.length-1];if(bX&&bX.parentNode){bX.parentNode.removeChild(bX);}}}}}var bQ;if(!b.support.appendChecked){if(bR[0]&&typeof(bQ=bR.length)==="number"){for(bO=0;bO<bQ;bO++){O(bR[bO]);}}else{O(bR);}}if(bR.nodeType){bU.push(bR);}else{bU=b.merge(bU,bR);}}if(bG){bL=function(bZ){return !bZ.type||by.test(bZ.type);};for(bP=0;bU[bP];bP++){bS=bU[bP];if(bI&&b.nodeName(bS,"script")&&(!bS.type||by.test(bS.type))){bI.push(bS.parentNode?bS.parentNode.removeChild(bS):bS);}else{if(bS.nodeType===1){var bN=b.grep(bS.getElementsByTagName("script"),bL);bU.splice.apply(bU,[bP+1,0].concat(bN));}bG.appendChild(bS);}}}return bU;},cleanData:function(bG){var bJ,bH,e=b.cache,bM=b.event.special,bL=b.support.deleteExpando;for(var bK=0,bI;(bI=bG[bK])!=null;bK++){if(bI.nodeName&&b.noData[bI.nodeName.toLowerCase()]){continue;}bH=bI[b.expando];if(bH){bJ=e[bH];if(bJ&&bJ.events){for(var bN in bJ.events){if(bM[bN]){b.event.remove(bI,bN);}else{b.removeEvent(bI,bN,bJ.handle);}}if(bJ.handle){bJ.handle.elem=null;}}if(bL){delete bI[b.expando];}else{if(bI.removeAttribute){bI.removeAttribute(b.expando);}}delete e[bH];}}}});var ax=/alpha\([^)]*\)/i,aF=/opacity=([^)]*)/,J=/([A-Z]|^ms)/g,bz=/^[\-+]?(?:\d*\.)?\d+$/i,bc=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i,T=/^([\-+])=([\-+.\de]+)/,aP=/^margin/,bk={position:"absolute",visibility:"hidden",display:"block"},R=["Top","Right","Bottom","Left"],ak,aU,a9;b.fn.css=function(e,bG){return b.access(this,function(bI,bH,bJ){return bJ!==W?b.style(bI,bH,bJ):b.css(bI,bH);},e,bG,arguments.length>1);};b.extend({cssHooks:{opacity:{get:function(bH,bG){if(bG){var e=ak(bH,"opacity");return e===""?"1":e;}else{return bH.style.opacity;}}}},cssNumber:{"fillOpacity":true,"fontWeight":true,"lineHeight":true,"opacity":true,"orphans":true,"widows":true,"zIndex":true,"zoom":true},cssProps:{"float":b.support.cssFloat?"cssFloat":"styleFloat"},style:function(bI,bH,bO,bJ){if(!bI||bI.nodeType===3||bI.nodeType===8||!bI.style){return;}var bM,bN,bK=b.camelCase(bH),bG=bI.style,bP=b.cssHooks[bK];bH=b.cssProps[bK]||bK;if(bO!==W){bN=typeof bO;if(bN==="string"&&(bM=T.exec(bO))){bO=(+(bM[1]+1)*+bM[2])+parseFloat(b.css(bI,bH));bN="number";}if(bO==null||bN==="number"&&isNaN(bO)){return;}if(bN==="number"&&!b.cssNumber[bK]){bO+="px";}if(!bP||!("set" in bP)||(bO=bP.set(bI,bO))!==W){try{bG[bH]=bO;}catch(bL){}}}else{if(bP&&"get" in bP&&(bM=bP.get(bI,false,bJ))!==W){return bM;}return bG[bH];}},css:function(bJ,bI,bG){var bH,e;bI=b.camelCase(bI);e=b.cssHooks[bI];bI=b.cssProps[bI]||bI;if(bI==="cssFloat"){bI="float";}if(e&&"get" in e&&(bH=e.get(bJ,true,bG))!==W){return bH;}else{if(ak){return ak(bJ,bI);}}},swap:function(bJ,bI,bK){var e={},bH,bG;for(bG in bI){e[bG]=bJ.style[bG];bJ.style[bG]=bI[bG];}bH=bK.call(bJ);for(bG in bI){bJ.style[bG]=e[bG];}return bH;}});b.curCSS=b.css;if(aG.defaultView&&aG.defaultView.getComputedStyle){aU=function(bL,bH){var bG,bK,e,bJ,bI=bL.style;bH=bH.replace(J,"-$1").toLowerCase();if((bK=bL.ownerDocument.defaultView)&&(e=bK.getComputedStyle(bL,null))){bG=e.getPropertyValue(bH);if(bG===""&&!b.contains(bL.ownerDocument.documentElement,bL)){bG=b.style(bL,bH);}}if(!b.support.pixelMargin&&e&&aP.test(bH)&&bc.test(bG)){bJ=bI.width;bI.width=bG;bG=e.width;bI.width=bJ;}return bG;};}if(aG.documentElement.currentStyle){a9=function(bK,bH){var bL,e,bJ,bG=bK.currentStyle&&bK.currentStyle[bH],bI=bK.style;if(bG==null&&bI&&(bJ=bI[bH])){bG=bJ;}if(bc.test(bG)){bL=bI.left;e=bK.runtimeStyle&&bK.runtimeStyle.left;if(e){bK.runtimeStyle.left=bK.currentStyle.left;}bI.left=bH==="fontSize"?"1em":bG;bG=bI.pixelLeft+"px";bI.left=bL;if(e){bK.runtimeStyle.left=e;}}return bG===""?"auto":bG;};}ak=aU||a9;function aq(bJ,bH,bG){var bK=bH==="width"?bJ.offsetWidth:bJ.offsetHeight,bI=bH==="width"?1:0,e=4;if(bK>0){if(bG!=="border"){for(;bI<e;bI+=2){if(!bG){bK-=parseFloat(b.css(bJ,"padding"+R[bI]))||0;}if(bG==="margin"){bK+=parseFloat(b.css(bJ,bG+R[bI]))||0;}else{bK-=parseFloat(b.css(bJ,"border"+R[bI]+"Width"))||0;}}}return bK+"px";}bK=ak(bJ,bH);if(bK<0||bK==null){bK=bJ.style[bH];}if(bc.test(bK)){return bK;}bK=parseFloat(bK)||0;if(bG){for(;bI<e;bI+=2){bK+=parseFloat(b.css(bJ,"padding"+R[bI]))||0;if(bG!=="padding"){bK+=parseFloat(b.css(bJ,"border"+R[bI]+"Width"))||0;}if(bG==="margin"){bK+=parseFloat(b.css(bJ,bG+R[bI]))||0;}}}return bK+"px";}b.each(["height","width"],function(bG,e){b.cssHooks[e]={get:function(bJ,bI,bH){if(bI){if(bJ.offsetWidth!==0){return aq(bJ,e,bH);}else{return b.swap(bJ,bk,function(){return aq(bJ,e,bH);});}}},set:function(bH,bI){return bz.test(bI)?bI+"px":bI;}};});if(!b.support.opacity){b.cssHooks.opacity={get:function(bG,e){return aF.test((e&&bG.currentStyle?bG.currentStyle.filter:bG.style.filter)||"")?(parseFloat(RegExp.$1)/100)+"":e?"1":"";},set:function(bJ,bK){var bI=bJ.style,bG=bJ.currentStyle,e=b.isNumeric(bK)?"alpha(opacity="+bK*100+")":"",bH=bG&&bG.filter||bI.filter||"";bI.zoom=1;if(bK>=1&&b.trim(bH.replace(ax,""))===""){bI.removeAttribute("filter");if(bG&&!bG.filter){return;}}bI.filter=ax.test(bH)?bH.replace(ax,e):bH+" "+e;}};}b(function(){if(!b.support.reliableMarginRight){b.cssHooks.marginRight={get:function(bG,e){return b.swap(bG,{"display":"inline-block"},function(){if(e){return ak(bG,"margin-right");}else{return bG.style.marginRight;}});}};}});if(b.expr&&b.expr.filters){b.expr.filters.hidden=function(bH){var bG=bH.offsetWidth,e=bH.offsetHeight;return(bG===0&&e===0)||(!b.support.reliableHiddenOffsets&&((bH.style&&bH.style.display)||b.css(bH,"display"))==="none");};b.expr.filters.visible=function(e){return !b.expr.filters.hidden(e);};}b.each({margin:"",padding:"",border:"Width"},function(e,bG){b.cssHooks[e+bG]={expand:function(bJ){var bI,bK=typeof bJ==="string"?bJ.split(" "):[bJ],bH={};for(bI=0;bI<4;bI++){bH[e+R[bI]+bG]=bK[bI]||bK[bI-2]||bK[0];}return bH;}};});var t=/%20/g,aB=/\[\]$/,bD=/\r?\n/g,bB=/#.*$/,aO=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,bb=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,aY=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,a2=/^(?:GET|HEAD)$/,c=/^\/\//,X=/\?/,bi=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,A=/^(?:select|textarea)/i,q=/\s+/,bC=/([?&])_=[^&]*/,V=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,K=b.fn.load,al={},B={},aQ,C,a7=["*/"]+["*"];try{aQ=bx.href;}catch(aH){aQ=aG.createElement("a");aQ.href="";aQ=aQ.href;}C=V.exec(aQ.toLowerCase())||[];function l(e){return function(bJ,bL){if(typeof bJ!=="string"){bL=bJ;bJ="*";}if(b.isFunction(bL)){var bI=bJ.toLowerCase().split(q),bH=0,bK=bI.length,bG,bM,bN;for(;bH<bK;bH++){bG=bI[bH];bN=/^\+/.test(bG);if(bN){bG=bG.substr(1)||"*";}bM=e[bG]=e[bG]||[];bM[bN?"unshift":"push"](bL);}}};}function a8(bG,bP,bK,bO,bM,bI){bM=bM||bP.dataTypes[0];bI=bI||{};bI[bM]=true;var bL=bG[bM],bH=0,e=bL?bL.length:0,bJ=(bG===al),bN;for(;bH<e&&(bJ||!bN);bH++){bN=bL[bH](bP,bK,bO);if(typeof bN==="string"){if(!bJ||bI[bN]){bN=W;}else{bP.dataTypes.unshift(bN);bN=a8(bG,bP,bK,bO,bN,bI);}}}if((bJ||!bN)&&!bI["*"]){bN=a8(bG,bP,bK,bO,"*",bI);}return bN;}function az(bH,bI){var bG,e,bJ=b.ajaxSettings.flatOptions||{};for(bG in bI){if(bI[bG]!==W){(bJ[bG]?bH:(e||(e={})))[bG]=bI[bG];}}if(e){b.extend(true,bH,e);}}b.fn.extend({load:function(bH,bK,bL){if(typeof bH!=="string"&&K){return K.apply(this,arguments);}else{if(!this.length){return this;}}var bJ=bH.indexOf(" ");if(bJ>=0){var e=bH.slice(bJ,bH.length);bH=bH.slice(0,bJ);}var bI="GET";if(bK){if(b.isFunction(bK)){bL=bK;bK=W;}else{if(typeof bK==="object"){bK=b.param(bK,b.ajaxSettings.traditional);bI="POST";}}}var bG=this;b.ajax({url:bH,type:bI,dataType:"html",data:bK,complete:function(bN,bM,bO){bO=bN.responseText;if(bN.isResolved()){bN.done(function(bP){bO=bP;});bG.html(e?b("<div>").append(bO.replace(bi,"")).find(e):bO);}if(bL){bG.each(bL,[bO,bM,bN]);}}});return this;},serialize:function(){return b.param(this.serializeArray());},serializeArray:function(){return this.map(function(){return this.elements?b.makeArray(this.elements):this;}).filter(function(){return this.name&&!this.disabled&&(this.checked||A.test(this.nodeName)||bb.test(this.type));}).map(function(e,bG){var bH=b(this).val();return bH==null?null:b.isArray(bH)?b.map(bH,function(bJ,bI){return{name:bG.name,value:bJ.replace(bD,"\r\n")};}):{name:bG.name,value:bH.replace(bD,"\r\n")};}).get();}});b.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,bG){b.fn[bG]=function(bH){return this.on(bG,bH);};});b.each(["get","post"],function(e,bG){b[bG]=function(bH,bJ,bK,bI){if(b.isFunction(bJ)){bI=bI||bK;bK=bJ;bJ=W;}return b.ajax({type:bG,url:bH,data:bJ,success:bK,dataType:bI});};});b.extend({getScript:function(e,bG){return b.get(e,W,bG,"script");},getJSON:function(e,bG,bH){return b.get(e,bG,bH,"json");},ajaxSetup:function(bG,e){if(e){az(bG,b.ajaxSettings);}else{e=bG;bG=b.ajaxSettings;}az(bG,e);return bG;},ajaxSettings:{url:aQ,isLocal:aY.test(C[1]),global:true,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:true,async:true,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":a7},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":bo.String,"text html":true,"text json":b.parseJSON,"text xml":b.parseXML},flatOptions:{context:true,url:true}},ajaxPrefilter:l(al),ajaxTransport:l(B),ajax:function(bK,bI){if(typeof bK==="object"){bI=bK;bK=W;}bI=bI||{};var bO=b.ajaxSetup({},bI),b3=bO.context||bO,bR=b3!==bO&&(b3.nodeType||b3 instanceof b)?b(b3):b.event,b2=b.Deferred(),bY=b.Callbacks("once memory"),bM=bO.statusCode||{},bN,bS={},bZ={},b1,bJ,bW,bP,bT,bL=0,bH,bV,bU={readyState:0,setRequestHeader:function(b4,b5){if(!bL){var e=b4.toLowerCase();b4=bZ[e]=bZ[e]||b4;bS[b4]=b5;}return this;},getAllResponseHeaders:function(){return bL===2?b1:null;},getResponseHeader:function(b4){var e;if(bL===2){if(!bJ){bJ={};while((e=aO.exec(b1))){bJ[e[1].toLowerCase()]=e[2];}}e=bJ[b4.toLowerCase()];}return e===W?null:e;},overrideMimeType:function(e){if(!bL){bO.mimeType=e;}return this;},abort:function(e){e=e||"abort";if(bW){bW.abort(e);}bQ(0,e);return this;}};function bQ(ca,b5,cb,b7){if(bL===2){return;}bL=2;if(bP){clearTimeout(bP);}bW=W;b1=b7||"";bU.readyState=ca>0?4:0;var b4,cf,ce,b8=b5,b9=cb?bv(bO,bU,cb):W,b6,cd;if(ca>=200&&ca<300||ca===304){if(bO.ifModified){if((b6=bU.getResponseHeader("Last-Modified"))){b.lastModified[bN]=b6;}if((cd=bU.getResponseHeader("Etag"))){b.etag[bN]=cd;}}if(ca===304){b8="notmodified";b4=true;}else{try{cf=Q(bO,b9);b8="success";b4=true;}catch(cc){b8="parsererror";ce=cc;}}}else{ce=b8;if(!b8||ca){b8="error";if(ca<0){ca=0;}}}bU.status=ca;bU.statusText=""+(b5||b8);if(b4){b2.resolveWith(b3,[cf,b8,bU]);}else{b2.rejectWith(b3,[bU,b8,ce]);}bU.statusCode(bM);bM=W;if(bH){bR.trigger("ajax"+(b4?"Success":"Error"),[bU,bO,b4?cf:ce]);}bY.fireWith(b3,[bU,b8]);if(bH){bR.trigger("ajaxComplete",[bU,bO]);if(!(--b.active)){b.event.trigger("ajaxStop");}}}b2.promise(bU);bU.success=bU.done;bU.error=bU.fail;bU.complete=bY.add;bU.statusCode=function(b4){if(b4){var e;if(bL<2){for(e in b4){bM[e]=[bM[e],b4[e]];}}else{e=b4[bU.status];bU.then(e,e);}}return this;};bO.url=((bK||bO.url)+"").replace(bB,"").replace(c,C[1]+"//");bO.dataTypes=b.trim(bO.dataType||"*").toLowerCase().split(q);if(bO.crossDomain==null){bT=V.exec(bO.url.toLowerCase());bO.crossDomain=!!(bT&&(bT[1]!=C[1]||bT[2]!=C[2]||(bT[3]||(bT[1]==="http:"?80:443))!=(C[3]||(C[1]==="http:"?80:443))));}if(bO.data&&bO.processData&&typeof bO.data!=="string"){bO.data=b.param(bO.data,bO.traditional);}a8(al,bO,bI,bU);if(bL===2){return false;}bH=bO.global;bO.type=bO.type.toUpperCase();bO.hasContent=!a2.test(bO.type);if(bH&&b.active++===0){b.event.trigger("ajaxStart");}if(!bO.hasContent){if(bO.data){bO.url+=(X.test(bO.url)?"&":"?")+bO.data;delete bO.data;}bN=bO.url;if(bO.cache===false){var bG=b.now(),b0=bO.url.replace(bC,"$1_="+bG);bO.url=b0+((b0===bO.url)?(X.test(bO.url)?"&":"?")+"_="+bG:"");}}if(bO.data&&bO.hasContent&&bO.contentType!==false||bI.contentType){bU.setRequestHeader("Content-Type",bO.contentType);}if(bO.ifModified){bN=bN||bO.url;if(b.lastModified[bN]){bU.setRequestHeader("If-Modified-Since",b.lastModified[bN]);}if(b.etag[bN]){bU.setRequestHeader("If-None-Match",b.etag[bN]);}}bU.setRequestHeader("Accept",bO.dataTypes[0]&&bO.accepts[bO.dataTypes[0]]?bO.accepts[bO.dataTypes[0]]+(bO.dataTypes[0]!=="*"?", "+a7+"; q=0.01":""):bO.accepts["*"]);for(bV in bO.headers){bU.setRequestHeader(bV,bO.headers[bV]);}if(bO.beforeSend&&(bO.beforeSend.call(b3,bU,bO)===false||bL===2)){bU.abort();return false;}for(bV in {success:1,error:1,complete:1}){bU[bV](bO[bV]);}bW=a8(B,bO,bI,bU);if(!bW){bQ(-1,"No Transport");}else{bU.readyState=1;if(bH){bR.trigger("ajaxSend",[bU,bO]);}if(bO.async&&bO.timeout>0){bP=setTimeout(function(){bU.abort("timeout");},bO.timeout);}try{bL=1;bW.send(bS,bQ);}catch(bX){if(bL<2){bQ(-1,bX);}else{throw bX;}}}return bU;},param:function(e,bH){var bG=[],bJ=function(bK,bL){bL=b.isFunction(bL)?bL():bL;bG[bG.length]=encodeURIComponent(bK)+"="+encodeURIComponent(bL);};if(bH===W){bH=b.ajaxSettings.traditional;}if(b.isArray(e)||(e.jquery&&!b.isPlainObject(e))){b.each(e,function(){bJ(this.name,this.value);});}else{for(var bI in e){F(bI,e[bI],bH,bJ);}}return bG.join("&").replace(t,"+");}});function F(bH,bJ,bG,bI){if(b.isArray(bJ)){b.each(bJ,function(bL,bK){if(bG||aB.test(bH)){bI(bH,bK);}else{F(bH+"["+(typeof bK==="object"?bL:"")+"]",bK,bG,bI);}});}else{if(!bG&&b.type(bJ)==="object"){for(var e in bJ){F(bH+"["+e+"]",bJ[e],bG,bI);}}else{bI(bH,bJ);}}}b.extend({active:0,lastModified:{},etag:{}});function bv(bO,bN,bK){var bG=bO.contents,bM=bO.dataTypes,bH=bO.responseFields,bJ,bL,bI,e;for(bL in bH){if(bL in bK){bN[bH[bL]]=bK[bL];}}while(bM[0]==="*"){bM.shift();if(bJ===W){bJ=bO.mimeType||bN.getResponseHeader("content-type");}}if(bJ){for(bL in bG){if(bG[bL]&&bG[bL].test(bJ)){bM.unshift(bL);break;}}}if(bM[0] in bK){bI=bM[0];}else{for(bL in bK){if(!bM[0]||bO.converters[bL+" "+bM[0]]){bI=bL;break;}if(!e){e=bL;}}bI=bI||e;}if(bI){if(bI!==bM[0]){bM.unshift(bI);}return bK[bI];}}function Q(bS,bK){if(bS.dataFilter){bK=bS.dataFilter(bK,bS.dataType);}var bO=bS.dataTypes,bR={},bL,bP,bH=bO.length,bM,bN=bO[0],bI,bJ,bQ,bG,e;for(bL=1;bL<bH;bL++){if(bL===1){for(bP in bS.converters){if(typeof bP==="string"){bR[bP.toLowerCase()]=bS.converters[bP];}}}bI=bN;bN=bO[bL];if(bN==="*"){bN=bI;}else{if(bI!=="*"&&bI!==bN){bJ=bI+" "+bN;bQ=bR[bJ]||bR["* "+bN];if(!bQ){e=W;for(bG in bR){bM=bG.split(" ");if(bM[0]===bI||bM[0]==="*"){e=bR[bM[1]+" "+bN];if(e){bG=bR[bG];if(bG===true){bQ=e;}else{if(e===true){bQ=bG;}}break;}}}}if(!(bQ||e)){b.error("No conversion from "+bJ.replace(" "," to "));}if(bQ!==true){bK=bQ?bQ(bK):e(bG(bK));}}}}return bK;}var aN=b.now(),E=/(\=)\?(&|$)|\?\?/i;b.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return b.expando+"_"+(aN++);}});b.ajaxPrefilter("json jsonp",function(bO,bL,bN){var bI=(typeof bO.data==="string")&&/^application\/x\-www\-form\-urlencoded/.test(bO.contentType);if(bO.dataTypes[0]==="jsonp"||bO.jsonp!==false&&(E.test(bO.url)||bI&&E.test(bO.data))){var bM,bH=bO.jsonpCallback=b.isFunction(bO.jsonpCallback)?bO.jsonpCallback():bO.jsonpCallback,bK=bo[bH],e=bO.url,bJ=bO.data,bG="$1"+bH+"$2";if(bO.jsonp!==false){e=e.replace(E,bG);if(bO.url===e){if(bI){bJ=bJ.replace(E,bG);}if(bO.data===bJ){e+=(/\?/.test(e)?"&":"?")+bO.jsonp+"="+bH;}}}bO.url=e;bO.data=bJ;bo[bH]=function(bP){bM=[bP];};bN.always(function(){bo[bH]=bK;if(bM&&b.isFunction(bK)){bo[bH](bM[0]);}});bO.converters["script json"]=function(){if(!bM){b.error(bH+" was not called");}return bM[0];};bO.dataTypes[0]="json";return"script";}});b.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){b.globalEval(e);return e;}}});b.ajaxPrefilter("script",function(e){if(e.cache===W){e.cache=false;}if(e.crossDomain){e.type="GET";e.global=false;}});b.ajaxTransport("script",function(bH){if(bH.crossDomain){var e,bG=aG.head||aG.getElementsByTagName("head")[0]||aG.documentElement;return{send:function(bI,bJ){e=aG.createElement("script");e.async="async";if(bH.scriptCharset){e.charset=bH.scriptCharset;}e.src=bH.url;e.onload=e.onreadystatechange=function(bL,bK){if(bK||!e.readyState||/loaded|complete/.test(e.readyState)){e.onload=e.onreadystatechange=null;if(bG&&e.parentNode){bG.removeChild(e);}e=W;if(!bK){bJ(200,"success");}}};bG.insertBefore(e,bG.firstChild);},abort:function(){if(e){e.onload(0,1);}}};}});var L=bo.ActiveXObject?function(){for(var e in Y){Y[e](0,1);}}:false,I=0,Y;function aX(){try{return new bo.XMLHttpRequest();}catch(bG){}}function aw(){try{return new bo.ActiveXObject("Microsoft.XMLHTTP");}catch(bG){}}b.ajaxSettings.xhr=bo.ActiveXObject?function(){return !this.isLocal&&aX()||aw();}:aX;(function(e){b.extend(b.support,{ajax:!!e,cors:!!e&&("withCredentials" in e)});})(b.ajaxSettings.xhr());if(b.support.ajax){b.ajaxTransport(function(e){if(!e.crossDomain||b.support.cors){var bG;return{send:function(bM,bH){var bL=e.xhr(),bK,bJ;if(e.username){bL.open(e.type,e.url,e.async,e.username,e.password);}else{bL.open(e.type,e.url,e.async);}if(e.xhrFields){for(bJ in e.xhrFields){bL[bJ]=e.xhrFields[bJ];}}if(e.mimeType&&bL.overrideMimeType){bL.overrideMimeType(e.mimeType);}if(!e.crossDomain&&!bM["X-Requested-With"]){bM["X-Requested-With"]="XMLHttpRequest";}try{for(bJ in bM){bL.setRequestHeader(bJ,bM[bJ]);}}catch(bI){}bL.send((e.hasContent&&e.data)||null);bG=function(bV,bP){var bQ,bO,bN,bT,bS;try{if(bG&&(bP||bL.readyState===4)){bG=W;if(bK){bL.onreadystatechange=b.noop;if(L){delete Y[bK];}}if(bP){if(bL.readyState!==4){bL.abort();}}else{bQ=bL.status;bN=bL.getAllResponseHeaders();bT={};bS=bL.responseXML;if(bS&&bS.documentElement){bT.xml=bS;}try{bT.text=bL.responseText;}catch(bV){}try{bO=bL.statusText;}catch(bU){bO="";}if(!bQ&&e.isLocal&&!e.crossDomain){bQ=bT.text?200:404;}else{if(bQ===1223){bQ=204;}}}}}catch(bR){if(!bP){bH(-1,bR);}}if(bT){bH(bQ,bO,bT,bN);}};if(!e.async||bL.readyState===4){bG();}else{bK=++I;if(L){if(!Y){Y={};b(bo).unload(L);}Y[bK]=bG;}bL.onreadystatechange=bG;}},abort:function(){if(bG){bG(0,1);}}};}});}var ab={},bl,v,aM=/^(?:toggle|show|hide)$/,a5=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,bf,aT=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],bg;b.fn.extend({show:function(bI,bL,bK){var bH,bJ;if(bI||bI===0){return this.animate(bd("show",3),bI,bL,bK);}else{for(var bG=0,e=this.length;bG<e;bG++){bH=this[bG];if(bH.style){bJ=bH.style.display;if(!b._data(bH,"olddisplay")&&bJ==="none"){bJ=bH.style.display="";}if((bJ===""&&b.css(bH,"display")==="none")||!b.contains(bH.ownerDocument.documentElement,bH)){b._data(bH,"olddisplay",H(bH.nodeName));}}}for(bG=0;bG<e;bG++){bH=this[bG];if(bH.style){bJ=bH.style.display;if(bJ===""||bJ==="none"){bH.style.display=b._data(bH,"olddisplay")||"";}}}return this;}},hide:function(bI,bL,bK){if(bI||bI===0){return this.animate(bd("hide",3),bI,bL,bK);}else{var bH,bJ,bG=0,e=this.length;for(;bG<e;bG++){bH=this[bG];if(bH.style){bJ=b.css(bH,"display");if(bJ!=="none"&&!b._data(bH,"olddisplay")){b._data(bH,"olddisplay",bJ);}}}for(bG=0;bG<e;bG++){if(this[bG].style){this[bG].style.display="none";}}return this;}},_toggle:b.fn.toggle,toggle:function(bH,bG,bI){var e=typeof bH==="boolean";if(b.isFunction(bH)&&b.isFunction(bG)){this._toggle.apply(this,arguments);}else{if(bH==null||e){this.each(function(){var bJ=e?bH:b(this).is(":hidden");b(this)[bJ?"show":"hide"]();});}else{this.animate(bd("toggle",3),bH,bG,bI);}}return this;},fadeTo:function(e,bI,bH,bG){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:bI},e,bH,bG);},animate:function(bK,bH,bJ,bI){var e=b.speed(bH,bJ,bI);if(b.isEmptyObject(bK)){return this.each(e.complete,[false]);}bK=b.extend({},bK);function bG(){if(e.queue===false){b._mark(this);}var bP=b.extend({},e),bW=this.nodeType===1,bU=bW&&b(this).is(":hidden"),bM,bR,bO,bV,bY,bQ,bT,bN,bS,bX,bL;bP.animatedProperties={};for(bO in bK){bM=b.camelCase(bO);if(bO!==bM){bK[bM]=bK[bO];delete bK[bO];}if((bY=b.cssHooks[bM])&&"expand" in bY){bQ=bY.expand(bK[bM]);delete bK[bM];for(bO in bQ){if(!(bO in bK)){bK[bO]=bQ[bO];}}}}for(bM in bK){bR=bK[bM];if(b.isArray(bR)){bP.animatedProperties[bM]=bR[1];bR=bK[bM]=bR[0];}else{bP.animatedProperties[bM]=bP.specialEasing&&bP.specialEasing[bM]||bP.easing||"swing";}if(bR==="hide"&&bU||bR==="show"&&!bU){return bP.complete.call(this);}if(bW&&(bM==="height"||bM==="width")){bP.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY];if(b.css(this,"display")==="inline"&&b.css(this,"float")==="none"){if(!b.support.inlineBlockNeedsLayout||H(this.nodeName)==="inline"){this.style.display="inline-block";}else{this.style.zoom=1;}}}}if(bP.overflow!=null){this.style.overflow="hidden";}for(bO in bK){bV=new b.fx(this,bP,bO);bR=bK[bO];if(aM.test(bR)){bL=b._data(this,"toggle"+bO)||(bR==="toggle"?bU?"show":"hide":0);if(bL){b._data(this,"toggle"+bO,bL==="show"?"hide":"show");bV[bL]();}else{bV[bR]();}}else{bT=a5.exec(bR);bN=bV.cur();if(bT){bS=parseFloat(bT[2]);bX=bT[3]||(b.cssNumber[bO]?"":"px");if(bX!=="px"){b.style(this,bO,(bS||1)+bX);bN=((bS||1)/bV.cur())*bN;b.style(this,bO,bN+bX);}if(bT[1]){bS=((bT[1]==="-="?-1:1)*bS)+bN;}bV.custom(bN,bS,bX);}else{bV.custom(bN,bR,"");}}}return true;}return e.queue===false?this.each(bG):this.queue(e.queue,bG);},stop:function(bH,bG,e){if(typeof bH!=="string"){e=bG;bG=bH;bH=W;}if(bG&&bH!==false){this.queue(bH||"fx",[]);}return this.each(function(){var bI,bJ=false,bL=b.timers,bK=b._data(this);if(!e){b._unmark(true,this);}function bM(bP,bQ,bO){var bN=bQ[bO];b.removeData(bP,bO,true);bN.stop(e);}if(bH==null){for(bI in bK){if(bK[bI]&&bK[bI].stop&&bI.indexOf(".run")===bI.length-4){bM(this,bK,bI);}}}else{if(bK[bI=bH+".run"]&&bK[bI].stop){bM(this,bK,bI);}}for(bI=bL.length;bI--;){if(bL[bI].elem===this&&(bH==null||bL[bI].queue===bH)){if(e){bL[bI](true);}else{bL[bI].saveState();}bJ=true;bL.splice(bI,1);}}if(!(e&&bJ)){b.dequeue(this,bH);}});}});function bt(){setTimeout(aE,0);return(bg=b.now());}function aE(){bg=W;}function bd(bG,e){var bH={};b.each(aT.concat.apply([],aT.slice(0,e)),function(){bH[this]=bG;});return bH;}b.each({slideDown:bd("show",1),slideUp:bd("hide",1),slideToggle:bd("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,bG){b.fn[e]=function(bH,bJ,bI){return this.animate(bG,bH,bJ,bI);};});b.extend({speed:function(bH,bI,bG){var e=bH&&typeof bH==="object"?b.extend({},bH):{complete:bG||!bG&&bI||b.isFunction(bH)&&bH,duration:bH,easing:bG&&bI||bI&&!b.isFunction(bI)&&bI};e.duration=b.fx.off?0:typeof e.duration==="number"?e.duration:e.duration in b.fx.speeds?b.fx.speeds[e.duration]:b.fx.speeds._default;if(e.queue==null||e.queue===true){e.queue="fx";}e.old=e.complete;e.complete=function(bJ){if(b.isFunction(e.old)){e.old.call(this);}if(e.queue){b.dequeue(this,e.queue);}else{if(bJ!==false){b._unmark(this);}}};return e;},easing:{linear:function(e){return e;},swing:function(e){return(-Math.cos(e*Math.PI)/2)+0.5;}},timers:[],fx:function(bG,e,bH){this.options=e;this.elem=bG;this.prop=bH;e.orig=e.orig||{};}});b.fx.prototype={update:function(){if(this.options.step){this.options.step.call(this.elem,this.now,this);}(b.fx.step[this.prop]||b.fx.step._default)(this);},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null)){return this.elem[this.prop];}var e,bG=b.css(this.elem,this.prop);return isNaN(e=parseFloat(bG))?!bG||bG==="auto"?0:bG:e;},custom:function(bK,bJ,bI){var e=this,bH=b.fx;this.startTime=bg||bt();this.end=bJ;this.now=this.start=bK;this.pos=this.state=0;this.unit=bI||this.unit||(b.cssNumber[this.prop]?"":"px");function bG(bL){return e.step(bL);}bG.queue=this.options.queue;bG.elem=this.elem;bG.saveState=function(){if(b._data(e.elem,"fxshow"+e.prop)===W){if(e.options.hide){b._data(e.elem,"fxshow"+e.prop,e.start);}else{if(e.options.show){b._data(e.elem,"fxshow"+e.prop,e.end);}}}};if(bG()&&b.timers.push(bG)&&!bf){bf=setInterval(bH.tick,bH.interval);}},show:function(){var e=b._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=e||b.style(this.elem,this.prop);this.options.show=true;if(e!==W){this.custom(this.cur(),e);}else{this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur());}b(this.elem).show();},hide:function(){this.options.orig[this.prop]=b._data(this.elem,"fxshow"+this.prop)||b.style(this.elem,this.prop);this.options.hide=true;this.custom(this.cur(),0);},step:function(bJ){var bL,bM,bG,bI=bg||bt(),e=true,bK=this.elem,bH=this.options;if(bJ||bI>=bH.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();bH.animatedProperties[this.prop]=true;for(bL in bH.animatedProperties){if(bH.animatedProperties[bL]!==true){e=false;}}if(e){if(bH.overflow!=null&&!b.support.shrinkWrapBlocks){b.each(["","X","Y"],function(bN,bO){bK.style["overflow"+bO]=bH.overflow[bN];});}if(bH.hide){b(bK).hide();}if(bH.hide||bH.show){for(bL in bH.animatedProperties){b.style(bK,bL,bH.orig[bL]);b.removeData(bK,"fxshow"+bL,true);b.removeData(bK,"toggle"+bL,true);}}bG=bH.complete;if(bG){bH.complete=false;bG.call(bK);}}return false;}else{if(bH.duration==Infinity){this.now=bI;}else{bM=bI-this.startTime;this.state=bM/bH.duration;this.pos=b.easing[bH.animatedProperties[this.prop]](this.state,bM,0,1,bH.duration);this.now=this.start+((this.end-this.start)*this.pos);}this.update();}return true;}};b.extend(b.fx,{tick:function(){var bH,bG=b.timers,e=0;for(;e<bG.length;e++){bH=bG[e];if(!bH()&&bG[e]===bH){bG.splice(e--,1);}}if(!bG.length){b.fx.stop();}},interval:13,stop:function(){clearInterval(bf);bf=null;},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(e){b.style(e.elem,"opacity",e.now);},_default:function(e){if(e.elem.style&&e.elem.style[e.prop]!=null){e.elem.style[e.prop]=e.now+e.unit;}else{e.elem[e.prop]=e.now;}}}});b.each(aT.concat.apply([],aT),function(e,bG){if(bG.indexOf("margin")){b.fx.step[bG]=function(bH){b.style(bH.elem,bG,Math.max(0,bH.now)+bH.unit);};}});if(b.expr&&b.expr.filters){b.expr.filters.animated=function(e){return b.grep(b.timers,function(bG){return e===bG.elem;}).length;};}function H(bI){if(!ab[bI]){var e=aG.body,bG=b("<"+bI+">").appendTo(e),bH=bG.css("display");bG.remove();if(bH==="none"||bH===""){if(!bl){bl=aG.createElement("iframe");bl.frameBorder=bl.width=bl.height=0;}e.appendChild(bl);if(!v||!bl.createElement){v=(bl.contentWindow||bl.contentDocument).document;v.write((b.support.boxModel?"<!doctype html>":"")+"<html><body>");v.close();}bG=v.createElement(bI);v.body.appendChild(bG);bH=b.css(bG,"display");e.removeChild(bl);}ab[bI]=bH;}return ab[bI];}var bj,ag=/^t(?:able|d|h)$/i,ao=/^(?:body|html)$/i;if("getBoundingClientRect" in aG.documentElement){bj=function(bJ,bS,bH,bM){try{bM=bJ.getBoundingClientRect();}catch(bQ){}if(!bM||!b.contains(bH,bJ)){return bM?{top:bM.top,left:bM.left}:{top:0,left:0};}var bN=bS.body,bO=aW(bS),bL=bH.clientTop||bN.clientTop||0,bP=bH.clientLeft||bN.clientLeft||0,bG=bO.pageYOffset||b.support.boxModel&&bH.scrollTop||bN.scrollTop,bK=bO.pageXOffset||b.support.boxModel&&bH.scrollLeft||bN.scrollLeft,bR=bM.top+bG-bL,bI=bM.left+bK-bP;return{top:bR,left:bI};};}else{bj=function(bK,bP,bI){var bN,bH=bK.offsetParent,bG=bK,bL=bP.body,bM=bP.defaultView,e=bM?bM.getComputedStyle(bK,null):bK.currentStyle,bO=bK.offsetTop,bJ=bK.offsetLeft;while((bK=bK.parentNode)&&bK!==bL&&bK!==bI){if(b.support.fixedPosition&&e.position==="fixed"){break;}bN=bM?bM.getComputedStyle(bK,null):bK.currentStyle;bO-=bK.scrollTop;bJ-=bK.scrollLeft;if(bK===bH){bO+=bK.offsetTop;bJ+=bK.offsetLeft;if(b.support.doesNotAddBorder&&!(b.support.doesAddBorderForTableAndCells&&ag.test(bK.nodeName))){bO+=parseFloat(bN.borderTopWidth)||0;bJ+=parseFloat(bN.borderLeftWidth)||0;}bG=bH;bH=bK.offsetParent;}if(b.support.subtractsBorderForOverflowNotVisible&&bN.overflow!=="visible"){bO+=parseFloat(bN.borderTopWidth)||0;bJ+=parseFloat(bN.borderLeftWidth)||0;}e=bN;}if(e.position==="relative"||e.position==="static"){bO+=bL.offsetTop;bJ+=bL.offsetLeft;}if(b.support.fixedPosition&&e.position==="fixed"){bO+=Math.max(bI.scrollTop,bL.scrollTop);bJ+=Math.max(bI.scrollLeft,bL.scrollLeft);}return{top:bO,left:bJ};};}b.fn.offset=function(e){if(arguments.length){return e===W?this:this.each(function(bI){b.offset.setOffset(this,e,bI);});}var bG=this[0],bH=bG&&bG.ownerDocument;if(!bH){return null;}if(bG===bH.body){return b.offset.bodyOffset(bG);}return bj(bG,bH,bH.documentElement);};b.offset={bodyOffset:function(e){var bH=e.offsetTop,bG=e.offsetLeft;if(b.support.doesNotIncludeMarginInBodyOffset){bH+=parseFloat(b.css(e,"marginTop"))||0;bG+=parseFloat(b.css(e,"marginLeft"))||0;}return{top:bH,left:bG};},setOffset:function(bI,bR,bL){var bM=b.css(bI,"position");if(bM==="static"){bI.style.position="relative";}var bK=b(bI),bG=bK.offset(),e=b.css(bI,"top"),bP=b.css(bI,"left"),bQ=(bM==="absolute"||bM==="fixed")&&b.inArray("auto",[e,bP])>-1,bO={},bN={},bH,bJ;if(bQ){bN=bK.position();bH=bN.top;bJ=bN.left;}else{bH=parseFloat(e)||0;bJ=parseFloat(bP)||0;}if(b.isFunction(bR)){bR=bR.call(bI,bL,bG);}if(bR.top!=null){bO.top=(bR.top-bG.top)+bH;}if(bR.left!=null){bO.left=(bR.left-bG.left)+bJ;}if("using" in bR){bR.using.call(bI,bO);}else{bK.css(bO);}}};b.fn.extend({position:function(){if(!this[0]){return null;}var bH=this[0],bG=this.offsetParent(),bI=this.offset(),e=ao.test(bG[0].nodeName)?{top:0,left:0}:bG.offset();bI.top-=parseFloat(b.css(bH,"marginTop"))||0;bI.left-=parseFloat(b.css(bH,"marginLeft"))||0;e.top+=parseFloat(b.css(bG[0],"borderTopWidth"))||0;e.left+=parseFloat(b.css(bG[0],"borderLeftWidth"))||0;return{top:bI.top-e.top,left:bI.left-e.left};},offsetParent:function(){return this.map(function(){var e=this.offsetParent||aG.body;while(e&&(!ao.test(e.nodeName)&&b.css(e,"position")==="static")){e=e.offsetParent;}return e;});}});b.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(bH,bG){var e=/Y/.test(bG);b.fn[bH]=function(bI){return b.access(this,function(bJ,bM,bL){var bK=aW(bJ);if(bL===W){return bK?(bG in bK)?bK[bG]:b.support.boxModel&&bK.document.documentElement[bM]||bK.document.body[bM]:bJ[bM];}if(bK){bK.scrollTo(!e?bL:b(bK).scrollLeft(),e?bL:b(bK).scrollTop());}else{bJ[bM]=bL;}},bH,bI,arguments.length,null);};});function aW(e){return b.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:false;}b.each({Height:"height",Width:"width"},function(bH,bI){var bG="client"+bH,e="scroll"+bH,bJ="offset"+bH;b.fn["inner"+bH]=function(){var bK=this[0];return bK?bK.style?parseFloat(b.css(bK,bI,"padding")):this[bI]():null;};b.fn["outer"+bH]=function(bL){var bK=this[0];return bK?bK.style?parseFloat(b.css(bK,bI,bL?"margin":"border")):this[bI]():null;};b.fn[bI]=function(bK){return b.access(this,function(bN,bM,bO){var bQ,bP,bR,bL;if(b.isWindow(bN)){bQ=bN.document;bP=bQ.documentElement[bG];return b.support.boxModel&&bP||bQ.body&&bQ.body[bG]||bP;}if(bN.nodeType===9){bQ=bN.documentElement;if(bQ[bG]>=bQ[e]){return bQ[bG];}return Math.max(bN.body[e],bQ[e],bN.body[bJ],bQ[bJ]);}if(bO===W){bR=b.css(bN,bM);bL=parseFloat(bR);return b.isNumeric(bL)?bL:bR;}b(bN).css(bM,bO);},bI,bK,arguments.length,null);};});bo.jQuery=bo.$=b;if(typeof define==="function"&&define.amd&&define.amd.jQuery){define("jquery",[],function(){return b;});}})(window);(function($){function Datepicker(){this.debug=false;this._nextId=0;this._inst=[];this._curInst=null;this._disabledInputs=[];this._datepickerShowing=false;this._inDialog=false;this.regional=[];this.regional[""]={clearText:"Clear",clearStatus:"Erase the current date",closeText:"Close",closeStatus:"Close without change",prevText:"&#x3c;Prev",prevStatus:"Show the previous month",nextText:"Next&#x3e;",nextStatus:"Show the next month",currentText:"Today",currentStatus:"Show the current month",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],monthStatus:"Show a different month",yearStatus:"Show a different year",weekHeader:"Wk",weekStatus:"Week of the year",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],dayStatus:"Set DD as first week day",dateStatus:"Select DD, M d",dateFormat:"mm/dd/yy",firstDay:0,initStatus:"Select a date",isRTL:false};this._defaults={showOn:"focus",showAnim:"show",defaultDate:"+1",appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:false,closeAtTop:true,mandatory:false,hideIfNoPrevNext:false,changeMonth:true,changeYear:true,yearRange:"-10:+10",changeFirstDay:false,showOtherMonths:false,showWeeks:false,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",showStatus:false,statusForDate:this.dateStatus,minDate:null,maxDate:null,speed:"normal",beforeShowDay:null,beforeShow:null,onSelect:null,onClose:null,numberOfMonths:1,stepMonths:1,rangeSelect:false,rangeSeparator:" - "};$.extend(this._defaults,this.regional[""]);this._datepickerDiv=$('<div id="datepicker_div">');}$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",log:function(){if(this.debug){console.log.apply("",arguments);}},_register:function(inst){var id=this._nextId++;this._inst[id]=inst;return id;},_getInst:function(id){return this._inst[id]||id;},setDefaults:function(settings){extendRemove(this._defaults,settings||{});return this;},_attachDatepicker:function(target,settings){var inlineSettings=null;for(attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue);}catch(err){inlineSettings[attrName]=attrValue;}}}var nodeName=target.nodeName.toLowerCase();var instSettings=(inlineSettings?$.extend(settings||{},inlineSettings||{}):settings);if(nodeName=="input"){var inst=(inst&&!inlineSettings?inst:new DatepickerInstance(instSettings,false));this._connectDatepicker(target,inst);}else{if(nodeName=="div"||nodeName=="span"){var inst=new DatepickerInstance(instSettings,true);this._inlineDatepicker(target,inst);}}},_destroyDatepicker:function(target){var nodeName=target.nodeName.toLowerCase();var calId=target._calId;target._calId=null;var $target=$(target);if(nodeName=="input"){$target.siblings(".datepicker_append").replaceWith("").end().siblings(".datepicker_trigger").replaceWith("").end().removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress);var wrapper=$target.parents(".datepicker_wrap");if(wrapper){wrapper.replaceWith(wrapper.html());}}else{if(nodeName=="div"||nodeName=="span"){$target.removeClass(this.markerClassName).empty();}}if($("input[_calId="+calId+"]").length==0){this._inst[calId]=null;}},_enableDatepicker:function(target){target.disabled=false;$(target).siblings("button.datepicker_trigger").each(function(){this.disabled=false;}).end().siblings("img.datepicker_trigger").css({opacity:"1.0",cursor:""});this._disabledInputs=$.map(this._disabledInputs,function(value){return(value==target?null:value);});},_disableDatepicker:function(target){target.disabled=true;$(target).siblings("button.datepicker_trigger").each(function(){this.disabled=true;}).end().siblings("img.datepicker_trigger").css({opacity:"0.5",cursor:"default"});this._disabledInputs=$.map($.datepicker._disabledInputs,function(value){return(value==target?null:value);});this._disabledInputs[$.datepicker._disabledInputs.length]=target;},_isDisabledDatepicker:function(target){if(!target){return false;}for(var i=0;i<this._disabledInputs.length;i++){if(this._disabledInputs[i]==target){return true;}}return false;},_changeDatepicker:function(target,name,value){var settings=name||{};if(typeof name=="string"){settings={};settings[name]=value;}if(inst=this._getInst(target._calId)){extendRemove(inst._settings,settings);this._updateDatepicker(inst);}},_setDateDatepicker:function(target,date,endDate){if(inst=this._getInst(target._calId)){inst._setDate(date,endDate);this._updateDatepicker(inst);}},_getDateDatepicker:function(target){var inst=this._getInst(target._calId);return(inst?inst._getDate():null);},_doKeyDown:function(e){var inst=$.datepicker._getInst(this._calId);if($.datepicker._datepickerShowing){switch(e.keyCode){case 9:$.datepicker._hideDatepicker(null,"");break;case 13:$.datepicker._selectDay(inst,inst._selectedMonth,inst._selectedYear,$("td.datepicker_daysCellOver",inst._datepickerDiv)[0]);return false;break;case 27:$.datepicker._hideDatepicker(null,inst._get("speed"));break;case 33:$.datepicker._adjustDate(inst,(e.ctrlKey?-1:-inst._get("stepMonths")),(e.ctrlKey?"Y":"M"));break;case 34:$.datepicker._adjustDate(inst,(e.ctrlKey?+1:+inst._get("stepMonths")),(e.ctrlKey?"Y":"M"));break;case 35:if(e.ctrlKey){$.datepicker._clearDate(inst);}break;case 36:if(e.ctrlKey){$.datepicker._gotoToday(inst);}break;case 37:if(e.ctrlKey){$.datepicker._adjustDate(inst,-1,"D");}break;case 38:if(e.ctrlKey){$.datepicker._adjustDate(inst,-7,"D");}break;case 39:if(e.ctrlKey){$.datepicker._adjustDate(inst,+1,"D");}break;case 40:if(e.ctrlKey){$.datepicker._adjustDate(inst,+7,"D");}break;}}else{if(e.keyCode==36&&e.ctrlKey){$.datepicker._showDatepicker(this);}}},_doKeyPress:function(e){var inst=$.datepicker._getInst(this._calId);var chars=$.datepicker._possibleChars(inst._get("dateFormat"));var chr=String.fromCharCode(e.charCode==undefined?e.keyCode:e.charCode);return e.ctrlKey||(chr<" "||!chars||chars.indexOf(chr)>-1);},_connectDatepicker:function(target,inst){var input=$(target);if(input.is("."+this.markerClassName)){return;}var appendText=inst._get("appendText");var isRTL=inst._get("isRTL");if(appendText){if(isRTL){input.before('<span class="datepicker_append">'+appendText);}else{input.after('<span class="datepicker_append">'+appendText);}}var showOn=inst._get("showOn");if(showOn=="focus"||showOn=="both"){input.focus(this._showDatepicker);}if(showOn=="button"||showOn=="both"){input.wrap('<span id="calDiv" class="datepicker_wrap">');var buttonText=inst._get("buttonText");var buttonImage=inst._get("buttonImage");var buttonImageCompact=inst._get("buttonImageCompact");var buttonImageCompactHover=inst._get("buttonImageCompactHover");var datepickerImgIDCount;if(datepickerImgIDCount==null||datepickerImgIDCount==""){datepickerImgIDCount=0;}var trigger="";if($("#flightCompact").length>0){var datepickerImgID="buttonImage_"+target.id;var onmouseoverEvent="$('#"+datepickerImgID+"').filter(':visible').attr('src', '"+buttonImageCompactHover+"')";var onmouseoutEvent="$('#"+datepickerImgID+"').attr('src', '"+buttonImageCompact+"')";trigger=$(inst._get("buttonImageOnly")?$("<img>").addClass("datepicker_trigger").attr({id:datepickerImgID,src:buttonImageCompact,alt:buttonText,title:buttonText,onmouseover:onmouseoverEvent,onmouseout:onmouseoutEvent}):$("<button>").addClass("datepicker_trigger").attr({type:"button"}).html(buttonImage!=""?$("<img>").attr({id:datepickerImgID,src:buttonImageCompact,alt:buttonText,title:buttonText,onmouseover:onmouseoverEvent,onmouseout:onmouseoutEvent}):buttonText));}else{trigger=$(inst._get("buttonImageOnly")?$("<img>").addClass("datepicker_trigger").attr({src:buttonImage,alt:buttonText,title:buttonText}):$("<button>").addClass("datepicker_trigger").attr({type:"button"}).html(buttonImage!=""?$("<img>").attr({src:buttonImage,alt:buttonText,title:buttonText}):buttonText));}if(isRTL){input.before(trigger);}else{input.after(trigger);}$("#buttonImage_"+target.id).parent().parent().children("input[id*='date_picker_display']").attr({onmouseover:onmouseoverEvent,onmouseout:onmouseoutEvent});trigger.click(function(){if($.datepicker._datepickerShowing&&$.datepicker._lastInput==target){$.datepicker._hideDatepicker();}else{$.datepicker._showDatepicker(target);}});}input.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).bind("setData.datepicker",function(event,key,value){inst._settings[key]=value;}).bind("getData.datepicker",function(event,key){return inst._get(key);});input[0]._calId=inst._id;},_inlineDatepicker:function(target,inst){var input=$(target);if(input.is("."+this.markerClassName)){return;}input.addClass(this.markerClassName).append(inst._datepickerDiv).bind("setData.datepicker",function(event,key,value){inst._settings[key]=value;}).bind("getData.datepicker",function(event,key){return inst._get(key);});input[0]._calId=inst._id;this._updateDatepicker(inst);},_inlineShow:function(inst){var numMonths=inst._getNumberOfMonths();},_dialogDatepicker:function(input,dateText,onSelect,settings,pos){var inst=this._dialogInst;if(!inst){inst=this._dialogInst=new DatepickerInstance({},false);this._dialogInput=$('<input type="text" size="1" style="position: absolute; top: -100px;"/>');this._dialogInput.keydown(this._doKeyDown);$("body").append(this._dialogInput);this._dialogInput[0]._calId=inst._id;}extendRemove(inst._settings,settings||{});this._dialogInput.val(dateText);this._pos=(pos?(pos.length?pos:[pos.pageX,pos.pageY]):null);if(!this._pos){var browserWidth=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;var browserHeight=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;var scrollX=document.documentElement.scrollLeft||document.body.scrollLeft;var scrollY=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[(browserWidth/2)-100+scrollX,(browserHeight/2)-150+scrollY];}this._dialogInput.css("left",this._pos[0]+"px").css("top",this._pos[1]+"px");inst._settings.onSelect=onSelect;this._inDialog=true;this._datepickerDiv.addClass("datepicker_dialog");this._showDatepicker(this._dialogInput[0]);if($.blockUI){$.blockUI(this._datepickerDiv);}return this;},_showDatepicker:function(input){input=input.target||input;if(input.nodeName.toLowerCase()!="input"){input=$("input",input.parentNode)[0];}if($.datepicker._isDisabledDatepicker(input)||$.datepicker._lastInput==input){return;}var inst=$.datepicker._getInst(input._calId);inst._selectedDay=inst._selectedDay+1;var beforeShow=inst._get("beforeShow");extendRemove(inst._settings,(beforeShow?beforeShow.apply(input,[input,inst]):{}));$.datepicker._hideDatepicker(null,"");$.datepicker._lastInput=input;inst._setDateFromField(input);if($.datepicker._inDialog){input.value="";}if(!$.datepicker._pos){$.datepicker._pos=$.datepicker._findPos(input);$.datepicker._pos[1]+=input.offsetHeight;}var isFixed=false;$(input).parents().each(function(){isFixed|=$(this).css("position")=="fixed";});if(isFixed&&$.browser.opera){$.datepicker._pos[0]-=document.documentElement.scrollLeft;$.datepicker._pos[1]-=document.documentElement.scrollTop;}inst._datepickerDiv.css("position",($.datepicker._inDialog&&$.blockUI?"static":(isFixed?"fixed":"absolute"))).css({left:$.datepicker._pos[0]+"px",top:$.datepicker._pos[1]+"px"});$.datepicker._pos=null;inst._rangeStart=null;$.datepicker._updateDatepicker(inst);if(!inst._inline){var speed=inst._get("speed");var postProcess=function(){$.datepicker._datepickerShowing=true;$.datepicker._afterShow(inst);};var showAnim=inst._get("showAnim")||"show";inst._datepickerDiv[showAnim](speed,postProcess);if(speed==""){postProcess();}var isVisible=$(":visible",$(inst._input[0])).length>0;if(isVisible){inst._input[0].focus();}$.datepicker._curInst=inst;}},_updateDatepicker:function(inst){inst._datepickerDiv.empty().append(inst._generateDatepicker());var numMonths=inst._getNumberOfMonths();if(numMonths[0]!=1||numMonths[1]!=1){inst._datepickerDiv.addClass("datepicker_multi");}else{inst._datepickerDiv.removeClass("datepicker_multi");}if(inst._get("isRTL")){inst._datepickerDiv.addClass("datepicker_rtl");}else{inst._datepickerDiv.removeClass("datepicker_rtl");}if(inst._input){var isVisible=$(":visible",$(inst._input[0])).length>0;if(isVisible){inst._input[0].focus();}}if($(".calendarComboBox").length>0){$(".calendarComboBox").hover(function(){$(this).find("span.arrow").toggleClass("arrow-hovered ");},function(){$(this).find("span.arrow").toggleClass("arrow-hovered ");});}},_afterShow:function(inst){var numMonths=inst._getNumberOfMonths();if($.browser.msie&&parseInt($.browser.version)<7){$("#datepicker_cover").css({width:inst._datepickerDiv.width()+4,height:inst._datepickerDiv.height()+4});}var isFixed=inst._datepickerDiv.css("position")=="fixed";var pos=inst._input?$.datepicker._findPos(inst._input[0]):null;var browserWidth=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;var browserHeight=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;var scrollX=(isFixed?0:document.documentElement.scrollLeft||document.body.scrollLeft);var scrollY=(isFixed?0:document.documentElement.scrollTop||document.body.scrollTop);if((inst._datepickerDiv.offset().left+inst._datepickerDiv.width()-(isFixed&&$.browser.msie?document.documentElement.scrollLeft:0))>(browserWidth+scrollX)){inst._datepickerDiv.css("left",Math.max(scrollX,pos[0]+(inst._input?$(inst._input[0]).width():null)-inst._datepickerDiv.width()-(isFixed&&$.browser.opera?document.documentElement.scrollLeft:0))+"px");}if((inst._datepickerDiv.offset().top+inst._datepickerDiv.height()-(isFixed&&$.browser.msie?document.documentElement.scrollTop:0))>(browserHeight+scrollY)){inst._datepickerDiv.css("top",Math.max(scrollY,pos[1]-(this._inDialog?0:inst._datepickerDiv.height())-(isFixed&&$.browser.opera?document.documentElement.scrollTop:0))+"px");}},_findPos:function(obj){var notTypeHidden=(obj.type!="hidden");var compactDateHeight=0;if($("#flightCompact").length>0&&$("#"+obj.id.substring(0,obj.id.indexOf("id_"))+"display_"+obj.id.substring(obj.id.length-4,obj.id.length)+"").length>0){obj=$("#"+obj.id.substring(0,obj.id.indexOf("id_"))+"display_"+obj.id.substring(obj.id.length-4,obj.id.length)+"")[0];notTypeHidden=false;compactDateHeight=25;}while(obj&&(obj.type=="hidden"||obj.nodeType!=1)){obj=obj.nextSibling;}var jObj=$(obj);if(notTypeHidden){jObj.show();}var position=jObj.offset();if(notTypeHidden){jObj.hide();}return[position.left,position.top+compactDateHeight];},_hideDatepicker:function(input,speed){var inst=this._curInst?this._curInst:$.datepicker._inst[1];if(!inst){return;}var rangeSelect=inst._get("rangeSelect");if(rangeSelect&&this._stayOpen){this._selectDate(inst,inst._formatDate(inst._currentDay,inst._currentMonth,inst._currentYear));}this._stayOpen=false;if(this._datepickerShowing){speed=(speed!=null?speed:inst._get("speed"));var showAnim=inst._get("showAnim");inst._datepickerDiv[(showAnim=="slideDown"?"slideUp":(showAnim=="fadeIn"?"fadeOut":"hide"))](speed,function(){$.datepicker._tidyDialog(inst);});if(speed==""){this._tidyDialog(inst);}var onClose=inst._get("onClose");if(onClose){onClose.apply((inst._input?inst._input[0]:null),[inst._getDate(),inst]);}this._datepickerShowing=false;this._lastInput=null;inst._settings.prompt=null;if(this._inDialog){this._dialogInput.css({position:"absolute",left:"0",top:"-100px"});if($.blockUI){$.unblockUI();$("body").append(this._datepickerDiv);}}this._inDialog=false;}this._curInst=null;},_tidyDialog:function(inst){inst._datepickerDiv.removeClass("datepicker_dialog").unbind(".datepicker");$(".datepicker_prompt",inst._datepickerDiv).remove();},_checkExternalClick:function(event){if(!$.datepicker._curInst&&!$.datepicker._inst){return;}var $target=$(event.target);if(($target.parents("#datepicker_div").length==0)&&($target.attr("class")!="datepicker_trigger")&&$.datepicker._datepickerShowing&&!($.datepicker._inDialog&&$.blockUI)){$.datepicker._hideDatepicker(null,"");}},_adjustDate:function(id,offset,period){var inst=this._getInst(id);inst._adjustDate(offset,period);this._updateDatepicker(inst);},_gotoToday:function(id){var date=new Date();var inst=this._getInst(id);inst._selectedDay=date.getDate();inst._drawMonth=inst._selectedMonth=date.getMonth();inst._drawYear=inst._selectedYear=date.getFullYear();this._adjustDate(inst);},_selectMonthYear:function(id,select,period){var inst=this._getInst(id);inst._selectingMonthYear=false;inst[period=="M"?"_drawMonth":"_drawYear"]=select.options[select.selectedIndex].value-0;this._adjustDate(inst);},_clickMonthYear:function(id){var inst=this._getInst(id);if(inst._input&&inst._selectingMonthYear&&!$.browser.msie){inst._input[0].focus();}inst._selectingMonthYear=!inst._selectingMonthYear;},_changeFirstDay:function(id,day){var inst=this._getInst(id);inst._settings.firstDay=day;this._updateDatepicker(inst);},_selectDay:function(id,month,year,td){if($(td).is(".datepicker_unselectable")){return;}var inst=this._getInst(id);var rangeSelect=inst._get("rangeSelect");var currentDayClassName="datepicker_currentDay";if(($("#"+id).val()&&id.indexOf("1")>0)||document.URL.indexOf("MultiCitySearch")>0){currentDayClassName="datepicker_currentDepartDay";}else{if($("#"+id).val()&&id.indexOf("2")>0){currentDayClassName="datepicker_currentReturnDay";}}if(rangeSelect){if(!this._stayOpen){$(".datepicker td").removeClass(currentDayClassName);$(td).addClass(currentDayClassName);}this._stayOpen=!this._stayOpen;}inst._selectedDay=inst._currentDay=$("a",td).html();inst._selectedMonth=inst._currentMonth=month;inst._selectedYear=inst._currentYear=year;this._selectDate(id,inst._formatDate(inst._currentDay,inst._currentMonth,inst._currentYear));if(this._stayOpen){inst._endDay=inst._endMonth=inst._endYear=null;inst._rangeStart=new Date(inst._currentYear,inst._currentMonth,inst._currentDay);this._updateDatepicker(inst);}else{if(rangeSelect){inst._endDay=inst._currentDay;inst._endMonth=inst._currentMonth;inst._endYear=inst._currentYear;inst._selectedDay=inst._currentDay=inst._rangeStart.getDate();inst._selectedMonth=inst._currentMonth=inst._rangeStart.getMonth();inst._selectedYear=inst._currentYear=inst._rangeStart.getFullYear();inst._rangeStart=null;if(inst._inline){this._updateDatepicker(inst);}}}},_inputselectDay:function(id,td,error1,error2,error3,clientID,validMonth){var date=$(td).val();var day,month,year;if(date.indexOf("/")<0){var date2=$("#"+clientID+"date_picker_display_id_"+id).val();date2=date2.split("/");day=date2[1];month=date2[0];year=date2[2];}else{date=date.split("/");if(date[1].length==2&&date[1]<=12){if(date[0].length==4&&date[1].length==2&&date[2].length==2){var d=new Date();var limitM=d.getMonth()+parseInt(validMonth)+1;var limitY=d.getFullYear();if(limitM>12){limitM-=12;limitY+=1;}if(parseInt(date[0])>=limitY&&parseInt(date[1])>limitM){var date2=$("#"+clientID+"date_picker_display_id_"+id).val();date2=date2.split("/");day=date2[1];month=date2[0];year=date2[2];}else{if(id==2){if((date[1]+"/"+date[2]+"/"+date[0])<$("#"+clientID+"date_picker_id_"+(id-1)).val()){var date2=$("#"+clientID+"date_picker_display_id_"+id).val();date2=date2.split("/");day=date2[1];month=date2[0];year=date2[2];}else{day=date[2];month=date[1];year=date[0];}}else{day=date[2];month=date[1];year=date[0];}}}else{if(date[0].length==2&&date[1].length==2&&date[2].length==4){var d=new Date();var limitM=d.getMonth()+parseInt(validMonth)+1;var limitY=d.getFullYear();if(limitM>12){limitM-=12;limitY+=1;}if(parseInt(date[2])>=limitY&&parseInt(date[1])>limitM){var date2=$("#"+clientID+"date_picker_display_id_"+id).val();date2=date2.split("/");day=date2[1];month=date2[0];year=date2[2];}else{day=date[0];month=date[1];year=date[2];}}else{var date2=$("#"+clientID+"date_picker_display_id_"+id).val();date2=date2.split("/");day=date2[1];month=date2[0];year=date2[2];}}}else{var date2=$("#"+clientID+"date_picker_display_id_"+id).val();date2=date2.split("/");day=date2[1];month=date2[0];year=date2[2];}}if($(td).is(".datepicker_unselectable")){return;}id-=1;var inst=this._getInst(id);var rangeSelect=inst._get("rangeSelect");var currentDayClassName="datepicker_currentDay";if(($("#"+id).val()&&id.indexOf("1")>0)||document.URL.indexOf("MultiCitySearch")>0){currentDayClassName="datepicker_currentDepartDay";}else{if($("#"+id).val()&&id.indexOf("2")>0){currentDayClassName="datepicker_currentReturnDay";}}if(rangeSelect){if(!this._stayOpen){$(".datepicker td").removeClass(currentDayClassName);$(td).addClass(currentDayClassName);}this._stayOpen=!this._stayOpen;}inst._selectedDay=inst._currentDay=day;inst._selectedMonth=inst._currentMonth=month-1;inst._selectedYear=inst._currentYear=year;this._selectDate(id,inst._formatDate(inst._currentDay,inst._currentMonth,inst._currentYear));if(this._stayOpen){inst._endDay=inst._endMonth=inst._endYear=null;inst._rangeStart=new Date(inst._currentYear,inst._currentMonth,inst._currentDay);this._updateDatepicker(inst);}else{if(rangeSelect){inst._endDay=inst._currentDay;inst._endMonth=inst._currentMonth;inst._endYear=inst._currentYear;inst._selectedDay=inst._currentDay=inst._rangeStart.getDate();inst._selectedMonth=inst._currentMonth=inst._rangeStart.getMonth();inst._selectedYear=inst._currentYear=inst._rangeStart.getFullYear();inst._rangeStart=null;if(inst._inline){this._updateDatepicker(inst);}}}if(id==0){id+=1;if(clientID.indexOf("SelectView")>=0){if(document.getElementById("ControlGroupAvailabilitySearchInputSelectView_AvailabilitySearchInputSelectView_RoundTrip").checked){var returnDate=$("#"+clientID+"date_picker_display_id_"+(id+1)).val().split("/");if(new Date(month+"/"+day+"/"+year)>new Date(returnDate[1]+"/"+returnDate[0]+"/"+returnDate[2])){if($(td).is(".datepicker_unselectable")){return;}var inst=this._getInst(id);var rangeSelect=inst._get("rangeSelect");var currentDayClassName="datepicker_currentDay";if(($("#"+id).val()&&id.indexOf("1")>0)||document.URL.indexOf("MultiCitySearch")>0){currentDayClassName="datepicker_currentDepartDay";}else{if($("#"+id).val()&&id.indexOf("2")>0){currentDayClassName="datepicker_currentReturnDay";}}if(rangeSelect){if(!this._stayOpen){$(".datepicker td").removeClass(currentDayClassName);$(td).addClass(currentDayClassName);}this._stayOpen=!this._stayOpen;}inst._selectedDay=inst._currentDay=day;inst._selectedMonth=inst._currentMonth=month-1;inst._selectedYear=inst._currentYear=year;this._selectDate(id,inst._formatDate(inst._currentDay,inst._currentMonth,inst._currentYear));if(this._stayOpen){inst._endDay=inst._endMonth=inst._endYear=null;inst._rangeStart=new Date(inst._currentYear,inst._currentMonth,inst._currentDay);this._updateDatepicker(inst);}else{if(rangeSelect){inst._endDay=inst._currentDay;inst._endMonth=inst._currentMonth;inst._endYear=inst._currentYear;inst._selectedDay=inst._currentDay=inst._rangeStart.getDate();inst._selectedMonth=inst._currentMonth=inst._rangeStart.getMonth();inst._selectedYear=inst._currentYear=inst._rangeStart.getFullYear();inst._rangeStart=null;if(inst._inline){this._updateDatepicker(inst);}}}}}}}},_clearDate:function(id){var inst=this._getInst(id);if(inst._get("mandatory")){return;}this._stayOpen=false;inst._endDay=inst._endMonth=inst._endYear=inst._rangeStart=null;this._selectDate(inst,"");},_selectDate:function(id,dateStr){var monthName=[" Jan "," Feb "," Mar "," Apr "," May "," Jun "," Jul "," Aug "," Sep "," Oct "," Nov "," Dec "];var date2=dateStr.split("/"),day=date2[1],month=date2[0],year=date2[2];if(id==0){$("span[id=searchDepartDate]").text(day+monthName[month-1]+year);}else{if(id==1){$("span[id=searchReturnDate]").text(day+monthName[month-1]+year);}}var inst=this._getInst(id);dateStr=(dateStr!=null?dateStr:inst._formatDate());if(inst._rangeStart){dateStr=inst._formatDate(inst._rangeStart)+inst._get("rangeSeparator")+dateStr;}if(inst._input){inst._input.val(dateStr);}var onSelect=inst._get("onSelect");if(onSelect){onSelect.apply((inst._input?inst._input[0]:null),[dateStr,inst]);}else{if(inst._input){inst._input.trigger("change");}}if(inst._inline){this._updateDatepicker(inst);}else{if(!this._stayOpen&&inst._input){this._hideDatepicker(null,inst._get("speed"));this._lastInput=inst._input[0];if(typeof(inst._input[0])!="object"){inst._input[0].focus();}this._lastInput=null;}}},noWeekends:function(date){var day=date.getDay();return[(day>0&&day<6),""];},iso8601Week:function(date){var checkDate=new Date(date.getFullYear(),date.getMonth(),date.getDate(),(date.getTimezoneOffset()/-60));var firstMon=new Date(checkDate.getFullYear(),1-1,4);var firstDay=firstMon.getDay()||7;firstMon.setDate(firstMon.getDate()+1-firstDay);if(firstDay<4&&checkDate<firstMon){checkDate.setDate(checkDate.getDate()-3);return $.datepicker.iso8601Week(checkDate);}else{if(checkDate>new Date(checkDate.getFullYear(),12-1,28)){firstDay=new Date(checkDate.getFullYear()+1,1-1,4).getDay()||7;if(firstDay>4&&(checkDate.getDay()||7)<firstDay-3){checkDate.setDate(checkDate.getDate()+3);return $.datepicker.iso8601Week(checkDate);}}}return Math.floor(((checkDate-firstMon)/86400000)/7)+1;},dateStatus:function(date,inst){return $.datepicker.formatDate(inst._get("dateStatus"),date,inst._getFormatConfig());},addDays:function(dateObject,daysToAdd){if(dateObject){return new Date(dateObject.getFullYear(),dateObject.getMonth(),dateObject.getDate()+daysToAdd);}else{var currentDate=new Date();return new Date(currentDate.getFullYear(),currentDate.getMonth(),currentDate.getDate()+daysToAdd);}},addMonths:function(dateObject,months){if(dateObject){return new Date(dateObject.getFullYear(),dateObject.getMonth()+months,dateObject.getDate());}else{var currentDate=new Date();return new Date(currentDate.getFullYear(),currentDate.getMonth()+months,currentDate.getDate());}},getCurrentDateNoTimePortion:function(dateObject){if(dateObject){return new Date(dateObject.getFullYear(),dateObject.getMonth(),dateObject.getDate());}else{var currentDate=new Date();return new Date(currentDate.getFullYear(),currentDate.getMonth(),currentDate.getDate());}},getDaysInMonth:function(dateObject){if(dateObject&&(dateObject.getMonth()!=null||dateObject.getFullYear()!=null)&&!(isNaN(dateObject.getMonth())&&isNaN(dateObject.getFullYear()))){var daysNotInMonthDate=new Date(dateObject.getFullYear(),dateObject.getMonth(),32),daysNotInMonth=daysNotInMonthDate.getDate();return 32-daysNotInMonth;}else{return null;}},parseDate:function(format,value,settings){if(format==null||value==null){throw"Invalid arguments";}value=(typeof value=="object"?value.toString():value+"");if(value==""){return null;}var shortYearCutoff=(settings?settings.shortYearCutoff:null)||this._defaults.shortYearCutoff;var dayNamesShort=(settings?settings.dayNamesShort:null)||this._defaults.dayNamesShort;var dayNames=(settings?settings.dayNames:null)||this._defaults.dayNames;var monthNamesShort=(settings?settings.monthNamesShort:null)||this._defaults.monthNamesShort;var monthNames=(settings?settings.monthNames:null)||this._defaults.monthNames;var year=-1;var month=-1;var day=-1;var literal=false;var lookAhead=function(match){var matches=(iFormat+1<format.length&&format.charAt(iFormat+1)==match);if(matches){iFormat++;}return matches;};var getNumber=function(match){lookAhead(match);var size=(match=="y"?4:2);var num=0;while(size>0&&iValue<value.length&&value.charAt(iValue)>="0"&&value.charAt(iValue)<="9"){num=num*10+(value.charAt(iValue++)-0);size--;}if(size==(match=="y"?4:2)){throw"Missing number at position "+iValue;}return num;};var getName=function(match,shortNames,longNames){var names=(lookAhead(match)?longNames:shortNames);var size=0;for(var j=0;j<names.length;j++){size=Math.max(size,names[j].length);}var name="";var iInit=iValue;while(size>0&&iValue<value.length){name+=value.charAt(iValue++);for(var i=0;i<names.length;i++){if(name==names[i]){return i+1;}}size--;}throw"Unknown name at position "+iInit;};var checkLiteral=function(){if(value.charAt(iValue)!=format.charAt(iFormat)){throw"Unexpected literal at position "+iValue;}iValue++;};var iValue=0;for(var iFormat=0;iFormat<format.length;iFormat++){if(literal){if(format.charAt(iFormat)=="'"&&!lookAhead("'")){literal=false;}else{checkLiteral();}}else{switch(format.charAt(iFormat)){case"d":day=getNumber("d");break;case"D":getName("D",dayNamesShort,dayNames);break;case"m":month=getNumber("m");break;case"M":month=getName("M",monthNamesShort,monthNames);break;case"y":year=getNumber("y");break;case"'":if(lookAhead("'")){checkLiteral();}else{literal=true;}break;default:checkLiteral();}}}if(year<100){year+=new Date().getFullYear()-new Date().getFullYear()%100+(year<=shortYearCutoff?0:-100);}var date=new Date(year,month-1,day);if(date.getFullYear()!=year||date.getMonth()+1!=month||date.getDate()!=day){throw"Invalid date";}return date;},formatDate:function(format,date,settings){if(!date){return"";}var dayNamesShort=(settings?settings.dayNamesShort:null)||this._defaults.dayNamesShort;var dayNames=(settings?settings.dayNames:null)||this._defaults.dayNames;var monthNamesShort=(settings?settings.monthNamesShort:null)||this._defaults.monthNamesShort;var monthNames=(settings?settings.monthNames:null)||this._defaults.monthNames;var lookAhead=function(match){var matches=(iFormat+1<format.length&&format.charAt(iFormat+1)==match);if(matches){iFormat++;}return matches;};var formatNumber=function(match,value){return(lookAhead(match)&&value<10?"0":"")+value;};var formatName=function(match,value,shortNames,longNames){return(lookAhead(match)?longNames[value]:shortNames[value]);};var output="";var literal=false;if(date){for(var iFormat=0;iFormat<format.length;iFormat++){if(literal){if(format.charAt(iFormat)=="'"&&!lookAhead("'")){literal=false;}else{output+=format.charAt(iFormat);}}else{switch(format.charAt(iFormat)){case"d":output+=formatNumber("d",date.getDate());break;case"D":output+=formatName("D",date.getDay(),dayNamesShort,dayNames);break;case"m":output+=formatNumber("m",date.getMonth()+1);break;case"M":output+=formatName("M",date.getMonth(),monthNamesShort,monthNames);break;case"y":output+=(lookAhead("y")?date.getFullYear():(date.getYear()%100<10?"0":"")+date.getYear()%100);break;case"'":if(lookAhead("'")){output+="'";}else{literal=true;}break;default:output+=format.charAt(iFormat);}}}}return output;},_possibleChars:function(format){var chars="";var literal=false;for(var iFormat=0;iFormat<format.length;iFormat++){if(literal){if(format.charAt(iFormat)=="'"&&!lookAhead("'")){literal=false;}else{chars+=format.charAt(iFormat);}}else{switch(format.charAt(iFormat)){case"d"||"m"||"y":chars+="0123456789";break;case"D"||"M":return null;case"'":if(lookAhead("'")){chars+="'";}else{literal=true;}break;default:chars+=format.charAt(iFormat);}}}return chars;}});function DatepickerInstance(settings,inline){this._id=$.datepicker._register(this);this._selectedDay=0;this._selectedMonth=0;this._selectedYear=0;this._drawMonth=0;this._drawYear=0;this._input=null;this._inline=inline;this._datepickerDiv=(!inline?$.datepicker._datepickerDiv:$('<div id="datepicker_div_'+this._id+'" class="datepicker_inline">'));this._settings=extendRemove(settings||{});if(inline){this._setDate(this._getDefaultDate());}}$.extend(DatepickerInstance.prototype,{_get:function(name){return this._settings[name]||$.datepicker._defaults[name];},_setDateFromField:function(input){this._input=$(input);var dateFormat=this._get("dateFormat");var dates=this._input?this._input.val().split(this._get("rangeSeparator")):null;this._endDay=this._endMonth=this._endYear=null;var date=defaultDate=this._getDefaultDate();if(dates.length>0){var settings=this._getFormatConfig();if(dates.length>1){date=$.datepicker.parseDate(dateFormat,dates[1],settings)||defaultDate;this._endDay=date.getDate();this._endMonth=date.getMonth();this._endYear=date.getFullYear();}try{if(!document.URL.toLowerCase().indexOf(".aspx")){if(input.id.indexOf("date_picker_id_1")>=0){if(String(($("[id$=picker_display_id_1]").filter(":visible").attr("value"))||"").toUpperCase()==String(($("div.newCompactLayout:visible div[id=departDateInitialText]").attr("value"))||"").toUpperCase()){date=defaultDate;}else{date=new Date(($("[id$=picker_display_id_1]").filter(":visible").attr("value")).replace(/(\d{2})\/(\d{2})\/(\d{4})/,"$2/$1/$3"));}}else{if(input.id.indexOf("date_picker_id_2")>=0){if(String(($("[id$=picker_display_id_2]").filter(":visible").attr("value"))||"").toUpperCase()==String(($("#returnDateInitialText").attr("value"))||"").toUpperCase()){if((String(($("[id$=picker_display_id_1]").filter(":visible").attr("value"))||"").toUpperCase()==String(($("#departDateInitialText").attr("value"))||"").toUpperCase())){date=new Date(defaultDate.setDate(defaultDate.getDate()+2));}else{var departDateValue=new Date(($("[id$=picker_display_id_1]").filter(":visible").attr("value")).replace(/(\d{2})\/(\d{2})\/(\d{4})/,"$2/$1/$3"));var returnDateValue=new Date((this._formatDate(this._currentDay,this._currentMonth,this._currentYear)).replace(/(\d{2})\/(\d{2})\/(\d{4})/,"$1/$2/$3"));if(departDateValue>returnDateValue){date=new Date(departDateValue.setDate(departDateValue.getDate()+2));}else{date=returnDateValue;}}}else{var departDateValue=new Date(($("[id$=picker_display_id_1]").filter(":visible").attr("value")).replace(/(\d{2})\/(\d{2})\/(\d{4})/,"$2/$1/$3"));var returnDateValue=new Date((this._formatDate(this._currentDay,this._currentMonth,this._currentYear)).replace(/(\d{2})\/(\d{2})\/(\d{4})/,"$1/$2/$3"));if(departDateValue>returnDateValue){date=new Date(departDateValue.setDate(departDateValue.getDate()+2));}else{date=returnDateValue;}}}else{date=$.datepicker.parseDate(dateFormat,dates[0],settings)||defaultDate;}}}else{date=$.datepicker.parseDate(dateFormat,dates[0],settings)||defaultDate;}}catch(e){$.datepicker.log(e);date=defaultDate;}}this._selectedDay=date.getDate();this._drawMonth=this._selectedMonth=date.getMonth();this._drawYear=this._selectedYear=date.getFullYear();this._currentDay=(dates[0]?date.getDate():0);this._currentMonth=(dates[0]?date.getMonth():0);this._currentYear=(dates[0]?date.getFullYear():0);this._adjustDate();},_getDefaultDate:function(){var date=this._determineDate("defaultDate",new Date());var minDate=this._getMinMaxDate("min",true);var maxDate=this._getMinMaxDate("max");date=(minDate&&date<minDate?minDate:date);date=(maxDate&&date>maxDate?maxDate:date);return date;},_determineDate:function(name,defaultDate){var offsetNumeric=function(offset){var date=new Date();date.setDate(date.getDate()+offset);return date;};var offsetString=function(offset,getDaysInMonth){var date=new Date();var matches=/^([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?$/.exec(offset);if(matches){var year=date.getFullYear();var month=date.getMonth();var day=date.getDate();switch(matches[2]||"d"){case"d":case"D":day+=(matches[1]-0);break;case"w":case"W":day+=(matches[1]*7);break;case"m":case"M":month+=(matches[1]-0);day=Math.min(day,getDaysInMonth(year,month));break;case"y":case"Y":year+=(matches[1]-0);day=Math.min(day,getDaysInMonth(year,month));break;}date=new Date(year,month,day);}return date;};var date=this._get(name);return(date==null?defaultDate:(typeof date=="string"?offsetString(date,this._getDaysInMonth):(typeof date=="number"?offsetNumeric(date):date)));},_setDate:function(date,endDate){this._selectedDay=this._currentDay=date.getDate();this._drawMonth=this._selectedMonth=this._currentMonth=date.getMonth();this._drawYear=this._selectedYear=this._currentYear=date.getFullYear();if(this._get("rangeSelect")){if(endDate){this._endDay=endDate.getDate();this._endMonth=endDate.getMonth();this._endYear=endDate.getFullYear();}else{this._endDay=this._currentDay;this._endMonth=this._currentMonth;this._endYear=this._currentYear;}}this._adjustDate();},_getDate:function(){var startDate=(!this._currentYear||(this._input&&this._input.val()=="")?null:new Date(this._currentYear,this._currentMonth,this._currentDay));if(this._get("rangeSelect")){return[startDate,(!this._endYear?null:new Date(this._endYear,this._endMonth,this._endDay))];}else{return startDate;}},_generateDatepicker:function(){var today=new Date();today=new Date(today.getFullYear(),today.getMonth(),today.getDate());var showStatus=this._get("showStatus");var isRTL=this._get("isRTL");var clear=(this._get("mandatory")?"":'<div class="datepicker_clear"><a onclick="jQuery.datepicker._clearDate('+this._id+');"'+(showStatus?this._addStatus(this._get("clearStatus")||"&#xa0;"):"")+">"+this._get("clearText")+"</a></div>");var controls="";var prompt=this._get("prompt");var closeAtTop=this._get("closeAtTop");var hideIfNoPrevNext=this._get("hideIfNoPrevNext");var numMonths=this._getNumberOfMonths();var stepMonths=this._get("stepMonths");var isMultiMonth=(numMonths[0]!=1||numMonths[1]!=1);var minDate=this._getMinMaxDate("min",true);var maxDate=this._getMinMaxDate("max");var drawMonth=this._drawMonth;var drawYear=this._drawYear;var currentDayClassName="";if(document.URL.indexOf("MultiCitySearch")){currentDayClassName=" datepicker_currentDepartDay";}else{if(this._id=="0"||this._id=="2"||this._id=="4"){currentDayClassName=" datepicker_currentDepartDay";}else{if(this._id=="1"||this._id=="3"||this._id=="5"){if($("#flightCompact").length<1){currentDayClassName=" datepicker_currentReturnDay";}else{var value=$("[id$=picker_display_id_2]").filter(":visible").attr("value");var regex=$("[id$=picker_display_id_2]").filter(":visible").attr("dateregex");if(((value!==null)&&(regex)&&(value.match(regex)))||(String(value||"").toUpperCase()==String($("#returnDateInitialText").attr("value")||"").toUpperCase())){currentDayClassName=" datepicker_currentReturnDay";}}}}}if(maxDate){var maxDraw=new Date(maxDate.getFullYear(),maxDate.getMonth()-numMonths[1]+1,maxDate.getDate());maxDraw=(minDate&&maxDraw<minDate?minDate:maxDraw);while(new Date(drawYear,drawMonth,1)>maxDraw){drawMonth--;if(drawMonth<0){drawMonth=11;drawYear--;}}}var prev='<div class="datepicker_prev">'+(this._canAdjustMonth(-1,drawYear,drawMonth)?'<a onclick="jQuery.datepicker._adjustDate('+this._id+", -"+stepMonths+", 'M');\""+(showStatus?this._addStatus(this._get("prevStatus")||"&#xa0;"):"")+">"+this._get("prevText")+"</a>":(hideIfNoPrevNext?"":"<label>"+this._get("prevText")+"</label>"))+"</div>";var next='<div class="datepicker_next">'+(this._canAdjustMonth(+1,drawYear,drawMonth)?'<a onclick="jQuery.datepicker._adjustDate('+this._id+", +"+stepMonths+", 'M');\""+(showStatus?this._addStatus(this._get("nextStatus")||"&#xa0;"):"")+">"+this._get("nextText")+"</a>":(hideIfNoPrevNext?">":"<label>"+this._get("nextText")+"</label>"))+"</div>";var html=(prompt?'<div class="datepicker_prompt">'+prompt+"</div>":"")+(closeAtTop&&!this._inline?controls:"")+'<div class="datepicker_links">'+(isRTL?next:prev)+(this._isInRange(today)?'<div class="datepicker_current">'+'<a onclick="jQuery.datepicker._gotoToday('+this._id+');"'+(showStatus?this._addStatus(this._get("currentStatus")||"&#xa0;"):"")+">"+this._get("currentText")+"</a></div>":"")+(isRTL?prev:next)+"</div>";var showWeeks=this._get("showWeeks");for(var row=0;row<numMonths[0];row++){for(var col=0;col<numMonths[1];col++){var selectedDate=new Date(drawYear,drawMonth,this._selectedDay);html+='<div class="datepicker_oneMonth'+(col==0?" datepicker_newRow":"")+'">'+this._generateMonthYearHeader(drawMonth,drawYear,minDate,maxDate,selectedDate,row>0||col>0)+'<table class="datepicker" cellpadding="0" cellspacing="0"><thead>'+'<tr class="datepicker_titleRow">'+(showWeeks?"<td>"+this._get("weekHeader")+"</td>":"");var firstDay=this._get("firstDay");var changeFirstDay=this._get("changeFirstDay");var dayNames=this._get("dayNames");var dayNamesShort=this._get("dayNamesShort");var dayNamesMin=this._get("dayNamesMin");for(var dow=0;dow<7;dow++){var day=(dow+firstDay)%7;var status=this._get("dayStatus")||"&#xa0;";status=(status.indexOf("DD")>-1?status.replace(/DD/,dayNames[day]):status.replace(/D/,dayNamesShort[day]));html+="<td"+((dow+firstDay+6)%7>=5?' class="datepicker_weekEndCell"':"")+">"+(!changeFirstDay?"<span":'<a onclick="jQuery.datepicker._changeFirstDay('+this._id+", "+day+');"')+(showStatus?this._addStatus(status):"")+' title="'+dayNames[day]+'">'+dayNamesMin[day]+(changeFirstDay?"</a>":"</span>")+"</td>";}html+="</tr></thead><tbody>";var daysInMonth=this._getDaysInMonth(drawYear,drawMonth);if(drawYear==this._selectedYear&&drawMonth==this._selectedMonth){this._selectedDay=Math.min(this._selectedDay,daysInMonth);}var leadDays=(this._getFirstDayOfMonth(drawYear,drawMonth)-firstDay+7)%7;var currentDate=(!this._currentDay?new Date(9999,9,9):new Date(this._currentYear,this._currentMonth,this._currentDay));var endDate=this._endDay?new Date(this._endYear,this._endMonth,this._endDay):currentDate;var printDate=new Date(drawYear,drawMonth,1-leadDays);var numRows=(isMultiMonth?6:Math.ceil((leadDays+daysInMonth)/7));var beforeShowDay=this._get("beforeShowDay");var showOtherMonths=this._get("showOtherMonths");var calculateWeek=this._get("calculateWeek")||$.datepicker.iso8601Week;var dateStatus=this._get("statusForDate")||$.datepicker.dateStatus;for(var dRow=0;dRow<numRows;dRow++){html+='<tr class="datepicker_daysRow">'+(showWeeks?'<td class="datepicker_weekCol">'+calculateWeek(printDate)+"</td>":"");for(var dow=0;dow<7;dow++){var daySettings=(beforeShowDay?beforeShowDay.apply((this._input?this._input[0]:null),[printDate]):[true,""]);var otherMonth=(printDate.getMonth()!=drawMonth);var unselectable=otherMonth||!daySettings[0]||(minDate&&printDate<minDate)||(maxDate&&printDate>maxDate);html+='<td class="datepicker_daysCell'+((dow+firstDay+6)%7>=5?" datepicker_weekEndCell":"")+(otherMonth?" datepicker_otherMonth":"")+(unselectable?" datepicker_unselectable":"")+(otherMonth&&!showOtherMonths?"":" "+daySettings[1]+(printDate.getTime()>=currentDate.getTime()&&printDate.getTime()<=endDate.getTime()?currentDayClassName:"")+(printDate.getTime()==today.getTime()?" datepicker_today":""))+'"'+(unselectable?"":" onmouseover=\"jQuery(this).addClass('datepicker_daysCellOver');"+(!showStatus||(otherMonth&&!showOtherMonths)?"":"jQuery('#datepicker_status_"+this._id+"').html('"+(dateStatus.apply((this._input?this._input[0]:null),[printDate,this])||"&#xa0;")+"');")+'"'+" onmouseout=\"jQuery(this).removeClass('datepicker_daysCellOver');"+(!showStatus||(otherMonth&&!showOtherMonths)?"":"jQuery('#datepicker_status_"+this._id+"').html('&#xa0;');")+'" onclick="jQuery.datepicker._selectDay('+this._id+","+drawMonth+","+drawYear+', this);"')+">"+(otherMonth?(showOtherMonths?printDate.getDate():"&#xa0;"):(unselectable?printDate.getDate():"<a>"+printDate.getDate()+"</a>"))+"</td>";printDate.setDate(printDate.getDate()+1);}html+="</tr>";}drawMonth++;if(drawMonth>11){drawMonth=0;drawYear++;}html+="</tbody></table></div>";}}html+=(showStatus?'<div id="datepicker_status_'+this._id+'" class="datepicker_status">'+(this._get("initStatus")||"&#xa0;")+"</div>":"")+(!closeAtTop&&!this._inline?controls:"")+'<div style="clear: both;"></div>'+($.browser.msie&&parseInt($.browser.version)<7&&!this._inline?'<iframe src="javascript:false;" class="datepicker_cover"></iframe>':"");return html;},_generateMonthYearHeader:function(drawMonth,drawYear,minDate,maxDate,selectedDate,secondary){minDate=(this._rangeStart&&minDate&&selectedDate<minDate?selectedDate:minDate);var showStatus=this._get("showStatus");var html='<div class="datepicker_header">';var monthNames=this._get("monthNames");if(secondary||!this._get("changeMonth")){if($("#flightCompact").length>0){html+='<div class="datepicker_oneMonthHeader">'+monthNames[drawMonth]+"&#xa0;";}else{html+=monthNames[drawMonth]+"&#xa0;";}}else{var inMinYear=(minDate&&minDate.getFullYear()==drawYear);var inMaxYear=(maxDate&&maxDate.getFullYear()==drawYear);if($("#flightCompact").length>0){html+='<div class="calendarComboBox"><select class="datepicker_newMonth" '+'onchange="jQuery.datepicker._selectMonthYear('+this._id+", this, 'M');\" "+'onclick="jQuery.datepicker._clickMonthYear('+this._id+');"'+(showStatus?this._addStatus(this._get("monthStatus")||"&#xa0;"):"")+">";for(var month=0;month<12;month++){if((!inMinYear||month>=minDate.getMonth())&&(!inMaxYear||month<=maxDate.getMonth())){html+='<option value="'+month+'"'+(month==drawMonth?' selected="selected"':"")+">"+monthNames[month]+"</option>";}}html+='</select><span class="arrow"/></div>';}else{html+='<select class="datepicker_newMonth" '+'onchange="jQuery.datepicker._selectMonthYear('+this._id+", this, 'M');\" "+'onclick="jQuery.datepicker._clickMonthYear('+this._id+');"'+(showStatus?this._addStatus(this._get("monthStatus")||"&#xa0;"):"")+">";for(var month=0;month<12;month++){if((!inMinYear||month>=minDate.getMonth())&&(!inMaxYear||month<=maxDate.getMonth())){html+='<option value="'+month+'"'+(month==drawMonth?' selected="selected"':"")+">"+monthNames[month]+"</option>";}}html+="</select>";}}if(secondary||!this._get("changeYear")){if($("#flightCompact").length>0){html+=drawYear+"</div>";}else{html+=drawYear;}}else{var years=this._get("yearRange").split(":");var year=0;var endYear=0;if(years.length!=2){year=drawYear-10;endYear=drawYear+10;}else{if(years[0].charAt(0)=="+"||years[0].charAt(0)=="-"){year=drawYear+parseInt(years[0],10);endYear=drawYear+parseInt(years[1],10);}else{year=parseInt(years[0],10);endYear=parseInt(years[1],10);}}year=(minDate?Math.max(year,minDate.getFullYear()):year);endYear=(maxDate?Math.min(endYear,maxDate.getFullYear()):endYear);if($("#flightCompact").length>0){html+='<div class="calendarComboBox calendarMargin"><select class="datepicker_newYear" '+'onchange="jQuery.datepicker._selectMonthYear('+this._id+", this, 'Y');\" "+'onclick="jQuery.datepicker._clickMonthYear('+this._id+');"'+(showStatus?this._addStatus(this._get("yearStatus")||"&#xa0;"):"")+">";for(;year<=endYear;year++){html+='<option value="'+year+'"'+(year==drawYear?' selected="selected"':"")+">"+year+"</option>";}html+='</select><span class="arrow yearArrow"/></div>';}else{html+='<select class="datepicker_newYear" '+'onchange="jQuery.datepicker._selectMonthYear('+this._id+", this, 'Y');\" "+'onclick="jQuery.datepicker._clickMonthYear('+this._id+');"'+(showStatus?this._addStatus(this._get("yearStatus")||"&#xa0;"):"")+">";for(;year<=endYear;year++){html+='<option value="'+year+'"'+(year==drawYear?' selected="selected"':"")+">"+year+"</option>";}html+="</select>";}}html+="</div>";return html;},_addStatus:function(text){return" onmouseover=\"jQuery('#datepicker_status_"+this._id+"').html('"+text+"');\" "+"onmouseout=\"jQuery('#datepicker_status_"+this._id+"').html('&#xa0;');\"";},_adjustDate:function(offset,period){var year=this._drawYear+(period=="Y"?offset:0);var month=this._drawMonth+(period=="M"?offset:0);var day=Math.min(this._selectedDay,this._getDaysInMonth(year,month))+(period=="D"?offset:0);var date=new Date(year,month,day);var minDate=this._getMinMaxDate("min",true);var maxDate=this._getMinMaxDate("max");date=(minDate&&date<minDate?minDate:date);date=(maxDate&&date>maxDate?maxDate:date);this._selectedDay=date.getDate();this._drawMonth=this._selectedMonth=date.getMonth();this._drawYear=this._selectedYear=date.getFullYear();},_getNumberOfMonths:function(){var numMonths=this._get("numberOfMonths");return(numMonths==null?[1,1]:(typeof numMonths=="number"?[1,numMonths]:numMonths));},_getMinMaxDate:function(minMax,checkRange){var date=this._determineDate(minMax+"Date",null);if(date){date.setHours(0);date.setMinutes(0);date.setSeconds(0);date.setMilliseconds(0);}return date||(checkRange?this._rangeStart:null);},_getDaysInMonth:function(year,month){return 32-new Date(year,month,32).getDate();},_getFirstDayOfMonth:function(year,month){return new Date(year,month,1).getDay();},_canAdjustMonth:function(offset,curYear,curMonth){var numMonths=this._getNumberOfMonths();var date=new Date(curYear,curMonth+(offset<0?offset:numMonths[1]),1);if(offset<0){date.setDate(this._getDaysInMonth(date.getFullYear(),date.getMonth()));}return this._isInRange(date);},_isInRange:function(date){var newMinDate=(!this._rangeStart?null:new Date(this._selectedYear,this._selectedMonth,this._selectedDay));newMinDate=(newMinDate&&this._rangeStart<newMinDate?this._rangeStart:newMinDate);var minDate=newMinDate||this._getMinMaxDate("min");var maxDate=this._getMinMaxDate("max");return((!minDate||date>=minDate)&&(!maxDate||date<=maxDate));},_getFormatConfig:function(){var shortYearCutoff=this._get("shortYearCutoff");shortYearCutoff=(typeof shortYearCutoff!="string"?shortYearCutoff:new Date().getFullYear()%100+parseInt(shortYearCutoff,10));return{shortYearCutoff:shortYearCutoff,dayNamesShort:this._get("dayNamesShort"),dayNames:this._get("dayNames"),monthNamesShort:this._get("monthNamesShort"),monthNames:this._get("monthNames")};},_formatDate:function(day,month,year){if(!day){this._currentDay=this._selectedDay;this._currentMonth=this._selectedMonth;this._currentYear=this._selectedYear;}var date=(day?(typeof day=="object"?day:new Date(year,month,day)):new Date(this._currentYear,this._currentMonth,this._currentDay));return $.datepicker.formatDate(this._get("dateFormat"),date,this._getFormatConfig());}});function extendRemove(target,props){$.extend(target,props);for(var name in props){if(props[name]==null){target[name]=null;}}return target;}$.fn.datepicker=function(options){var otherArgs=Array.prototype.slice.call(arguments,1);if(typeof options=="string"&&(options=="isDisabled"||options=="getDate")){return $.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this[0]].concat(otherArgs));}return this.each(function(){typeof options=="string"?$.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this].concat(otherArgs)):$.datepicker._attachDatepicker(this,options);});};$(document).ready(function(){$(document.body).append($.datepicker._datepickerDiv).mousedown($.datepicker._checkExternalClick);});$.datepicker=new Datepicker();})(jQuery);(function($){$.metaobjects=function(options){options=$.extend({context:document,clean:true,selector:"object.metaobject"},options);function _value(value){eval("value = "+value+";");return value;}function _object(name,value){var names=name.split(".");var result={};var current=result;for(var i=0,iLast=names.length-1;i<=iLast;i++){if(names[i]){current=current[names[i]]=i==iLast?value:{};}}return result;}return $(options.selector,options.context).each(function(){var settings={target:this.parentNode,cache:false};$('> param[name="metaparam"]',this).each(function(){$.extend(settings,_value(this.value));});$("> param",this).not('[name="metaparam"]').each(function(){var name=this.name;var value=_value(this.value);if(settings.cache){var rest=name.split(".");var first=rest.shift();rest=rest.join(".");var mixed=rest?_object(rest,value):value;$(settings.target).each(function(){var data=$.data(this,first);if(!data){$.data(this,first,mixed);}else{$.extend(true,data,mixed);}});}else{$(settings.target).each(function(){$.extend(true,this,_object(name,value));});}});if(options.clean){$(this).remove();}});};})(jQuery);
/*!
This file is part of the Navitaire NewSkies application.
Copyright (C) Navitaire.  All rights reserved.
*/
SKYSALES={};SKYSALES.Json=window.JSON;SKYSALES.Resource={};SKYSALES.Util={};SKYSALES.Class={};SKYSALES.Instance={};SKYSALES.Instance.index=0;SKYSALES.Instance.getNextIndex=function(){SKYSALES.Instance.index+=1;return SKYSALES.Instance.index;};if(!SKYSALES.Class.LocaleCurrency){SKYSALES.Class.LocaleCurrency=function(){var v=new SKYSALES.Class.SkySales();var e=SKYSALES.Util.extendObject(v);e.num=null;e.localeCurrency=null;e.decimalSeparator=".";e.groupSeparator=",";var f=SKYSALES.Util.getResource();var c=f.currencyCultureInfo;var u=0;var s="";var b="";var l="";var q=true;var a=function(){var z="n";if(!q){z="(n)";}return z;};var m=function(F){var C=c.groupSizes||[];var A=e.groupSeparator;var D=0;var G=0;var E=3;if(D>C.length){E=C[D];}var K=E-1;u=Math.floor(F);var L=u.toString();var H=L.split("");var I=H.reverse();var z=[];var J=function(){var M=3;if(D<=C.length-2){D+=1;M=C[D];}else{M=E;}K+=M;return M;};for(G=0;G<I.length;G+=1){if(G>K){E=J();z.push(A);}z.push(I[G]);}H=z.reverse();var B=H.join("");return B;};var r=function(C){var A=C-u;var z=A.toFixed(c.decimalDigits);var B=z.substring(2);return B;};var w=function(){var A=a()||"";var z=A.replace("n",l);return z;};var t=function(){e.currency=e.num.toString();q=e.num>=0;e.num=Math.abs(e.num);s=m(e.num);b=r(e.num);l=s;if(0<c.decimalDigits){l+=e.decimalSeparator;}l+=b;e.currency=w();};e.init=function(z){this.setSettingsByObject(z);if(null!==this.num){t();}};return e;};}SKYSALES.Class.Resource=function(){var b=new SKYSALES.Class.SkySales();var a=SKYSALES.Util.extendObject(b);a.countryInfo={};a.titleInfo={};a.stateInfo={};a.stationInfo={};a.macInfo={};a.marketInfo={};a.macHash={};a.stationHash={};a.macStationHash={};a.countryStationHash={};a.countryHash={};a.marketHash={};a.sourceInfo={};a.clientHash={};a.dateCultureInfo={};a.currencyCultureInfo={};a.carrierInfo={};a.carrierHash={};a.datePickerInfo={};a.passengerInfo={};a.passengerHash={};a.carInfo={};a.externalRateInfo={};a.currencyInfo={};a.currencyHash={};a.populateMacHash=function(){var c=0;var e=[];var f={};var l=null;if(a.macInfo&&a.macInfo.MacList){e=a.macInfo.MacList;for(c=0;c<e.length;c+=1){l=e[c];f[l.code]=l;}}a.macHash=f;};a.populateStationList=function(){var l=0,m=[],f=[],q="country",e="name",c=-1;if(a.stationInfo&&a.stationInfo.StationList){m=a.stationInfo.StationList;c=m.length;for(l=0;l<c;l+=1){m[l].country=a.countryHash[m[l].countryCode];m[l].index=l;}f=m;}};a.sortStationList=function(e,c){return function(m,f){var q=m[e],l=f[e];if(q===l){return typeof c==="function"?c(m,f):0;}return q<l?-1:1;};};a.populateStationHash=function(){var e=0;var l=[];var q={};var f=null;var m={};var c=a.countryHash;if(a.stationInfo&&a.stationInfo.StationList){l=a.stationInfo.StationList;for(e=0;e<l.length;e+=1){f=l[e];q[f.code]=f;stationCountryCode=f.countryCode||"";if(stationCountryCode!==""){m[stationCountryCode]=m[stationCountryCode]||[];m[stationCountryCode][m[stationCountryCode].length]=f;m[stationCountryCode].name=c[stationCountryCode];}}}a.stationHash=q;a.countryStationHash=m;};a.populatePassengerHash=function(){var f=0,m=[],e={},l=null,c=-1;if(a.passengerInfo&&a.passengerInfo.PassengerList){m=a.passengerInfo.PassengerList;c=m.length;for(f=0;f<c;f+=1){l=m[f];e[l.PassengerNumber]=l;}}a.passengerHash=e;};a.populateCarrierHash=function(){var e=0,c=[],q=0,m={},f=null,l=this.carrierInfo;if(l){c=l.carrierList;if(c){q=c.length;if(q>0){for(e=0;e<q;e+=1){f=c[e];m[f.code]=f;}}}a.carrierHash=m;}};a.populateCountryHash=function(){var e=0;var c={};var f=[];var l=null;if(a.countryInfo&&a.countryInfo.CountryList){f=a.countryInfo.CountryList;for(e=0;e<f.length;e+=1){l=f[e];c[l.code]=l.name;}}a.countryHash=c;};a.populateMarketHash=function(){var l=0,q=[],e={},m={},c="",f={},r=a.stationHash;if(a.marketInfo&&a.marketInfo.MarketList){f=a.marketInfo.MarketList;for(c in f){if(f.hasOwnProperty(c)){q=f[c];for(l=q.length-1;l>=0;l-=1){e=q[l];m=r[e.code];if(m){e.name=m.name;e.index=m.index;}else{q.splice(l,1);}}q.sort(this.destinationSort);}}a.marketHash=f;}};a.destinationSort=function(l,f){var e=l.index,c=f.index;return e-c;};a.populateClientHash=function(){var m=window.document.cookie;var e=[];var l=0;var c="";var f="";var q="";var r=-1;if(m){e=document.cookie.split("; ");for(l=0;l<e.length;l+=1){c=e[l];r=c.indexOf("=");if(r>-1){f=c.substring(0,r);q=c.substring(r+1,c.length);if(f){q=SKYSALES.Util.decodeUriComponent(q);a.clientHash[f]=q;}}}}};a.populateCurrencyHash=function(){var m=0,l=[],f={},e=null,c=-1;if(a.currencyInfo&&a.currencyInfo.CurrencyList){l=a.currencyInfo.CurrencyList;c=l.length;for(m=0;m<c;m+=1){e=l[m];f[e.code]=e;}}a.currencyHash=f;};a.sortCountryStationHash=function(e,c){return(e.name>c.name);};a.joinMacStations=function(){if(SKYSALES.joinMacStations!="false"){for(sIdx in a.stationHash){if(a.stationHash[sIdx].macCode!=""&&a.stationHash[sIdx].macCode!="BAK"){if(!a.stationHash[a.stationHash[sIdx].macCode]){macStation={"countryCode":a.stationHash[sIdx].countryCode,"country":a.stationHash[sIdx].country,"provinceStateCode":a.stationHash[sIdx].provinceStateCode,"macCode":"","name":a.macHash[a.stationHash[sIdx].macCode].name,"shortName":a.macHash[a.stationHash[sIdx].macCode].name,"code":a.macHash[a.stationHash[sIdx].macCode].code};a.stationHash[a.stationHash[sIdx].macCode]=macStation;a.countryStationHash[a.stationHash[sIdx].countryCode].push(macStation);a.countryStationHash[a.stationHash[sIdx].countryCode].sort(a.sortCountryStationHash);a.marketHash[a.stationHash[sIdx].macCode]=[];}myMarketHash=a.marketHash[sIdx];macMarketHash=a.marketHash[a.stationHash[sIdx].macCode];for(dIdx in myMarketHash){alreadyInMarketHash=false;for(mdIdx in macMarketHash){if(myMarketHash[dIdx].code==macMarketHash[mdIdx].code){alreadyInMarketHash=true;break;}}if(alreadyInMarketHash==false){a.marketHash[a.stationHash[sIdx].macCode].push(myMarketHash[dIdx]);}}macStationMarket={"code":a.stationHash[sIdx].macCode,"name":a.macHash[a.stationHash[sIdx].macCode].name};for(mIndex in a.marketHash){for(dIdx in a.marketHash[mIndex]){if(a.marketHash[mIndex][dIdx].code==a.stationHash[sIdx].code){a.marketHash[mIndex].push(macStationMarket);delete a.marketHash[mIndex][dIdx];}}}a.macStationHash[sIdx]=a.stationHash[sIdx];delete a.stationHash[sIdx];}}}};a.setSettingsByObject=function(c){b.setSettingsByObject.call(this,c);SKYSALES.datepicker=this.datePickerInfo;a.populateCountryHash();a.populateStationList();a.populateStationHash();a.populateCarrierHash();a.populateMacHash();a.populateMarketHash();a.joinMacStations();a.populateClientHash();a.populatePassengerHash();a.populateCurrencyHash();};return a;};SKYSALES.Util.createObjectArray=[];SKYSALES.Util.createObject=function(a,e,c){var b=SKYSALES.Util.createObjectArray;b[b.length]={"objNameBase":a,"objType":e,"json":c};};SKYSALES.Util.initObjects=function(){var f=0;var c=SKYSALES.Util.createObjectArray;var l="";var b="";var e=null;var a=null;for(f=0;f<c.length;f+=1){a=c[f];l=a.objNameBase+SKYSALES.Instance.getNextIndex();b=a.objType;e=a.json||{};if(SKYSALES.Class[b]){SKYSALES.Instance[l]=new SKYSALES.Class[b]();SKYSALES.Instance[l].init(e);}}SKYSALES.Util.createObjectArray=[];};SKYSALES.Util.decodeUriComponent=function(a){a=a||"";if(window.decodeURIComponent){a=window.decodeURIComponent(a);}a=a.replace(/\+/g," ");return a;};SKYSALES.Util.encodeUriComponent=function(a){a=a||"";if(window.encodeURIComponent){a=window.encodeURIComponent(a);}return a;};SKYSALES.Util.getResource=function(){return SKYSALES.Resource;};SKYSALES.Util.extendObject=function(b){var a=function(){};a.prototype=b;return new a();};SKYSALES.Util.initializeNewObject=function(l){var f="";var b={objNameBase:"",objType:"",selector:""};var e=function(){var r=true;$().extend(b,l);var q=null;for(q in b){if(b.hasOwnProperty(q)){if(b[q]===undefined){r=false;break;}}}return r;};var c=function(u){var w=$(this).val();var r=SKYSALES.Json.parse(w);var v=null;var s="";var B=[];var t=0;var A=0;var q=/^([a-zA-Z0-9]+)\[(\d+)\]$/;var z=[];if(r.method!==undefined){v=SKYSALES.Instance[f];if(r.method.name.indexOf(".")>-1){B=r.method.name.split(".");for(t=0;t<B.length;t+=1){s=B[t];z=s.match(q);if((z)&&(z.length>0)){s=z[1];A=z[2];A=parseInt(A,10);v=v[s][A];}else{v=v[s];}}}else{v=v[r.method.name];}if(v){v(r.method.paramJsonObject);}}};var m=function(){f=l.objNameBase+SKYSALES.Instance.getNextIndex();if(SKYSALES.Class[l.objType]){SKYSALES.Instance[f]=new SKYSALES.Class[l.objType]();$("object.jsObject > param",this).each(c);}else{alert("Object Type Not Found: "+l.objType);}};var a=function(){var q=e();if(q){$(l.selector).each(m);}else{alert("\nthere has been an error");}};a();return false;};SKYSALES.Util.populateSelect=function(a){a=a||{};var m=a.selectedItem||null,u=a.objectArray||[],A=a.selectBox||null,w=a.showCode||false,B=a.clearOptions||false,z="",v="",l=null,r=null,q=0,t=0,f="",b=Option,s=null,e=false,c="";if(A.length>0){l=A[0];if(l&&l.options){s=l.options;if(B){s.length=0;}else{if(!l.originalOptionLength){l.originalOptionLength=l.options.length;}s.length=l.originalOptionLength;}t=u.length;if($.browser.msie&&$.browser.version<7){e=true;}for(q=0;q<t;q+=1){r=u[q]||{};z=r.name||r.Name||"";v=r.code||r.ProvinceStateCode||"";if(!v&&v!==0){v="";}if(w){z+=" ("+v+")";}if(e){f=new b(z,v,false,false);if(r.optionClass){$(f).addClass(r.optionClass);}s[s.length]=f;}else{f+='<option value="'+v+'"';if(r.optionClass){f+=' class"="'+r.optionClass+'"';}f+=">"+z+"</option>";}}if(!e){A.append(f);}if(m!==null){A.val(m);c=A.val();if(c!==m){f=new b(m,m,false,false);if(r.optionClass){$(f).addClass(r.optionClass);}A.append(f);A.val(m);}}}}};SKYSALES.Util.populateSelectWithGroups=function(c){var a=c.selectedItem||null;var s=c.objectArray||null;var m=c.groupArray||null;var r=c.selectBox||null;var C=c.showCode||false;var P=c.clearOptions||false;var O=c.promoStationsArray||[];var q=c.restrictedStationCategory||[];var z=c.restrictedPairStationCategory||[];var E=c.originObject||null;var A="";var G=null;var w=null;var F=null;var v=null;var l=null;var b=null;var D=null;var I=[];var B=true;var u=true;var t=0;var J=false;var L=false;var Q=c.optionHeaderText||["Origin","Destination"];var N=c.islandGroupText||"Thailand (Island transfers)";if(r){w=r.get(0);if(w&&w.options){if(P){w.options.length=0;}else{if(!w.originalOptionLength){w.originalOptionLength=w.options.length;}try{w.options.length=w.originalOptionLength;}catch(K){}while(w.hasChildNodes()){w.removeChild(w.firstChild);}}if(s&&m){for(F in m){if(m.hasOwnProperty(F)){for(l in m[F]){if(m[F].hasOwnProperty(l)&&l!=="name"){v=m[F][l]||{};B=true;if(v.stationCategories){for(t=0;t<q.length;t=t+1){if(v.stationCategories.indexOf(q[t])>-1){B=false;break;}}}if(B){for(G in s){u=true;var H=true;if(O.length>0){H=false;for(arrayIndex in O){if(O[arrayIndex]==G||O[arrayIndex]==s[G].code){H=true;break;}}}if(E&&v.stationCategories&&E.stationCategories){for(t=0;t<z.length;t=t+1){if(v.stationCategories.indexOf(z[t])>-1&&E.stationCategories.indexOf(z[t])>-1&&v.stationCategories[v.stationCategories.indexOf(z[t])]==E.stationCategories[E.stationCategories.indexOf(z[t])]){u=false;break;}}if(!u){break;}}if((G==v.code||s[G].code==v.code)&&H){J=true;L=true;break;}}}m[F][l].show=(J)?true:false;J=false;}}m[F].show=(L)?true:false;L=false;}}b=document.createElement("option");b.value="";selectBoxName=w.name.toLowerCase();b.appendChild(document.createTextNode(Q[(selectBoxName.indexOf("origin")>0)?0:1]));w.appendChild(b);for(F in m){if(m.hasOwnProperty(F)&&m[F].show&&F!=="show"){if(m[F].show){D=document.createElement("optgroup");D.label=m[F].name||F;}var M=new Array();var f=new Array();var R=null;for(l in m[F]){if(m[F].hasOwnProperty(l)&&l!=="show"&&l!=="name"&&m[F][l].show){v=m[F][l];if(v.provinceStateCode&&v.provinceStateCode.toLowerCase()=="il"){M.push(v);M.show=true;}else{f.push(v);f.show=true;}}}for(l in f){if(f.hasOwnProperty(l)&&l!=="show"&&l!=="name"&&f[l].show){v=f[l];b=document.createElement("option");b.value=v.code;A=(C)?v.name+" ("+v.code+")":v.name;b.appendChild(document.createTextNode(A));D.appendChild(b);}}w.appendChild(D);if(M&&M.show){R=document.createElement("optgroup");R.label=N;R.setAttribute("class","island");}if(R){for(l in M){if(M.hasOwnProperty(l)&&l!=="show"&&l!=="name"&&M[l].show){v=M[l];b=document.createElement("option");b.value=v.code;A=v.name;b.appendChild(document.createTextNode(A));R.appendChild(b);}}w.appendChild(R);}}}if(a!==null){r.val(a);}}}}};SKYSALES.Util.showDiv=function(a){$("#"+a).show();};SKYSALES.Util.hideDiv=function(a){$("#"+a).hide();};SKYSALES.Util.cloneArray=function(a){return a.concat();};SKYSALES.Util.convertToLocaleCurrency=function(a){var b={"num":a};var c=new SKYSALES.Class.LocaleCurrency();c.init(b);return c.currency;};SKYSALES.Util.getTime=function(a,b,e){var c="";a=Number(a);b=Number(b);e=Number(e);if(isNaN(a)===false){a+=1;if(a>12){a=a-12;}if(a.toString().length===1){a="0"+a;}c=a;if(isNaN(b)===false){if(b.toString().length===1){b="0"+b;}c=c+":"+b;if(isNaN(e)===false){if(e.toString().length===1){e="0"+e;}c=c+":"+e;}}if(a>12){c=c+" PM";}else{c=c+" AM";}}return c;};SKYSALES.Util.getDate=function(c,e,a){var b="";c=Number(c);e=Number(e);a=Number(a);if(isNaN(c)===false){b=c;if(isNaN(e)===false){if(e.toString().length===1){e="0"+e;}b=b.toString()+e.toString();if(isNaN(a)===false){if(a.toString().length===1){a="0"+a;}b=b.toString()+a.toString();}}}return b;};SKYSALES.Util.dateDisplayFormat=function(f,a){if(f!=null){var e=SKYSALES.Util.getResource(),b=f.split("/"),c=new Date(b[2],b[0]-1,b[1]);if(f){return($.datepicker.formatDate(a,c,{dayNamesShort:e.dateCultureInfo.dayNamesShort,dayNames:e.dateCultureInfo.dayNames,monthNamesShort:e.dateCultureInfo.monthNamesShort,monthNames:e.dateCultureInfo.monthNames}));}}};SKYSALES.Util.populate=function(b){b=b||{};var a=b.input||$([]);if(a&&a[0]&&a[0].options){b.selectBox=a;SKYSALES.Util.populateSelect(b);}else{if(a){b.options=b.objectArray||[];SKYSALES.Class.DropDown.getDropDown(b);}}};SKYSALES.Util.dateToIsoString=function(c){var e=c.getFullYear(),f=(c.getMonth()+1).toString(),b=c.getDate().toString(),a="";if(f.length===1){f="0"+f;}if(b.length===1){b="0"+b;}a=e+"-"+f+"-"+b;return a;};SKYSALES.Util.tripPlannerUpdateSelectedLabel=function(b,e){var m=b+1;var q="tripFlightInfoHeaderId"+m;var c="tripFligtInfoBodyId"+m;var a="tripFlightSelected";var l=$("#"+q);var f=$("#"+c);if(e){f.show();l.addClass(a);}else{l.removeClass(a);}};if(!SKYSALES.Class.SkySales){SKYSALES.Class.SkySales=function(){var a=this;a.containerId="";a.container=null;a.init=SKYSALES.Class.SkySales.prototype.init;a.getById=SKYSALES.Class.SkySales.prototype.getById;a.setSettingsByObject=SKYSALES.Class.SkySales.prototype.setSettingsByObject;a.addEvents=SKYSALES.Class.SkySales.prototype.addEvents;a.setVars=SKYSALES.Class.SkySales.prototype.setVars;a.hide=SKYSALES.Class.SkySales.prototype.hide;a.show=SKYSALES.Class.SkySales.prototype.show;return a;};SKYSALES.Class.SkySales.prototype.init=function(a){this.setSettingsByObject(a);this.setVars();};SKYSALES.Class.SkySales.prototype.getById=function(b){var a=null;if(b){a=window.document.getElementById(b);}if(a){a=$(a);}else{a=$([]);}return a;};SKYSALES.Class.SkySales.prototype.setSettingsByObject=function(a){var b="";for(b in a){if(a.hasOwnProperty(b)){if(this[b]!==undefined){this[b]=a[b];}}}};SKYSALES.Class.SkySales.prototype.addEvents=function(){};SKYSALES.Class.SkySales.prototype.setVars=function(){this.container=$("#"+this.containerId);};SKYSALES.Class.SkySales.prototype.hide=function(){this.container.hide("slow");};SKYSALES.Class.SkySales.prototype.show=function(){this.container.show("slow");};}if(!SKYSALES.Class.BaseToggleView){SKYSALES.Class.BaseToggleView=function(){var a=SKYSALES.Class.SkySales();var b=SKYSALES.Util.extendObject(a);b.toggleViewIdArray=[];b.toggleViewArray=[];b.addToggleView=function(l){if(l.toggleViewIdArray){l=l.toggleViewIdArray;}var e=l||[];var c=null;var f=0;var m=null;if(e.length===undefined){e=[];e[0]=l;}for(f=0;f<e.length;f+=1){c=e[f];m=new SKYSALES.Class.ToggleView();m.init(c);b.toggleViewArray[b.toggleViewArray.length]=m;}};return b;};}SKYSALES.Class.Date=function(){var b=new SKYSALES.Class.SkySales(),a=SKYSALES.Util.extendObject(b);a.Day="";a.Month="";a.Hour="";a.Minute="";a.Second="";a.Year="";a.date=null;a.init=function(c){this.setSettingsByObject(c);this.initDateTime();};a.initDateTime=function(){this.date=new Date();this.date.setHours(this.Hour,this.Minute,this.Second,0);this.date.setFullYear(this.Year,this.Month-1,this.Day);};a.getTime=function(){var c=SKYSALES.Util.getTime(this.Hour,this.Minute);return c;};a.getDate=function(){var c=SKYSALES.Util.getDate(this.Year,this.Month,this.Day);return c;};return a;};if(!SKYSALES.Class.BaggagePrompt){SKYSALES.Class.BaggagePrompt=function(){var b=new SKYSALES.Class.SkySales(),a=SKYSALES.Util.extendObject(b);a.baggagePrompt="";a.init=function(c){this.setSettingsByObject(c);a.displayPrompt();};a.displayPrompt=function(){$(window).load(function(){if(a.baggagePrompt!=""){alert(a.baggagePrompt);}});};return a;};SKYSALES.Class.BaggagePrompt.createObject=function(a){SKYSALES.Util.createObject("baggagePrompt","BaggagePrompt",a);};}SKYSALES.Class.RedCarpetLegInput=function(){var a=new SKYSALES.Class.SkySales(),b=SKYSALES.Util.extendObject(a);b.clientId="";b.ssrAvailabilityArray=null;b.checkBoxRedCarpetArray=[];b.disableMarket=null;b.init=function(c){this.setSettingsByObject(c);this.setVars();this.addEvents();this.initSsrAvailabilityArray();this.initCheckBoxRedCarpetLegInputArray();};b.initSsrAvailabilityArray=function(){var f=0,l=this.ssrAvailabilityArray||[],c=l.length,e=null;for(f=0;f<c;f+=1){e=new SKYSALES.Class.SSRAvailability();e.init(l[f]);this.ssrAvailabilityArray[f]=e;}};b.initCheckBoxRedCarpetLegInputArray=function(){var e=0,f=this.checkBoxRedCarpetArray||[],c=f.length,l=null;for(e=0;e<c;e+=1){l=new SKYSALES.Class.CheckBoxRedCarpetLegInput();if(this.disableMarket!="none"&&e<parseInt(this.disableMarket)){l.isDisabled=true;}l.init(f[e],this.ssrAvailabilityArray[0]);this.checkBoxRedCarpetArray[e]=l;}};return b;};SKYSALES.Class.RedCarpetLegInput.createObject=function(a){SKYSALES.Util.createObject("redCarpetLegInput","RedCarpetLegInput",a);};SKYSALES.Class.CheckBoxRedCarpetLegInput=function(){var b=new SKYSALES.Class.SkySales(),a=SKYSALES.Util.extendObject(b);a.checkBoxRedCarpetId="";a.checkBoxRedCarpet={};a.quantityPrefix="";a.del="";a.passengerNumber=0;a.flightReference="";a.isFlightChange=false;a.isDisabled=false;a.checkBoxCounterCheckinId="";a.price="";a.disableJourney=false;a.init=function(e,c){this.setSettingsByObject(e);this.setVars();this.initCheckBoxRedCarpetLegInput();this.addEvents();};a.setVars=function(){if(this.price.substring(0,1)!=0){this.disableJourney=true;}a.checkBoxCounterCheckinId=a.checkBoxRedCarpetId.replace("RedCarpet","CounterCheckIn");};a.initCheckBoxRedCarpetLegInput=function(){a.disableCounterCheckin();};a.addEvents=function(){if(this.disableJourney==true){$("#"+this.checkBoxRedCarpetId).click(a.disableCounterCheckin);}};a.disableCounterCheckin=function(){if($("#"+a.checkBoxRedCarpetId).attr("checked")){$("#"+a.checkBoxCounterCheckinId).attr("checked",false);if($("#"+a.checkBoxCounterCheckinId).length>0){SKYSALES.Util.updatePriceDisplay($("#"+a.checkBoxCounterCheckinId));}$("#"+a.checkBoxCounterCheckinId).attr("disabled",true);}else{$("#"+a.checkBoxCounterCheckinId).attr("disabled",false);}};return a;};if(!SKYSALES.Class.BookingDetail){SKYSALES.Class.BookingDetail=function(){var b=new SKYSALES.Class.SkySales(),a=SKYSALES.Util.extendObject(b);a.ssrChangePrompt="";a.showSsrPrompter="";a.confirmButtonId="";a.showSeniorCitizenPrompter=true;a.outSeniorCitizen="";a.init=function(c){this.setSettingsByObject(c);this.addEvent();};a.addEvent=function(){var c="";$("#"+this.confirmButtonId).click(this.displayPromptHandler);c=this.confirmButtonId.split("_");$("#"+c[0]+"_"+c[2]).click(this.displayPromptHandler);};a.displayPromptHandler=function(){return a.displayPrompt();};a.displayPrompt=function(){if(this.showSsrPrompter==="true"){if(confirm(this.ssrChangePrompt)){return true;}else{SKYSALES.RemoveLoadingBar();return false;}}if(this.showSeniorCitizenPrompter==="true"){return alert(this.outSeniorCitizen);}};return a;};SKYSALES.Class.BookingDetail.createObject=function(a){SKYSALES.Util.createObject("bookingDetail","BookingDetail",a);};}if(!SKYSALES.Class.FlightSearch){SKYSALES.Class.FlightSearch=function(){var b=new SKYSALES.Class.SkySales();var a=SKYSALES.Util.extendObject(b);a.optionHeaderText=null;a.promoStationsArray=null;a.marketArray=[];a.flightTypeInputIdArray=null;a.countryInputIdArray=null;a.confirmTextArray=null;a.confirmFlightTextArray=[];a.actionId="";a.action=null;a.dropDownCurrencyId="";a.dropDownAdtId="";a.dropDownInfId="";a.dropDownChdId="";a.dropDownScpId="";a.dropDownPwdId="";a.seniorCitizenNational="";a.islandTransferCode="";a.readOnlyPanelCountries="";a.tooManyInfantsText="";a.tooManyPassengersTextPre="";a.tooManyPassengersTextPost="";a.noPassengersText="";a.infantArray=null;a.infantAgeText="";a.updateButtonId="";a.updateButton=null;a.updateButtonClicked=false;a.dateRangeError="";a.dateSameText="";a.originalDate=[];a.disableInputId="";a.insuranceControlId="";a.checkboxNotification="";a.maxpaxnum="";a.autoMacArray=[];a.autoMacMessage="";a.autoMacShown=" ";a.restrictedStationCategories=[];a.restrictedPairStationCategory=[];a.localizedMac=[];a.multiColumnOriginStationId="";a.multiColumnDestinationStationId="";a.textBoxOriginStationId="";a.textBoxDestinationStationId="";a.textBoxDepartDatePickerId="";a.textBoxDateDisplay=null;a.textBoxDateDisplayId="";a.buttonSubmitId="";a.islandGroupText="";a.missingCurrencyText="";a.jsDateFormat="";a.clientID="";a.jsDateFormat="";a.clientID="";a.countryInputArray=[];a.flightTypeInputArray=[];a.multiColumnOrigin="";a.multiColumnDestination="";a.multiColumnOriginFull="";a.multiColumnDestinationFull="";a.multiColumnEmptyText="";a.multiColumnEmptyResult="";a.multiColumnCloseTooltip="";a.multiColumnMarketError="";a.multiColumnOriginError="";a.multiColumnDestinationError="";a.multiColumnReadOnlyPanelText="";a.multiColumnRequiredField="";a.isTripPlanner=false;a.dropDownPassengerTypeId="";a.isMulticityBooking="false";a.validationReadAlong=null;a.conflictFlights="";a.init=function(c){this.setSettingsByObject(c);this.setVars();this.addEvents();this.populateMarketArray();this.initFlightTypeInputIdArray();this.initCountryInputIdArray();this.populateFlightType();this.initAutoMacArray();this.initDateDisplay();};a.populateMarketArray=function(){var c=this.marketArray||[],e=null;for(i=0;i<c.length;i+=1){e=$("#"+c[i].marketDateIdArray.marketDateId);}};a.initDateDisplay=function(){$(document).ready(function(){var m=$("input[id *= 'date_picker_id_']");if(m.length>2){for(var l=1;l<=m.length;l++){var f=$("#"+a.clientID+"date_picker_display_id_"+l);f.click(function(){$(this).parent().find(".datepicker_trigger:visible").click();f.select();});if($("[id$=DropDownListCurrency]").val()!=""||!f.val()){f.val(SKYSALES.Util.dateDisplayFormat($("#"+a.clientID+"date_picker_id_"+l).val(),a.jsDateFormat));}if($("[id$=DropDownListCurrency]").val()!=""||!$("#"+a.clientID+"date_picker_display_id_"+l).val()){$("#"+a.clientID+"date_picker_display_id_"+l).val(SKYSALES.Util.dateDisplayFormat($("#"+a.clientID+"date_picker_id_"+l).val(),a.jsDateFormat));}}}else{var e=$("#"+a.clientID+"date_picker_display_id_1"),c=$("#"+a.clientID+"date_picker_display_id_2");e.click(function(){$(this).parent().find(".datepicker_trigger:visible").click();e.select();});c.click(function(){$(this).parent().find(".datepicker_trigger:visible").click();c.select();});if($("[id$=DropDownListCurrency]").val()!=""||!e.val()){e.val(SKYSALES.Util.dateDisplayFormat($("#"+a.clientID+"date_picker_id_1").val(),a.jsDateFormat));}if($("[id$=DropDownListCurrency]").val()!=""||!c.val()){c.val(SKYSALES.Util.dateDisplayFormat($("#"+a.clientID+"date_picker_id_2").val(),a.jsDateFormat));}if($("[id$=DropDownListCurrency]").val()!=""||!$("#"+a.clientID+"date_picker_display_id_1").val()){$("#"+a.clientID+"date_picker_display_id_1").val(SKYSALES.Util.dateDisplayFormat($("#"+a.clientID+"date_picker_id_1").val(),a.jsDateFormat));}if($("[id$=DropDownListCurrency]").val()!=""||!$("#"+a.clientID+"date_picker_display_id_2").val()){$("#"+a.clientID+"date_picker_display_id_2").val(SKYSALES.Util.dateDisplayFormat($("#"+a.clientID+"date_picker_id_2").val(),a.jsDateFormat));}}});};a.initDateDisplayforTripPlanner=function(){var e=$("input[id*='date_picker_display_id']");for(var f=0;f<e.length;f++){var l=$("#"+e[f].id),c=$("#"+a.clientID+"date_picker_id_"+l.selector.slice(l.selector.length-1));l.click(function(){$(this).parent().find(".datepicker_trigger:visible").click();l.select();});}};a.initAutoMacArray=function(){for(amIdx in a.autoMacArray){if(SKYSALES.Resource.macHash[a.autoMacArray[amIdx].MacStation]){a.autoMacArray[amIdx].Stations=SKYSALES.Resource.macHash[a.autoMacArray[amIdx].MacStation].stations;}}};a.setSettingsByObject=function(e){b.setSettingsByObject.call(this,e);var c=0;var f=this.marketArray||[];var l=null;for(c=0;c<f.length;c+=1){l=new SKYSALES.Class.FlightSearchMarket();l.optionHeaderText=this.optionHeaderText;l.flightSearch=this;l.index=c;l.autoMacArray=a.autoMacArray;l.restrictedStationCategories=this.restrictedStationCategories;l.restrictedPairStationCategory=this.restrictedPairStationCategory;l.localizedMac=a.localizedMac;l.islandGroupText=a.islandGroupText;l.dropDownScpId=a.dropDownScpId;l.dropDownPwdId=a.dropDownPwdId;l.seniorCitizenNational=a.seniorCitizenNational;l.islandTransferCode=a.islandTransferCode;l.readOnlyPanelCountries=a.readOnlyPanelCountries;l.dropDownCurrencyId=a.dropDownCurrencyId;l.missingCurrencyText=a.missingCurrencyText;l.init(f[c]);this.marketArray[c]=l;}};a.setVars=function(){b.setVars.call(this);a.action=$("#"+this.actionId);a.updateButton=$("input[type='submit'][id^='"+this.updateButtonId+"']");if(a.textBoxDateDisplayId){a.textBoxDateDisplay=$("input[id*='"+a.textBoxDateDisplayId.replace(/\[index\]/g,this.index)+"']");}if(a.isTripPlanner){var f=$("#"+a.dropDownAdtId),e=$("#"+a.dropDownInfId),u=$("#"+a.dropDownChdId),r=$("#"+a.dropDownScpId),q=$("#"+a.dropDownPwdId),l=f.attr("name"),s=e.attr("name"),c=u.attr("name"),t=r.attr("name"),m=q.attr("name");if(f.length>0){f.removeAttr("name").attr("name",this.dropDownPassengerTypeId+"['"+l.substring(l.lastIndexOf("_")+1)+"']");}if(e.length>0){e.removeAttr("name").attr("name",this.dropDownPassengerTypeId+"['"+s.substring(s.lastIndexOf("_")+1)+"']");}if(u.length>0){u.removeAttr("name").attr("name",this.dropDownPassengerTypeId+"['"+c.substring(c.lastIndexOf("_")+1)+"']");}if(r.length>0){r.removeAttr("name").attr("name",this.dropDownPassengerTypeId+"['"+t.substring(t.lastIndexOf("_")+1)+"']");}if(q.length>0){q.removeAttr("name").attr("name",this.dropDownPassengerTypeId+"['"+m.substring(m.lastIndexOf("_")+1)+"']");}}};a.addEvents=function(){b.addEvents.call(this);if(a.actionId){a.action.click(a.searchHandler);}if(a.updateButtonId){a.updateButton.click(a.searchUpdateHandler);}};a.searchUpdateHandler=function(){a.updateButtonClicked=true;return a.searchHandler();};a.searchHandler=function(){a.checkAutoMac();if(/SearchChangeView/i.test(a.actionId)&&a.isMulticityBooking=="false"){var c=true;c=a.searchChangeHandler();if(c==false){SKYSALES.RemoveLoadingBar();return c;}}else{if(a.isMulticityBooking=="true"){var e=!a.validateJourneyDates()&&a.confirmCheckboxes()&&a.confirmAndCompareMarketDateChange();if(!e){SKYSALES.RemoveLoadingBar();}return e;}}};a.validateJourneyDates=function(){var f=a.marketArray,t=f.length,r=false,u=0;for(var e=0;e<t;e++){var q=f[e],c=q.getSearchDate(true);if(!this.isJourneyForChangeTravelDates(e)){c=q.getOrigSearchDate(true);}else{u=e;}for(var l=e+1;l<t;l++){var s=f[l],m=s.getSearchDate(true);if(!this.isJourneyForChangeTravelDates(l)){m=s.getOrigSearchDate(true);}else{u=l;}if(c>m){r=true;break;}}if(r){SKYSALES.RemoveLoadingBar();a.outputErrorValidation(u);break;}}return r;};a.outputErrorValidation=function(f){if(!a.validationReadAlong){a.validationReadAlong=new SKYSALES.ValidationErrorReadAlong();}var e=$("#"+a.validationReadAlong.getValidationErrorDivId()),c='<ul class="validationErrorList" ><li class="validationErrorListItem" >'+a.conflictFlights+"</li></ul>";if(!e||!e.length){a.validationReadAlong.addValidationErrorDiv(true);e=$("#"+a.validationReadAlong.getValidationErrorDivId());}e.find("p.close").html("<a/>").click(a.validationReadAlong.remove);$("#"+a.validationReadAlong.getValidationErrorListId()).empty().html(c);e.offset(this.getJourneyDatepickerOffset(f));return false;};a.getJourneyDatepickerOffset=function(f){var u=this.marketArray[f].marketDateArray[0].marketDateId,r={},s=$("#"+a.validationReadAlong.getValidationErrorDivId()),l=s?parseInt(s.css("marginLeft")):10;if(u){u=$("#"+u);}if(u&&u.length){var c=u.parent(),t=10,e=c.width(),m=c.offset();r={top:m.top-t,left:m.left+e+l};}else{var q=$("#searchChangeContainer"),m=q.offset();r={top:m.top,left:m.left+e+l};}return r;};a.isJourneyForChangeTravelDates=function(f){var c=this.disableInputId[f],e=false;if(c){c=$("#"+c);}if(c&&c.length){e=c.is(":checked");}return e;};a.checkAutoMac=function(){for(j=0;j<a.marketArray.length;j+=1){isAutoMac=false;autoMacStations="";for(i=0;i<a.autoMacArray.length;i+=1){if(a.autoMacShown.indexOf(a.autoMacArray[i].MacStation)<1){for(h=0;h<a.autoMacArray[i].Stations.length;h+=1){if($("#"+a.marketArray[j].marketInputIdArray[0].originId).val()==a.autoMacArray[i].Stations[h]||$("#"+a.marketArray[j].marketInputIdArray[0].destinationId).val()==a.autoMacArray[i].Stations[h]||$("#"+a.marketArray[j].marketInputIdArray[0].originId).val()==a.autoMacArray[i].MacStation||$("#"+a.marketArray[j].marketInputIdArray[0].destinationId).val()==a.autoMacArray[i].MacStation){for(g=0;g<a.autoMacArray[i].Stations.length;g+=1){stationCode=a.autoMacArray[i].Stations[g];if(SKYSALES.Resource.macStationHash[stationCode]){autoMacStations+="\n"+SKYSALES.Resource.macStationHash[stationCode].name+" ("+stationCode+")";}else{if(SKYSALES.Resource.stationHash[stationCode]){autoMacStations+="\n"+SKYSALES.Resource.stationHash[stationCode].name+" ("+stationCode+")";}}}a.autoMacShown+=" "+a.autoMacArray[i].MacStation+" ";a.autoMacMessage=a.autoMacArray[i].MacPrompter;isAutoMac=true;break;}}}if(isAutoMac==true){break;}}if((autoMacStations!="")&&(a.autoMacMessage)){alert(a.autoMacMessage);SKYSALES.RemoveLoadingBar();}}};a.checkSameDate=function(){if(a.dateSameText!=""&&$("#"+a.flightTypeInputIdArray[1].checkBoxId).is(":checked")==false){if($("#"+a.marketArray[0].marketDateIdArray[0].marketDateId).val()==$("#"+a.marketArray[1].marketDateIdArray[0].marketDateId).val()){return confirm(a.dateSameText);}}};a.searchChangeHandler=function(){a=this;var e=0;var l=null;var c=$("#"+this.insuranceControlId).is(":checked");if($("#"+this.insuranceControlId).length==0){c=true;}if(a.marketArray!=null&&c==true){if(a.marketArray.length>1){var f=a.checkDateRange();if(!f){return false;}}else{if($("#"+this.disableInputId).is(":checked")==false){alert(this.checkboxNotification);return false;}}for(e=0;e<a.marketArray.length;e++){l=a.marketArray[e];if(l.isToChange()&&l.compareDates()&&!confirm(a.confirmTextArray[e])){return false;}}}return a.checkInfantAge();};a.confirmCheckboxes=function(){for(i=0;i<a.marketArray.length;i++){if($("#"+this.disableInputId[i]).is(":checked")){return true;}}alert(this.checkboxNotification);return false;};a.confirmAndCompareMarketDateChange=function(){for(i=0;i<a.marketArray.length;i++){market=a.marketArray[i];if(market.isToChange()&&market.compareDates()&&!confirm(a.confirmFlightTextArray[i])){return false;}}return true;};a.checkInfantAge=function(){if(a.marketArray!=null){var r=a.marketArray[a.marketArray.length-1];var c=a.marketArray[0];if(r.isToChange()){var e=r.getSearchDate();var l=c.getSearchDate();var m=new SKYSALES.Class.TravelerAge();var f=0;var q=null;for(f=0;f<a.infantArray.length;f+=1){q=a.infantArray[f];if(!m.isInfant(e,q,l)){alert(a.infantAgeText);return false;}}}}};a.checkDateRange=function(){var r,l,e,q;r=new Array();l=new Array();e=new Array();q=new Array();var c=(this.originalDate[0]).split("/");var m=(this.originalDate[1]).split("/");for(var f=0;f<a.marketArray.length;f++){r[f]=this.marketArray[f].marketDateIdArray[0].marketDateId;l[f]=$("#"+r[f]).val().split("/");e[f]=new Date(l[f][2],l[f][0]-1,l[f][1]);q[f]=$("#"+this.disableInputId[f]).is(":checked");}if(q[0]==false&&q[1]==false){alert(this.checkboxNotification);return false;}if(q[0]==false){e[0]=new Date(c[2],c[0]-1,c[1]);}if(q[1]==false){e[1]=new Date(m[2],m[0]-1,m[1]);}if(e[1]<e[0]){alert(this.dateRangeError);return false;}if(e[1].toString()==e[0].toString()){if(!confirm(this.dateSameText)){return false;}}return true;};a.checkInfantPax=function(){var c=$("#"+a.dropDownAdtId);var e=$("#"+a.dropDownInfId);if(c.val()<e.val()){alert(a.tooManyInfantsText);return false;}};a.checkNumPax=function(){var c=$("#"+a.dropDownAdtId);var f=$("#"+a.dropDownChdId);var q=$("#"+a.dropDownScpId);var e=$("#"+a.dropDownPwdId);var l=parseInt(c.val())+parseInt(f.val()),m=parseInt(c.val());if(q.length>0){l=l+parseInt(q.val());m=m+parseInt(q.val());}if(e.length>0){l=l+parseInt(e.val());m=m+parseInt(e.val());}if(m<=0){alert(a.noPassengersText);return false;}else{if(l>a.maxpaxnum){alert(a.tooManyPassengersTextPre+a.maxpaxnum+a.tooManyPassengersTextPost);return false;}}};a.initCountryInputIdArray=function(){var e=0;var c=null;var l={};var f=this.countryInputIdArray||[];for(e=0;e<f.length;e+=1){c=f[e];l=new SKYSALES.Class.CountryInput();l.init(c);this.countryInputArray[this.countryInputArray.length]=l;}};a.initFlightTypeInputIdArray=function(){var e=0;var l=null;var c={};var f=this.flightTypeInputIdArray||[];for(e=0;e<f.length;e+=1){l=f[e];c=new SKYSALES.Class.FlightTypeInput();c.flightSearch=this;c.index=e;c.checkBoxId=l.checkBoxId;c.init(l);this.flightTypeInputArray[this.flightTypeInputArray.length]=c;}};a.populateFlightType=function(){var c=0;var e=null;for(c=0;c<this.flightTypeInputArray.length;c+=1){e=this.flightTypeInputArray[c];if(e.input.attr("checked")){e.input.click();if($("#"+e.checkBoxId).length>0){$("#"+e.checkBoxId).attr("checked",true);}break;}}};a.updateFlightTypeShow=function(e){var c=0;var f=null;for(c=0;c<this.flightTypeInputArray.length;c+=1){f=this.flightTypeInputArray[c];f.hideInputArray.show();}};a.updateFlightTypeHide=function(c){this.updateFlightTypeShow();c.hideInputArray.hide();if(!$("[id*=_OneWay]:checked").val()){$("#searchSummaryReturn").show();}else{$("#searchSummaryReturn").hide();}};return a;};SKYSALES.Class.FlightSearch.createObject=function(a){SKYSALES.Util.createObject("flightSearch","FlightSearch",a);};}if(!SKYSALES.Class.FlightSearchMarket){SKYSALES.Class.FlightSearchMarket=function(){var b=new SKYSALES.Class.SkySales();var a=SKYSALES.Util.extendObject(b);a.flightSearch=null;a.index=-1;a.validationMessageObject={};a.validationObjectIdArray=[];a.stationInputIdArray=[];a.stationDropDownIdArray=[];a.marketInputIdArray=[];a.macInputIdArray=[];a.marketDateIdArray=[];a.autoMacArray=[];a.disableMarket=false;a.localizedMac=[];a.restrictedStationCategories=[];a.restrictedPairStationCategory=[];a.dropDownScpId="";a.dropDownPwdId="";a.seniorCitizenNational="";a.islandTransferCode="";a.readOnlyPanelCountries="";a.optionHeaderText=null;a.marketInputArray=[];a.stationInputArray=[];a.stationDropDownArray=[];a.macInputArray=[];a.marketDateArray=[];a.init=function(c){this.setSettingsByObject(c);this.setVars();this.addEvents();this.initMarketInputIdArray();this.initStationInputIdArray();this.initStationDropDownIdArray();this.initMacInputIdArray();this.initMarketDateIdArray();this.initValidationObjectRedirect();};a.initMacInputIdArray=function(){var e=0;var l=null;var c={};var f=this.macInputIdArray||[];for(e=0;e<f.length;e+=1){l=f[e];c=new SKYSALES.Class.MacInput();c.init(l);c.autoMacArray=a.autoMacArray;this.macInputArray[this.macInputArray.length]=c;c.showMac.call(c.stationInput);}};a.initMarketDateIdArray=function(){var c=0;var f=null;var l={};var e=this.marketDateIdArray||[];for(c=0;c<e.length;c+=1){f=e[c];l=new SKYSALES.Class.MarketDate();l.marketDateCount=this.flightSearch.marketArray.length;l.isMulticityBooking=this.flightSearch.isMulticityBooking;l.isAddFlight=e[c].isAddFlight;l.init(f);this.marketDateArray[c]=l;}};a.compareDates=function(){return this.marketDateArray[0].compareDates();};a.getSearchDate=function(c){var e=this.marketDateArray[0].marketDate.val();if(c){e=$.datepicker.parseDate(this.marketDateArray[0].fullDateFormatString,e);}return e;};a.getOrigSearchDate=function(c){var e=this.marketDateArray[0].origDate;if(c){e=$.datepicker.parseDate(this.marketDateArray[0].fullDateFormatString,e);}return e;};a.initMarketInputIdArray=function(){var e=0;var c=null;var l={};var f=this.marketInputIdArray||[];for(e=0;e<f.length;e+=1){c=f[e];l=new SKYSALES.Class.MarketInput();if(this.flightSearch.marketArray[0]!==undefined){marketOriginalId=this.flightSearch.marketArray[0].stationDropDownIdArray[0].inputId;}l.promoStationsArray=this.flightSearch.promoStationsArray;l.optionHeaderText=a.optionHeaderText;l.restrictedStationCategories=this.restrictedStationCategories;l.restrictedPairStationCategory=this.restrictedPairStationCategory;l.localizedMac=a.localizedMac;l.multiColumnOriginStationId=this.flightSearch.multiColumnOriginStationId.replace(/\[index\]/g,this.index);l.multiColumnDestinationStationId=this.flightSearch.multiColumnDestinationStationId.replace(/\[index\]/g,this.index);l.textBoxOriginStationId=this.flightSearch.textBoxOriginStationId.replace(/\[index\]/g,this.index+1);l.textBoxDestinationStationId=this.flightSearch.textBoxDestinationStationId.replace(/\[index\]/g,this.index+1);l.textBoxDepartDatePickerId=this.flightSearch.textBoxDepartDatePickerId.replace(/\[index\]/g,this.index+1);l.buttonSubmitId=this.flightSearch.buttonSubmitId;l.islandGroupText=this.flightSearch.islandGroupText;l.dropDownScpId=a.dropDownScpId;l.dropDownPwdId=a.dropDownPwdId;l.seniorCitizenNational=a.seniorCitizenNational;l.islandTransferCode=a.islandTransferCode;l.readOnlyPanelCountries=a.readOnlyPanelCountries;l.dropDownCurrencyId=a.dropDownCurrencyId;l.missingCurrencyText=a.missingCurrencyText;if(this.flightSearch.isTripPlanner){this.populateMultiColumnAttributes(l.multiColumnOriginStationId,l.multiColumnDestinationStationId);}l.init(c);this.marketInputArray[this.marketInputArray.length]=l;if(this.disableMarket){l.disableInput.attr("disabled",true);}}};a.populateMultiColumnAttributes=function(e,c){$("#"+e).attr("data-label",this.flightSearch.multiColumnOrigin);$("#"+e).attr("data-emptytext",this.flightSearch.multiColumnEmptyText);$("#"+e).attr("emptyresult",this.flightSearch.multiColumnEmptyResult);$("#"+e).attr("data-showalltext",this.flightSearch.multiColumnOriginFull);$("#"+e).attr("data-closetooltip",this.flightSearch.multiColumnCloseTooltip);$("#"+e).attr("empty-error",this.flightSearch.multiColumnMarketError);$("#"+e).attr("market-error",this.flightSearch.multiColumnOriginError);$("#"+e).attr("requiredError",this.flightSearch.multiColumnRequiredField);$("#"+c).attr("data-label",this.flightSearch.multiColumnDestination);$("#"+c).attr("data-emptytext",this.flightSearch.multiColumnEmptyText);$("#"+c).attr("emptyresult",this.flightSearch.multiColumnEmptyResult);$("#"+c).attr("data-showalltext",this.flightSearch.multiColumnDestinationFull);$("#"+c).attr("data-closetooltip",this.flightSearch.multiColumnCloseTooltip);$("#"+c).attr("empty-error",this.flightSearch.multiColumnMarketError);$("#"+c).attr("market-error",this.flightSearch.multiColumnDestinationError);$("#"+c).attr("requiredError",this.flightSearch.multiColumnRequiredField);};a.isToChange=function(){if(this.marketInputArray[1].disableInput.attr("checked")){return true;}return false;};a.initStationInputIdArray=function(){var c=0;var e=null;var l={};var f=this.stationInputIdArray;for(c=0;c<f.length;c+=1){e=f[c];l=new SKYSALES.Class.StationInput();l.init(e);this.stationInputArray[this.stationInputArray.length]=l;}};a.initStationDropDownIdArray=function(){var e=0;var l=null;var c={};var f=this.stationDropDownIdArray;for(e=0;e<f.length;e+=1){l=f[e];c=new SKYSALES.Class.StationDropDown();c.init(l);this.stationDropDownArray[this.stationDropDownArray.length]=c;if(e==0){c.selectBox.change();}}};a.initValidationObjectRedirect=function(){var t=this.validationObjectIdArray||[];var c=0;var s="";var r="";var q="";var e=null;var m=null;var f=null;for(c=0;c<t.length;c+=1){s=t[c];r=s.key||"";q=s.value||"";e=$("object.metaobject>param[value='"+r+"']");if(e.length>0){m=$(":input#"+q);if(m.length>0){f=e[0];if("value" in f){var l=f.value;l=l.replace(r,q);f.value=l;}}}}};return a;};}if(!SKYSALES.Class.MacInput){SKYSALES.Class.MacInput=function(){var a=new SKYSALES.Class.SkySales();var b=SKYSALES.Util.extendObject(a);b.macHash=SKYSALES.Util.getResource().macHash;b.stationHash=SKYSALES.Util.getResource().stationHash;b.stationInputId="";b.macContainerId="";b.macLabelId="";b.macInputId="";b.macContainer={};b.stationInput={};b.macInput={};b.macLabel={};b.autoMacArray=[];b.showMac=function(){var f=$(this).val();f=f||"";f=f.toUpperCase();var c=null;var e="";var m="";var l=null;b.macInput.removeAttr("checked");b.macContainer.hide();c=b.stationHash[f];if(c){e=c.macCode;isAutoMac=false;if(b.autoMacArray.length>0){for(i=0;i<b.autoMacArray.length;i+=1){if(b.autoMacArray[i].MacStation==e){isAutoMac=true;}}}l=b.macHash[e];if((l)&&(l.stations.length>0)){m=l.stations.join();b.macLabel.html(m);if(isAutoMac){b.macInput.attr("checked",true);}else{b.macContainer.show();}}}};b.addEvents=function(){b.stationInput.change(b.showMac);};b.setVars=function(){b.stationInput=$("#"+b.stationInputId);b.macContainer=$("#"+b.macContainerId);b.macLabel=$("#"+b.macLabelId);b.macInput=$("#"+b.macInputId);};b.init=function(c){a.init.call(this,c);b.macContainer.hide();this.addEvents();};return b;};}if(!SKYSALES.Class.MarketDate){SKYSALES.Class.MarketDate=function(){var b=new SKYSALES.Class.SkySales();var a=SKYSALES.Util.extendObject(b);a.dateFormat=SKYSALES.datepicker.datePickerFormat;a.dateDelimiter=SKYSALES.datepicker.datePickerDelimiter;a.marketDateId="";a.marketDate=null;a.marketAltDateId="";a.marketAltDate=null;a.marketDayId="";a.marketDay=null;a.marketMonthYearId="";a.marketMonthYear=null;a.origDate=null;a.marketDateCount="";a.marketDateFormat="";a.datePickerManager={};a.useJQueryDatePicker=true;a.fullDateFormatString="mm/dd/yy";a.index=null;a.isAddFlight=false;a.isMulticityBooking="false";a.setSettingsByObject=function(c){b.setSettingsByObject.call(this,c);var e="";for(e in c){if(a.hasOwnProperty(e)){a[e]=c[e];}}};a.parseDate=function(m,e){var u="";var s="";var t="";var l=new Date();var f="";var v="";var q=[];var r=0;var c=a.dateFormat;if(e!=null&&e!=""){c=e;}if(m&&m.indexOf(a.dateDelimiter)>-1){q=m.split(a.dateDelimiter);dateFormatArray=c.split("/");for(r=0;r<dateFormatArray.length;r+=1){f=q[r];if(f.charAt(0)==="0"){f=f.substring(1);}v=dateFormatArray[r];switch(v){case"m":s=f;break;case"d":u=f;break;case"y":t=f;break;case"mm":s=f;break;case"dd":u=f;break;case"yy":t=f;break;}}l=new Date(t,s-1,u);}return l;};a.addEvents=function(){var c={"isAOS":false,"yearMonth":this.marketMonthYear,"day":this.marketDay,"linkedDate":this.marketDate,"useJQueryDatePicker":this.useJQueryDatePicker,"fullDateFormatString":this.fullDateFormatString,"marketCount":a.marketDateCount,"linkedAltDateId":a.marketAltDateId,"jsDateFormat":a.marketDateFormat,"isAddFlight":a.isAddFlight,"isMulticityBooking":a.isMulticityBooking};this.datePickerManager=new SKYSALES.Class.DatePickerManager();this.datePickerManager.init(c);};a.setVars=function(){a.marketDate=$("#"+a.marketDateId);a.marketAltDate=$("#"+a.marketAltDateId);a.marketDay=$("#"+a.marketDayId);a.marketMonthYear=$("#"+a.marketMonthYearId);};a.init=function(c){b.init.call(this,c);this.addEvents();a.origDate=a.marketDate.val();};a.compareDates=function(){if(a.origDate!=a.marketDate.val()){return false;}return true;};a.datesInOrder=function(f){var l=true;var e=null;var c=null;e=this.parseDate(f[0],f[2]);c=this.parseDate(f[1],f[2]);if(e>c){l=false;}return l;};a.isOneDayOnly=function(f){var l=true;var e=null;var c=null;e=this.parseDate(f[0],f[2]);c=this.parseDate(f[1],f[2]);if(e>c||e<c){l=false;}return l;};return a;};}if(!SKYSALES.Class.CountryInput){SKYSALES.Class.CountryInput=function(){var b=new SKYSALES.Class.SkySales();var a=SKYSALES.Util.extendObject(b);a.countryInfo=SKYSALES.Util.getResource().countryInfo;a.countryInputId="";a.input={};a.defaultCountry="";a.countryArray=[];a.populateCountryInput=function(){var c={"selectBox":a.input,"objectArray":a.countryArray,"selectedItem":a.defaultCountry,"showCode":true};SKYSALES.Util.populateSelect(c);};a.addEvents=function(){};a.setVars=function(){a.input=$("#"+a.countryInputId);var c=a.countryInfo;if(c){if(c.CountryList){a.countryArray=c.CountryList;}if(c.DefaultValue){a.defaultCountry=c.DefaultValue;}}};a.init=function(c){b.init.call(this,c);a.populateCountryInput();this.addEvents();};return a;};}if(!SKYSALES.Class.FlightTypeInput){SKYSALES.Class.FlightTypeInput=function(){var b=new SKYSALES.Class.SkySales();var c=SKYSALES.Util.extendObject(b);c.flightSearch=null;c.index=-1;c.flightTypeId="";c.hideInputIdArray=[];c.hideInputArray=[];c.input={};var a=1;c.updateFlightTypeHandler=function(){c.flightSearch.updateFlightTypeHide(c);};c.addEvents=function(){b.addEvents.call(this);this.input.click(this.updateFlightTypeHandler);};c.getById=function(f){var e=null;if(f){e=window.document.getElementById(f);}return e;};c.setVars=function(){b.setVars.call(this);var e=0;var f=null;var l=[];c.input=$("#"+this.flightTypeId);for(e=0;e<this.hideInputIdArray.length;e+=1){f=c.getById(this.hideInputIdArray[e]);if(f){l[l.length]=f;}}c.hideInputArray=$(l);};c.init=function(e){this.setSettingsByObject(e);this.setVars();this.addEvents();};return c;};}if(!SKYSALES.Class.MarketInput){SKYSALES.Class.MarketInput=function(){var b=new SKYSALES.Class.SkySales();var a=SKYSALES.Util.extendObject(b);a.marketHash=SKYSALES.Util.getResource().marketHash;a.stationHash=SKYSALES.Util.getResource().stationHash;a.countryStationHash=SKYSALES.Util.getResource().countryStationHash;a.countryHash=SKYSALES.Util.getResource().countryHash;a.optionHeaderText=null;a.containerId="";a.container=null;a.containerTextId="";a.containerText=null;a.row1Id="";a.row2Id="";a.row3Id="";a.disableInputId="";a.disableInput=null;a.originId="";a.origin=null;a.destinationId="";a.destination=null;a.toggleMarketCount=0;a.marketOriginalId="";a.promoStationsArray=[];a.localizedMac=[];a.multiColumnOriginStationId="";a.multiColumnDestinationStationId="";a.multiColumnOriginStation="";a.multiColumnDestinationStation="";a.textBoxOriginStationId="";a.textBoxDestinationStationId="";a.textBoxOriginStation="";a.textBoxDestinationStation="";a.textBoxDepartDatePickerId="";a.departDatePicker="";a.buttonSubmitId="";a.buttonSubmit="";a.islandGroupText="";a.dropDownScpId="";a.dropDownPwdId="";a.seniorCitizenNational="";a.islandTransferCode="";a.readOnlyPanelCountries="";a.dropDownCurrencyId="";a.dropDownCurrency="";a.missingCurrencyText;a.initializeMacStationNames=function(){if(this.localizedMac){for(mac in this.localizedMac){if(this.stationHash[this.localizedMac[mac].StationCode]){this.stationHash[this.localizedMac[mac].StationCode].name=this.localizedMac[mac].StationName;}}}};a.restrictedStationCategories=[];a.restrictedPairStationCategory=[];a.originStation=[];a.destinationStation=[];a.isValidObject=true;a.toggleMarket=function(){if((a.toggleMarketCount%2)===0){$(a.container).hide();$(a.row2Id).show();$(a.row3Id).show();}else{$(a.container).show();$(a.row2Id).hide();$(a.row3Id).hide();}a.toggleMarketCount+=1;};a.useComboBox=function(c){var e=true;if(c&&c.get(0)&&c.get(0).options){e=false;}return e;};a.updateMarketOrigin=function(){var e=$(this).val();if(!e){e=$("#"+marketOriginalId).val();}e=e.toUpperCase();var q=a.marketHash[e];q=q||[];var f=null;var m=true;var c=a.stationHash[e];m=a.useComboBox(a.destination);if(m){f={"input":a.destination,"options":q,"optionHeaderText":a.optionHeaderText};SKYSALES.Class.DropDown.getDropDown(f);}else{var l=[];if(a.promoStationsArray&&a.promoStationsArray.length>0){for(stationArrayIndex in a.promoStationsArray){if(e==a.promoStationsArray[stationArrayIndex].originStation){l=a.promoStationsArray[stationArrayIndex].destStationArray;break;}}}f={"selectBox":a.destination,"promoStationsArray":l,"objectArray":q,"groupArray":a.countryStationHash,"showCode":true,"optionHeaderText":a.optionHeaderText,"restrictedStationCategory":a.restrictedStationCategories,"restrictedPairStationCategory":a.restrictedPairStationCategory,"islandGroupText":a.islandGroupText,"originObject":c};SKYSALES.Util.populateSelectWithGroups(f);}};a.updateMarketDestination=function(){var c=$(this).val();var f=$("#"+marketOriginalId).val();c=c.toUpperCase();f=f.toUpperCase();var e="";var l="";if(a.stationHash[f]){e=a.stationHash[f].countryCode;}if(a.stationHash[c]){l=a.stationHash[c].countryCode;}if(l==a.seniorCitizenNational&&e==a.seniorCitizenNational){if($("#"+a.dropDownScpId).parent().length>0){$("#"+a.dropDownScpId).parent().css("display","block");$("#"+a.dropDownScpId).width("130");}if($("#"+a.dropDownPwdId).parent().length>0){$("#"+a.dropDownPwdId).parent().css("display","block");$("#"+a.dropDownPwdId).width("130");}}else{if($("#"+a.dropDownScpId).parent().length>0){$("#"+a.dropDownScpId).val(0);$("#"+a.dropDownScpId).parent().css("display","none");}if($("#"+a.dropDownPwdId).parent().length>0){$("#"+a.dropDownPwdId).val(0);$("#"+a.dropDownPwdId).parent().css("display","none");}}};a.loadDestinationStationArray=function(s){var l=[],u=[],m={},q={},c=$(a.stationHash[s]).attr("country"),f=$(a.stationHash[s]).attr("countryCode");a.destinationStation=[];var e=a.restrictedStationCategories;var t=a.restrictedPairStationCategory;$.each(a.countryStationHash,function(){var w=$(this).attr("country");l=[];u=[];$.each(a.marketHash[s],function(){var B=$(a.stationHash[$(this).attr("code")]);if($(a.stationHash[$(this).attr("code")]).attr("country")==w){if(a.islandTransferCode&&$(a.stationHash[$(this).attr("code")]).attr("provinceStateCode")==a.islandTransferCode){if(a.promoStationsArray&&a.promoStationsArray.length>0){for(stationArrayIndex in a.promoStationsArray){if($.inArray($(this).attr("code"),a.promoStationsArray[stationArrayIndex].destStationArray)>=0&&s==a.promoStationsArray[stationArrayIndex].originStation){u.push({"label":$(this).attr("name"),"value":$(this).attr("code")});break;}}}else{if($.inArray($(B).attr("stationCategories"),e)<0){u.push({"label":$(this).attr("name"),"value":$(this).attr("code")});}}}else{if(a.promoStationsArray&&a.promoStationsArray.length>0){for(stationArrayIndex in a.promoStationsArray){if($.inArray($(this).attr("code"),a.promoStationsArray[stationArrayIndex].destStationArray)>=0&&s==a.promoStationsArray[stationArrayIndex].originStation){l.push({"label":$(this).attr("name")+" ("+$(this).attr("code")+")","value":$(this).attr("code")});break;}}}else{if($.inArray($(B).attr("stationCategories"),e)<0&&$.inArray($(B).attr("stationCategories"),t)<0){if($(this).attr("macCode")==null||$(this).attr("macCode")==""){var A=false;for(var C=0,z=l.length;C<z&&A===false;C++){if(l[C]["value"]===$(this).attr("code")){A=true;}}if(A===false){l.push({"label":$(this).attr("name")+" ("+$(this).attr("code")+")","value":$(this).attr("code")});}}}}}}});if(l.length>0){a.destinationStation.push({"category":$(this).attr("country"),"id":$(this).attr("countryCode"),"items":l});}if(u.length>0){a.destinationStation.push({"category":a.islandGroupText,"id":$(this).attr("countryCode"),"items":u});}});a.destinationStation.sort(function(A,w){var B=A.category.toLowerCase(),z=w.category.toLowerCase();if(B<z){return -1;}if(B>z){return 1;}return 0;});$.each(a.marketHash[s],function(){m[$(this).attr("code")]=$(this).attr("name");});var v=(a.readOnlyPanelCountries&&(a.promoStationsArray.length==0))?a.readOnlyPanelCountries.split(","):"";if(f&&v.length>0&&$.inArray(f,v)!=-1){a.multiColumnDestinationStation.multicoldd("option","cols",6);var r=a.multiColumnOriginStation.multicoldd("option","data");$.each(r,function(z,A){var w={category:A.category,items:[],panel:1};$.each(A.items,function(B,C){if(!m[C.value]){w.items.push({label:C.label,value:C.value,disabled:true});m[C.value]=a.stationHash[C.value].name;}});if(w.items.length){a.destinationStation.push(w);}});}else{a.multiColumnDestinationStation.multicoldd("option","cols",6);}a.multiColumnDestinationStation.multicoldd({data:a.destinationStation});};a.validateMarketAndCurrency=function(){var c="";if(a.textBoxOriginStation.val()==""||a.textBoxDestinationStation.val()==""){if(a.textBoxOriginStation.val()==""&&a.textBoxDestinationStation.val()==""){c=c==""?a.multiColumnOriginStation.attr("empty-error"):c;}else{if(a.textBoxOriginStation.val()!=""&&a.textBoxDestinationStation.val()==""){c=c==""?a.multiColumnDestinationStation.attr("market-error"):c;}else{if(a.textBoxOriginStation.val()==""&&a.textBoxDestinationStation.val()!=""){c=c==""?a.multiColumnOriginStation.attr("market-error"):c;}}}}if(a.dropDownCurrency.val()==""){c=c==""?a.missingCurrencyText:c;}if(c!=""){SKYSALES.RemoveLoadingBar();return false;}return true;};a.initializeMarketControls=function(){var l=[];if(a.promoStationsArray&&a.promoStationsArray.length>0){for(stationArrayIndex in a.promoStationsArray){l.push(a.promoStationsArray[stationArrayIndex].originStation);}}var f=a.restrictedStationCategories;var e=[],m=[];$.each(a.countryStationHash,function(){var s=this.name;var r=$("#allowFiltering");e=[];m=[];$.each(this,function(){if($(this).attr("country")==s){if(a.islandTransferCode&&$(this).attr("provinceStateCode")==a.islandTransferCode){if(l&&l.length>0){if($.inArray($(this).attr("code"),l)>=0){if(r&&r.length>0){if($(this).attr("isD7Station")=="true"){m.push({"label":$(this).attr("name"),"value":$(this).attr("code")});}}else{m.push({"label":$(this).attr("name"),"value":$(this).attr("code")});}}}else{if($.inArray($(this).attr("stationCategories"),f)<0){if(r&&r.length>0){if($(this).attr("isD7Station")=="true"){m.push({"label":$(this).attr("name"),"value":$(this).attr("code")});}}else{m.push({"label":$(this).attr("name"),"value":$(this).attr("code")});}}}}else{if(l&&l.length>0){if($.inArray($(this).attr("code"),l)>=0){if(r&&r.length>0){if($(this).attr("isD7Station")=="true"){e.push({"label":$(this).attr("name")+" ("+$(this).attr("code")+")","value":$(this).attr("code")});}}else{e.push({"label":$(this).attr("name")+" ("+$(this).attr("code")+")","value":$(this).attr("code")});}}}else{if($.inArray($(this).attr("stationCategories"),f)<0){if($(this).attr("macCode")==null||$(this).attr("macCode")==""){if(r&&r.length>0){if($(this).attr("isD7Station")=="true"){e.push({"label":$(this).attr("name")+" ("+$(this).attr("code")+")","value":$(this).attr("code")});}}else{e.push({"label":$(this).attr("name")+" ("+$(this).attr("code")+")","value":$(this).attr("code")});}}}}}}});if(e.length>0){a.originStation.push({"category":$(this).attr("country"),"id":$(this).attr("countryCode"),"items":e});}if(m.length>0){a.originStation.push({"category":a.islandGroupText,"id":$(this).attr("countryCode"),"items":m});}});a.originStation.sort(function(t,r){var u=t.category.toLowerCase(),s=r.category.toLowerCase();if(u<s){return -1;}if(u>s){return 1;}return 0;});if(a.multiColumnOriginStation.length>0){if(a.multiColumnOriginStation.val()==""||a.multiColumnOriginStation.val()==a.multiColumnOriginStation.attr("data-label")){$("#"+a.dropDownCurrency.attr("id")).prop("disabled",true);$("#"+a.dropDownCurrency.attr("id")+" :nth-child(1)").prop("selected",true);}else{$("#"+a.dropDownCurrency.attr("id")).prop("disabled",false);}a.multiColumnOriginStation.multicoldd({emptyLabel:a.multiColumnOriginStation.attr("data-label"),emptyText:a.multiColumnOriginStation.attr("data-emptytext"),emptyResultText:a.multiColumnOriginStation.attr("emptyresult"),showAllLinkText:a.multiColumnOriginStation.attr("data-showalltext"),title:a.multiColumnOriginStation.attr("data-mcdd-title"),closeTooltip:a.multiColumnOriginStation.attr("data-closetooltip"),isRTL:$("html").attr("dir")=="rtl"||$(".compact-div").attr("dir")=="rtl",data:a.originStation,speed:"fast",autoSelect:false,cols:6,rows:8,enablePreSelect:true,select:function(u,v){var s=v.value;var t=v.category;var r=v.categoryId;a.loadDestinationStationArray(s);a.textBoxOriginStation.val(s);a.textBoxOriginStation.trigger("change");a.multiColumnDestinationStation.multicoldd("clearSelection");a.multiColumnDestinationStation.multicoldd("show");a.multiColumnDestinationStation.multicoldd("focus");if(a.multiColumnOriginStationId.indexOf("Hotel")>-1){a.departDatePicker.datepicker("show");}},open:function(t){a.multiColumnDestinationStation.multicoldd("hide");var s=t.closest(".newCompactLayout");var r=(s.length==0)?$(t.dialog).offset().top:s.offset().top-105;$("html:not(:animated),body:not(:animated)").animate({scrollTop:r},500);return false;},close:function(r){if($(r).multicoldd("label")==""||$(r).multicoldd("label")==this.emptyLabel){$(r).multicoldd("label",a.multiColumnOriginStation.attr("data-label"));a.textBoxOriginStation.val("");a.multiColumnDestinationStation.multicoldd({data:{}});$("#"+a.dropDownCurrency.attr("id")).prop("disabled",true);$("#"+a.dropDownCurrency.attr("id")+" :nth-child(1)").prop("selected",true);}else{$("#"+a.dropDownCurrency.attr("id")).prop("disabled",false);}return false;}});}if(a.multiColumnDestinationStation.length>0){a.multiColumnDestinationStation.multicoldd({emptyLabel:a.multiColumnDestinationStation.attr("data-label"),emptyText:a.multiColumnDestinationStation.attr("data-emptytext"),emptyResultText:a.multiColumnDestinationStation.attr("emptyresult"),showAllLinkText:a.multiColumnDestinationStation.attr("data-showalltext"),title:a.multiColumnDestinationStation.attr("data-mcdd-title"),closeTooltip:a.multiColumnDestinationStation.attr("data-closetooltip"),isRTL:$("html").attr("dir")=="rtl"||$(".compact-div").attr("dir")=="rtl",data:{},speed:"fast",autoSelect:false,cols:6,rows:8,enablePreSelect:true,panels:[{caption:""},{caption:a.multiColumnDestinationStation.attr("data-readonly-panel-caption"),cssClass:"readonly-panel"}],select:function(r,s){a.departDatePicker.datepicker("show");a.textBoxDestinationStation.val(s.value);a.textBoxDestinationStation.trigger("change");},open:function(t){$(t.dialog).find(".multicoldd-column").css("height",$(t.dialog).find(".multicoldd-content").height()+"px");var s=t.closest(".newCompactLayout");var r=(s.length==0)?$(t.dialog).offset().top:s.offset().top-75;$("html:not(:animated),body:not(:animated)").animate({scrollTop:r-30},500);return false;},onreload:function(s){if($(s.dialog).is(":visible")){$(s.dialog).find(".multicoldd-column").css("height",$(s.dialog).find(".multicoldd-content").height()+"px");if($(s).multicoldd("label")!=""){var r=s.dialog;$(r).find(".multicoldd-column.readonly-panel").hide();var t=$(r).find(".multicoldd-column:eq(0)").outerWidth()+parseInt($(r).find(".multicoldd-column:eq(0)").css("margin-left"))+parseInt($(r).find(".multicoldd-column:eq(0)").css("margin-right"));var u=(r.find(".multicoldd-content").outerWidth()-r.find(".multicoldd-content").width())+(r.children(".multicoldd-wrapper").outerWidth()-r.children(".multicoldd-wrapper").width());$(r).children(".multicoldd-wrapper").css("width",($(r).find(".multicoldd-column:not(.readonly-panel)").length*t+u)+"px");}}},close:function(r){if($(r).multicoldd("label")==""||$(r).multicoldd("label")==this.emptyLabel){$(r).multicoldd("label",a.multiColumnDestinationStation.attr("data-label"));a.textBoxDestinationStation.val("");}return false;}});}var c=a.textBoxOriginStation.val()?a.textBoxOriginStation.val():$("#"+a.textBoxOriginStationId.substring(0,a.textBoxOriginStationId.lastIndexOf("_"))+"originStationMultiColumn1").filter(":hidden").val();if(c){a.multiColumnOriginStation.multicoldd("value",c);a.loadDestinationStationArray(c);a.textBoxOriginStation.val(c);a.textBoxOriginStation.trigger("change");}var q=a.textBoxDestinationStation.val()?a.textBoxDestinationStation.val():$("#"+a.textBoxDestinationStationId.substring(0,a.textBoxDestinationStationId.lastIndexOf("_"))+"destinationStationMultiColumn1").filter(":hidden").val();if(q){a.multiColumnDestinationStation.multicoldd("value",q);a.textBoxDestinationStation.val(q);a.textBoxDestinationStation.trigger("change");}if(a.multiColumnOriginStation.length>0){a.multiColumnOriginStation.multicoldd("id",a.multiColumnOriginStation.attr("id")+"_1",a.multiColumnOriginStation.attr("requirederror"),a.multiColumnOriginStation.attr("data-label"));a.multiColumnDestinationStation.multicoldd("id",a.multiColumnDestinationStation.attr("id")+"_1",a.multiColumnDestinationStation.attr("requirederror"),a.multiColumnDestinationStation.attr("data-label"));}};a.addEvents=function(){b.addEvents.call(this);a.origin.change(a.updateMarketOrigin);a.destination.change(a.updateMarketDestination);a.disableInput.click(a.toggleMarket);a.buttonSubmit.unbind("click").bind("click",a.validateMarketAndCurrency);};a.setVars=function(){b.setVars.call(this);a.container=$("#"+a.containerId);a.containerText=$("#"+a.containerTextId);a.row1Id=$("#"+a.row1Id);a.row2Id=$("#"+a.row2Id);a.row3Id=$("#"+a.row3Id);a.disableInput=$("#"+a.disableInputId);a.origin=$("#"+a.originId);a.destination=$("#"+a.destinationId);a.multiColumnOriginStation=$("#"+a.multiColumnOriginStationId);a.multiColumnDestinationStation=$("#"+a.multiColumnDestinationStationId);a.textBoxOriginStation=$("#"+a.textBoxOriginStationId);a.textBoxDestinationStation=$("#"+a.textBoxDestinationStationId);a.departDatePicker=$("#"+a.textBoxDepartDatePickerId);a.buttonSubmit=$("#"+a.buttonSubmitId);a.dropDownCurrency=$("select[id*='"+a.dropDownCurrencyId+"']");a.textBoxOriginStation=this.getById(a.textBoxOriginStationId);a.textBoxDestinationStation=this.getById(a.textBoxDestinationStationId);};a.populateMarketInput=function(c){var l=true;var e={};if((c)&&(c.length>0)){l=a.useComboBox(c);if(l){e={"input":c,"options":this.stationHash,"optionHeaderText":a.optionHeaderText,"restrictedStationCategory":this.restrictedStationCategories};SKYSALES.Class.DropDown.getDropDown(e);}else{var f=[];if(a.promoStationsArray&&a.promoStationsArray.length>0){for(stationArrayIndex in a.promoStationsArray){f.push(a.promoStationsArray[stationArrayIndex].originStation);}}e={"selectBox":c,"promoStationsArray":f,"objectArray":this.stationHash,"groupArray":a.countryStationHash,"showCode":true,"optionHeaderText":a.optionHeaderText,"islandGroupText":a.islandGroupText,"restrictedStationCategory":this.restrictedStationCategories};SKYSALES.Util.populateSelectWithGroups(e);}}};a.init=function(c){b.init.call(this,c);this.addEvents();a.initializeMarketControls();a.initializeMacStationNames();a.populateMarketInput(a.textBoxOriginStation);a.populateMarketInput(a.textBoxDestination);a.disableInput.click();a.disableInput.removeAttr("checked");};return a;};}if(!SKYSALES.Class.StationInput){SKYSALES.Class.StationInput=function(){var b=new SKYSALES.Class.SkySales();var a=SKYSALES.Util.extendObject(b);a.stationInputId="";a.stationInput=null;a.setVars=function(){b.setVars.call(this);a.stationInput=$("#"+this.stationInputId);};a.init=function(c){b.init.call(this,c);this.addEvents();};return a;};}if(!SKYSALES.Class.StationDropDown){SKYSALES.Class.StationDropDown=function(){var b=new SKYSALES.Class.SkySales();var a=SKYSALES.Util.extendObject(b);a.selectBoxId="";a.selectBox=null;a.inputId="";a.input=null;a.updateStationDropDown=function(){var f=$(this).val();if(f!=""){try{a.selectBox.val(f);}catch(c){}}else{$(this).val(this.defaultValue);}};a.updateStationInput=function(){var c=$(this).val();a.input.val(c);a.input.change();};a.addEvents=function(){a.input.change(a.updateStationDropDown);a.selectBox.change(a.updateStationInput);};a.setVars=function(){a.selectBox=$("#"+a.selectBoxId);a.input=$("#"+a.inputId);};a.init=function(c){b.init.call(this,c);this.addEvents();a.input.change();};return a;};}if(!SKYSALES.Class.TravelDocumentInput){SKYSALES.Class.TravelDocumentInput=function(){var b=new SKYSALES.Class.SkySales();var a=SKYSALES.Util.extendObject(b);a.instanceName="";a.delimiter="_";a.travelDocumentInfoId="";a.travelDocumentInfo=null;a.documentNumberId="";a.documentNumber=null;a.documentTypeId="";a.documentType=null;a.documentIssuingCountryId="";a.documentIssuingCountry=null;a.documentExpYearId="";a.documentExpYear=null;a.documentExpMonthId="";a.documentExpMonth=null;a.documentExpDayId="";a.documentExpDay=null;a.actionId="";a.action=null;a.travelDocumentKey="";a.missingDocumentText="";a.missingDocumentTypeText="";a.invalidExpDateText="";a.emptyExpDateText="";a.invalidDaysOfMonthTextPre="";a.invalidDaysOfMonthTextMid="";a.invalidDaysOfMonthTextPost="";a.missingDocumentNumberText="";a.missingDocumentCountryText="";a.init=function(c){this.setSettingsByObject(c);this.setVars();this.addEvents();};a.setVars=function(){a.travelDocumentInfo=this.getById(this.travelDocumentInfoId);a.documentType=this.getById(this.documentTypeId);a.documentNumber=this.getById(this.documentNumberId);a.documentIssuingCountry=this.getById(this.documentIssuingCountryId);a.documentExpYear=this.getById(this.documentExpYearId);a.documentExpMonth=this.getById(this.documentExpMonthId);a.documentExpDay=this.getById(this.documentExpDayId);a.action=this.getById(this.actionId);};a.setTravelDocumentInfo=function(){var l="";var c=this.documentType.val();var e=this.documentNumber.val();var f=this.documentIssuingCountry.val();if(c&&e&&f){l=this.delimiter+c+this.delimiter+e+this.delimiter+f;this.travelDocumentInfo.val(l);}return true;};a.validateTravelDocumentHandler=function(){var c=a.validateTravelDocument();return c;};a.validateTravelDocument=function(){this.setTravelDocumentInfo();var e=this.action.get(0);var c=window.validate(e)&&this.validateInput();return c;};a.addEvents=function(){this.action.click(this.validateTravelDocumentHandler);};a.validateInput=function(){var c=true;var e="";var s="";var w=this.documentNumber.val()||"";var r=this.documentExpYear.val()||"";var f=this.documentExpMonth.val()||"";var l=this.documentExpDay.val()||"";var v=this.documentType.val()||"";var t=this.documentIssuingCountry.val()||"";var m=false;var q=false;var u="";if(w||v||t||r||f||l){if(!w){e=e+this.missingDocumentNumberText+"\n";}if(!v){e=e+this.missingDocumentTypeText+"\n";}if(!t){e=e+this.missingDocumentCountryText+"\n";}q=this.checkDaysOfMonth(l,f,r);m=this.isPastDate(l,f,r);if(l&&f&&r){if(!q){u=this.documentExpMonth.find(":selected").text();s=this.invalidDaysOfMonthTextPre+l;s+=this.invalidDaysOfMonthTextMid+u+this.invalidDaysOfMonthTextPost;e=e+s+"\n";}else{if(!m){e=e+this.invalidExpDateText+"\n";}}}else{e=e+this.emptyExpDateText+"\n";}if(e){window.alert(this.missingDocumentText+"\n"+e);c=false;}}return c;};a.checkDaysOfMonth=function(f,r,l){l=window.parseInt(l,10);r=window.parseInt(r,10);f=window.parseInt(f,10);var q=false;var m=null;var c=-1;var e=null;if(l&&r&&f){r-=1;m=new Date();m.setMonth(2);m.setDate(1);m.setDate(m.getDate()-1);c=m.getDate();e=[31,c,31,30,31,30,31,31,30,31,30,31];if(f<=e[r]){q=true;}}return q;};a.isPastDate=function(e,q,l){l=window.parseInt(l,10);q=window.parseInt(q,10);e=window.parseInt(e,10);var m=false;var c=null;var f=null;if(l&&q&&e){q-=1;c=new Date();f=new Date(l,q,e);if(f>c){m=true;}}return m;};return a;};}if(!SKYSALES.Class.ControlGroup){SKYSALES.Class.ControlGroup=function(){var b=new SKYSALES.Class.SkySales();var a=SKYSALES.Util.extendObject(b);a.actionId="SkySales";a.action=null;a.init=function(c){this.setSettingsByObject(c);this.setVars();this.addEvents();};a.setVars=function(){b.setVars.call(this);a.action=$("#"+this.actionId);};a.addEvents=function(){b.addEvents.call(this);this.action.click(this.validateHandler);};a.validateHandler=function(){var c=a.validate();return c;};a.validate=function(){var c=this.action.get(0);var e=window.validate(c);return e;};return a;};SKYSALES.Class.ControlGroup.createObject=function(a){SKYSALES.Util.createObject("controlGroup","ControlGroup",a);};}if(!SKYSALES.Class.ControlGroupRegister){SKYSALES.Class.ControlGroupRegister=function(){var b=new SKYSALES.Class.ControlGroup();var a=SKYSALES.Util.extendObject(b);a.travelDocumentInput=null;a.setSettingsByObject=function(c){b.setSettingsByObject.call(this,c);var e=new SKYSALES.Class.TravelDocumentInput();e.init(this.travelDocumentInput);a.travelDocumentInput=e;};a.validateHandler=function(){var c=a.validate();return c;};a.validate=function(){var c=false;c=(this.travelDocumentInput.setTravelDocumentInfo()&&this.travelDocumentInput.validateExpDate());if(c){c=b.validate.call(this);}return c;};return a;};SKYSALES.Class.ControlGroupRegister.createObject=function(a){SKYSALES.Util.createObject("controlGroupRegister","ControlGroupRegister",a);};}if(!SKYSALES.Class.MemberLogin){SKYSALES.Class.MemberLogin=function(){var b=new SKYSALES.Class.SkySales(),a=SKYSALES.Util.extendObject(b);a.buttonLogInId="";a.buttonLogIn=null;a.setVars=function(){a.buttonLogIn=$("#"+this.buttonLogInId);};a.addEvents=function(){if(this.buttonLogIn&&this.buttonLogIn.length>0){a.buttonLogIn.click(this.loginSubmitHandler);}};a.init=function(c){b.setSettingsByObject.call(this,c);this.setVars();this.addEvents();};a.loginSubmitHandler=function(){var c=validate(this);if(c&&preventDoubleClick()){SKYSALES.DisplayLoadingBar();}return c;};return a;};SKYSALES.Class.MemberLogin.createObject=function(a){SKYSALES.Util.createObject("memberLogin","MemberLogin",a);};}if(!SKYSALES.Class.ContactInput){SKYSALES.Class.ContactInput=function(){var a=new SKYSALES.Class.SkySales();var b=SKYSALES.Util.extendObject(a);b.clientId="";b.keyIdArray=[];b.keyArray=[];b.clientStoreIdHash=null;b.countryInputId="";b.countryInput=null;b.stateInputId="";b.stateInput=null;b.countryStateHash=null;b.imContactId="";b.imContact=null;b.currentContactData={};b.logOutButton=null;b.homePhone=null;b.workPhone=null;b.otherPhone=null;b.faxPhone=null;b.homePhoneId="";b.workPhoneId="";b.otherPhoneId="";b.faxPhoneId="";b.dropdownTitleId="";b.dropdownGenderId="";b.dropdownTitle=null;b.dropdownGender=null;b.selectCountryText="";b.selectStateText="";b.provinceStateCode="";b.stateArray=[];b.bSeperatePhoneFieldFlag="";b.otherPhoneNoId="";b.workPhoneNoId="";b.homePhoneNoId="";b.faxPhoneNoId="";b.otherPhoneNo=null;b.workPhoneNo=null;b.homePhoneNo=null;b.faxPhoneNo=null;b.dropdownotherPhoneIDCId="";b.dropdownworkPhoneIDCId="";b.dropdownhomePhoneIDCId="";b.dropdownfaxPhoneIDCId="";b.dropdownotherPhoneIDC=null;b.dropdownworkPhoneIDC=null;b.dropdownhomePhoneIDC=null;b.dropdownfaxPhoneIDC=null;b.emergencyGivenNameId="";b.emergencyGivenName=null;b.emergencySurnameId="";b.emergencySurname=null;b.firstNameId="";b.firstName=null;b.lastNameId="";b.lastName=null;b.organizationDefaultCode="";b.organizationCodeInputId="";b.parentCountryCode="";b.clientHash=SKYSALES.Util.getResource().clientHash;b.setSettingsByObject=function(c){a.setSettingsByObject.call(this,c);var e="";for(e in c){if(b.hasOwnProperty(e)){b[e]=c[e];}}};b.clearCurrentContact=function(){$("#"+b.clientId+"_DropDownListTitle").val("");$("#"+b.clientId+"_TextBoxHomePhone").val("");$("#"+b.clientId+"_TextBoxWorkPhone").val("");$("#"+b.clientId+"_TextBoxOtherPhone").val("");$("#"+b.clientId+"_TextBoxFax").val("");$("#"+b.clientId+"_TextBoxEmailAddress").val("");if(b.bSeperatePhoneFieldFlag=="TRUE"){$("#"+b.clientId+"_TextBoxHomePhoneNo").val("");$("#"+b.clientId+"_TextBoxWorkPhoneNo").val("");$("#"+b.clientId+"_TextBoxOtherPhoneNo").val("");$("#"+b.clientId+"_TextBoxFaxNo").val("");$("#"+b.clientId+"_DropDownListHomePhoneIDC").val("");$("#"+b.clientId+"_DropDownListWorkPhoneIDC").val("");$("#"+b.clientId+"_DropDownListOtherPhoneIDC").val("");$("#"+b.clientId+"_DropDownListBoxFaxIDC").val("");}};b.populateCurrentContact=function(){if(b.currentContactData){if(b.imContact.attr("checked")===true){$("#"+b.clientId+"_DropDownListTitle").val(b.currentContactData.title);if(b.currentContactData.firstName!=""){$("#"+b.clientId+"_TextBoxFirstName").val(b.currentContactData.firstName);}else{$("#"+b.clientId+"_TextBoxFirstName").val(b.currentContactData.lastName);}$("#"+b.clientId+"_TextBoxMiddleName").val(b.currentContactData.middleName);$("#"+b.clientId+"_TextBoxLastName").val(b.currentContactData.lastName);$("#"+b.clientId+"_TextBoxHomePhone").val(b.currentContactData.eveningPhone);$("#"+b.clientId+"_TextBoxWorkPhone").val(b.currentContactData.dayPhone);$("#"+b.clientId+"_TextBoxOtherPhone").val(b.currentContactData.mobilePhone);$("#"+b.clientId+"_TextBoxFax").val(b.currentContactData.faxPhone);$("#"+b.clientId+"_TextBoxEmailAddress").val(b.currentContactData.email);}else{b.clearCurrentContact();}}};b.populateCountrySelect=function(){var f="";if($(b.imContact).is(":checked")||(!$(b.imContact).is(":visible")&&$("#"+b.countryInputId+"_value").val()!="")){f=$("#"+b.countryInputId+"_value").val();}else{f=$("#"+b.countryInputId).val();}var c=SKYSALES.Util.getResource().countryInfo.CountryList;c.unshift({InternationalDialCode:"",code:"",name:b.selectCountryText});var e={"selectBox":$("#"+b.countryInputId),"objectArray":c,"selectedItem":f,"showCode":false};SKYSALES.Util.populateSelect(e);};b.updateCountry=function(){if(b.stateArray.length==0){var c=SKYSALES.Util.getResource().stateInfo.StateList;var e=b.stateInput.val();for(stateIndex in c){if(c[stateIndex].ProvinceStateCode==e){b.countryInput.val(c[stateIndex].CountryCode);break;}}}};b.updateStateAndPhoneNumbers=function(){b.updatePhoneNumbers();b.updateState();};b.updateCountryByPhoneIDC=function(c){$("#"+b.clientId+"_DropDownListCountry option").eq(c).prop("selected",true);};b.updatePhoneNumbers=function(){var e=b.countryInput.val();var c=SKYSALES.Util.getResource().countryInfo.CountryList;for(i=0;i<c.length;i+=1){country=c[i];if(e==country.code){if(b.bSeperatePhoneFieldFlag=="TRUE"){b.setSelectedIDC(b.dropdownworkPhoneIDC[0],country.InternationalDialCode);b.setSelectedIDC(b.dropdownhomePhoneIDC[0],country.InternationalDialCode);b.setSelectedIDC(b.dropdownotherPhoneIDC[0],country.InternationalDialCode);b.setSelectedIDC(b.dropdownfaxPhoneIDC[0],country.InternationalDialCode);b.updateworkPhone();b.updatehomePhone();b.updateotherPhone();b.updatefaxPhone();}else{b.homePhone.val(country.InternationalDialCode);b.workPhone.val(country.InternationalDialCode);b.otherPhone.val(country.InternationalDialCode);b.faxPhone.val(country.InternationalDialCode);}break;}}};b.setSelectedIDC=function(f,e){for(var c=0;c<f.options.length;c++){if(f.options[c].value==e){f.options[c].selected=true;return;}}};b.updateState=function(){var c=SKYSALES.Util.getResource().stateInfo.StateList;var q=b.countryInput.val();var e=[];var l={};var r=[];if(q!==""){var f=0;for(stateIndex in c){if(c[stateIndex].CountryCode==q){e.push(c[stateIndex]);}}e=e||[];b.stateArray=e;if(e.length===0){e=c;}}if(e.length==0||e[0].code!=""){e.unshift({InternationalDialCode:"",code:"",name:b.selectStateText||"Select State"});}var m={"objectArray":e,"selectBox":b.stateInput,"showCode":false,"clearOptions":true};SKYSALES.Util.populateSelect(m);};b.getKey=function(){var l=0;var c=b.keyArray;var e=null;var f="";for(l=0;l<c.length;l+=1){e=c[l];f+=e.val();}f=f.replace(/\s+/g,"+");f=b.clientId+"_"+(f.toLowerCase());return f;};b.populateClientStoreIdHash=function(){var s=b.clientHash;var m=0;var l="";var e=[];var c="";var r=-1;var f=b.getKey();var q=null;b.clientStoreIdHash={};if(f&&s&&s[f]){b.clientStoreIdHash=b.clientStoreIdHash||{};l=s[f];e=l.split("&");for(m=0;m<e.length;m+=1){c=e[m];r=c.indexOf("=");if(r>-1){f=c.substring(0,r);q=c.substring(r+1,c.length);if(f){b.clientStoreIdHash[f]=q;}}}}};b.autoPopulateForm=function(){b.populateClientStoreIdHash();var c=b.clientStoreIdHash;var e="";var f="";for(e in c){if(c.hasOwnProperty(e)){f=c[e];$("#"+e).val(f);}}};b.updateGender=function(){var c=b.dropdownTitle.val();var e=SKYSALES.Util.getResource().titleInfo.TitleList;for(i=0;i<e.length;i+=1){title=e[i];if(c==title.TitleKey){b.dropdownGender.val(title.GenderCode);break;}}};b.updateworkPhone=function(){b.workPhone.val(b.dropdownworkPhoneIDC.val()+b.workPhoneNo.val());};b.updatehomePhone=function(){b.homePhone.val(b.dropdownhomePhoneIDC.val()+b.homePhoneNo.val());};b.updateotherPhone=function(){var c=$("option:selected",$("#"+b.dropdownotherPhoneIDCId)).index();c=parseInt(c)+1;b.updateCountryByPhoneIDC(c);b.otherPhone.val(b.dropdownotherPhoneIDC.val()+b.otherPhoneNo.val());};b.updatefaxPhone=function(){b.faxPhone.val(b.dropdownfaxPhoneIDC.val()+b.faxPhoneNo.val());};b.changePlaceHolderStyling=function(){var c=SKYSALES.Util.getAttributeValue($(this),"requiredempty");var f=false;if(c!=undefined&&c!=""){if($(this).val()==""){$(this).val(c);f=true;}else{if($(this).val()!=""&&c.toLowerCase()==$(this).val().toLowerCase()){f=true;}}}var e=(f==true)?($(this).css("color","rgba(16,16,16,0.6)")):($(this).css("color","black"));};b.clearTextBox=function(){var c=SKYSALES.Util.getAttributeValue($(this),"requiredempty");if(c===$(this).val()){$(this).val("");$(this).css("color","black");}};b.updateTitle=function(){var c=b.dropdownGender.val();var e=b.dropdownTitle.val();var f=SKYSALES.Util.getResource().titleInfo.TitleList;for(i=0;i<f.length;i+=1){title=f[i];if(e!="CHD"&&c==title.GenderCode){b.dropdownTitle.val(title.TitleKey);break;}}};b.addEvents=function(){a.addEvents.call(this);var f=0;var c=b.keyArray;var e=null;for(f=0;f<c.length;f+=1){e=c[f];e.change(b.autoPopulateForm);}b.imContact.click(b.populateCurrentContact);b.logOutButton.click(b.clearCurrentContact);b.dropdownTitle.change(this.updateGender);b.dropdownGender.change(this.updateTitle);b.emergencyGivenName.blur(b.changePlaceHolderStyling);b.emergencySurname.blur(b.changePlaceHolderStyling);b.firstName.blur(b.changePlaceHolderStyling);b.lastName.blur(b.changePlaceHolderStyling);b.emergencyGivenName.focus(b.clearTextBox);b.emergencySurname.focus(b.clearTextBox);b.firstName.focus(b.clearTextBox);b.lastName.focus(b.clearTextBox);if(b.bSeperatePhoneFieldFlag=="TRUE"){b.dropdownworkPhoneIDC.change(b.updateworkPhone);b.dropdownhomePhoneIDC.change(b.updatehomePhone);b.dropdownotherPhoneIDC.change(b.updateotherPhone);b.dropdownfaxPhoneIDC.change(b.updatefaxPhone);b.workPhoneNo.change(b.updateworkPhone);b.homePhoneNo.change(b.updatehomePhone);b.otherPhoneNo.change(b.updateotherPhone);b.faxPhoneNo.change(b.updatefaxPhone);}};b.setVars=function(){a.setVars.call(this);var e=0;var l=b.keyIdArray;var c=b.keyArray;var m="";for(e=0;e<l.length;e+=1){m=l[e];c[c.length]=$("#"+m);}if($("#"+b.countryInputId+" option").length<1){b.populateCountrySelect();}b.countryInput=$("#"+b.countryInputId);b.stateInput=$("#"+b.stateInputId);b.imContact=$("#"+b.imContactId);b.logOutButton=$("#MemberLoginContactView_ButtonLogOut");b.homePhone=$("#"+b.homePhoneId);b.workPhone=$("#"+b.workPhoneId);b.otherPhone=$("#"+b.otherPhoneId);b.faxPhone=$("#"+b.faxPhoneId);b.dropdownTitle=$("#"+this.dropdownTitleId);b.dropdownGender=$("#"+this.dropdownGenderId);b.emergencyGivenName=$("#"+b.emergencyGivenNameId);b.emergencySurname=$("#"+b.emergencySurnameId);b.firstName=$("#"+b.firstNameId);b.lastName=$("#"+b.lastNameId);if(b.bSeperatePhoneFieldFlag=="TRUE"){b.otherPhoneNo=$("#"+b.otherPhoneNoId);b.workPhoneNo=$("#"+b.workPhoneNoId);b.homePhoneNo=$("#"+b.homePhoneNoId);b.faxPhoneNo=$("#"+b.faxPhoneNoId);b.dropdownhomePhoneIDC=$("#"+b.dropdownhomePhoneIDCId);b.dropdownworkPhoneIDC=$("#"+b.dropdownworkPhoneIDCId);b.dropdownotherPhoneIDC=$("#"+b.dropdownotherPhoneIDCId);b.dropdownfaxPhoneIDC=$("#"+b.dropdownfaxPhoneIDCId);var f=$("option:selected",$("#"+b.dropdownotherPhoneIDCId)).index();f=parseInt(f)+1;b.updateCountryByPhoneIDC(f);}if($("#"+b.clientId+"_TextBoxFirstName").val()==""){$("#"+b.clientId+"_TextBoxFirstName").val(b.currentContactData.lastName);}};b.initOrganizationDefaultCode=function(){var c=document.getElementById(this.organizationCodeInputId),f=this.organizationDefaultCode;c.value=f;b.listen("keyup",c,e);function e(){var l=c.value;if(c.value.substring(0,f.length)!==f){c.value=f;}var m=/\W/g;c.value=c.value.replace(m,"");return false;}};b.listen=function(f,e,c){if(e.addEventListener){e.addEventListener(f,c,false);}else{if(e.attachEvent){e.attachEvent("on"+f,c);}}};b.initOrganizationDefaultValues=function(){this.countryInput.val(this.parentCountryCode);this.updateState();};b.init=function(c){this.setSettingsByObject(c);this.setVars();this.addEvents();if(this.organizationDefaultCode&&this.organizationCodeInputId){this.initOrganizationDefaultCode();}if(this.parentCountryCode){this.initOrganizationDefaultValues();}if(b.bSeperatePhoneFieldFlag=="TRUE"){$(b.dropdownworkPhoneIDC).change();$(b.dropdownhomePhoneIDC).change();$(b.dropdownotherPhoneIDC).change();$(b.dropdownfaxPhoneIDC).change();}};return b;};SKYSALES.Class.ContactInput.createObject=function(a){SKYSALES.Util.createObject("contactInput","ContactInput",a);};}if(!SKYSALES.Class.ToggleView){SKYSALES.Class.ToggleView=function(){var b=new SKYSALES.Class.SkySales();var a=SKYSALES.Util.extendObject(b);a.showId="";a.hideId="";a.elementId="";a.show=null;a.hide=null;a.element=null;a.setVars=function(){b.setVars.call(this);a.show=$("#"+a.showId);a.hide=$("#"+a.hideId);a.element=$("#"+a.elementId);};a.init=function(c){this.setSettingsByObject(c);this.setVars();this.addEvents();};a.updateShowHandler=function(){a.element.show("slow");};a.updateHideHandler=function(){a.element.hide();};a.updateHide=function(){this.element.hide();};a.addEvents=function(){b.addEvents.call(this);a.show.click(a.updateShowHandler);a.hide.click(a.updateHideHandler);};return a;};}if(!SKYSALES.Class.PaymentBillingInput){SKYSALES.Class.PaymentBillingInput=function(){var a=SKYSALES.Class.SkySales();thisPaymentBillingInput=SKYSALES.Util.extendObject(a);thisPaymentBillingInput.billingCountryTextBoxId="";thisPaymentBillingInput.billingCountrySelectId="";thisPaymentBillingInput.billingStateTextBoxId="";thisPaymentBillingInput.billingStateSelectId="";thisPaymentBillingInput.buttonSubmitProxyId="ButtonSubmitProxy";thisPaymentBillingInput.buttonSubmitProxy=null;thisPaymentBillingInput.buttonSubmitId="ButtonSubmitProxy";thisPaymentBillingInput.billingStateSelectBoxInput=null;thisPaymentBillingInput.billingStateTextBoxInput="";thisPaymentBillingInput.billingCountryInput="";thisPaymentBillingInput.billingCountryTextBox=null;thisPaymentBillingInput.ccExpandLinkId="";thisPaymentBillingInput.ccExpandLink=null;thisPaymentBillingInput.ccHideLinkId="";thisPaymentBillingInput.ccHideLink=null;thisPaymentBillingInput.ccDivHideShowId="";thisPaymentBillingInput.ccDivHideShow=null;thisPaymentBillingInput.stateInfo=SKYSALES.Util.getResource().stateInfo;thisPaymentBillingInput.setSettingsByObject=function(b){a.setSettingsByObject.call(this,b);};thisPaymentBillingInput.setVars=function(){thisPaymentBillingInput.billingStateSelectBoxInput=this.getById(this.billingStateSelectId);thisPaymentBillingInput.billingStateTextBoxInput=this.getById(this.billingStateTextBoxId);thisPaymentBillingInput.billingCountryInput=this.getById(this.billingCountrySelectId);thisPaymentBillingInput.billingCountryTextBox=this.getById(this.billingCountryTextBoxId);thisPaymentBillingInput.buttonSubmitProxy=this.getById(this.buttonSubmitProxyId);thisPaymentBillingInput.ccExpandLink=this.getById(this.ccExpandLinkId);thisPaymentBillingInput.ccHideLink=this.getById(this.ccHideLinkId);thisPaymentBillingInput.ccDivHideShow=this.getById(this.ccDivHideShowId);};thisPaymentBillingInput.init=function(b){this.setSettingsByObject(b);this.setVars();this.hideTextBoxRef();this.initDropDowns();this.addEvents();this.billingStateSelectBoxInput.val(this.billingStateTextBoxInput.val());};thisPaymentBillingInput.hideTextBoxRef=function(){thisPaymentBillingInput.billingStateTextBoxInput.addClass("hidden");thisPaymentBillingInput.billingCountryTextBox.addClass("hidden");};thisPaymentBillingInput.addEvents=function(){this.billingCountryInput.change(this.updateState);this.billingStateSelectBoxInput.change(this.updateStateTextBoxValue);this.ccExpandLink.click(this.expandHandler);this.ccHideLink.click(this.hideHandler);};thisPaymentBillingInput.expandHandler=function(){$("#"+thisPaymentBillingInput.ccDivHideShowId).show();$("#"+thisPaymentBillingInput.ccExpandLinkId).hide();};thisPaymentBillingInput.hideHandler=function(){$("#"+thisPaymentBillingInput.ccDivHideShowId).hide();$("#"+thisPaymentBillingInput.ccExpandLinkId).show();};thisPaymentBillingInput.validateHandler=function(){var b=validateBySelector("div[id='selectMainBody']");return b;};thisPaymentBillingInput.updateStateTextBoxValue=function(){var b=$(this).val();thisPaymentBillingInput.billingStateTextBoxInput.val(b);};thisPaymentBillingInput.updateState=function(){thisPaymentBillingInput.initStateDropDown();thisPaymentBillingInput.billingStateTextBoxInput.val("");var b=$(this).val();thisPaymentBillingInput.billingCountryTextBox.val(b);};thisPaymentBillingInput.initDropDowns=function(){var b=$("#mobileAreaCode").attr("value");var e=$("#GeoIP").attr("value");if(thisPaymentBillingInput.billingCountryTextBoxId!==""){var c={"TextBoxId":thisPaymentBillingInput.billingCountryTextBoxId,"SelectBoxId":thisPaymentBillingInput.billingCountrySelectId};$("#"+this.billingCountrySelectId).attr("onchange","getBillingCountry('CONTROLGROUPPAYMENTBOTTOM_ContactBillingInputPaymentView_BillingCountry');");if($("#"+thisPaymentBillingInput.billingCountryTextBoxId).val()==""){if(b!=""){$("#"+this.billingCountryTextBoxId).val(b);}else{$("#"+this.billingCountryTextBoxId).val(e);}}countryDropDown=new SKYSALES.Class.CountryDropDown();countryDropDown.init(c);}thisPaymentBillingInput.initStateDropDown();$("#"+this.billingCountrySelectId).trigger("change");};thisPaymentBillingInput.initStateDropDown=function(){var b=thisPaymentBillingInput.billingCountryInput.val();var c=thisPaymentBillingInput.stateInfo.StateList;var e=thisPaymentBillingInput.billingStateSelectBoxInput.get(0);if(!(e===undefined)){e.options.length=1;for(i=0;i<c.length;i+=1){state=c[i];if(b==state.CountryCode){e.options[e.options.length]=new window.Option(state.Name,state.ProvinceStateCode,false,false);}}}};return thisPaymentBillingInput;};}if(!SKYSALES.Class.PaymentInputContainer){SKYSALES.Class.PaymentInputContainer=function(){var parent=SKYSALES.Class.SkySales();thisPaymentInputContainer=SKYSALES.Util.extendObject(parent);thisPaymentInputContainer.labelConvenienceFeeId="";thisPaymentInputContainer.voucherNumberTextBoxId="";thisPaymentInputContainer.voucherNumberTextBox="";thisPaymentInputContainer.labelConvenienceFee=null;thisPaymentInputContainer.validBinRange="";thisPaymentInputContainer.invalidBinRangeMsg="";thisPaymentInputContainer.validBigCardBinRange="";thisPaymentInputContainer.invalidBigCardBinRangeMsg="";thisPaymentInputContainer.buttonSubmitProxyId="ButtonSubmitProxy";thisPaymentInputContainer.buttonSubmitProxy=null;thisPaymentInputContainer.buttonSubmitId="CONTROLGROUPPAYMENTBOTTOM_ButtonSubmit";thisPaymentInputContainer.defaultCreditCardsArray=null;thisPaymentInputContainer.dropDownListPaymentMethodId="";thisPaymentInputContainer.dropDownListPaymentMethod=null;thisPaymentInputContainer.registeredCCArray=null;thisPaymentInputContainer.ccPaymentFeesArray=null;thisPaymentInputContainer.ccPaymentControlName="";thisPaymentInputContainer.ccPaymentFeeLabel="";thisPaymentInputContainer.ccPaymentFeePaxLabel="";thisPaymentInputContainer.ccPaymentFeeWayLabel="";thisPaymentInputContainer.ccPaymentFeeSegmentCount="";thisPaymentInputContainer.ccPaymentFeePaxCount="";thisPaymentInputContainer.selectedCreditCard="";thisPaymentInputContainer.dropDownMCCId="";thisPaymentInputContainer.buttonApplyMCCId="";thisPaymentInputContainer.hiddenUpdatedMCCId="";thisPaymentInputContainer.dropDownMCC=null;thisPaymentInputContainer.buttonApplyMCC=null;thisPaymentInputContainer.hiddenUpdatedMCC=null;thisPaymentInputContainer.upSellPrompt="";thisPaymentInputContainer.mccNoticePrompt="";thisPaymentInputContainer.mccCurrencyCode="";thisPaymentInputContainer.mccEnabled="";thisPaymentInputContainer.issuingCountrySelectId="";thisPaymentInputContainer.countryCurrencyHash={};thisPaymentInputContainer.isModifiedBooking="";thisPaymentInputContainer.manageMyBookingPmtAlert="";thisPaymentInputContainer.WAKObjDefault="";thisPaymentInputContainer.WAKGuest="";thisPaymentInputContainer.linkCreditHistoryId="";thisPaymentInputContainer.linkCreditHistory=null;thisPaymentInputContainer.directDebitRadioGroupName="";thisPaymentInputContainer.counterPaymentRadioGroupName="";thisPaymentInputContainer.directDebitRadioAlert="";thisPaymentInputContainer.counterPaymentRadioAlert="";thisPaymentInputContainer.IsAgencyPrePayment="";thisPaymentInputContainer.MCCControlDiv="";thisPaymentInputContainer.MCCControl=null;thisPaymentInputContainer.pukalData=null;thisPaymentInputContainer.pukalTextBoxID="",thisPaymentInputContainer.pukalTextBox=null;thisPaymentInputContainer.pukalDescLabelID="";thisPaymentInputContainer.pukalDescLabel=null;var selectedBillingContent=0;thisPaymentInputContainer.setSettingsByObject=function(json){parent.setSettingsByObject.call(this,json);if(thisPaymentInputContainer.WAKObjDefault!=""){for(i=0;i<eval(thisPaymentInputContainer.WAKGuest);i++){$("#CONTROLGROUPPAYMENTBOTTOM_PaymentInputViewPaymentView_objectNoDropdownList"+i+" option[text="+thisPaymentInputContainer.WAKObjDefault+"]").attr("selected","selected");}}};thisPaymentInputContainer.setVars=function(){thisPaymentInputContainer.labelConvenienceFee=this.getById(this.labelConvenienceFeeId);thisPaymentInputContainer.voucherNumberTextBox=this.getById(this.voucherNumberTextBoxId);thisPaymentInputContainer.buttonSubmitProxy=this.getById(this.buttonSubmitProxyId);thisPaymentInputContainer.dropDownListPaymentMethod=this.getById(this.dropDownListPaymentMethodId);thisPaymentInputContainer.dropDownMCC=this.getById(this.dropDownMCCId);thisPaymentInputContainer.buttonApplyMCC=this.getById(this.buttonApplyMCCId);thisPaymentInputContainer.hiddenUpdatedMCC=this.getById(this.hiddenUpdatedMCCId);thisPaymentInputContainer.linkCreditHistory=this.getById(this.linkCreditHistoryId);thisPaymentInputContainer.MCCControl=this.getById(this.MCCControlDiv);thisPaymentInputContainer.IsAgencyPrePayment=this.IsAgencyPrePayment;thisPaymentInputContainer.pukalData=this.pukalData;thisPaymentInputContainer.pukalTextBox=this.getById(this.pukalTextBoxID);thisPaymentInputContainer.pukalDescLabel=this.getById(this.pukalDescLabelID);};thisPaymentInputContainer.ShowPukalDescHandler=function(){var trimDesc="";var pukalTexbox=thisPaymentInputContainer.pukalTextBox.val();thisPaymentInputContainer.pukalDescLabel.empty();if(pukalTexbox!=""){for(var i=0;i<thisPaymentInputContainer.pukalData.length;i++){var pukalData=thisPaymentInputContainer.pukalData[i];var stringLimit=100;var stringStart=0;if(pukalTexbox==pukalData.PUKALNO){if(pukalData.PUKALDESC.length>stringLimit){trimDesc=pukalData.PUKALDESC.substring(stringStart,stringLimit);thisPaymentInputContainer.pukalDescLabel.text(trimDesc);}else{thisPaymentInputContainer.pukalDescLabel.text(pukalData.PUKALDESC);}}}}else{thisPaymentInputContainer.pukalDescLabel.empty();}};thisPaymentInputContainer.addEvents=function(){this.labelConvenienceFee.hover(thisPaymentInputContainer.previewConvenienceFeeDivHandler,thisPaymentInputContainer.hideConvenienceFeeDivHandler);this.buttonSubmitProxy.click(thisPaymentInputContainer.validateCC);this.dropDownListPaymentMethod.change(thisPaymentInputContainer.showSelectedCC);$("#"+this.buttonSubmitId).click(this.prompterHandler);$("input:radio[name='"+this.ccPaymentControlName+"']").click(function(){var selectedPayment=$(this).val();thisPaymentInputContainer.selectCC(selectedPayment);});if(thisPaymentInputContainer.hiddenUpdatedMCC){thisPaymentInputContainer.hiddenUpdatedMCC.val("");}if(this.hiddenUpdatedMCC.length>0){$("#CONTROLGROUPPAYMENTBOTTOM_MultiCurrencyConversionViewPaymentView_ButtonApplyMCC").click(thisPaymentInputContainer.updateCurrency);}this.linkCreditHistory.click(thisPaymentInputContainer.openCreditHistoryHandler);this.pukalTextBox.blur(thisPaymentInputContainer.ShowPukalDescHandler);};thisPaymentInputContainer.openCreditHistoryHandler=function(){return thisPaymentInputContainer.OpenCreditHistoryWindow();};thisPaymentInputContainer.OpenCreditHistoryWindow=function(){var centerWidth=(screen.width-800)/2,centerHeight=(screen.height-500)/2;window.open("CreditStatusWindow.aspx",null,"height="+500+",width="+800+",left="+centerWidth+",top="+centerHeight+",status=yes,toolbar=no,menubar=no,location=no,scrollbars=yes");return false;};thisPaymentInputContainer.prompterHandler=function(){return thisPaymentInputContainer.showCurrencyPrompter();};thisPaymentInputContainer.showCurrencyPrompter=function(){if(this.defaultCreditCardsArray.length>0){var activeCC=this.defaultCreditCardsArray[this.getActivePayment()],countrySelected=$("#"+activeCC.issuingCountrySelectId).val()||"",activeBilling=this.defaultCreditCardsArray[this.getActivePayment()].billingContentId,contentCC=this.defaultCreditCardsArray[this.getActivePayment()].contentId,virtualNo=$("input:radio[name='"+this.ccPaymentControlName+"']:checked").val(),countryCurrencySelected=this.countryCurrencyHash[countrySelected]||null;if(virtualNo){result=validateBySelector("td[id='"+this.selectedCreditCard+"_CVV_"+virtualNo+"']")&&validateBySelector("div[id='"+activeBilling+"']");}else{result=validateBySelector("div[id='"+contentCC+"']")||validateBySelector("div[id='"+activeBilling+"']");}}SKYSALES.DisplayLoadingBar();return true;};thisPaymentInputContainer.updateCurrency=function(){var updatedMCC=thisPaymentInputContainer.dropDownMCC.val();thisPaymentInputContainer.hiddenUpdatedMCC.val(updatedMCC);};thisPaymentInputContainer.init=function(json){this.setSettingsByObject(json);this.setVars();this.addEvents();if(this.IsAgencyPrePayment=="True"){this.MCCControl.remove();}else{this.MCCControl.show();}if(this.voucherNumberTextBox!=null){this.voucherNumberTextBox.val("");}var i=0;var defaultCreditCardsArray=this.defaultCreditCardsArray||[];var paymentInput=null;for(i=0;i<defaultCreditCardsArray.length;i+=1){paymentInput=new SKYSALES.Class.PaymentInput();paymentInput.init(defaultCreditCardsArray[i]);this.defaultCreditCardsArray[i]=paymentInput;paymentInput.hideContent();}if(this.defaultCreditCardsArray.length>0){var activeDiv=this.getActivePayment();this.defaultCreditCardsArray[activeDiv].showContent();this.displayConvenienceFee(this.defaultCreditCardsArray[activeDiv].ccId);}var countryList=SKYSALES.Util.getResource().countryInfo.CountryList;for(i=0;i<countryList.length;i=i+1){this.countryCurrencyHash[countryList[i].code]={"currencyCode":countryList[i].currency};}var ccRadio=$("input:radio[name='"+thisPaymentInputContainer.ccPaymentControlName+"']:enabled");if(ccRadio.length>0){if(ccRadio.length>1){thisPaymentInputContainer.selectedCreditCard=thisPaymentInputContainer.registeredCCArray[0].brand;thisPaymentInputContainer.displayConvenienceFee(thisPaymentInputContainer.selectedCreditCard);$("#"+thisPaymentInputContainer.registeredCCArray[0].CVV).removeAttr("disabled");thisPaymentInputContainer.showBillingContent(thisPaymentInputContainer.registeredCCArray[0].brand);thisPaymentInputContainer.hideDefaultCCs();}else{if(ccRadio.length==1){thisPaymentInputContainer.showDefaultCCs();thisPaymentInputContainer.displayConvenienceFee(thisPaymentInputContainer.defaultCreditCardsArray[thisPaymentInputContainer.getActivePayment()].ccId);thisPaymentInputContainer.showBillingContent(thisPaymentInputContainer.defaultCreditCardsArray[thisPaymentInputContainer.getActivePayment()].ccId);}}ccRadio[0].checked=true;}};thisPaymentInputContainer.getActivePayment=function(){var i=0;var activeIndex=0;for(i=0;i<thisPaymentInputContainer.defaultCreditCardsArray.length;i++){if(thisPaymentInputContainer.defaultCreditCardsArray[i].contentId=="content_"+thisPaymentInputContainer.dropDownListPaymentMethod.val()){activeIndex=i;break;}}return activeIndex;};thisPaymentInputContainer.showSelectedCC=function(){var i=0;var activeIndex=thisPaymentInputContainer.getActivePayment();for(i=0;i<thisPaymentInputContainer.defaultCreditCardsArray.length;i++){thisPaymentInputContainer.defaultCreditCardsArray[i].hideContent();}thisPaymentInputContainer.defaultCreditCardsArray[activeIndex].showContent();thisPaymentInputContainer.displayConvenienceFee(thisPaymentInputContainer.defaultCreditCardsArray[activeIndex].ccId);};thisPaymentInputContainer.hideDefaultCCs=function(){thisPaymentInputContainer.defaultCreditCardsArray[thisPaymentInputContainer.getActivePayment()].clearCCForm();$("#"+thisPaymentInputContainer.registeredCCArray[thisPaymentInputContainer.registeredCCArray.length-1].brand+"_div").hide();};thisPaymentInputContainer.showDefaultCCs=function(){$("#"+thisPaymentInputContainer.registeredCCArray[thisPaymentInputContainer.registeredCCArray.length-1].brand+"_div").show();};thisPaymentInputContainer.validateCC=function(){$.post("SessionRefresh.aspx");var validCC=true,validBillingInput=true;if(thisPaymentInputContainer.selectedCreditCard==""&&thisPaymentInputContainer.defaultCreditCardsArray.length>0){var activeCC=thisPaymentInputContainer.defaultCreditCardsArray[thisPaymentInputContainer.getActivePayment()];var ccNumber=$("#"+activeCC.accountNumberInputId).val();var validBigCard=true;if(activeCC.contentId=="content_ExternalAccount:BG"&&ccNumber){var validBigCard=false;var bigCardBinRangeArray=thisPaymentInputContainer.validBigCardBinRange.split(",");var bigCardBinRanges=bigCardBinRangeArray.length;for(i=0;i<bigCardBinRanges;i++){var bigCardBinRangeItem=bigCardBinRangeArray[i];if(bigCardBinRangeItem==ccNumber.substring(0,bigCardBinRangeItem.length)){validBigCard=true;break;}}if(validBigCard==false&&ccNumber.length>0){alert(thisPaymentInputContainer.invalidBigCardBinRangeMsg);validCC=false;}}if(validBigCard==true){if(thisPaymentInputContainer.validBinRange!=""&&ccNumber&&ccNumber!=""){var validCCNumber=false;var binRangeArray=thisPaymentInputContainer.validBinRange.split(",");var binRanges=binRangeArray.length;for(i=0;i<binRanges;i++){var binRangeItem=binRangeArray[i];if(binRangeItem==ccNumber.substring(0,binRangeItem.length)){validCCNumber=true;break;}}if(validCCNumber==false){alert(thisPaymentInputContainer.invalidBinRangeMsg);validCC=false;}}}validCC=validCC&&validateBySelector("div[id='"+activeCC.contentId+"'], div[id='termAndConditionAgm']")&&validateBySelector("div[id='"+activeCC.billingContentId+"']");}else{if(thisPaymentInputContainer.selectedCreditCard!=""){var activeBilling=thisPaymentInputContainer.defaultCreditCardsArray[selectedBillingContent].billingContentId;var virtualNo=$("input:radio[name='"+thisPaymentInputContainer.ccPaymentControlName+"']:checked").val();validCC=validateBySelector("td[id='"+thisPaymentInputContainer.selectedCreditCard+"_CVV_"+virtualNo+"']")&&validateBySelector("div[id='"+activeBilling+"']");}else{if(!thisPaymentInputContainer.defaultCreditCardsArray.length>0){var submitAction=($("#"+thisPaymentInputContainer.buttonSubmitId)).get(0);validCC=validate(submitAction);}}}validBillingInput=validCC&&validateBySelector("div[id='paymentBillingInputContent'],div[id='termAndConditionAgm']");if(thisPaymentInputContainer.directDebitRadioGroupName){var directDebitRB=$("input[name*='"+thisPaymentInputContainer.directDebitRadioGroupName+"']");if(directDebitRB&&directDebitRB.length){var directDebitVal=directDebitRB.filter(":checked");if(!directDebitVal||!directDebitVal.val()){alert(thisPaymentInputContainer.directDebitRadioAlert);return false;}}}if(thisPaymentInputContainer.counterPaymentRadioGroupName){var counterPaymentRB=$("input[name*='"+thisPaymentInputContainer.counterPaymentRadioGroupName+"']");if(counterPaymentRB&&counterPaymentRB.length){var counterPaymentVal=counterPaymentRB.filter(":checked");if(!counterPaymentVal||!counterPaymentVal.val()){alert(thisPaymentInputContainer.counterPaymentRadioAlert);return false;}}}if(validCC==true&&validBillingInput==true){document.getElementById(thisPaymentInputContainer.buttonSubmitId).click();}return false;};thisPaymentInputContainer.selectCC=function(selectedCC){thisPaymentInputContainer.selectedCreditCard="";var cvvField=null;var selectedIndex=0;var i=0;for(i=0;i<thisPaymentInputContainer.registeredCCArray.length;i++){cvvField=$("#"+thisPaymentInputContainer.registeredCCArray[i].CVV);if(cvvField!=null&&cvvField.length>0){cvvField.val("");if(thisPaymentInputContainer.registeredCCArray[i].virtualNo==selectedCC){selecteddIndex=i;thisPaymentInputContainer.selectedCreditCard=thisPaymentInputContainer.registeredCCArray[i].brand;var arCCInfo=thisPaymentInputContainer.registeredCCArray[i].CCInfo.split("|");$("#CONTROLGROUPPAYMENTBOTTOM_ContactBillingInputPaymentView_TextBoxAvs__Address1").val(arCCInfo[0]);$("#CONTROLGROUPPAYMENTBOTTOM_ContactBillingInputPaymentView_TextBoxAvs__Address2").val(arCCInfo[1]);$("#CONTROLGROUPPAYMENTBOTTOM_ContactBillingInputPaymentView_BillingCountry").val(arCCInfo[2]);$("#CONTROLGROUPPAYMENTBOTTOM_ContactBillingInputPaymentView_BillingState").val(arCCInfo[3]);$("#CONTROLGROUPPAYMENTBOTTOM_ContactBillingInputPaymentView_TextBoxAvs__City").val(arCCInfo[4]);$("#CONTROLGROUPPAYMENTBOTTOM_ContactBillingInputPaymentView_TextBoxAvs__PostalCode").val(arCCInfo[5]);}cvvField.attr("disabled","disabled");cvvField.removeClass("validationError");}}if(selectedCC=="OtherPayment"){$("#CONTROLGROUPPAYMENTBOTTOM_ContactBillingInputPaymentView_TextBoxAvs__Address1").val("");$("#CONTROLGROUPPAYMENTBOTTOM_ContactBillingInputPaymentView_TextBoxAvs__Address2").val("");$("#CONTROLGROUPPAYMENTBOTTOM_ContactBillingInputPaymentView_BillingCountry").val("");$("#CONTROLGROUPPAYMENTBOTTOM_ContactBillingInputPaymentView_BillingState").val("");$("#CONTROLGROUPPAYMENTBOTTOM_ContactBillingInputPaymentView_TextBoxAvs__City").val("");$("#CONTROLGROUPPAYMENTBOTTOM_ContactBillingInputPaymentView_TextBoxAvs__PostalCode").val("");}if(thisPaymentInputContainer.selectedCreditCard!=""){thisPaymentInputContainer.hideDefaultCCs();cvvField=$("#"+thisPaymentInputContainer.registeredCCArray[selecteddIndex].CVV);cvvField.removeAttr("disabled");cvvField.select();thisPaymentInputContainer.displayConvenienceFee(thisPaymentInputContainer.selectedCreditCard);thisPaymentInputContainer.showBillingContent(thisPaymentInputContainer.registeredCCArray[selecteddIndex].brand);}else{thisPaymentInputContainer.showDefaultCCs();thisPaymentInputContainer.displayConvenienceFee(thisPaymentInputContainer.defaultCreditCardsArray[thisPaymentInputContainer.getActivePayment()].ccId);thisPaymentInputContainer.showBillingContent(thisPaymentInputContainer.defaultCreditCardsArray[thisPaymentInputContainer.getActivePayment()].ccId);}};thisPaymentInputContainer.displayConvenienceFee=function(ccBrand){var i=0;var hasConvenienceFee=false;var convPreview=thisPaymentInputContainer.ccPaymentFeeLabel;for(i=0;i<thisPaymentInputContainer.ccPaymentFeesArray.length;i++){if(ccBrand==thisPaymentInputContainer.ccPaymentFeesArray[i].brand){hasConvenienceFee=true;$("#paymentFee_Amount").text(thisPaymentInputContainer.ccPaymentFeesArray[i].convenienceFee);$("#totalWithPaymentFee_Amount").text(thisPaymentInputContainer.ccPaymentFeesArray[i].paymentTotal);convPreview=convPreview.concat(thisPaymentInputContainer.ccPaymentFeesArray[i].feeBase," x ",thisPaymentInputContainer.ccPaymentFeeSegmentCount,thisPaymentInputContainer.ccPaymentFeeWayLabel," x ",thisPaymentInputContainer.ccPaymentFeePaxCount,thisPaymentInputContainer.ccPaymentFeePaxLabel,thisPaymentInputContainer.ccPaymentFeesArray[i].convenienceFee);$("#convenienceFeePreview").text(convPreview);}}if(hasConvenienceFee==false){$("#convenienceFee_Display").hide();}else{$("#convenienceFee_Display").show();}};thisPaymentInputContainer.showBillingContent=function(ccBrand){var i=0;selectedBillingContent=0;for(i=0;i<thisPaymentInputContainer.defaultCreditCardsArray.length;i++){thisPaymentInputContainer.defaultCreditCardsArray[i].billingContent.addClass("hidden");if(ccBrand==thisPaymentInputContainer.defaultCreditCardsArray[i].ccId){selectedBillingContent=i;}}thisPaymentInputContainer.defaultCreditCardsArray[selectedBillingContent].billingContent.removeClass("hidden");};return thisPaymentInputContainer;};SKYSALES.Class.PaymentInputContainer.createObject=function(a){SKYSALES.Util.createObject("paymentInputContainer","PaymentInputContainer",a);};}if(!SKYSALES.Class.CaptchaDisplayContainer){SKYSALES.Class.CaptchaDisplayContainer=function(){var a=SKYSALES.Class.SkySales(),b=SKYSALES.Util.extendObject(a);b.imageSecurityDivId="";b.imageSecurityDiv=null;b.captchaRefreshLinkId="";b.captchaRefreshLink=null;b.imageSecurityId="";b.imageSecurity=null;b.captchaImageGeneratorUrl="CaptchaNewImageAjax-resource.aspx";b.loadingAnimationSrc="images/AKBase/loadingAnimation.gif";b.init=function(c){this.setSettingsByObject(c);this.setVars();this.addEvents();};b.setVars=function(){if(this.captchaRefreshLinkId){b.captchaRefreshLink=this.getById(this.captchaRefreshLinkId);}};b.addEvents=function(){if(this.captchaRefreshLink.length){this.captchaRefreshLink.click(this.refreshCaptchaImage);}};b.refreshCaptchaImage=function(){b.imageSecurity=b.getById(b.imageSecurityId);if(b.imageSecurity.length>0){var f=b.imageSecurity,c=f.get(0)?f.height():"25",e=f.get(0)?f.width():"160",l={"height":c,"width":e};if(f.get(0)){f.attr("src",b.loadingAnimationSrc).css(l);$.get(b.captchaImageGeneratorUrl,l,b.captchaImageResponseHandler);}}};b.captchaImageResponseHandler=function(e){var f=$(e),c=f.html();b.imageSecurity[0].src=c;};return b;};SKYSALES.Class.CaptchaDisplayContainer.createObject=function(a){SKYSALES.Util.createObject("captchaDisplayContainer","CaptchaDisplayContainer",a);};}if(!SKYSALES.Class.PaymentInput){SKYSALES.Class.PaymentInput=function(){var a=SKYSALES.Class.SkySales(),b=SKYSALES.Util.extendObject(a);b.dccOfferInfoId="";b.foreignAmountId="";b.foreignCurrencyId="";b.foreignCurrencySymbolId="";b.ownCurrencyAmountId="";b.ownCurrencyId="";b.ownCurrencySymbolId="";b.rejectRadioBtnIdId="";b.acceptRadioBtnIdId="";b.doubleOptOutId="";b.inlineDCCAjaxSucceededId="";b.dccId="";b.inlineDCCConversionLabelId="";b.amountInputId="";b.accountNumberInputId="";b.inlineDCCOffer=null;b.currencyCode=null;b.feeAmt=null;b.issuingCountryTextBoxId="";b.issuingCountrySelectId="";b.billingCountryTextBoxId="";b.billingCountrySelectId="";b.billingStateTextBoxId="";b.billingStateSelectId="";b.billingStateSelectBoxInput="";b.billingStateTextBoxInput="";b.billingCountryInput="";b.billingCountryTextBox=null;b.voucherNumberTextBoxId="";b.voucherNumberTextBox="";b.stateInfo=SKYSALES.Util.getResource().stateInfo;b.contentId="";b.content=null;b.billingContentId="";b.billingContent=null;b.cvvTextBoxId="";b.cvvTextBox=null;b.acctHolderNameTextBoxId="";b.acctHolderNameTextBox=null;b.bankNameTextBoxId="";b.bankNameTextBox=null;b.ccId="";b.setSettingsByObject=function(c){a.setSettingsByObject.call(this,c);};b.setVars=function(){b.dcc=$("#"+this.dccId);b.inlineDCCConversionLabel=$("#"+this.inlineDCCConversionLabelId);b.accountNoTextBox=$("#"+this.accountNumberInputId);b.amountTextBox=$("#"+this.amountInputId);b.inlineDCCAjaxSucceeded=$("#"+this.inlineDCCAjaxSucceededId);b.billingStateSelectBoxInput=this.getById(this.billingStateSelectId);b.billingStateTextBoxInput=this.getById(this.billingStateTextBoxId);b.billingCountryInput=this.getById(this.billingCountrySelectId);b.content=this.getById(this.contentId);b.billingContent=this.getById(this.billingContentId);b.billingCountryTextBox=this.getById(this.billingCountryTextBoxId);b.cvvTextBox=$("#"+this.cvvTextBoxId);b.acctHolderNameTextBox=$("#"+this.acctHolderNameTextBoxId);b.bankNameTextBox=$("#"+this.bankNameTextBoxId);};b.hideTextBoxRef=function(){b.billingStateTextBoxInput.addClass("hidden");b.billingCountryTextBox.addClass("hidden");};b.hideContent=function(){this.content.addClass("hidden");this.clearCCForm();this.billingContent.addClass("hidden");};b.clearCCForm=function(){var c=$("#mobileAreaCode").attr("value");var e=$("#GeoIP").attr("value");this.cvvTextBox.val("");this.accountNoTextBox.val("");if(this.acctHolderNameTextBox.val()==null){this.acctHolderNameTextBox.val("");}this.bankNameTextBox.val("");if(c!=""){$("#"+this.issuingCountrySelectId).val(c);$("#"+this.issuingCountryTextBoxId).val(c);}else{$("#"+this.issuingCountrySelectId).val(e);$("#"+this.issuingCountryTextBoxId).val(e);}};b.showContent=function(){this.content.removeClass("hidden");this.billingContent.removeClass("hidden");};b.inlineDCCAjaxRequestHandler=function(){b.getInlineDCC();};b.addEvents=function(){this.amountTextBox.change(this.inlineDCCAjaxRequestHandler);this.accountNoTextBox.change(this.inlineDCCAjaxRequestHandler);this.billingCountryInput.change(this.updateState);this.billingStateSelectBoxInput.change(this.updateStateTextBoxValue);};b.init=function(c){this.setSettingsByObject(c);this.setVars();this.addEvents();this.hideTextBoxRef();this.initDropDowns();this.billingStateSelectBoxInput.val(this.billingStateTextBoxInput.val());};b.initDropDowns=function(){if(b.issuingCountryTextBoxId!==""){var c={"TextBoxId":b.issuingCountryTextBoxId,"SelectBoxId":b.issuingCountrySelectId};countryDropDown=new SKYSALES.Class.CountryDropDown();countryDropDown.init(c);}if(b.billingCountryTextBoxId!==""){var c={"TextBoxId":b.billingCountryTextBoxId,"SelectBoxId":b.billingCountrySelectId};countryDropDown=new SKYSALES.Class.CountryDropDown();countryDropDown.init(c);}b.initStateDropDown();};b.updateState=function(){b.initStateDropDown();b.billingStateTextBoxInput.val("");};b.initStateDropDown=function(){var c=b.billingCountryInput.val();var e=b.stateInfo.StateList;var f=b.billingStateSelectBoxInput.get(0);if(!(f===undefined)){f.options.length=1;for(i=0;i<e.length;i+=1){state=e[i];if(c==state.CountryCode){f.options[f.options.length]=new window.Option(state.Name,state.ProvinceStateCode,false,false);}}}};b.updateStateTextBoxValue=function(){var c=$(this).val();b.billingStateTextBoxInput.val(c);};b.getInlineDCC=function(c,f){var e={};if("True"===this.inlineDCCOffer){if(!f){f=this.accountNoTextBox.val();}if(!c){c=this.amountTextBox.val();}e={"amount":c,"paymentFee":this.feeAmt,"currencyCode":this.currencyCode,"accountNumber":f};if(this.currencyCode&&c&&f&&(0<parseFloat(c))&&(12<=f.length)){this.inlineDCCAjaxSucceeded.val("false");$.get("DCCOfferAjax-Resource.aspx",e,this.inlineDCCResponseHandler);}}};b.setVarsAfterAjaxResponse=function(c){var e=$("#"+this.dccOfferInfoId,c);b.foreignAmount=$("#"+this.foreignAmountId,e).text();b.foreignCurrency=$("#"+this.foreignCurrencyId,e).text();b.foreignCurrencySymbol=$("#"+this.foreignCurrencySymbolId,e).text();b.ownCurrencyAmount=$("#"+this.ownCurrencyAmountId,e).text();b.ownCurrency=$("#"+this.ownCurrencyId,e).text();b.ownCurrencySymbol=$("#"+this.ownCurrencySymbolId,e).text();b.acceptRadioBtnID=$("#"+this.acceptRadioBtnIdId,e).text();b.rejectRadioBtnID=$("#"+this.rejectRadioBtnIdId,e).text();b.acceptRadioBtn=$("#"+this.acceptRadioBtnID);b.doubleOptOut=$("#"+this.doubleOptOutId,e).text();b.radioButtonInlineDccStatusOfferAccept=$("#"+this.acceptRadioBtnID);b.radioButtonInlineDccStatusOfferReject=$("#"+this.rejectRadioBtnID);};b.foreignUpdateConversionLabel=function(){this.inlineDCCConversionLabel.text("("+" "+this.foreignAmount+" "+this.foreignCurrency+")");};b.ownUpdateConversionLabel=function(){this.inlineDCCConversionLabel.text("");};b.noThanks=function(){$("#dccCont").show("slow");};b.noShowThanks=function(){$("#dccCont").hide("slow");};b.inlineDccStatusOfferAccept=function(){this.foreignUpdateConversionLabel();this.noShowThanks();};b.inlineDccStatusOfferReject=function(){this.ownUpdateConversionLabel();this.noThanks();};b.inlineDccStatusOfferAcceptHandler=function(){b.inlineDccStatusOfferAccept();};b.inlineDccStatusOfferRejectHandler=function(){b.inlineDccStatusOfferReject();};b.addEventsAfterAjaxResponse=function(){this.radioButtonInlineDccStatusOfferAccept.click(this.inlineDccStatusOfferAcceptHandler);this.radioButtonInlineDccStatusOfferReject.click(this.inlineDccStatusOfferRejectHandler);};b.updateAcceptRadioBtn=function(){var c=this.acceptRadioBtn.attr("checked");if(c){this.foreignUpdateConversionLabel();}};b.updateInlineDCCOffer=function(f){this.inlineDCCAjaxSucceeded.val("true");var c=null;if(f){this.dcc.empty();var e=$(f);c=$("#"+this.dccId,e);if(c&&c.length){this.dcc.prepend(c.children());}this.setVarsAfterAjaxResponse(e);this.addEventsAfterAjaxResponse();this.updateAcceptRadioBtn();}};b.inlineDCCResponseHandler=function(c){b.updateInlineDCCOffer(c);};return b;};SKYSALES.Class.PaymentInput.createObject=function(a){SKYSALES.Util.createObject("paymentInput","PaymentInput",a);};}if(!SKYSALES.Class.CountryDropDown){SKYSALES.Class.CountryDropDown=function(){var b=SKYSALES.Class.SkySales();var a=SKYSALES.Util.extendObject(b);a.SelectBox=null;a.SelectBoxId="";a.TextBox=null;a.TextBoxId=null;a.countryInfo=SKYSALES.Util.getResource().countryInfo;a.init=function(c){this.setSettingsByObject(c);this.setVars();this.addEvents();a.populateDropDown();a.TextBox.val(this.TextBox.val());};a.setVars=function(){a.TextBox=this.getById(a.TextBoxId);a.Select=this.getById(a.SelectBoxId);};a.addEvents=function(){a.Select.change(a.updateTextBoxValue);};a.updateTextBoxValue=function(){var c=$(this).val();a.TextBox.val(c);};a.populateDropDown=function(){var c={"selectBox":this.Select,"objectArray":this.countryInfo.CountryList,"selectedItem":this.TextBox.val(),"showCode":false};SKYSALES.Util.populateSelect(c);};return a;};}if(!SKYSALES.Class.PriceDisplay){SKYSALES.Class.PriceDisplay=function(){var a=new SKYSALES.Class.SkySales();var b=SKYSALES.Util.extendObject(a);b.toggleViewIdArray=null;b.init=function(f){this.setSettingsByObject(f);var c=this.toggleViewIdArray||[];var e=0;var l=null;for(e=0;e<c.length;e+=1){l=new SKYSALES.Class.ToggleView();l.init(c[e]);b.toggleViewIdArray[e]=l;}};return b;};SKYSALES.Class.PriceDisplay.createObject=function(a){SKYSALES.Util.createObject("priceDisplay","PriceDisplay",a);};}if(!SKYSALES.Class.FlightDisplay){SKYSALES.Class.FlightDisplay=function(){var b=new SKYSALES.Class.SkySales();var a=SKYSALES.Util.extendObject(b);a.toggleViewIdArray=null;a.init=function(f){this.setSettingsByObject(f);var c=this.toggleViewIdArray||[];var e=0;var l=null;for(e=0;e<c.length;e+=1){l=new SKYSALES.Class.ToggleView();l.init(c[e]);a.toggleViewIdArray[e]=l;}};return a;};SKYSALES.Class.FlightDisplay.createObject=function(a){SKYSALES.Util.createObject("flightDisplay","FlightDisplay",a);};}if(!SKYSALES.Class.RandomImage){SKYSALES.Class.RandomImage=function(){var a=new SKYSALES.Class.SkySales();var b=SKYSALES.Util.extendObject(a);b.imageUriArray=[];b.init=function(c){this.setSettingsByObject(c);this.setVars();this.setAsBackground();};b.getRandomNumber=function(){var c=this.imageUriArray.length;var e=Math.floor(Math.random()*c);return e;};b.setAsBackground=function(){var e=this.getRandomNumber();var c="url("+this.imageUriArray[e]+")";this.container.css("background-image",c);};return b;};SKYSALES.Class.RandomImage.createObject=function(a){SKYSALES.Util.createObject("randomImage","RandomImage",a);};}SKYSALES.Class.DropDown=function(b){b=b||{};var a=this;a.container={};a.name="";a.options=[];a.dropDownContainer=null;a.dropDownContainerInput=null;a.document=null;a.optionList=null;a.optionActiveClass="optionActive";a.timeOutObj=null;a.timeOut=225;a.minCharLength=2;a.optionMax=100;a.html='<div></div><div class="dropDownContainer"></div>';a.autoComplete=true;a.setSettingsByObject=function(c){var e=null;for(e in c){if(a.hasOwnProperty(e)){a[e]=c[e];}}};a.getOptionHtml=function(c){c=c||"";var l={};var r="";var f="";var q=0;var m=a.options;var e=new RegExp("^"+c,"i");if(c.length<a.minCharLength){f="";}else{for(r in m){if(m.hasOwnProperty(r)){l=m[r];l.name=l.name||"";l.code=l.code||"";if(l.name.match(e)||l.code.match(e)){f+="<div><span>"+l.code+"</span>"+l.name+" ("+l.code+")"+"</div>";q+=1;}if(q>=a.optionMax){break;}}}}return f;};a.close=function(){if(a.timeOutObj){window.clearTimeout(a.timeOutObj);}a.document.unbind("click",a.close);if(a.optionList){a.optionList.unbind("hover");a.optionList.unbind("click");}a.optionList=null;a.dropDownContainer.html("");};a.getActiveOptionIndex=function(){var e=-1;var c=$("."+a.optionActiveClass,a.dropDownContainer);if(a.optionList&&(c.length>0)){e=a.optionList.index(c[0]);}return e;};a.arrowDown=function(){var c=a.getActiveOptionIndex();if(a.optionList){if((c===-1)&&(a.optionList.length>0)){a.optionActive.call(a.optionList[0]);}else{if(a.optionList.length>c+1){a.optionInActive.call(a.optionList[c]);a.optionActive.call(a.optionList[c+1]);}else{a.arrowDownOpen();}}}else{a.arrowDownOpen();}};a.arrowDownOpen=function(){var c=a.minCharLength;a.minCharLength=0;a.open();a.minCharLength=c;};a.arrowUp=function(){var c=a.getActiveOptionIndex();if(a.optionList){if((c===-1)&&(a.optionList.length>0)){a.optionActive.call(a.optionList[0]);}else{if((c>0)&&(a.optionList.length>0)){a.optionInActive.call(a.optionList[c]);a.optionActive.call(a.optionList[c-1]);}}}};a.selectButton=function(){var e=a.getActiveOptionIndex();var c=a.optionMax;if(e>-1){a.selectOption.call(a.optionList[e]);}else{if(a.autoComplete===true){a.optionMax=1;a.open();if(a.optionList&&(a.optionList.length>0)){a.selectOption.call(a.optionList[0]);}a.optionMax=c;}}};a.keyEvent=function(c){var f=true;var e=c.which;if(e===40){a.arrowDown();a.autoComplete=true;f=false;}else{if(e===38){a.arrowUp();a.autoComplete=true;f=false;}else{if(e===9){a.selectButton();a.inputBlur();}else{if(e===13){a.selectButton();a.autoComplete=false;f=false;}else{a.autoComplete=true;}}}}return f;};a.inputKeyEvent=function(c){var f=true;var e=c.which;if((e!==40)&&(e!==38)&&(e!==9)&&(e!==13)){if(a.timeOutObj){window.clearTimeout(a.timeOutObj);}a.timeOutObj=window.setTimeout(a.open,a.timeOut);f=false;}return f;};a.catchEvent=function(){return false;};a.open=function(){var q="";var l=null;var e=a.dropDownContainerInput.val();var f=a.getOptionHtml(e);var c=0;var m=0;a.dropDownContainer.html(f);a.addOptionEvents();a.dropDownContainer.click(a.catchEvent);a.document.click(a.close);a.dropDownContainer.show();if(a.optionList&&(a.optionList.length>0)&&a.optionActive){a.optionActive.call(a.optionList[0]);}m=a.dropDownContainer.width();if($.browser.msie){c=a.dropDownContainer.height();q='<iframe src="#"></iframe>';a.dropDownContainer.prepend(q);l=$("iframe",a.dropDownContainer);l.width(m);l.height(c);}};a.optionActive=function(){var c=$(this);a.optionList.removeClass(a.optionActiveClass);c.addClass(a.optionActiveClass);};a.optionInActive=function(){var c=$(this);c.removeClass(a.optionActiveClass);};a.selectOption=function(){var c=$("span",this).text();a.dropDownContainerInput.val(c);a.close();a.dropDownContainerInput.change();};a.addOptionEvents=function(){a.optionList=$("div",a.dropDownContainer);a.optionList.hover(a.optionActive,a.optionInActive);a.optionList.click(a.selectOption);};a.inputBlur=function(){a.close();};a.addEvents=function(c){a.dropDownContainerInput=c.input;a.dropDownContainer=$("div.dropDownContainer",a.container);a.document=$(document);a.dropDownContainerInput.keyup(a.inputKeyEvent);a.dropDownContainerInput.keydown(a.keyEvent);};a.init=function(e){a.setSettingsByObject(e);var c=a.html;e.input.attr("autocomplete","off");e.input.wrap('<span class="dropDownOuterContainer"></span>');e.input.after(c);a.container=e.input.parent("span.dropDownOuterContainer");a.addEvents(e);SKYSALES.Class.DropDown.dropDownArray[SKYSALES.Class.DropDown.dropDownArray.length]=a;};a.init(b);return a;};SKYSALES.Class.DropDown.dropDownArray=[];SKYSALES.Class.DropDown.getDropDown=function(e){var l=null;var c=0;var f=null;var m=SKYSALES.Class.DropDown.dropDownArray;var b=null;var a=e.input.get(0);for(c=0;c<m.length;c+=1){f=m[c];b=f.dropDownContainerInput.get(0);if((b)&&(a)&&(b===a)){l=m[c];if(e.options){l.options=e.options;}}}if(!l){l=new SKYSALES.Class.DropDown(e);}return l;};if(!SKYSALES.Class.DatePickerManager){SKYSALES.Class.DatePickerManager=function(){var w=this;w.isAOS=false;w.yearMonth=null;w.day=null;w.linkedDate=null;w.linkedAltDateId="";w.marketCount=null;w.jsDateFormat="";w.textBoxInputId=null;w.controlInputId=null;w.transactionDateFormat="";w.yearMonthOptionArray=[];w.beginDateBound=new Date();w.endDateBound=new Date();w.currentDate=new Date();w.index=0;w.isAddFlight=false;w.isMulticityBooking="false";var s=[];var l="-";var r="yy-mm";var q="dd";var u="first";var z="mm/dd/yy";var A=new RegExp("\\d{4}-\\d{2}");var b=function(I){var J=new Date(I.getFullYear(),I.getMonth(),32);var H=J.getDate();return 32-H;};var c=function(H){if(H==null){return true;}if(10>Number(H)){H="0"+H;}return H.match(/\d{2}/);};var a=function(H){H=H||"";return H.match(A);};var m=function(K,H){var N=new Date();var L=K.split(l);var M=0;var O=1;if(true===w.isAOS){M=1;O=0;}var J=L[M];var I=L[O]-1;N=new Date(J,I,H);return N;};var G=function(L,H){var N=new Date();var I=c(H);var O=a(L);if(I&&O){var K=m(L,H);var J=b(K);var M=H;if(H>J){M=J;}N=new Date(K.getFullYear(),K.getMonth(),M);}else{N=new Date();}return N;};var F=function(){var J=new Date();J.setDate(J.getDate()),w.index=this.id.substr(this.id.length-1,this.id.length);var M=w.linkedAltDateId.replace("date_picker_display_id_"+w.index,"");var L=$("#"+M+"date_picker_display_id_"+(parseInt(w.index)-1)).val();var I=null;if(L){I=new Date(L.replace(/^(\d{1,2}\/)(\d{1,2}\/)(\d{4})$/,"$2$1$3"));}if(!I||I.toDateString()==="Invalid Date"){I=new Date();}var H=G(w.yearMonth.val(),w.day.val());if(document.URL.indexOf("MultiCitySearch")>0){if(I>H){H=I;}}var K=$.datepicker.formatDate(z,H);w.linkedDate.val(K);return{minDate:((w.index>1&&(B().indexOf("searchchange")<0))?I:J)};};var E=function(M,U){var L=new Date();var R=L.getDate();var Q=L.getFullYear()+"-"+L.getMonth();var T=M.getFullYear()+"-"+M.getMonth();var K=Q===T;var V=(2<R);var O=V&&K;var N=M.getDate();var I=b(M);var P=31-I;var J=SKYSALES.Util.cloneArray(s);var H=31;if(P>0){H=31-P;J.splice(H,P);}if(O){J.splice(0,R-2);}var S={"selectedItem":N,"objectArray":J,"selectBox":U,"clearOptions":true};SKYSALES.Util.populateSelect(S);};var D=function(){var Q=w.day.val();var R=w.yearMonth.val();var M=m(w.yearMonth.val(),1);var J=b(M);if(Q>J){Q=J;}w.index=this.id.substr(this.id.length-1,this.id.length);var I=parseInt(w.index)+1;M=new Date(M.getFullYear(),M.getMonth(),Q);E(M,w.day);if(w.linkedDate.length<1){w.linkedDate=$(w.linkedDate.selector);}w.linkedDate.val($.datepicker.formatDate(z,M));if(this.tagName=="SELECT"&&w.marketCount>1){if(this.id.indexOf("DropDownListMarketMonth"+w.index)!=-1){var H=this.id.replace("DropDownListMarketMonth"+w.index,"");var O=$("#"+H+"DropDownListMarketDay"+I);var P=document.getElementById(H+"DropDownListMarketMonth"+I);var N=document.getElementById(H.substring(0,H.length-1)+"date_picker_id_"+I);}else{if(this.id.indexOf("DropDownListMarketMonth"+I)!=-1){var H=this.id.replace("DropDownListMarketMonth"+I,"");var O=$("#"+H+"DropDownListMarketDay"+w.index);var P=document.getElementById(H+"DropDownListMarketMonth"+w.index);var N=document.getElementById(H.substring(0,H.length-1)+"date_picker_id_"+w.index);}}if(P!==null){var L=m(P.value,1);L=new Date(L.getFullYear(),L.getMonth(),O.val());E(L,O);var Q=O.val();var K=m(P.value,1);var J=b(K);if(Q>J){Q=J;}K=new Date(K.getFullYear(),K.getMonth(),Q);if(N!==null){N.value=$.datepicker.formatDate(z,K);}}}};var f=function(){var R=w.yearMonth.val();var Q=w.day.val();var L=G(R,Q);var N=$.datepicker.formatDate(z,L);w.index=w.linkedAltDateId.substr(w.linkedAltDateId.length-1,w.linkedAltDateId.length);var J=parseInt(w.index)+1;w.linkedDate.val(N);if(this.id!=null&&w.marketCount>1){if(this.id.indexOf("DropDownListMarketDay"+w.index)!=-1&&this.tagName=="SELECT"){var H=this.id.replace("DropDownListMarketDay"+w.index,"");var O=document.getElementById(H+"DropDownListMarketDay"+J);var P=document.getElementById(H+"DropDownListMarketMonth"+J);var M=document.getElementById(H.substring(0,H.length-1)+"date_picker_id_"+J);var K=document.getElementById(H+"CheckBoxChangeMarket_"+J);if(K==null||K.checked==true){}}else{if(this.id.indexOf("DropDownListMarketDay"+J)!=-1&&this.tagName=="SELECT"){var H=this.id.replace("DropDownListMarketDay"+J,"");var O=document.getElementById(H+"DropDownListMarketDay"+w.index);var P=document.getElementById(H+"DropDownListMarketMonth"+w.index);var M=document.getElementById(H.substring(0,H.length-1)+"date_picker_id_"+w.index);var K=document.getElementById(H+"CheckBoxChangeMarket_"+w.index);if(K==null||K.checked==true){}}}if(O!==null){var Q=O.value;var L=m(P.value,1);var I=b(L);L=new Date(L.getFullYear(),L.getMonth(),Q);if(M!==null){M.value=$.datepicker.formatDate(z,L);}}}};var t=function(){var H=[];var J=1;var I={};for(J=1;J<=31;J+=1){I={};I.name=J;if(J<=9){I.code=Number("0"+J);}else{I.code=J;}H[J-1]=I;}return H;};var e=function(af){var R=af.match(/\d{2}\/\d{2}\/\d{4}/);var ae=new Date();var W="",N="",Q=B();if(R){if(this.id){w.index=this.id.substr(this.id.length-1,this.id.length);}ae=new Date(af);W=$.datepicker.formatDate(r,ae);w.yearMonth.val(W);E(ae,w.day);var K=w.day[0].id;var T=w.yearMonth[0].id;var ad=$("#"+K);var H=$("#"+T);var J=parseInt(w.index)+1;H.change();ad.change();$("#"+w.linkedAltDateId).val(SKYSALES.Util.dateDisplayFormat(af,w.jsDateFormat));$("#"+w.linkedAltDateId).removeAttr("departuredateerror");if(w.linkedAltDateId.indexOf(w.index)>0){var P=w.linkedAltDateId,V=w.linkedAltDateId.replace(w.index,J),ag=new Date($("#"+P.replace("display_id","id")).val()),Z=new Date($("#"+V.replace("display_id","id")).val());if((Q.indexOf("select")<0)&&(Q.indexOf("searchchange")<0&&$("#"+Z)!==undefined&&$("#"+Z)!==null)&&(!$("#oneWayOnly:checked").val())&&ag>Z){var U=P.replace("display_id","id");if(document.URL.indexOf("MultiCitySearch")<0){$("#"+V).val(SKYSALES.Util.dateDisplayFormat($("#"+U).val(),w.jsDateFormat));}W=$.datepicker.formatDate(r,ag);N=$.datepicker.formatDate(q,ag);w.yearMonth.val(W);var ab=w.day[0].id.replace(w.index,J),S=w.yearMonth[0].id.replace(w.index,J),Y=$("#"+ab),aa=$("#"+S);aa.val(W);E(ag,Y);if($("#"+ab)!==undefined&&$("#"+ab)!==null&&$("#"+S)!==undefined&&$("#"+S)!==null){$("#"+ab).val(N);$("#"+S).val(W);Y.change();aa.change();}}if(ag<=Z){if($("#"+P).hasClass("validationError")){$("#"+P).removeClass("validationError");}}}if(document.URL.indexOf("MultiCitySearch")>0){var M=$("input[id*="+this.id.substr(0,this.id.length-1)+"]").length;for(var ac=J;M>=ac;ac++){var L=$("#"+w.linkedAltDateId.replace(w.index,ac));var O=$("#"+w.linkedAltDateId);var X=L.val().split("/");var ah=new Date(Number(X[2]),Number(X[1])-1,Number(X[0]));X=O.val().split("/");var I=new Date(Number(X[2]),Number(X[1])-1,Number(X[0]));if(L&&O&&(ah<I)){$(L).attr("departuredateerror",true);break;}}}if((Q.indexOf("select")<0)&&(Q.indexOf("searchchange")<0)&&(Q.indexOf("multicitysearch")<0)&&(!$("#oneWayOnly:checked").val())&&(w.linkedAltDateId.indexOf(parseInt(w.index)+1)<0)&&($("#"+w.linkedAltDateId.replace(w.index,J)!==undefined))){$("#"+w.linkedAltDateId.replace("display_id_"+w.index,"id_"+(J))).datepicker("show");}}};var B=function(){if($(this)[0].baseURI){return $(this)[0].baseURI.toLowerCase();}else{if($(this)[0].document){return $(this)[0].document.URL.toLowerCase();}}};w.setSettingsByObject=function(I){var H="";for(H in I){if(w.hasOwnProperty(H)){w[H]=I[H];}}};w.setVars=function(){if(true===w.isAOS){l="/";r="m/yy";A=new RegExp("\\d{1,2}\\/\\d{4}");u="eq(1)";}};w.validateDay=function(H){H=H||"";return H.match(/\d{2}/);};w.validateYearMonth=function(H){H=H||"";return H.match(A);};w.getDate=function(K,H){var N=null,M=0,O=1,L=[],J=0,I=0;K=K||this.yearMonth.val();H=H||this.day.val();if(K&&H){L=K.split(l);if(true===this.isAOS){M=1;O=0;}J=L[M];I=L[O]-1;N=new Date(J,I,H);}else{N=this.currentDate;}return N;};w.parseDate=function(L,H){var N=new Date(),J=this.validateDay(H),O=this.validateYearMonth(L),I={},K=31,M=1;if(J&&O){I=this.getDate(L,H);K=this.getDaysInMonth(I);M=H;if(H>K){M=K;}N=new Date(I.getFullYear(),I.getMonth(),M);}else{N=new Date();}return N;};w.dayArrayIndexOf=function(K,H){var J=H.length,I=0,N={},M=-1,L;for(I=0;I<J;I+=1){N=H[I];L=parseInt(N.code,10);if(L===K){M=I;break;}}return M;};w.trimDaysBeforeBeginDateBound=function(H){var O=this.beginDateBound.getFullYear(),N=this.beginDateBound.getMonth(),M=this.beginDateBound.getDate(),J=parseInt(H[0].code,10),L=0,I=this.currentDate.getFullYear(),K=this.currentDate.getMonth();if((K===N)&&(I===O)){if(J<M){L=M-J;H.splice(0,L);}}return H;};w.trimDaysAfterEndDateBound=function(I){var O=this.endDateBound.getFullYear(),P=this.endDateBound.getMonth(),N=this.endDateBound.getDate(),Q=I.length,J=I[Q-1].code,M=0,H=0,K=this.currentDate.getFullYear(),L=this.currentDate.getMonth();if((L===P)&&(K===O)){if(J>N){H=this.dayArrayIndexOf(N,I)+1;if(H>=0){M=J-N;I.splice(H,M);}}}return I;};w.getDaysInMonth=function(I){var J=new Date(I.getFullYear(),I.getMonth(),32),H=J.getDate();return 32-H;};w.removeDaysOutsideOfBounds=function(H){H=this.trimDaysBeforeBeginDateBound(H);H=this.trimDaysAfterEndDateBound(H);return H;};w.setBeginDateBound=function(H){w.beginDateBound=H;w.yearMonthOptionArray=[];};w.dayPopulate=function(I){var K=I.getDate(),J=this.getDaysInMonth(I),M=31-J,H=SKYSALES.Util.cloneArray(s),N=31,L={};if(M>0){N=31-M;H.splice(N,M);}H=this.removeDaysOutsideOfBounds(H);L={"selectedItem":K,"objectArray":H,"input":this.day,"clearOptions":true};SKYSALES.Util.populate(L);};w.getYearMonthOptionArray=function(){var P=this.yearMonthOptionArray,R=0,O="0",N=2009,M=0,S={},H="",I="",L=this.beginDateBound,Q=this.endDateBound,J={},T={},K=31;if(P.length===0){R=L.getMonth();N=L.getFullYear();S=SKYSALES.Resource.dateCultureInfo.monthNamesShort;for(M=0;M<12;M+=1){J=new Date(N,R,1);K=this.getDaysInMonth(J);T=new Date(N,R,K);if((T>=L)&&(J<=Q)){H=S[R];if(R<9){O="0";}else{O="";}I=N+"-"+O+(R+1);P[M]={"name":H,"code":I};}else{if(T>this.endDateBound){break;}}R+=1;if(R>11){R=0;N+=1;}}}return P;};w.yearMonthPopulate=function(H){var I=this.getYearMonthOptionArray(),K=$.datepicker.formatDate(r,H),J={};J={"selectedItem":K,"objectArray":I,"input":this.yearMonth,"clearOptions":true};SKYSALES.Util.populate(J);};w.datePopulate=function(H){if(!H){H=this.currentDate;}else{w.currentDate=H;}this.yearMonthPopulate(H);this.dayPopulate(H);this.copyDayAndYearMonthInputToLinkedDate();};w.copyDayAndYearMonthInputToLinkedDate=function(){var I=this.yearMonth.val(),J=this.day.val(),H=this.parseDate(I,J),K=SKYSALES.Util.dateToIsoString(H);this.linkedDate.val(K);w.currentDate=H;};var C=function(){if(!w.isAOS){f();}};var v=function(M){var I,O,J=w.linkedAltDateId,R=J.replace("display_id","id"),H=false,L=null,K="",P="highlight_date",N=$('input[name="culture"]').val();if($(this)[0].baseURI){K=$(this)[0].baseURI.toLowerCase();}else{if($(this)[0].document){K=$(this)[0].document.URL.toLowerCase();}}if($("#oneWayOnly:checked").val()){H=true;}if($("#"+J).val()&&J.indexOf("1")>0&&document.URL.indexOf("MultiCitySearch")<0&&w.isMulticityBooking!="true"){I=new Date($("#"+R.replace("1","2")).val());var Q=$("#"+J.replace("1","2")).val();if(Q){Q=Q.split("/");if(String(N||"").toUpperCase()=="ZH-CN"||String(N||"").toUpperCase()=="ZH-HK"||String(N||"").toUpperCase()=="ZH-TW"||String(N||"").toUpperCase()=="JA-JP"||String(N||"").toUpperCase()=="KO-KR"){day=Q[2];month=Q[1];year=Q[0];}else{day=Q[0];month=Q[1];year=Q[2];}L=new Date(month+"/"+day+"/"+year);}else{L=new Date($("#"+J.replace("1","2")).val());}P="highlight_returnDate";}else{if($("#"+J).val()&&J.indexOf("2")>0&&document.URL.indexOf("MultiCitySearch")<0&&w.isMulticityBooking!="true"){I=new Date($("#"+R.replace("2","1")).val());var Q=$("#"+J.replace("2","1")).val();if(Q){Q=Q.split("/");if(String(N||"").toUpperCase()=="ZH-CN"||String(N||"").toUpperCase()=="ZH-HK"||String(N||"").toUpperCase()=="ZH-TW"||String(N||"").toUpperCase()=="JA-JP"||String(N||"").toUpperCase()=="KO-KR"){day=Q[2];month=Q[1];year=Q[0];}else{day=Q[0];month=Q[1];year=Q[2];}L=new Date(month+"/"+day+"/"+year);}else{L=new Date($("#"+J.replace("2","1")).val());}P="highlight_departDate";}}if(M!==null&&!H&&L&&SKYSALES.Util.isDateValid(L)&&I&&SKYSALES.Util.isDateValid(I)){if(M.getDate()==I.getDate()&&M.getMonth()==I.getMonth()&&M.getFullYear()==I.getFullYear()){return[true,P];}}return[true,""];};w.addEvents=function(){w.yearMonth.change(D);w.day.change(f);var O=new Date();var I=new Date();var S=new Date();I.setFullYear(I.getFullYear()+1);var H=$("option:"+u,w.yearMonth).val();var M=$("option:last",w.yearMonth).val();s=t();var R=w.linkedDate;if(a(H)){O.setDate(O.getDate());if(w.isAOS){S=new Date(w.linkedDate.val());}else{S=m(w.yearMonth.val(),w.day.val());}E(S,w.day);}if(a(M)){I=m(M,1);var J=b(I);I=new Date(I.getFullYear(),I.getMonth(),J);}var L=SKYSALES.Util.getResource();var Q=L.dateCultureInfo;var K=SKYSALES.datepicker;var N="";if(w.linkedAltDateId.indexOf("1")>0){N=K.controlHeaderDepartText;}else{if(w.linkedAltDateId.indexOf("2")>0){N=K.controlHeaderReturnText;}}C();var P={"beforeShow":F,"beforeShowDay":v,"onSelect":e,"minDate":O,"maxDate":I,"showOn":"both","buttonImageOnly":true,"buttonImage":$("#htmlHost").val()+"/images/AKBase/be_calendar.gif","buttonImageCompact":$("#htmlHost").val()+"/images/AKNewSkin/AKNewCompact/calender-icon.gif","buttonImageCompactHover":$("#htmlHost").val()+"/images/AKNewSkin/AKNewCompact/calender-icon-hover.gif","buttonText":"Calendar","numberOfMonths":2,"mandatory":true,"monthNames":Q.monthNames,"monthNamesShort":Q.monthNamesShort,"dayNames":Q.dayNames,"dayNamesShort":Q.dayNamesShort,"dayNamesMin":Q.dayNamesMin,"controlHeaderText":N,"closeText":K.closeText,"prevText":K.prevText,"nextText":K.nextText,"currentText":K.currentText};R.datepicker(P);};w.init=function(H){this.setSettingsByObject(H);this.setVars();this.addEvents();};};}SKYSALES.initializeSkySalesForm=function(){document.SkySales=document.forms.SkySales;};SKYSALES.getSkySalesForm=function(){var a=$("SkySales").get(0);return a;};SKYSALES.Common=function(){var b=this;var a=null;b.allInputObjects=null;b.initializeCommon=function(){var e=new SKYSALES.Hint(),c=new SKYSALES.InputLabel();b.addKeyDownEvents();b.addSetAndEraseEvents();b.setValues();e.addHintEvents();c.formatInputLabel();b.stripeTables();};b.setValues=function(){var c=function(e){if((this.jsvalue!==null)&&(this.jsvalue!==undefined)){this.value=this.jsvalue;}};b.getAllInputObjects().each(c);};b.stopSubmit=function(){$("form").unbind("submit",b.stopSubmit);return false;};b.addKeyDownEvents=function(){};b.getAllInputObjects=function(){if(b.allInputObjects===null){b.allInputObjects=$(":input");}return b.allInputObjects;};b.addSetAndEraseEvents=function(){var f=function(){b.eraseElement(this,this.requiredempty);};var c=function(){b.setElement(this,this.requiredempty);$(this).change();};var e=function(m){var l=$(this);if((this.requiredempty!==null)&&(this.requiredempty!==undefined)){if(l.is(":text")&&(l.is(":hidden")===false)){l.focus(f);l.blur(c);}}};b.getAllInputObjects().each(e);};b.eraseElement=function(e,c){if(e.value===c){e.value="";}};b.setElement=function(e,c){if(e.value===""){e.value=c;}};b.getCountryInfo=function(){if(a===null){a=window.countryInfo;}return a;};b.setCountryInfo=function(c){a=c;return b;};b.isEmpty=function(e,c){var l=null;var f=false;if((e)&&(c===undefined)){if(e.requiredempty){c=e.requiredempty;}else{c="";}}l=SKYSALES.Common.getValue(e);if((l===null)||(l===undefined)||(l.length===0)||(l===c)){f=true;}return f;};b.stripeTables=function(){$(".stripeMe tr:even").addClass("alt");return b;};};SKYSALES.Common.addEvent=function(c,a,b){$(c).bind(a,b);};SKYSALES.Common.getValue=function(a){var b=null;if(a){b=$(a).val();return b;}return null;};SKYSALES.InputLabel=function(){var a=this;a.getInputLabelRequiredFlag=function(){return SKYSALES.Util.getRequiredFlag();};a.getInputLabelSuffix=function(){return":";};a.formatInputLabel=function(){var b=a.getInputLabelRequiredFlag();var e=a.getInputLabelSuffix();var c=function(l){var f=$("label[for="+this.id+"]").eq(0);var q=$(f).text();var m="";var r=null;if(q!==""){m=$(this).attr("type");if((m!=="checkbox")&&(m!=="radio")){q=q;}r=SKYSALES.Util.getAttributeValue($(this),"required");if(r){r=r.toString().toLowerCase();if(r==="true"){if(this.id.indexOf("RoundTrip")==-1){q="<span class='red'>"+b+"</span>"+q;}}}$(f).html(q);}};SKYSALES.common.getAllInputObjects().each(c);};};SKYSALES.Dhtml=function(){var a=this;a.getX=function(b){var c=0;if(b.x){c+=b.x;}else{if(b.offsetParent){while(b.offsetParent){c+=b.offsetLeft;b=b.offsetParent;}}}return c;};a.getY=function(b){var c=0;if(b.y){c+=b.y;}else{if(b){while(b){c+=b.offsetTop;b=b.offsetParent;}}}return c;};return a;};SKYSALES.Hint=function(){var a=this;a.addHintEvents=function(){var b=function(c){if((this.hint!==null)&&(this.hint!==undefined)){if(this.tagName&&(this.tagName.toString().toLowerCase()==="input")){a.addHintFocusEvents(this);}else{a.addHintHoverEvents(this);}}};SKYSALES.common.getAllInputObjects().each(b);};a.addHintFocusEvents=function(f,c){var e=function(){a.showHint(f,c);};var b=function(){a.hideHint(f,c);};if($(f).is(":hidden")===false){$(f).focus(e);$(f).blur(b);}};a.addHintHoverEvents=function(e,b){var c=function(){a.showHint(e,b);};var f=function(){a.hideHint(e,b);};$(e).hover(c,f);};a.getHintDivId=function(){return"cssHint";};a.showHint=function(l,v,q,f,b){var A=a.getHintDivId();var m=$("#"+A);var u=0;var s=0;var z=0;var r=0;if(q===undefined){q=l.hintxoffset;}if(f===undefined){f=l.hintyoffset;}if(b===undefined){b=l.hintReferenceid;}var w=$("#"+b).get(0);var t=new SKYSALES.Dhtml();if(!w){u=t.getX(l);s=t.getY(l);if(q===undefined){u+=l.offsetWidth+5;}}else{u=t.getX(w);s=t.getY(w);if(q===undefined){u+=w.offsetWidth+5;}}if(v===undefined){if(l.hint!==undefined){v=l.hint;}}m.html(v);m.show();q=(q!==undefined)?q:z;f=(f!==undefined)?f:r;var e=parseInt(q,10)+parseInt(u,10);var c=parseInt(f,10)+parseInt(s,10);m.css("left",e+"px");m.css("top",c+"px");};a.hideHint=function(c){var b=a.getHintDivId();$("#"+b).hide();};};SKYSALES.ValidationErrorReadAlong=function(){var a=this;a.objId="";a.obj=null;a.errorMessage="";a.isError=false;a.hasBeenFixed=false;a.hasValidationEvents=false;a.getValidationErrorHtml=function(c){var b='<div id="'+a.getValidationErrorDivId()+'" class="validationErrorContainerStyle left"> <p class="close">  </p> <div id="validationErrorContainerReadAlongContent" > <div id="'+a.getValidationErrorListId()+'" > </div> </div> </div>';if(!c){b='<span id="validationErrorContainerReadAlongIFrame" class="hidden" ></span>'+b;}if($("#flightCompact").length>0&&$("#flightCompact").attr("dir")=="rtl"&&$.browser.msie&&($.browser.version==8||$.browser.version==9)){b=b.replace("left","leftIE");}return b;};a.getValidationErrorCloseId=function(){return"validationErrorContainerReadAlongCloseButton";};a.getValidationErrorListId=function(){return"validationErrorContainerReadAlongList";};a.getValidationErrorIFrameId=function(){return"validationErrorContainerReadAlongIFrame";};a.getValidationErrorDivId=function(){return"validationErrorContainerReadAlong";};a.getFixedClass=function(){return"fixedValidationError";};a.addCloseEvent=function(){var c=a.getValidationErrorCloseId();var b=function(){a.hide();};$("#"+c).click(b);};a.addValidationErrorDiv=function(b){$("#mainContent").append(a.getValidationErrorHtml(b));};a.hide=function(){};a.hideThenRemove=function(c){var b=a.getValidationErrorDivId();$("#"+b).hide(c,function(){$(this).remove();});};a.remove=function(){var b=a.getValidationErrorDivId();$("#"+b).remove();};a.addFocusEvent=function(b){var e={obj:this};var c=function(f){var t=f.data.obj;var r=null;var F=null;var s=0;var D=0;var B=0;var w=0;var A=null;var E=null;var v=null;var z=null;var C=null;var l=null;if($("#termAndConditionAgm").length>0){if(thisPaymentInputContainer.defaultCreditCardsArray[thisPaymentInputContainer.getActivePayment()]!=null){z=thisPaymentInputContainer.defaultCreditCardsArray[thisPaymentInputContainer.getActivePayment()];C=z.contentId;l=C.split("content_ExternalAccount:")[1];if($("#CONTROLGROUPPAYMENTBOTTOM_PaymentInputViewPaymentView_TextBoxCC_AccountHolderName_"+l+".validationError").length==1){$("#CONTROLGROUPPAYMENTBOTTOM_PaymentInputViewPaymentView_TextBoxCC__AccountHolderName_"+l+"Label").css("color","#DD0000");$("#CONTROLGROUPPAYMENTBOTTOM_PaymentInputViewPaymentView_TextBoxCC__AccountHolderName_"+l+"Label").css("font-weight","bold");}}}if(t.isError===true||$("#mainTraveler .validationError").length>0){r=new SKYSALES.Hint();r.hideHint();F=$("#"+a.getValidationErrorDivId());s=parseInt(F.width(),10)+5;D=parseInt(F.height(),10)+5;A=new SKYSALES.Dhtml();B=A.getX(t.obj);w=A.getY(t.obj);if($("#mainTraveler .validationError").length>0){B=$("#mainTraveler .validationError")[0].offsetLeft;w=$("#mainTraveler .validationError")[0].offsetTop;if($("#mainTraveler .validationError")[0]!==undefined&&$("#mainTraveler .validationError")[0]!==null){if($("#mainTraveler .validationError")[0].id.indexOf("CONTROLGROUP_OUTERTRAVELER_CONTROLGROUPTRAVELER_PassengerInputTravelerView_complimentaryMeal")>-1){if($("#culture").text()=="ar-SY"){B=$($("#mainTraveler .validationError")[0]).parents("span").children().children().children("a").children("span.label").offset().left-$("#wrapper")[0].offsetLeft-380;}else{B=$($("#mainTraveler .validationError")[0]).parents("span").children().children().children("a").children("span.label").offset().left-$("#wrapper")[0].offsetLeft+23;}w=$($("#mainTraveler .validationError")[0]).parents("span").children().children().children("a").children("span.label").offset().top-$("#wrapper")[0].offsetTop-3;}}}else{if(t.isError===true||$("#termAndConditionAgm .validationError").length>0){r=new SKYSALES.Hint();r.hideHint();F=$("#"+a.getValidationErrorDivId());s=parseInt(F.width(),10)+5;D=parseInt(F.height(),10)+5;A=new SKYSALES.Dhtml();B=A.getX(t.obj);w=A.getY(t.obj);if($("#termAndConditionAgm .validationError").length>0){if($("#cultureCode").attr("value")!="ar-SY"){B+=730;w+=(-1);}else{B+=(-980);w+=1;}}else{if($("#termAndConditionAgm").length>0){if(thisPaymentInputContainer.defaultCreditCardsArray[thisPaymentInputContainer.getActivePayment()]!=null){z=thisPaymentInputContainer.defaultCreditCardsArray[thisPaymentInputContainer.getActivePayment()];C=z.contentId;l=C.split("content_ExternalAccount:")[1];if($("#CONTROLGROUPPAYMENTBOTTOM_PaymentInputViewPaymentView_TextBoxACCTNO_"+l+".validationError").length==1){v=$("#CONTROLGROUPPAYMENTBOTTOM_PaymentInputViewPaymentView_TextBoxACCTNO_"+l).val().substring(0,6);if(v=="469390"){if($("#cultureCode").attr("value")!="ar-SY"){B+=(-2);w+=(-28);}else{B+=-410;w+=-28;}$("#CONTROLGROUPPAYMENTBOTTOM_PaymentInputViewPaymentView_DropDownListPaymentMethodCode").css("backgroundColor","#FFFFCC");$("#CONTROLGROUPPAYMENTBOTTOM_PaymentInputViewPaymentView_DropDownListPaymentMethodCode").css("border","1px solid #DD0000");}else{if($("#cultureCode").attr("value")!="ar-SY"){B+=1;w+=-3;}else{B+=-415;w+=-1;}}}}}}}}if($(location).attr("href").toLowerCase().lastIndexOf("select.aspx")>-1||$(location).attr("href").toLowerCase().lastIndexOf("selectchange.aspx")>-1){if(!$.browser.msie&&$.browser.version!="11.0"){if($("#culture").text()!="ar-SY"){B=B+this.offsetWidth-$("#header")[0].offsetLeft-20;}else{if(this.id.substring(0,this.id.length-2)=="ControlGroupAvailabilitySearchInputSelectView_AvailabilitySearchInputSelectViewdate_picker_display_id"){B=B-(this.offsetWidth*2)-$("#header")[0].offsetLeft-this.offsetLeft-18;}else{if(this.id=="ControlGroupAvailabilitySearchInputSelectView_AvailabilitySearchInputSelectView_DropDownListPassengerType_ADT"){B=B-this.offsetLeft+16;}else{if(this.id=="ControlGroupAvailabilitySearchInputSelectView_AvailabilitySearchInputSelectView_DropDownListPassengerType_INFANT"){B=B-$("#header")[0].offsetLeft-this.offsetLeft;}else{if(this.parentNode.parentNode.id.substring(0,this.parentNode.parentNode.id.length-1)=="destinationStationContainer"){B=359-$("#header")[0].offsetLeft-this.offsetLeft;}else{B=B-this.offsetWidth-$("#header")[0].offsetLeft;}}}}}w=w-($("#wrapper_r")[0].offsetTop+30);}else{if(B==0){B=350+$("#header")[0].offsetLeft;w=183;}if($.browser.msie&&$.browser.version==9&&t.obj.id.indexOf("destinationStationMultiColumn1")!=-1){if($("#culture").text()!="ar-SY"){w+=22;}else{w+=2;}}if($("#culture").text()!="ar-SY"){B=B+this.offsetWidth;}else{B=B+30;}w=w-27;}if(t.obj.id.indexOf("RadioButtonMkt")>0){B+=($("[id*=CellId]")[0].parentNode.offsetWidth/2);w+=3;}}else{if($("#mainTraveler .validationError").length>0){if($("#culture").text()!="ar-SY"){B=B+$("#mainTraveler .validationError")[0].offsetWidth;}else{B=B+20;}w=w-25;}else{if($("#paymentInputContent .validationError").length>0){if($("#culture").text()=="ar-SY"){if(!$.browser.msie){B=B-3;}else{B=B+5;}}if($("#termAndConditionAgm .validationError").length>0){if($("#culture").text()=="ar-SY"){B-=151;w+=(-1);}else{B-=167;w+=(-1);}}w=w-$("#wrapper")[0].offsetTop-30;}else{if(t.obj.id.indexOf("CONTROLGROUP_InsuranceInputControlAddOnsViewAjax_CheckBoxInsuranceAccept")>-1){if($("#culture").text()!="ar-SY"){B=$("#CONTROLGROUP_InsuranceInputControlAddOnsViewAjax_CheckBoxInsuranceAccept")[0].offsetLeft+$("#insuranceLabelFull span")[0].offsetWidth+20;}else{B=$("#CONTROLGROUP_InsuranceInputControlAddOnsViewAjax_CheckBoxInsuranceAccept")[0].offsetLeft-$("#insuranceLabelFull span")[0].offsetWidth+20;}w=$("#CONTROLGROUP_InsuranceInputControlAddOnsViewAjax_CheckBoxInsuranceAccept")[0].offsetTop-30;}else{if($("#flightCompact .validationError").length>0||$("#packageCompact .validationError").length>0||$("#hotelCompact .validationError").length>0){var q=$("#booking-compact");if(q.length>0){var m=q.offset();bookingCompactLeft=m.left;bookingCompactTop=m.top;}else{bookingCompactLeft=0;bookingCompactTop=0;}if($("#marketCityPair_1 #"+this.id+"").length>0){B=(B+this.offsetWidth+2-bookingCompactLeft)-2;w=(w-this.offsetHeight-this.offsetTop-this.parentNode.offsetTop-8-bookingCompactTop)+25;if($("#flightCompact").attr("dir")=="rtl"){var u=17;B=$("#"+this.id).offset().left-u;}}else{if($("#Schedule #"+this.id+"").length>0){B=(B+this.offsetWidth+2-bookingCompactLeft)-2;w=(w-27-bookingCompactTop)+13;if($("#flightCompact").attr("dir")=="rtl"){var u=17;B=$("#"+this.id).offset().left-u;}}else{if($(".flightGuest #"+this.id+"").length>0){B=B+this.offsetWidth+2-bookingCompactLeft+10;w=w-25-bookingCompactTop;if($("#flightCompact").attr("dir")=="rtl"){if($.browser.msie&&$.browser.version==8){B=$("[class=flightGuest]").filter(":visible")[0].offsetLeft+$("[id=flightSearchContainer]").filter(":visible")[0].offsetLeft+$("#"+this.id+"")[0].offsetLeft-3;}else{B=B-this.offsetWidth+10;}}if(this.id.indexOf("ADT")>0){if($("#flightCompact").attr("dir")=="rtl"){B+=13;}else{B-=13;}}}}}if($.browser.msie&&$.browser.version==8){if($("#flightCompact").attr("dir")!="rtl"){B-=50;}}}else{if($("#wrapper").length>0){if($("#culture").text()!="ar-SY"){B=B+this.offsetWidth-$("#wrapper")[0].offsetLeft-20;}else{if(this.id.substring(0,this.id.length-2)=="ControlGroupSearchView_AvailabilitySearchInputSearchViewdate_picker_display_id"||this.id=="ControlGroupSearchView_AvailabilitySearchInputSearchView_DropDownListPassengerType_INFANT"){B=B-(this.offsetWidth*2)-$("#wrapper")[0].offsetLeft-this.offsetLeft-5;}else{if(this.id=="ControlGroupSearchView_AvailabilitySearchInputSearchView_DropDownListPassengerType_ADT"){B=B-$("#wrapper")[0].offsetLeft-this.offsetLeft+40;}else{B=B-this.offsetWidth-$("#wrapper")[0].offsetLeft;}}}w=w-$("#wrapper")[0].offsetTop-30;}}}}}}if($.browser.msie&&$.browser.version=="6.0"){E=$("#"+a.getValidationErrorIFrameId());E.css("position","absolute");E.show();if(s>25){E.width(s-25);}E.height(D-5);E.css("left",B+16);E.css("top",w);}F.css("left",B);F.css("top",w);F.css("position","absolute");F.show();return false;}if($("#termAndConditionAgm").length>0){if(thisPaymentInputContainer.defaultCreditCardsArray[thisPaymentInputContainer.getActivePayment()]!=null){z=thisPaymentInputContainer.defaultCreditCardsArray[thisPaymentInputContainer.getActivePayment()];C=z.contentId;l=C.split("content_ExternalAccount:")[1];if($("#CONTROLGROUPPAYMENTBOTTOM_PaymentInputViewPaymentView_TextBoxCC_AccountHolderName_"+l+".validationError").length==0){$("#CONTROLGROUPPAYMENTBOTTOM_PaymentInputViewPaymentView_TextBoxCC__AccountHolderName_"+l+"Label").removeAttr("style");}if($("#CONTROLGROUPPAYMENTBOTTOM_PaymentInputViewPaymentView_TextBoxACCTNO_"+l+".validationError").length==0){$("#CONTROLGROUPPAYMENTBOTTOM_PaymentInputViewPaymentView_DropDownListPaymentMethodCode").removeAttr("style");$("#"+a.getValidationErrorDivId()).remove();}if($("#CONTROLGROUPPAYMENTBOTTOM_PaymentInputViewPaymentView_TextBoxCC_AccountHolderName_"+l+".validationError").length==1){$("#CONTROLGROUPPAYMENTBOTTOM_PaymentInputViewPaymentView_TextBoxCC__AccountHolderName_"+l+"Label").css("color","#DD0000");$("#CONTROLGROUPPAYMENTBOTTOM_PaymentInputViewPaymentView_TextBoxCC__AccountHolderName_"+l+"Label").css("font-weight","bold");}}if($("#CONTROLGROUPPAYMENTBOTTOM_PaymentInputViewPaymentView_TextBoxVoucherAccount_VO_ACCTNO").length==1){$("#"+a.getValidationErrorDivId()).remove();}}};if($(this.obj).is(":hidden")===false||($(this.obj).attr("id").indexOf("CONTROLGROUP_OUTERTRAVELER_CONTROLGROUPTRAVELER_PassengerInputTravelerView_complimentaryMeal")>-1)){$(this.obj).bind("blur",e,c);$(this.obj).bind("focus",e,c);}};a.addBlurEvent=function(b){var e={obj:this};var c=function(f){var z=f.data.obj;var E=new SKYSALES.Validate(null,"","",null);E.validateSingleElement(this);var B=E.errors;var r=false;var u=true;if(E.validationErrorArray.length>0){if(E.validationErrorArray[0].isError===false){r=true;}}var A=z.getValidationErrorListId();var m=$("#"+A).find("li").eq(b);var q=z.getFixedClass();var D=function(){if((u===true)&&$(this).html()!=""&&($(this).attr("class").indexOf(q)===-1)){u=false;}};var F=$("#"+A).find("li").length;var C=$("#"+A).find(".hidden").length;if(r===true){z.hasBeenFixed=true;if(z.objId=="CONTROLGROUP_OUTERTRAVELER_CONTROLGROUPTRAVELER_ContactInputTravelerView_TextBoxLastName"||z.objId=="CONTROLGROUP_OUTERTRAVELER_CONTROLGROUPTRAVELER_ContactInputTravelerView_TextBoxOtherPhoneNo"){if($("#CONTROLGROUP_OUTERTRAVELER_CONTROLGROUPTRAVELER_ContactInputTravelerView_TextBoxEmailAddress").val()!=""){$("#CONTROLGROUP_OUTERTRAVELER_CONTROLGROUPTRAVELER_ContactInputTravelerView_TextBoxEmailAddress").removeClass("validationError");$("#"+A).find("li").eq(7).addClass("hidden");$("#"+A).find("li").eq(7).addClass(q);}}m.addClass(q);m.addClass("hidden");var s=0;for(var t=0;t<b;t++){if($("#"+A).find("li").eq(t).html()!=""&&$("#"+A).find("li").eq(t).hasClass("hidden")==false){s=1;break;}}if(s!=1){for(var w=b+1,v=0;w<F&&v==0;w++){if($("#"+A).find("li").eq(w).html()!=""){$("#"+A).find("li").eq(w).removeClass("hidden");v=1;}}}u=true;$("#"+A).find("li").each(D);if(u===true){$("#"+a.getValidationErrorDivId()).remove();}if($("#mainTraveler .validationError").length==0){$("#"+a.getValidationErrorDivId()).hide();}if($(this).attr("id").indexOf("DropDownListNationality_")!=-1){$("#CONTROLGROUP_OUTERTRAVELER_CONTROLGROUPTRAVELER_ButtonSubmit").removeClass("dimContinue");$("#CONTROLGROUP_OUTERTRAVELER_ButtonSubmit").removeClass("dimContinue");$("#CONTROLGROUP_OUTERTRAVELERCHANGE_ButtonSubmit").removeClass("dimContinue");$("#CONTROLGROUP_OUTERTRAVELERFLIGHTCHANGE_CONTROLGROUPTRAVELERFLIGHTCHANGE_ButtonSubmit").removeClass("dimContinue");}}else{var s=0;for(var t=0;t<b;t++){if($("#"+A).find("li").eq(t).html()!=""&&$("#"+A).find("li").eq(t).hasClass("hidden")==false){s=1;break;}}if(s==0){m.removeClass(q);m.removeClass("hidden");for(var w=b+1;w<F;w++){if($("#"+A).find("li").eq(w).html()!=""){$("#"+A).find("li").eq(w).addClass("hidden");}}}z.hasBeenFixed=false;z.isError=true;if($(this).attr("id").indexOf("DropDownListNationality_")!=-1&&$(this).val()==$("#blockedNationals").val()){m.html($("#blockIsraelMessage").text());$("#CONTROLGROUP_OUTERTRAVELER_CONTROLGROUPTRAVELER_ButtonSubmit").addClass("dimContinue");$("#CONTROLGROUP_OUTERTRAVELER_ButtonSubmit").addClass("dimContinue");$("#CONTROLGROUP_OUTERTRAVELERCHANGE_ButtonSubmit").addClass("dimContinue");$("#CONTROLGROUP_OUTERTRAVELERFLIGHTCHANGE_CONTROLGROUPTRAVELERFLIGHTCHANGE_ButtonSubmit").addClass("dimContinue");}else{z.errorMessage=B;m.text(B);}$("#mainTraveler").length>0||$(this).attr("id").indexOf("ControlGroupAvailabilitySearchInputSelectView")>-1||$(this).attr("id").indexOf("ControlGroupSearchView")>-1||$("#flightCompact").length>0?"true":$("#"+a.getValidationErrorDivId()).remove();if($(this).attr("id").indexOf("RadioButtonMkt")!=-1){$("#"+a.getValidationErrorDivId()).remove();}}if($("#termAndConditionAgm").length>0){$("#validationErrorContainerReadAlong").css("display","none");$("#validationErrorContainerStyle").css("display","none");$("#validationErrorContainerReadAlongContent").css("display","none");$("#"+a.getValidationErrorDivId()).remove();m.addClass("hidden");}if(($("#CONTROLGROUPPAYMENTBOTTOM_PaymentInputViewPaymentView_TextBoxACCTNO_VI").length>0)||($("#CONTROLGROUPPAYMENTBOTTOM_PaymentInputViewPaymentView_TextBoxACCTNO_MC").length>0)||($("#CONTROLGROUPPAYMENTBOTTOM_PaymentInputViewPaymentView_TextBoxACCTNO_AX").length>0)){$("#validationErrorContainerReadAlong").css("display","none");$("#validationErrorContainerStyle").css("display","none");$("#validationErrorContainerReadAlongContent").css("display","none");$("#"+a.getValidationErrorDivId()).remove();m.addClass("hidden");}if($("#CONTROLGROUPPAYMENTBOTTOM_PaymentInputViewPaymentView_TextBoxVoucherAccount_VO_ACCTNO").length>0){$("#validationErrorContainerReadAlong").css("display","none");$("#validationErrorContainerStyle").css("display","none");$("#validationErrorContainerReadAlongContent").css("display","none");$("#"+a.getValidationErrorDivId()).remove();m.addClass("hidden");}return false;};$(this.obj).bind("blur",e,c);};};SKYSALES.errorsHeader="Please correct the following.\n\n";SKYSALES.Redirect=function(l){var z=$("#ControlGroupCompactNewView_AvailabilitySearchInputCompactNewView_TextBoxMarketOrigin1").val();var w=$("#ControlGroupCompactNewView_AvailabilitySearchInputCompactNewView_TextBoxMarketDestination1").val();var B=$("#ControlGroupCompactNewView_AvailabilitySearchInputCompactNewViewdate_picker_id_1").val();var A=$("#ControlGroupCompactNewView_AvailabilitySearchInputCompactNewViewdate_picker_id_2").val();if(B!=""){var v=B.split("/");}if(A!=""){var u=A.split("/");}var t;var s=$("#ControlGroupCompactNewView_AvailabilitySearchInputCompactNewView_DropDownListPassengerType_ADT").val();var r=$("#ControlGroupCompactNewView_AvailabilitySearchInputCompactNewView_DropDownListPassengerType_CHD").val();var q=$("#ControlGroupCompactNewView_AvailabilitySearchInputCompactNewView_DropDownListPassengerType_INFANT").val();var m=$("#ControlGroupCompactNewView_MultiCurrencyConversionViewCompactSearchNewView_DropDownListCurrency").find("option:selected").text();if($("#oneWayOnly").checked=true){t="true";}else{t="false";}if(A!=""){window.location="http://85790adc0962402f803441a7cf247e54.cloudapp.net/Page/SkySalesRedirectHandler.aspx?IsReturn="+t+"&DepartureStation="+z+"&ArrivalStation="+w+"&DepartDate="+v[2]+"-"+v[0]+"-"+v[1]+"&ReturnDate="+u[2]+"-"+u[0]+"-"+u[1]+"&NoAdult="+s+"&NoChild="+r+"&NoInfant="+q+"&Currency="+m+"&Culture="+l;}else{window.location="http://85790adc0962402f803441a7cf247e54.cloudapp.net/Page/SkySalesRedirectHandler.aspx?IsReturn="+t+"&DepartureStation="+z+"&ArrivalStation="+w+"&DepartDate="+v[2]+"-"+v[0]+"-"+v[1]+"&ReturnDate="+"&NoAdult="+s+"&NoChild="+r+"&NoInfant="+q+"&Currency="+m+"&Culture="+l;}};SKYSALES.LowFareCalender=function(B){var u,t;var I=$("#ControlGroupAvailabilitySearchInputSelectView_AvailabilitySearchInputSelectView_TextBoxMarketOrigin1").val();var H=$("#ControlGroupAvailabilitySearchInputSelectView_AvailabilitySearchInputSelectView_TextBoxMarketDestination1").val();u=$("#selectMainBody div[class^='dayHeadersLarge'] span[class^='todayDate']")[0].innerHTML;if(u!=""){var G=u.split("/");}var E,l,r;var D=$("#ControlGroupAvailabilitySearchInputSelectView_AvailabilitySearchInputSelectView_DropDownListPassengerType_ADT").val();var C=$("#ControlGroupAvailabilitySearchInputSelectView_AvailabilitySearchInputSelectView_DropDownListPassengerType_CHD").val();var A=$("#ControlGroupAvailabilitySearchInputSelectView_AvailabilitySearchInputSelectView_DropDownListPassengerType_INFANT").val();var z=$("#ControlGroupAvailabilitySearchInputSelectView_MultiCurrencyConversionViewSelectView_DropDownListCurrency").find("option:selected").text().substring(0,3);var v=z.indexOf("(");var w=z.indexOf(")");if(v>=0){z=z.substring(v+1,w);}if(document.getElementById("ControlGroupAvailabilitySearchInputSelectView_AvailabilitySearchInputSelectView_RoundTrip").checked){E="true";t=$("#selectMainBody div[class^='dayHeadersLarge'] span[class^='todayDate']")[1].innerHTML;if(t!=""){var F=t.split("/");}}else{E="false";}if(document.getElementById("PromoCode")){l=document.getElementById("PromoCode").innerHTML;}r=window.location.href;r=r.substring(0,r.lastIndexOf("/")+1);var s=$("#isProd").val();var q;if(s=="TRUE"){q="http://booking11.airasia.com";}else{q="http://stagingbooking11.airasia.com";}if(document.getElementById("ControlGroupAvailabilitySearchInputSelectView_AvailabilitySearchInputSelectView_RoundTrip").checked){window.location=q+"/Page/SkySalesRedirectHandler.aspx?IsReturn="+E+"&OriginStation="+I+"&ArrivalStation="+H+"&DepartureDate="+G[2]+"-"+SKYSALES.pad(G[0],2)+"-"+SKYSALES.pad(G[1],2)+"&ReturnDate="+F[2]+"-"+SKYSALES.pad(F[0],2)+"-"+SKYSALES.pad(F[1],2)+"&NoAdult="+D+"&NoChild="+C+"&NoInfant="+A+"&Currency="+z+"&Culture="+B+"&RedirectTo=LowFare"+"&pc="+l+"&respURL="+r;}else{window.location=q+"/Page/SkySalesRedirectHandler.aspx?IsReturn="+E+"&OriginStation="+I+"&ArrivalStation="+H+"&DepartureDate="+G[2]+"-"+SKYSALES.pad(G[0],2)+"-"+SKYSALES.pad(G[1],2)+"&ReturnDate="+"&NoAdult="+D+"&NoChild="+C+"&NoInfant="+A+"&Currency="+z+"&Culture="+B+"&RedirectTo=LowFare"+"&pc="+l+"&respURL="+r;}};SKYSALES.pad=function(b,a){var c=""+b;while(c.length<a){c="0"+c;}return c;};SKYSALES.Validate=function(l,f,a,q){var e=new SKYSALES.Class.SkySales(),c=SKYSALES.Util.extendObject(e);if(a===undefined){a=SKYSALES.errorsHeader;}c.form=l;c.namespace=f;c.errors="";c.validationErrorArray=[];c.setfocus=null;c.clickedObj=null;c.errorDisplayMethod="read_along";c.errorsHeader=a;c.namedErrors=[];c.dateRangeArray=[];if(q){c.regexElementIdFilter=q;}c.departureDateAttribute="departuredateerror";c.departureDateErrorAttribute="datemessageerror";c.requiredAttribute="required";c.requiredEmptyAttribute="requiredempty";c.validationTypeAttribute="validationtype";c.regexAttribute="regex";c.checkAgeAttribute="checkage";c.minLengthAttribute="minlength";c.numericMinLengthAttribute="numericminlength";c.maxLengthAttribute="maxlength";c.maxLengthCheckAttribute="maxlengthcheck";c.numericMaxLengthAttribute="numericmaxlength";c.minValueAttribute="minvalue";c.maxValueAttribute="maxvalue";c.equalsAttribute="equals";c.dateRangeAttribute="daterange";c.dateRange1HiddenIdAttribute="date1hiddenid";c.dateRange2HiddenIdAttribute="date2hiddenid";c.validateCreditCardAttribute="validatecreditcard";c.numPaxAttribute="numpaxcheck";c.dateRegexAttribute="dateregex";c.checkFlightTimeAttribute="checkflighttime";c.passwordCheckAttribute="passwordcheck";c.expediaPsgrChkAttribute="expediapsgrcheck";c.expediaRoomChkAttribute="expediaroomcheck";c.agentBlockCheckAttribute="agentblockcheck";c.emergencyrequiredAttribute="emergencyrequired";c.byPassArrayValidationAttribute="bypassarray";c.defaultErrorAttribute="error";c.requiredErrorAttribute="requirederror";c.validationTypeErrorAttribute="validationtypeerror";c.regexErrorAttribute="regexerror";c.adtcheckAgeErrorAttribute="adtcheckageerror";c.chdcheckAgeErrorAttribute="chdcheckageerror";c.chdcheckAgeErrorAttribute_1="chdcheckageerror_1";c.infcheckAgeErrorAttribute="infcheckageerror";c.infcheckAgeErrorAttribute_1="infcheckageerror_1";c.pqnationalityerror="pqnationalityerror";c.scpAgeError="scpageerror";c.blockILerror="blockilerror";c.returnDateAttribute="returndate";c.departDateAttribute="departdate";c.paxTypeAttribute="paxtype";c.minLengthErrorAttribute="minlengtherror";c.maxLengthErrorAttribute="maxlengtherror";c.minValueErrorAttribute="minvalueerror";c.maxValueErrorAttribute="maxvalueerror";c.equalsErrorAttribute="equalserror";c.dateRangeErrorAttribute="daterangeerror";c.infantCountErrorAttribute="infantcounterror";c.numPaxErrorAttribute="numpaxerror";c.numPaxZeroErrorAttribute="numpaxzeroerror";c.validationCreditCardErrorAttribute="validationcreditcarderror";c.dateRegexErrorAttribute="dateregexerror";c.bigCardSuggestionAttribute="bigcardsuggestion";c.checkFlightTimeErrorAttribute="checkflighttimeerror";c.passwordCheckErrorAttribute="passwordcheckerror";c.expediaPsgrChkErrorAttribute="expediapsgrcheckerror";c.expediaRoomChkErrorAttribute="expediaroomcheckerror";c.agentBlockCheckErrorAttribute="agentblockcheckerror";c.emergencyrequiredErrorAttribute="emergencyrequirederror";c.defaultError="{label} is invalid.";c.defaultRequiredError="{label} is required.";c.defaultCheckAgeError="{label} age is incorrect.";c.defaultValidationTypeError="{label} is invalid.";c.defaultRegexError="{label} is invalid.";c.defaultMinLengthError="{label} is too short in length.";c.defaultMaxLengthError="{label} is too long in length.";c.defaultMinValueError="{label} must be greater than {minValue}.";c.defaultMaxValueError="{label} must be less than {maxValue}.";c.defaultEqualsError="{label} is not equal to {equals}";c.defaultNotEqualsError="{label} cannot equal {equals}";c.defaultValidationCreditCardError="{label} does not match your Card Type, please reconfirm your details before proceeding.";c.bigCardVarification="Please select BIG Visa as the card type to continue payment.";c.defaultValidationErrorClass="validationError";c.defaultValidationErrorLabelClass="validationErrorLabel";c.sameDate=false;c.dateRangeErrorAlert=false;c.run=function(){var s=$("input, select",SKYSALES.getSkySalesForm()).get();var t=null;for(var r=0;r<s.length;r+=1){t=s[r];if(!this.isExemptFromValidation(t)&&!this.isByPassArrayValidation(t)){c.validateSingleElement(t);}if(!this.isExemptFromValidation(t)&&this.isByPassArrayValidation(t)){c.byPassArrayValidation(t);}}return c.outputErrors();};c.byPassArrayValidation=function(s){this.validateRequired(s);var r=c.getValue(s);if((c.errors.length<1)&&(r!==null)&&(r!=="")){c.validateType(s);c.validateRegex(s);c.validateMinLength(s);c.validateMaxLength(s);c.validateMaxLengthCheck(s);c.validateMinValue(s);c.validateMaxValue(s);c.validateEquals(s);c.validateDateRange(s);c.ValidateInfantCount(s);c.ValidateNumPax(s);c.ValidatePasswordCheck(s);}};c.runBySelector=function(u){var t=$(u).find("input, select").get();var s=null;var r=0;for(r=0;r<t.length;r+=1){s=t[r];c.validateSingleElement(s);}return false;};c.validateSingleElement=function(t){$(t).removeClass(c.defaultValidationErrorClass);$("label[for="+t.id+"]").eq(0).removeClass(this.defaultValidationErrorLabelClass);var s=new SKYSALES.ValidationErrorReadAlong();s.objId=t.id;s.obj=t;this.validationErrorArray[c.validationErrorArray.length]=s;this.validateRequired(t);c.ValidateEmergencyField(t);var r=c.getValue(t);if(r!==null&&r!==""){c.validateDepartureDateError(t);}if((c.errors.length<1)&&(r!==null)&&(r!=="")){c.validateType(t);c.validateRegex(t);c.validateMinLength(t);c.validateMaxLength(t);c.validateMaxLengthCheck(t);c.validateMinValue(t);c.validateMaxValue(t);c.validateEquals(t);c.validateDateRange(t);c.validateCreditCard(t);c.ValidateInfantCount(t);c.ValidateNumPax(t);c.ValidateFlightTime(t);c.ValidatePasswordCheck(t);c.ValidateExpediaPsgrChk(t);c.ValidateExpediaRoomChk(t);c.validateAgentBlockCheck(t);}};c.outputErrors=function(){var r=this.errorDisplayMethod.toString().toLowerCase();var v="";var s=[];var u=0;var w=true;if(this.errors){s=c.errors.split("\n");v+='<ul class="validationErrorList" >';for(u=0;u<s.length;u+=1){if(s[u]!==""){v+='<li class="validationErrorListItem" >'+s[u]+"</li>";}}v+="</ul>";if(r.indexOf("read_along")>-1){c.outputErrorsReadAlong(v);w=false;}if(r.indexOf("alert")>-1){alert(c.errorsHeader+c.errors);}if(w===true){alert(c.errorsHeader+c.errors);}if(c.setfocus){if($(c.setfocus).is(":hidden")===false){try{c.setfocus.blur();c.setfocus.focus();}catch(t){}}}return false;}else{if(c.sameDate||c.dateRangeErrorAlert){return false;}return true;}};c.outputErrorsReadAlong=function(u){var t=0;var r="";var v=null;var z=this;var w=function(A){this.hasValidationEvents=true;this.addBlurEvent(A);this.addFocusEvent(A);};z.validationErrorReadAlong=new SKYSALES.ValidationErrorReadAlong();z.readAlongDivId=$("#"+this.validationErrorReadAlong.getValidationErrorDivId()).attr("id");if(z.readAlongDivId===undefined){z.validationErrorReadAlong.addValidationErrorDiv();}r+='<ul class="validationErrorList" >';var s=false;for(t=0;t<z.validationErrorArray.length;t+=1){v=this.validationErrorArray[t];if(v.isError===true&&s==false){r+='<li class="validationErrorListItem" >'+v.errorMessage+"</li>";s=true;}else{r+='<li class="validationErrorListItem hidden" >'+v.errorMessage+"</li>";}}$("#"+z.validationErrorReadAlong.getValidationErrorListId()).html(r);$(z.validationErrorArray).each(w);};c.checkFocus=function(r){if(!c.setfocus){c.setfocus=r;}};c.setError=function(B,u,t){var s="",C="",A="",z=0,r=null,w,v="";if(B.type==="radio"){s=B.getAttribute("name");if(s.length>0){if(c.namedErrors[s]!==undefined){return;}c.namedErrors[s]=s;}}C=this.attributeValue(B,u);if(!C){C=this.attributeValue(B,c.defaultErrorAttribute);if(!C){if(t){C=t;}else{C=this.defaultError;}}}var w=C.match(/\{\s*(\w+)\s*\}/g);if(w){for(z=0;z<w.length;z+=1){A=w[z].replace(/\{\s*(\w+)\s*\}/,"$1");C=C.replace(/\{\s*\w+\s*\}/,c.cleanAttributeForErrorDisplay(B,A));}}if(B.id.indexOf("RadioButtonMkt")<0){$("#validationErrorContainerReadAlong").remove();$(B).addClass(this.defaultValidationErrorClass);$("label[for="+B.id+"]").eq(0).addClass(c.defaultValidationErrorLabelClass);}this.errors=C;var v=B.id;for(z=0;z<c.validationErrorArray.length;z+=1){r=c.validationErrorArray[z];if(r.objId===v){r.errorMessage=C;if(r.objId.indexOf("CONTROLGROUPPAYMENTBOTTOM")!=-1){if(r.objId.indexOf("CONTROLGROUPPAYMENTBOTTOM_PaymentInputViewPaymentView_TextBoxACCTNO")!=-1){r.isError=true;}else{r.isError=false;}}else{r.isError=true;}break;}}this.checkFocus(B);};c.cleanAttributeForErrorDisplay=function(w,A){var u=null,z="",s="",t=/^(minvalue|maxvalue)$/i,B=new RegExp("[^\\d.,]","g"),v=$(w),r="";var C=SKYSALES.Util.getRequiredFlag();if(!A){A="";}A=A.toLowerCase();if(A==="label"){s=$("label[for="+w.id+"]").eq(0).text();z=C;r=s.replace(z,"");}if(!r){r=this.attributeValue(w,A);}if(!r){return r;}else{if(A.match(t)){return r.replace(/[^\d.,]/g,"");}}return r;};c.attributeValue=function(t,r){var s=null,u=$(t);s=SKYSALES.Util.getAttributeValue(u,r);if(s==null||s==undefined){if(t[r]){s=t[r];}else{if(t.getAttribute){s=t.getAttribute(r);}}}if(typeof s!=="string"&&(s==null||s==undefined)){s="";}return s;};c.validateDepartureDateError=function(v){var B=c.departureDateAttribute,u=c.departureDateErrorAttribute,s=this.attributeValue(v,B),w=this.attributeValue(v,u),z=null,r="",A=false,t=false;if($("#"+v.id+"").length>0&&($("#"+v.id+"")[0].offsetWidth>0||$("#"+v.id+"")[0].offsetHeight>0)){t=true;}if(s===undefined||s==null){s=$("#"+v.id).attr("departuredateerror");}if(s!==undefined&&s!=null){s=s.toString().toLowerCase();if((s==="true"||s==="departuredateerror")&&(t||$("#mainTraveler").length>0)){c.setError(v,c.departureDateErrorAttribute,w);}}};c.validateRequired=function(P){var J=c.requiredAttribute,L=c.requiredEmptyAttribute,w=this.attributeValue(P,J),C=this.attributeValue(P,L),T=c.checkAgeAttribute,S=this.attributeValue(P,T),s="PH",H=null,Q="",M=false,I=false;c.radioGroupHash={};if($("#"+P.id+"").length>0&&($("#"+P.id+"")[0].offsetWidth>0||$("#"+P.id+"")[0].offsetHeight>0)){I=true;}if(w===undefined||w==null){w=$("#"+P.id).attr("required");}if(w!==undefined&&w!=null){w=w.toString().toLowerCase();if(C){C=C.toString().toLowerCase();}if((w==="true"||w==="required")&&(I||$("#mainTraveler").length>0)){H=c.getValue(P);if((P.type==="checkbox")&&(P.checked===false)){H="";}else{if(P.type==="radio"){Q=P.getAttribute("name");if(c.radioGroupHash[Q]===undefined){c.radioGroupHash[Q]=$("input[name='"+Q+"']");}M=c.radioGroupHash[Q].is(":checked");if(!M){H="";}}}if((H===undefined)||(H==="none")||(H===null)||(H==="")||(H.toLowerCase()===C)){c.setError(P,c.requiredErrorAttribute,c.defaultRequiredError);}else{var T=c.checkAgeAttribute,G=c.returnDateAttribute,B=c.departDateAttribute,t=c.paxTypeAttribute,S=this.attributeValue(P,T),E=this.attributeValue(P,G),O=this.attributeValue(P,B),r=this.attributeValue(P,t);if(S!==undefined&&S!=null){var N;var A;if(P.id.indexOf("DropDownListBirthDateYear_")!=-1){N=P.id.split("DropDownListBirthDateYear_");A=N[1];}var R=$("select[id*=DropDownListBirthDateMonth_"+A+"]"),K=$("select[id*=DropDownListBirthDateDay_"+A+"]"),z=$("select[id*=DropDownListBirthDateYear_"+A+"]"),v=new SKYSALES.Class.TravelerAge();v.init(R,K,z);if(E!==undefined&&E!=null){if(r=="ADT"){if(!v.isNotFutureDate()){c.setError(P,c.adtcheckAgeErrorAttribute,c.defaultCheckAgeError);}else{if(!v.isAdult(O,null)){c.setError(P,c.adtcheckAgeErrorAttribute,c.defaultCheckAgeError);}else{if(!v.isScpAge(O,null,"150",false)){c.setError(P,c.adtcheckAgeErrorAttribute,c.defaultCheckAgeError);}}}}else{if(r=="CHD"){if(!v.isNotFutureDate()){c.setError(P,c.chdcheckAgeErrorAttribute,c.defaultCheckAgeError);}else{var u={ErrType:"999"};if(!v.isChild(O,null,u)){if(u.ErrType=="1"){c.setError(P,c.chdcheckAgeErrorAttribute_1,c.defaultCheckAgeError);}else{if(u.ErrType=="0"){c.setError(P,c.chdcheckAgeErrorAttribute,c.defaultCheckAgeError);}else{c.setError(P,c.chdcheckAgeErrorAttribute,c.defaultCheckAgeError);}}}}}else{if(r=="INF"){if(!v.isNotFutureDate()){c.setError(P,c.infcheckAgeErrorAttribute,c.defaultCheckAgeError);}else{var F={ErrType:"999"};if(!v.isInfant(O,null,O,F)){if(F.ErrType=="1"){c.setError(P,c.infcheckAgeErrorAttribute_1,c.defaultCheckAgeError);}else{if(F.ErrType=="0"){c.setError(P,c.infcheckAgeErrorAttribute,c.defaultCheckAgeError);}else{c.setError(P,c.infcheckAgeErrorAttribute,c.defaultCheckAgeError);}}}}}else{if(r=="SCP"){if($("#CONTROLGROUP_OUTERTRAVELERFLIGHTCHANGE_CONTROLGROUPTRAVELERFLIGHTCHANGE_PassengerInputTravelerFlightChangeView_DropDownListNationality_"+A).val()==s||$("#CONTROLGROUP_OUTERTRAVELER_CONTROLGROUPTRAVELER_PassengerInputTravelerView_DropDownListNationality_"+A).val()==s){}else{c.setError(P,c.pqnationalityerror,c.defaultCheckAgeError);}if(!v.isScpAge(O,null,"60",true)){c.setError(P,c.scpAgeError,c.defaultCheckAgeError);}}else{if(r=="PWD"){var D=true;if($("#CONTROLGROUP_OUTERTRAVELERFLIGHTCHANGE_CONTROLGROUPTRAVELERFLIGHTCHANGE_PassengerInputTravelerFlightChangeView_DropDownListNationality_"+A).val()==s||$("#CONTROLGROUP_OUTERTRAVELER_CONTROLGROUPTRAVELER_PassengerInputTravelerView_DropDownListNationality_"+A).val()==s){}else{c.setError(P,c.pqnationalityerror,c.defaultCheckAgeError);}}}}}}}}if(P.id.indexOf("DropDownListNationality_")!=-1&&P.value==$("#blockedNationals").val()){c.setError(P,"displaycustom",$("#blockIsraelMessage").text());}}}}};c.validateType=function(z){var u=this.attributeValue(z,this.validationTypeAttribute),w=this.getValue(z);if((u)&&(w!==null)){u=u.toLowerCase();if((u==="address")&&(!w.match(c.stringPattern))){c.setValidateTypeError(z);}else{if((u==="alphanumeric")&&(!w.match(c.alphaNumericPattern))){c.setValidateTypeError(z);}else{if((u==="amount")&&(!c.validateAmount(w))){c.setValidateTypeError(z);}else{if((u==="country")&&(!w.match(c.stringPattern))){c.setValidateTypeError(z);}else{if((u==="email")&&(!w.match(c.emailPattern))){c.setValidateTypeError(z);}else{if((u==="mod10")&&(!c.validateMod10(w))){var v="";var t=w.replace(/ /g,"");var r=thisPaymentInputContainer.defaultCreditCardsArray[thisPaymentInputContainer.getActivePayment()];for(var s=0;s<6;s++){v+=t[s];}if(v==="469390"&&r.contentId!="content_ExternalAccount:BG"){c.setError(z,c.bigCardSuggestionAttribute,c.bigCardVarification);}else{c.setValidateTypeError(z);}}else{if((u==="name")&&(!w.match(c.stringPattern))){c.setValidateTypeError(z);}else{if((u==="numeric")&&(!c.validateNumeric(w))){c.setValidateTypeError(z);}else{if((u.indexOf("date")===0)&&(!c.validateDate(z,u,w))){c.setValidateTypeError(z);}else{if((u==="state")&&(!w.match(c.stringPattern))){c.setValidateTypeError(z);}else{if((u==="string")&&(!w.match(c.stringPattern))){c.setValidateTypeError(z);}else{if((u==="uppercasestring")&&(!w.match(c.upperCaseStringPattern))){c.setValidateTypeError(z);}else{if((u==="zip")&&(!w.match(c.stringPattern))){c.setValidateTypeError(z);}else{if(u==="function"){if($.isFunction(validationFunction)){validationFunctionResult=validationFunction.apply(this,validationFunctionParams);}if(!validationFunctionResult){c.setValidateTypeError(z);}}}}}}}}}}}}}}}}};c.validateRegex=function(w){var u=this.attributeValue(w,c.regexAttribute),t=this.attributeValue(w,c.requiredEmptyAttribute),v=c.getValue(w),r=false;if($("#"+w.id+"").length>0&&($("#"+w.id+"")[0].offsetWidth>0||$("#"+w.id+"")[0].offsetHeight>0)){r=true;}var s=false;if(t!=""&&t!=null&&t!=undefined){if(t.toLowerCase()==v.toLowerCase()){s=true;}}if((v!==null)&&(u)&&(!v.match(u))&&(r||$("#mainTraveler").length>0)&&(s==false)){this.setError(w,c.regexErrorAttribute,c.defaultRegexError);}};c.validateAge=function(v){var w=v[c.checkAgeErrorAttribute]!=undefined?v[c.checkAgeErrorAttribute]:v.getAttribute(c.checkAgeErrorAttribute);var t=c.getValue(v);var u=paxDetails.hasOwnProperty("birthDateMonthId")?$("#"+paxDetails["birthDateMonthId"]):null,r=paxDetails.hasOwnProperty("birthDateDayId")?$("#"+paxDetails["birthDateDayId"]):null,s=paxDetails.hasOwnProperty("birthDateYearId")?$("#"+paxDetails["birthDateYearId"]):null;travelerAge=new SKYSALES.Class.TravelerAge();travelerAge.init(u,r,s);};c.validateMinLength=function(u){var r=this.attributeValue(u,c.minLengthAttribute),t=this.attributeValue(u,c.numericMinLengthAttribute),s=this.getValue(u);if((0<r)&&(s!==null)&&(s.length<r)){c.setError(u,c.minLengthErrorAttribute,c.defaultMinLengthError);}else{if((0<t)&&(0<s.length)&&(s.replace(c.numericStripper,"").length<t)){c.setError(u,c.minLengthErrorAttribute,c.defaultMinLengthError);}}};c.validateMaxLength=function(u){var r=this.attributeValue(u,c.maxLengthAttribute),t=this.attributeValue(u,c.numericMaxLengthAttribute),s=this.getValue(u);if((0<r)&&(s!==null)&&(r<s.length)){c.setError(u,c.maxLengthErrorAttribute,c.defaultMaxLengthError);}else{if((0<t)&&(0<s.length)&&(t<s.replace(c.numericStripper,"").length)){c.setError(u,c.maxLengthErrorAttribute,c.defaultMaxLengthError);}}};c.validateMaxLengthCheck=function(u){var r=this.attributeValue(u,c.maxLengthCheckAttribute),t=this.attributeValue(u,c.maxLengthCheckAttribute),s=this.getValue(u);if((0<r)&&(s!==null)&&(r<s.length)){c.setError(u,c.maxLengthErrorAttribute,c.defaultMaxLengthError);}else{if((0<t)&&(0<s.length)&&(t<s.replace(c.numericStripper,"").length)){c.setError(u,c.maxLengthErrorAttribute,c.defaultMaxLengthError);}}};c.validateMinValue=function(t){var r=this.attributeValue(t,c.minValueAttribute),s=c.getValue(t);if((s!==null)&&(r!==undefined)&&(0<r.length)){if((5<r.length)&&(r.substring(0,5)==="&gt;=")){if(s<parseFloat(r.substring(5,r.length))){c.setError(t,c.minValueErrorAttribute,c.defaultMinValueError);}}else{if((4<r.length)&&(r.substring(0,4)==="&gt;")){if(s<=parseFloat(r.substring(4,r.length))){c.setError(t,c.minValueErrorAttribute,c.defaultMinValueError);}}else{if(s<parseFloat(r)){c.setError(t,c.minValueErrorAttribute,c.defaultMinValueError);}}}}};c.validateMaxValue=function(t){var r=this.attributeValue(t,this.maxValueAttribute),s=this.getValue(t);if((s!==null)&&(r!==undefined)&&(0<r.length)){if((5<r.length)&&(r.substring(0,5)==="&lt;=")){if(s>parseFloat(r.substring(5,r.length))){c.setError(t,c.maxValueErrorAttribute,c.defaultMaxValueError);}}else{if((4<r.length)&&(r.substring(0,4)==="&lt;")){if(s>=parseFloat(r.substring(4,r.length))){c.setError(t,c.maxValueErrorAttribute,c.defaultMaxValueError);}}else{if(parseFloat(s)>r){c.setError(t,c.maxValueErrorAttribute,c.defaultMaxValueError);}}}}};c.validateEquals=function(t){var r=this.attributeValue(t,c.equalsAttribute),s=c.getValue(t);if((s!==null)&&(r!==undefined)&&(0<r.length)){if((2<r.length)&&(r.substring(0,2)==="!=")){if(s===r.substring(2,r.length)){c.setError(t,c.equalsErrorAttribute,c.defaultEqualsError);}}}};c.validateCreditCard=function(w){var B=this.attributeValue(w,c.validateCreditCardAttribute),A=c.getValue(w),r="";if((A!==null)&&(B!==undefined)&&(0<B.length)){var t=A.substring(0,B.length);if(t!=B){c.setError(w,c.validationCreditCardErrorAttribute,c.defaultValidationCreditCardError);}if(thisPaymentInputContainer.selectedCreditCard==""&&thisPaymentInputContainer.defaultCreditCardsArray.length>0){var z=thisPaymentInputContainer.defaultCreditCardsArray[thisPaymentInputContainer.getActivePayment()];var v=$("#"+z.accountNumberInputId).val();var s=v.replace(/ /g,"");for(var u=0;u<6;u++){r+=s[u];}if(r==="469390"&&z.contentId!="content_ExternalAccount:BG"){c.setError(w,c.bigCardSuggestionAttribute,c.bigCardVarification);}}}};var m=function(z){var v=z.parent();var s=v.parent();var u=s.is(":hidden");var r=v.is(":hidden");var t=(s.parent()).is(":hidden");var w=!(u||(t||r));return w;};c.checkIfValidateDateRangeNeeded=function(z){var t=this.attributeValue(z,c.dateRangeAttribute),s=this.attributeValue(z,c.dateRange1HiddenIdAttribute),A=this.attributeValue(z,c.dateRange2HiddenIdAttribute),D="",u="",r=z.id,C=false,v=false,B=null,w=null;if((t!==undefined)&&(0<t.length)){D=r.charAt(r.length-1);if(this.validateNumeric(D)){u=D;}if(("2"===u)||(""===u)){B=$("#"+s);v=m(B);if(v){C=true;w=$("#"+A);c.dateRangeArray[0]=B.val();c.dateRangeArray[1]=w.val();c.dateRangeArray[2]=B.attr("dateFromat");}}}return C;};c.validateDateRange=function(z){var A=null,w=false,u=false,r=false,t=this.attributeValue(z,c.dateRegexAttribute),v=c.getValue(z),s=c.checkIfValidateDateRangeNeeded(z);if($("#"+z.id+"").length>0&&($("#"+z.id+"")[0].offsetWidth>0||$("#"+z.id+"")[0].offsetHeight>0)){r=true;}if((v!==null)&&(t)&&(!v.match(t))&&(r)){this.setError(z,c.dateRegexErrorAttribute,c.defaultRegexError);return;}if(s&&(r)){A=new SKYSALES.Class.MarketDate();w=A.datesInOrder(this.dateRangeArray);if(!w){this.setError(z,this.dateRangeErrorAttribute,this.defaultError);}else{if(!c.dateRangeErrorAlert){c.dateRangeErrorAlert=false;}}}};c.ValidateInfantCount=function(v){var r=$("#"+v["id"]);var w=r.attr("id");var u=r.prop("tagName").toLowerCase();var s=w.lastIndexOf("_");if(s>-1){var t=w.substring(s+1,w.length).toLowerCase();if(u=="select"&&t=="infant"&&r.val()!="0"){var z=$("#"+w.substring(0,s)+"_ADT");if(z){if(z.val()<r.val()){this.setError(v,c.infantCountErrorAttribute,this.defaultError);return false;}}}}};c.ValidateNumPax=function(w){var u=this.attributeValue(w,c.numPaxAttribute);var t=w["id"].lastIndexOf("_")+1;var v=w["id"].substring(t,w["id"].length);var z=w["id"].substring(0,t);scpCount=0;pwdCount=0;if(u=="true"){if($("#"+z+"SCP").length>0){scpCount=$("#"+z+"SCP").val();}if($("#"+z+"PWD").length>0){pwdCount=$("#"+z+"PWD").val();}if(v=="CHD"){var s=$("#"+w["id"].substring(0,t)+"ADT");var r=this.attributeValue(w,"maxpax");if(parseInt(s.val())+parseInt(w.value)+parseInt(scpCount)+parseInt(pwdCount)>parseInt(r)){this.setError(w,c.numPaxErrorAttribute,this.defaultError);return false;}}else{if(v=="ADT"){totalADT=parseInt(w.value)+parseInt(scpCount)+parseInt(pwdCount);if(totalADT==0){this.setError(w,c.numPaxZeroErrorAttribute,this.defaultError);return false;}}}}};c.ValidateFlightTime=function(t){var u=this.attributeValue(t,c.checkFlightTimeAttribute);if(u){var r=$("#"+t.id).attr("checked");if(r&&$("#selectMainBody div[class^='dayHeadersLarge'] span[class^='todayDate']").length>1){var F=$("#selectMainBody div[class^='dayHeadersLarge'] span[class^='todayDate']")[0].innerHTML;var D=$("#selectMainBody div[class^='dayHeadersLarge'] span[class^='todayDate']")[1].innerHTML;if(F!=""){var A=F.split("/");}if(D!=""){var w=D.split("/");}var B=new Date(A[2]+"/"+SKYSALES.pad(A[0],2)+"/"+SKYSALES.pad(A[1],2));var z=new Date(w[2]+"/"+SKYSALES.pad(w[0],2)+"/"+SKYSALES.pad(w[1],2));var v=new Date($("#selectMainBody td[class^='selectedAirlineCodeHilite'] div[class^='segmentStation'] p span[id^='UTCDATE']")[1].innerHTML);var s=new Date($("#selectMainBody td[class^='selectedAirlineCodeHilite'] div[class^='segmentStation'] p span[id^='UTCDATE']")[2].innerHTML);if(B>z){this.setError(t,c.checkFlightTimeErrorAttribute,this.defaultError);return false;}if(v>s){this.setError(t,c.checkFlightTimeErrorAttribute,this.defaultError);return false;}if(v.getTime()===s.getTime()){var E=+$("#selectMainBody td[class^='selectedAirlineCodeHilite'] div[class^='segmentStation'] p span[id^='UTCTIME']")[1].innerHTML.substring(0,4);var C=+$("#selectMainBody td[class^='selectedAirlineCodeHilite'] div[class^='segmentStation'] p span[id^='UTCTIME']")[2].innerHTML.substring(0,4);if(E>C){this.setError(t,c.checkFlightTimeErrorAttribute,this.defaultError);return false;}}}}};c.ValidatePasswordCheck=function(u){var t=this.attributeValue(u,c.passwordCheckAttribute);if(t=="true"){var s=$("#"+u.id.replace("Confirm","")+"").val();var r=u.value;if(s!=r){this.setError(u,c.passwordCheckErrorAttribute,this.defaultError);return false;}}};c.ValidateExpediaPsgrChk=function(u){var r=this.attributeValue(u,c.expediaPsgrChkAttribute);if(r=="true"){var t=$("#"+u["id"].substring(0,u["id"].lastIndexOf("_")+1)+"CHD").val();var v=$(u).val();var s=Number(t)+Number(v);if(s>4){this.setError(u,c.expediaPsgrChkErrorAttribute,this.defaultError);}}};c.ValidateExpediaRoomChk=function(t){var s=this.attributeValue(t,c.expediaRoomChkAttribute);if(s=="true"){var u=$("#"+t["id"].substring(0,t["id"].lastIndexOf("DropDownListPassengerType_ADT"))+"DropDownListRooms").val();var r=$(t).val();if(u>r){this.setError(t,c.expediaRoomChkErrorAttribute,this.defaultError);}}};c.validateAgentBlockCheck=function(w){var C=this.attributeValue(w,c.agentBlockCheckAttribute);var z="You are not eligible to purchase non-Z2 flight. Please select other flight.";var D=false;var r=$("#"+w.id).attr("checked");if($("#hdZ2_AGENT_BLOCK").val()=="true"&&r&&C=="true"){var F="";var E="";var B="";var A="";var v="";var u="";var t="";var s="";if(parseInt($(".selectedAirlineCodeHilite .scheduleFlightNumber").length)<=2){F=$(".selectedAirlineCodeHilite .scheduleFlightNumber .hotspot span")[0].getAttribute("class");if($(".selectedAirlineCodeHilite .scheduleFlightNumber .hotspot span")[1]!=null){B=$(".selectedAirlineCodeHilite .scheduleFlightNumber .hotspot span")[1].getAttribute("class");}v=F.substring(0,2);if(B!=""){t=B.substring(0,2);}if(t==""){t=v;}if(v=="Z2"&&t=="Z2"){D=true;}else{this.setError(w,c.agentBlockCheckErrorAttribute,z);return false;}}else{F=$(".selectedAirlineCodeHilite .scheduleFlightNumber span")[0].getAttribute("Class");E=$(".selectedAirlineCodeHilite .scheduleFlightNumber span")[2].getAttribute("Class");if($(".selectedAirlineCodeHilite .scheduleFlightNumber span")[3]!=null){B=$(".selectedAirlineCodeHilite .scheduleFlightNumber span")[3].getAttribute("Class");}if($(".selectedAirlineCodeHilite .scheduleFlightNumber span")[5]!=null){A=$(".selectedAirlineCodeHilite .scheduleFlightNumber span")[5].getAttribute("Class");}v=F.substring(0,2);u=E.substring(0,2);if(B!=""){t=B.substring(0,2);}if(A!=""){s=A.substring(0,2);}if($(".selectedAirlineCodeHilite .scheduleFlightNumber span")[3]==""){t=v;s=v;}if(v=="Z2"&&u=="Z2"&&t=="Z2"&&s=="Z2"){D=true;}else{this.setError(w,c.agentBlockCheckErrorAttribute,z);return false;}}}};c.ValidateEmergencyField=function(t){var v=c.emergencyrequiredAttribute,r=this.attributeValue(t,c.requiredEmptyAttribute).toLowerCase(),u=this.attributeValue(t,v);if(u=="true"){value=c.getValue(t).toLowerCase();if(r!=""&&value==""){t.value=r;}var s=false;if(this.attributeValue($("[id$=EmergencyTextBoxGivenName]")[0],c.requiredEmptyAttribute).toLowerCase()!=$("[id$=EmergencyTextBoxGivenName]")[0].value.toLowerCase()||this.attributeValue($("[id$=EmergencyTextBoxSurname]")[0],c.requiredEmptyAttribute).toLowerCase()!=$("[id$=EmergencyTextBoxSurname]")[0].value.toLowerCase()||$("[id$=EmergencyTextBoxMobileNo]")[0].value!=""){if(s==false&&$("[id$=EmergencyTextBoxGivenName]").length>0&&$("[id$=EmergencyTextBoxGivenName]")[0].value!=""&&t.id.indexOf("GivenName")>0&&value===r){s=true;}if(s==false&&$("[id$=EmergencyTextBoxSurname]").length>0&&$("[id$=EmergencyTextBoxSurname]")[0].value!=""&&t.id.indexOf("Surname")>0&&value===r){s=true;}if(s==false&&$("[id$=EmergencyTextBoxMobileNo]").length>0&&$("[id$=EmergencyTextBoxMobileNo]")[0].value===""&&t.id.indexOf("EmergencyTextBoxMobileNo")>0&&r===""){s=true;}if(((value===undefined)||(value==="none")||(value===null)||(value==="")||(value===r)||(r===""))&&s){c.setError(t,c.emergencyrequiredErrorAttribute,c.defaultRequiredError);}}}};var b=function(){if($(this)[0].baseURI){return $(this)[0].baseURI.toLowerCase();}else{if($(this)[0].document){return $(this)[0].document.URL.toLowerCase();}}};c.isExemptFromValidation=function(r){if(r.id.indexOf(this.namespace)!==0){return true;}if(this.regexElementIdFilter&&(!r.id.match(this.regexElementIdFilter))){return true;}return false;};c.isByPassArrayValidation=function(r){if(c.attributeValue(r,c.byPassArrayValidationAttribute)&&c.attributeValue(r,c.byPassArrayValidationAttribute)!=="false"){return true;}return false;};c.setValidateTypeError=function(r){this.setError(r,this.validationTypeErrorAttribute,this.defaultValidationTypeError);};c.validateAmount=function(r){if((!r.match(this.amountPattern))||(r===0)){return false;}return true;};c.validateDate=function(w,t,u){var v="",r=new Date(),s=new Date(u);if(t){v=t.toLowerCase();}if((v==="dateyear")&&((u<r.getFullYear())||(!u.match(c.dateYearPattern)))){return false;}else{if((v==="datemonth")&&(!u.match(c.dateMonthPattern))){return false;}else{if((v==="dateday")&&(!u.match(c.DateDayPattern))){return false;}else{if((v==="date")&&(!SKYSALES.Util.isDateValid(s))){return false;}}}}return true;};c.validateMod10=function(w){var v=/\D/,t=w.replace(/ /g,""),u,s=0,z=0,r=0;if(!v.test(t)){while(t.length<16){t="0"+t;}for(r=t.length-1;0<=r;r-=2){s+=parseInt(t.charAt(r),10);u=String((t.charAt(r-1)*2));for(z=0;z<u.length;z+=1){s+=parseInt(u.charAt(z),10);}}return(s%10===0);}return false;};c.validateNumeric=function(r){r=r.replace(/\s/g,"");if(!r.match(c.numericPattern)){return false;}return true;};c.getValue=function(r){return SKYSALES.Common.getValue(r);};c.stringPattern=/^.+$/;c.upperCaseStringPattern=/^[A-Z]([A-Z|\s])*$/;c.numericPattern=/^\d+$/;c.numericStripper=/\D/g;c.alphaNumericPattern=/^\w+$/;c.amountPattern=/^(\d+((\.|,|\s|\xA0)\d+)*)$/;c.dateYearPattern=/^\d{4}$/;c.dateMonthPattern=/^\d{2}$/;c.dateDayPattern=/^\d{2}$/;c.emailPattern=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,8}$/;return c;};var validateBySelector=function(c){var e=null;var b=null;if(c!==undefined){e=new SKYSALES.Validate(null,"",SKYSALES.errorsHeader,null);e.clickedObj=b;e.runBySelector(c);if($("#mainTraveler .validationError")[0]!==undefined&&$("#mainTraveler .validationError")[0]!==null){if($("#mainTraveler .validationError")[0].id.indexOf("CONTROLGROUP_OUTERTRAVELER_CONTROLGROUPTRAVELER_PassengerInputTravelerView_complimentaryMeal")>-1){x=$($("#mainTraveler .validationError")[0]).parents("span").children().children().children("a").children("span.label").offset().left-147.5+130-113;y=$($("#mainTraveler .validationError")[0]).parents("span").children().children().children("a").children("span.label").offset().top-265;var a=$("#validationErrorContainerReadAlong");a.css("left",x);a.css("top",y);a.css("position","absolute");a.show("slow");}}return e.outputErrors();}return true;};var validate=function(f,a,c){var b=null,m=null,l=null;if(document.getElementById&&document.createTextNode){if(f.getAttribute){b=f;f=f.getAttribute("id").replace(/_\w+$/,"");}m=new SKYSALES.Validate(SKYSALES.getSkySalesForm(),f+"_",SKYSALES.errorsHeader,c);m.clickedObj=b;if(a){l=a;if(!a.getAttribute){l=document.getElementById(f+"_"+a);}m.validateSingleElement(l);if($("#mainTraveler .validationError").length==0){readAlongDivObj=$("#validationErrorContainerReadAlong");readAlongDivObj.hide();}return m.outputErrors();}return m.run();}return true;};var validateFriendly=function(f,a,c){var b=null;var m=null;var l=null;if(document.getElementById&&document.createTextNode){if(f.getAttribute){b=f;f=f.getAttribute("id").replace(/_\w+$/,"");}m=new SKYSALES.Validate(null,"","",null);m.clickedObj=b;if(a){l=a;if(!a.getAttribute){l=document.getElementById(f+"_"+a);}m.validateSingleElement(l);if($("#mainTraveler .validationError").length==0){readAlongDivObj=$("#validationErrorContainerReadAlong");readAlongDivObj.hide();}return m.outputErrors();}return m.run();}return true;};var preventDoubleClick=function(){return true;};var events=[];var register=function(a,b){if(events[a]===undefined){events[a]=[];}events[a][events[a].length]=b;};var raise=function(eventName,eventArgs){var ix=0;if(events[eventName]!==undefined){for(ix=0;ix<events[eventName].length;ix+=1){if(eval(events[eventName][ix]+"(eventArgs)")===false){return false;}}}return true;};var WindowInitialize=function(){var a=window.onload;var b=function(){raise("WindowLoad",{});if(a){a();}document.onclick=function(l){var c=l||event||window.event;var m=c.srcElement||c.target;var f=navigator.userAgent.toLowerCase();if((m.tagName=="A"&&(c.ctrlKey||c.shiftKey))||(f.indexOf("safari")>0&&m.tagName=="INPUT"&&(c.ctrlKey||c.shiftKey)&&m.type=="submit")){SKYSALES.RemoveLoadingBar();}};document.onkeydown=function(l){var c=l||event||window.event;var f=c.keyCode||c.which||c.charCode;if(f==27){SKYSALES.RemoveLoadingBar();}};};$(window).ready(b);};SKYSALES.Util.displayPopUpConverter=function(){var a="CurrencyConverter.aspx";var b=window.converterWindow;if(!window.converterWindow||b.closed){b=window.open(a,"converter","width=360,height=220,toolbar=0,status=0,location=0,menubar=0,scrollbars=0,resizable=0");}else{b.open(a,"converter","width=360,height=220,toolbar=0,status=0,location=0,menubar=0,scrollbars=0,resizable=0");if($(b).is(":hidden")===false){b.focus();}}};var hideShow=function(a,c){var e=a;var b=c;if(document.getElementById&&document.getElementById(a)){if(document.getElementById(b).checked===true){document.getElementById(e).style.display="inline";}else{document.getElementById(e).style.display="none";}}};var jsLoadedCommon=true;SKYSALES.toggleAtAGlanceEvent=function(){$(this).next().slideToggle();};SKYSALES.toggleAtAGlance=function(){$("div.atAGlanceDivHeader").click(SKYSALES.toggleAtAGlanceEvent);};SKYSALES.initializeTime=function(){var a=0;var b="";for(a=0;a<23;a+=1){b+="<option value="+a+">"+a+"</option>";}if(b!==""){$("select.Time").append(b);}};$("a.animateMe").animate({height:"toggle",opacity:"toggle"},"slow");SKYSALES.aosAvailabilityShow=function(){$(this).parent().find("div.hideShow").show("slow");return false;};SKYSALES.aosAvailabilityHide=function(){$(this).parent().parent(".hideShow").hide("slow");return false;};SKYSALES.dropDownMenuEvent=function(){$("div.slideDownUp").toggle("fast");return false;};SKYSALES.faqHideShow=function(){$(this).parent("dt").next(".accordianSlideContent").slideToggle("slow");};SKYSALES.equipHideShow=function(){$("div#moreSearchOptions").slideToggle("slow");return false;};SKYSALES.initializeAosAvailability=function(){$(".hideShow").hide();$("a.showContent").click(SKYSALES.aosAvailabilityShow);$("a.hideContent").click(SKYSALES.aosAvailabilityHide);$("a.toggleSlideContent").click(SKYSALES.dropDownMenuEvent);$("a.accordian").click(SKYSALES.faqHideShow);$("a.showEquipOpt").click(SKYSALES.equipHideShow);$("a.hideEquipOpt").click(SKYSALES.equipHideShow);};SKYSALES.initializeMetaObjects=function(){$.metaobjects({clean:false});};SKYSALES.common=new SKYSALES.Common();function formatCurrency(c){var a=0;c=c.toString();if(isNaN(c)){c="0";}if(c.indexOf(".")>-1){a=c.substring(c.indexOf(".")+1,c.length);c=c*100;}a=c%100;if(a>0){c=Math.floor(c/100).toString();}if(a<10){a="0"+a;}for(var b=0;b<Math.floor((c.length-(1+b))/3);b+=1){c=c.substring(0,c.length-(4*b+3))+","+c.substring(c.length-(4*b+3));}return(c+"."+a);}SKYSALES.Util.sendAspFormFields=function(){var b=null;var e=window.document.getElementById("eventTarget");var c=window.document.getElementById("eventArgument");var a=window.document.getElementById("viewState");var f=window.theForm;if(!f.onsubmit||(f.onsubmit()!==false)){e.name="__EVENTTARGET";c.name="__EVENTARGUMENT";a.name="__VIEWSTATE";if(f.checkValidity){b=function(){$(this).removeAttr("required");};SKYSALES.common.getAllInputObjects().each(b);}}return true;};SKYSALES.Util.initStripeTable=function(){$(".hotelResult").hide();var a=function(){$(".stripeMe tr").removeClass("over");$(this).parent().parent().addClass("over");};$(".stripeMe input").click(a);};SKYSALES.Util.initializeBrowserWorkarounds=function(){if($.browser.msie){$(".multicoldd-drop-arrow").css({"margin-bottom":"-7px"});$(".currencyComboBox").find("span.arrow").css({"z-index":"0","display":"block"});$(".currencyComboBox").css({"overflow":"hidden"});$(".dropdown-styled").find("span.arrow").css({"z-index":2});$(".dropdown-styled").find("select").css({"z-index":1,"position":"relative","zoom":"1"});$(".dropdown-styled").find("span.arrow").hover(function(){$(this).css({"z-index":"0","display":"block"});},function(){$(this).css({"z-index":"2","display":"block"});});}if($.browser.msie&&$.browser.version==7){$(".multicoldd-drop-arrow").css({"margin-bottom":"1px","right":"-13px"});$(".currencyComboBox").find("select").css({"width":"255px"});$(".currencyComboBox").find("span.arrow").css({"z-index":"0","display":"none"});$(".hideSearchSpan").css({"margin-top":"30px","margin-bottom":"0px"});$(".loginDiv").css({"margin-left":"370px"});$(".rgMasterTable").find("td.resultFareCell2, td.resultFareCell3, td.resultFareCell4").css({"width":"auto"});$("ol.menu-text").css({"margin-left":"40px"}).children("li").each(function(a){$(this).prepend("<span>"+(a+1)+". </span>");});}if($.browser.msie&&$.browser.version==8&&$("#flightCompact").length>0){$(".multicoldd-drop-arrow").css({"margin-bottom":"-2px"});}if($.browser.msie&&$.browser.version==8&&$("#flightCompact").length==0){$(".multicoldd-drop-arrow").css({"margin-bottom":"-9px"});}if($.browser.msie&&($.browser.version==9||$.browser.version==10)&&$("#flightCompact").length>0){$(".multicoldd-drop-arrow").css({"margin-bottom":"0"});}if($.browser.mozilla&&$("#flightCompact").length>0){$(".multicoldd-drop-arrow").css({"margin-bottom":"1px"});}if($.browser.webkit&&$("#flightCompact").length==0){$(".multicoldd-drop-arrow").css({"margin-bottom":"-4px"});}if($.browser.opera&&$("#flightCompact").length==0){$(".multicoldd-drop-arrow").css({"margin-bottom":"-4px"});}};SKYSALES.Util.ready=function(){$("form").submit(SKYSALES.Util.sendAspFormFields);SKYSALES.initializeMetaObjects();SKYSALES.Util.initObjects();SKYSALES.common.initializeCommon();if($("#flightCompact").length==0){SKYSALES.initializeSkySalesForm();}SKYSALES.toggleAtAGlance();SKYSALES.Util.initStripeTable();SKYSALES.initializeAosAvailability();$(".dropdown-styled").hover(function(){$(this).find("span.arrow").toggleClass("arrow-hovered ");});$(".currencyComboBox").hover(function(){$(this).find("span.arrow").toggleClass("arrow-hovered ");});$(".passengerComboBox").hover(function(){$(this).find("span.arrow").toggleClass("arrow-hovered ");});$(".aagoHotelComboBox").hover(function(){$(this).find("span.arrow").toggleClass("arrow-hovered ");});$(".aagoPackageComboBox").hover(function(){$(this).find("span.arrow").toggleClass("arrow-hovered ");});if($.browser.msie){$(".multicoldd-drop-arrow").css({"margin-bottom":"-7px"});$(".currencyComboBox").find("span.arrow").css({"z-index":"0","display":"block"});$(".currencyComboBox").css({"overflow":"hidden"});$(".dropdown-styled").find("span.arrow").css({"z-index":2});$(".dropdown-styled").find("select").css({"z-index":1,"position":"relative","zoom":"1"});$(".dropdown-styled").find("span.arrow").hover(function(){$(this).css({"z-index":"0","display":"block"});},function(){$(this).css({"z-index":"2","display":"block"});});}if($.browser.msie&&$.browser.version==7){$(".multicoldd-drop-arrow").css({"margin-bottom":"1px","right":"-13px"});$(".currencyComboBox").find("select").css({"width":"255px"});$(".currencyComboBox").find("span.arrow").css({"z-index":"0","display":"none"});$(".hideSearchSpan").css({"margin-top":"30px","margin-bottom":"0px"});$(".loginDiv").css({"margin-left":"370px"});$(".rgMasterTable").find("td.resultFareCell2, td.resultFareCell3, td.resultFareCell4").css({"width":"auto"});$("ol.menu-text").css({"margin-left":"40px"}).children("li").each(function(b){$(this).prepend("<span>"+(b+1)+". </span>");});}if($.browser.msie&&$.browser.version==8&&$("#flightCompact").length>0){$(".multicoldd-drop-arrow").css({"margin-bottom":"-3px"});$(".multicoldd-drop-arrow").css({"bottom":"-3px"});}SKYSALES.Util.initializeBrowserWorkarounds();if($.browser.opera&&$("#flightCompact").length==0){$(".multicoldd-drop-arrow").css({"margin-bottom":"-4px"});}if($.browser.msie&&$.browser.version==8&&$("#flightCompact").length==0){$(".multicoldd-drop-arrow").css({"margin-bottom":"-9px"});}var a=0;$("table[class^='target']").each(function(){if($.browser.msie&&($.browser.version==9||$.browser.version==10)&&$("#flightCompact").length>0){$(".multicoldd-drop-arrow").css({"margin-bottom":"1px"});}if($.browser.mozilla&&$.browser.version==11&&$("#flightCompact").length==0){$(".multicoldd-drop-arrow").css({"margin-bottom":"-7px"});}if($.browser.mozilla&&$.browser.version==11&&$("#flightCompact").length>0){$(".multicoldd-drop-arrow").css({"margin-bottom":"-1px"});}if($.browser.mozilla&&$("#flightCompact").length>0){if(!!navigator.userAgent.match(/Trident\/7\./)){$(".multicoldd-drop-arrow").css({"margin-bottom":"2px"});}else{$(".multicoldd-drop-arrow").css({"margin-bottom":"1px"});}}if($.browser.webkit&&$("#flightCompact").length==0){$(".multicoldd-drop-arrow").css({"margin-bottom":"-4px"});}if($.browser.opera&&$("#flightCompact").length==0){$(".multicoldd-drop-arrow").css({"margin-bottom":"-4px"});}SKYSALES.Util.initializeBrowserWorkarounds();if($.browser.opera&&$("#flightCompact").length==0){$(".multicoldd-drop-arrow").css({"margin-bottom":"-4px"});}var b=0;$("table[class^='target']").each(function(){if($(this).find("td.segmentContainer").length>0){var e=$(this).find("td.segmentContainer").clone(true);$("body").append("<table class='hidden' id='clonedTable'></table>");$("#clonedTable").html(e);var c='<tr class="clonedTR'+b+'"></tr>';while($("#clonedTable > .segmentContainer").length>0){$("#clonedTable > .segmentContainer:lt(4)").wrapAll(c);}$(this).find("td.segmentContainer").parent("tr").remove();$(this).find("td.segmentContainer").remove();$(this).append($("tr.clonedTR"+b));}b++;});});};$(document).ready(SKYSALES.Util.ready);SKYSALES.openNewWindow=function(b,a,c){var e=window.open(b,a,c);};SKYSALES.tooltip=function(){var f="tt";var B=0;var m=0;var A=700;var q=10;var l=20;var u=95;var r=0;var e=260;var v=null,C=null,w=null,z=null,s=null;var a=document.all?true:false;return{show:function(t,c,b){if(typeof(b)==="undefined"){f="tt";}else{f="tt2";}if(typeof(b)==="undefined"){b=23;}m=b;document.onmousemove=SKYSALES.tooltip.pos;if($("#"+f).length==0){v=document.createElement("div");v.setAttribute("id",f);if(b==23){C=document.createElement("div");C.setAttribute("id",f+"left");}w=document.createElement("div");w.setAttribute("id",f+"cont");v.appendChild(w);document.body.appendChild(v);v.style.opacity=0;$("#"+f).css("filter","alpha(opacity=0)");}else{v=document.getElementById(f);w=document.getElementById(f+"cont");}v.style.display="block";w.innerHTML=t;v.style.width=c?c+"px":e+"px";w.style.width=c?(c-60)+"px":"auto";w.style.height="auto";if(!c&&a){C.style.display="none";v.style.width=v.offsetWidth;w.style.width=(v.offsetWidth-60);C.style.display="block";}if(v.offsetWidth>A){v.style.width=A+"px";w.style.width=(A-60)+"px";}s=(parseInt(v.offsetHeight)+B)/2;clearInterval(v.timer);v.timer=setInterval(function(){SKYSALES.tooltip.fade(1);},l);},pos:function(F){var D=a?$(event.target):$(F.target);var b=(D.is(".newCompactLayout"))?D.attr("dir"):D.closest(".newCompactLayout").attr("dir");var t=a?event.clientY+document.documentElement.scrollTop:F.pageY;var c=a?event.clientX+document.documentElement.scrollLeft:F.pageX;if(m==23){v.style.top=(t-s)+"px";}else{v.style.top=(t+30)+"px";}if($("#culture").text()=="ar-SY"){var E=screen.width-c;v.style.right=(E-10)+"px";if(v.id=="tt2"){v.style.right=(E-150)+"px";}}if(b=="rtl"){v.style.left=(c-m-e)+"px";}else{v.style.left=(c+m)+"px";}},fade:function(t){var b=r;if((b!=u&&t==1)||(b!=0&&t==-1)){var c=q;if(u-b<q&&t==1){c=u-b;}else{if(r<q&&t==-1){c=b;}}r=b+(c*t);v.style.opacity=r*0.01;$("#"+f).css("filter","alpha(opacity="+r+")");}else{clearInterval(v.timer);if(t==-1){v.style.display="none";}}},hide:function(){clearInterval(v.timer);v.timer=setInterval(function(){SKYSALES.tooltip.fade(-1);},l);}};}();SKYSALES.DDfriendlyReminder=function(){return{show:function(){document.getElementById("friendlyReminder").style.display="block";clearInterval(20);},hide:function(){document.getElementById("friendlyReminder").style.display="none";}};}();SKYSALES.CCfriendlyReminder=function(){return{show:function(){document.getElementById("ccFriendlyReminder").style.display="block";clearInterval(20);},hide:function(){document.getElementById("ccFriendlyReminder").style.display="none";}};}();$(document).ready(function(){SKYSALES.startSessionTracking();});window.onbeforeunload=function(){if(SKYSALES.sessionTracking){SKYSALES.sessionTracking.sessionExpiry=0;}SKYSALES.ReDisplayLoadingBar();};SKYSALES.startSessionTracking=function(){if(SKYSALES.sessionTracking&&parseInt(SKYSALES.sessionTracking.sessionExpiry)>0){setTimeout("SKYSALES.launchSessionNotice();",(((parseInt(SKYSALES.sessionTracking.sessionExpiry)*60)-30-SKYSALES.sessionTracking.sessionExpiryCountdown)*1000));}};$(window).resize(function(){if($("#dimmer").length>0){$("#dimmer").css({"width":"100%","height":"100%"});}if($("#loadingDimmer").length>0){$("#loadingDimmer").css({"width":"100%","height":"100%"});}if($("#blockDimmer").length>0){$("#blockDimmer").css({"width":"100%","height":"100%"});}});SKYSALES.launchSessionNotice=function(){if(SKYSALES.sessionTracking&&parseInt(SKYSALES.sessionTracking.sessionExpiry)>0){if($("#dimmer").length>0){$("#dimmer").remove();$("#sessionNoticeBox").remove();}$("body").append('<div id="dimmer" style="display: block; position: fixed; z-index:998;"></div><div id="sessionNoticeBox"><span id="sessionNoticeText">'+SKYSALES.sessionTracking.timeRemaining+'<span id="sessionNoticeCount">'+SKYSALES.sessionTracking.sessionExpiryCountdown+'</span></span><br/><br/><input id="sessionNoticeOK" type="button" value="'+SKYSALES.sessionTracking.noticeContinue+'" /></div>');$("#dimmer").show().css({"width":"100%","height":"100%"});$("#sessionNoticeBox").show();SKYSALES.sessionNoticeCountdownTick();window.focus();$("#sessionNoticeOK").focus();SKYSALES.windowTitle=document.title;document.title=" ";$("#sessionNoticeOK").click(function(){sCount=0;if($("#sessionNoticeCount").length>0){sCount=parseInt($("#sessionNoticeCount").html());}$("#dimmer").remove();$("#sessionNoticeBox").remove();document.title=SKYSALES.windowTitle;if(sCount>0){$.post("SessionRefresh.aspx");SKYSALES.startSessionTracking();}else{showMsg=false;window.location="Search.aspx";}});}};SKYSALES.sessionNoticeCountdown=function(){sCount=0;if($("#sessionNoticeCount").length>0){sCount=parseInt($("#sessionNoticeCount").html());}if(sCount>0){sCount=sCount-1;$("#sessionNoticeCount").html(sCount);if(sCount>0){SKYSALES.sessionNoticeCountdownTick();if(document.title!=SKYSALES.windowTitle){document.title=SKYSALES.windowTitle;}else{document.title=SKYSALES.sessionTracking.noticeWindowTitle;}window.focus();$("#sessionNoticeOK").focus();}}if(sCount==0&&$("#sessionNoticeText").length>0){$("#sessionNoticeBox").remove();window.alert(SKYSALES.sessionTracking.expiredText);$("#dimmer").remove();showMsg=false;window.location="Search.aspx";}};SKYSALES.sessionNoticeCountdownTick=function(){setTimeout("SKYSALES.sessionNoticeCountdown();",1000);};SKYSALES.setNoBaggage=function(a){for(var b=0;b<a.options.length;b++){if(a.options[b].value==""){a.options[b].selected=true;$(a).trigger("change");return;}}};SKYSALES.copyBaggageAndSportSSRs=function(b){var q=function(z,K,w){for(var J in w){for(var H=0,C=z.length;H<C;H++){var v="";var m="";var G=z[H];for(var F=0,B=K.length;F<B;F++){if((K[F].indexOf(w[J])!=-1)){var E=K[F];var D=document.getElementById(K[F]);var A=$(D).val();var u=E.substring(E.indexOf("flightReference"));if(G==u){if(!v&&!m){v=A.substring(A.indexOf("ssrCode"),A.indexOf("flightReference")-1);}if(v.length>0){currentValue=$(D).find('option[value*="'+v+'"]').attr("selected","selected");}else{if(!m){m=$(D).children("option").get(0).text;}currentValue=$(D).find("option").filter(function(){return $.trim($(this).text())==m;});currentValue.attr("selected",true);}var I=$(D).attr("onchange");if(A!=currentValue){SKYSALES.Util.updatePriceDisplay($(D));}}}}}}};var a=$("select");var f=[];var t=[];for(var l=0,e=a.length;l<e;l++){if(!a[l].disabled){var r=a[l].id;var c=r.substring(r.indexOf("flightReference"));for(var s in b){if((r.indexOf(b[s])!=-1)){if(f.indexOf(c)==-1){f.push(c);}t.push(r);}}}}q(f,t,b);};SKYSALES.NoBaggageText=function(a){if(a.value==""){$(a).addClass("dropdown-styled-NoBaggage");for(var b=0;b<$(a)[0].length;b++){if($(a)[0][b].value!=""){$(a)[0][b].className="dropdown-styled-Baggage";}}}else{$(a).removeClass("dropdown-styled-NoBaggage");}};SKYSALES.myClickHandler=function(a){if(a.preventDefault){a.preventDefault();}a.returnValue=false;};SKYSALES.waiveWCHFee=function(b,a){$.each($("[id*=WheelchairInputView][id*=passengerNumber_"+a+"]"),function(){SKYSALES.Util.updatePriceDisplay($(this));});};SKYSALES.numberSelectedWCH=function(f,a){var c=0;dropDownWCHarray=$('[id*=WheelchairInputView][id$="'+a+'"]');for(var b=0;b<dropDownWCHarray.length;b++){dropDownWCH=dropDownWCHarray[b];if($(dropDownWCH).val()&&$(dropDownWCH).val()!=""){var e=$(dropDownWCH).val().split("_").length>4?$(dropDownWCH).val().split("_")[4]:$(dropDownWCH).val();if(e==f){c++;}}}return c;};function setCurrentCookie(a,e,b){var f=new Date();f.setDate(f.getDate()+b);var c=escape(e)+((b==null)?"":"; expires="+f.toUTCString());document.cookie=a+"="+c;}SKYSALES.AddTabCookie=function(a){if(a=="2"){setCurrentCookie("TabClicked","1",7);}};SKYSALES.setSelectPageDate=function(c,a){var b=$("[id$=Viewdate_picker_display_id_"+c+"]");if(b.length>0){b[0].value=a;}jQuery.datepicker._inputselectDay(c,b,"","","","ControlGroupAvailabilitySearchInputSelectView_AvailabilitySearchInputSelectView",b.attr("monthsToOffer"));$("#ControlGroupAvailabilitySearchInputSelectView_ButtonSubmit").click();};SKYSALES.SelectPageDDLCustomValidate=function(a){if($("#validationErrorContainerReadAlong").length>0){validate(a)?$("#validationErrorContainerReadAlong").remove():false;}};function getCurrentCookie(b){var c,a,f,e=document.cookie.split(";");for(c=0;c<e.length;c++){a=e[c].substr(0,e[c].indexOf("="));f=e[c].substr(e[c].indexOf("=")+1);a=a.replace(/^\s+|\s+$/g,"");if(a==b){return unescape(f);}}}SKYSALES.DisplayLoadingBar=function(){$("#loadingDimmer").css({"filter":"alpha(opacity=70)","-moz-opacity":"0.7","opacity":"0.7"});$("#loadingDimmer").show();$("#loadingBarBox").show();window.focus();$("#loadingImage").focus();return true;};SKYSALES.AutoFocus=function(){if(getCurrentCookie("TabClicked")=="1"){var c=0;var a=0;$("#inputFocusMarket2").show();var b=$("#inputFocusMarket2");$(window).scrollTop(b.offset().top-90);$(window).scrollLeft(b.offset().left);$("#inputFocusMarket2").hide();setCurrentCookie("TabClicked","",7);}};SKYSALES.PreLoadImage=function(){$("#loadingBarBox2").hide();var a=$("#imagePath").val();var b=$("#loaderPath").val();if(a!=""){var e=a;$("#loadingImage2").attr("src",e);$("#loadingImage2").error(function(){$(this).hide();$("#imagePath").val("");});}if(b!=""){var c=b;$("#loader").attr("src",c);$("#loader").error(function(){$(this).hide();$("#loaderPath").val("");});}};SKYSALES.DisplayImageLoadingBar=function(){$("#loadingDimmer").css({"filter":"","-moz-opacity":"","opacity":""});$("#loadingDimmer").show();window.focus();var a=$("#imagePath").val();if(a!=""){$("#loadingBarBox2").show();$("#loadingImage2").focus();}else{$("#loadingBarBox").show();$("#loadingImage").focus();}return true;};SKYSALES.RemoveLoadingBar=function(){if($("#loadingDimmer").length>0){$("#loadingDimmer").hide();$("#loadingBarBox").hide();$("#loadingBarBox2").hide();$("#loadingImage2").hide();}};SKYSALES.ReDisplayLoadingBar=function(){if($("#loadingImage").length>0&&document.getElementById("loadingBarBox").style.display!="none"){setTimeout("SKYSALES.DisplayLoadingBar();",10);}};SKYSALES.BlockIsraelPromter=function(){if($("#blockDimmer").length>0){$("#blockDimmer").remove();$("#blockNoticeBox").remove();}$("body").append('<div id="blockDimmer"></div><div id="blockNoticeBox"><span id="blockNoticeText"></span><br/><br/><input id="blockNoticeOK" type="button" value=" OK " /></div>');$("#blockDimmer").css({"width":"100%","height":"100%"}).hide();$("#blockNoticeBox").hide();$("#blockNoticeOK").click(function(){$("#blockDimmer").remove();$("#blockNoticeBox").remove();});};SKYSALES.validateNationality=function(l,c,u,v){var a=true;if($("#needBlockNational").length>0){var m;var s=0;if(l){if(l.id===undefined){m=l;}else{m=$("#"+l.id);}}else{m=$("#"+($("#pClientId").val()+"_DropDownListNationality_0"));}$("#CONTROLGROUP_OUTERTRAVELER_CONTROLGROUPTRAVELER_ButtonSubmit").removeClass("dimContinue");$("#CONTROLGROUP_OUTERTRAVELER_ButtonSubmit").removeClass("dimContinue");$("#CONTROLGROUP_OUTERTRAVELERCHANGE_ButtonSubmit").removeClass("dimContinue");$("#CONTROLGROUP_OUTERTRAVELERFLIGHTCHANGE_CONTROLGROUPTRAVELERFLIGHTCHANGE_ButtonSubmit").removeClass("dimContinue");var e=$("#blockedNationals").val();if(m.val()==e&&c==true){SKYSALES.BlockIsraelPromter();document.location.href="#";$("#CONTROLGROUP_OUTERTRAVELER_CONTROLGROUPTRAVELER_ButtonSubmit").addClass("dimContinue");$("#CONTROLGROUP_OUTERTRAVELER_ButtonSubmit").addClass("dimContinue");$("#CONTROLGROUP_OUTERTRAVELERCHANGE_ButtonSubmit").addClass("dimContinue");$("#CONTROLGROUP_OUTERTRAVELERFLIGHTCHANGE_CONTROLGROUPTRAVELERFLIGHTCHANGE_ButtonSubmit").addClass("dimContinue");a=false;}var r=m.attr("id");var t=r.indexOf("DropDownListNationality");var q=r.substring(0,t)+"DropDownListNationality";$("select[id*='"+q+"']").each(function(w){if(this.options[this.selectedIndex].value==e&&u){$("#CONTROLGROUP_OUTERTRAVELER_CONTROLGROUPTRAVELER_ButtonSubmit").addClass("dimContinue");$("#CONTROLGROUP_OUTERTRAVELER_ButtonSubmit").addClass("dimContinue");$("#CONTROLGROUP_OUTERTRAVELERCHANGE_ButtonSubmit").addClass("dimContinue");$("#CONTROLGROUP_OUTERTRAVELERFLIGHTCHANGE_CONTROLGROUPTRAVELERFLIGHTCHANGE_ButtonSubmit").addClass("dimContinue");a=false;}});if(v){var b=m.closest("div[id^=content_]").attr("id");var f=b.replace("content_","");if(parseInt(f)<$(".tabcontent").length-1){$("#CONTROLGROUP_OUTERTRAVELER_CONTROLGROUPTRAVELER_ButtonSubmit").addClass("dimContinue");$("#CONTROLGROUP_OUTERTRAVELER_ButtonSubmit").addClass("dimContinue");$("#CONTROLGROUP_OUTERTRAVELERCHANGE_ButtonSubmit").addClass("dimContinue");$("#CONTROLGROUP_OUTERTRAVELERFLIGHTCHANGE_CONTROLGROUPTRAVELERFLIGHTCHANGE_ButtonSubmit").addClass("dimContinue");}}}return a;};SKYSALES.SearchRedirection=function(m){if($(".newCompactLayout").length>0){var w=$("#ControlGroupCompactView_AvailabilitySearchInputCompactView_DropDownListPassengerType_CHD");var t=$("#ControlGroupCompactView_AvailabilitySearchInputCompactView_DropDownListPassengerType_INFANT");var f=(w.val()!=0||t.val()!=0)?1:0;setCurrentCookie("IsExpandForKidInfant",f,1);}if($("#IERedirectionFlag").val()==1&&$.browser.msie){m.returnValue=false;if(!($.browser.msie&&$.browser.version<9)){m.preventDefault();}window.location.href=$("#htmlHost").val()+"/search.aspx?culture="+$('input[name="culture"]').val();return;}if($("#imageLoaderFlag").val()!=1){SKYSALES.DisplayLoadingBar();}else{SKYSALES.DisplayImageLoadingBar();}if($("#searchRedirectionFlag").val()!=1){return;}var b=$("[id*=originStationMultiColumn1]").filter(":hidden").val();var a=$("[id*=destinationStationMultiColumn1]").filter(":hidden").val();var l=$("[id*=date_picker_display_id_1]").val().split("/").join("-");var u=$("[id*=date_picker_display_id_2]").filter(":visible").val()==null?"":$("[id*=date_picker_display_id_2]").filter(":visible").val().split("/").join("-");var v=$("#stationURLRedirect").val()!=null?$("#stationURLRedirect").val():"";var r=v.split("|").length>2?v.split("|")[2]:"";var c=v.split("|").length>0?v.split("|")[0]:"";var s=v.split("|").length>1?v.split("|")[1]:"";r+="&origin="+b+"&destination="+a+"&depart="+l;if(u!=""){r+="&return="+u;}if(s=="oneway"){var q=c.split("-");if(q.length>1&&q[0]==b&&q[1]==a){m.returnValue=false;if(!($.browser.msie&&$.browser.version<9)){m.preventDefault();}window.location.href=r+"#flights";return;}else{return;}}else{if(b!=""&&a!=""&&c.indexOf(b)>-1&&c.indexOf(a)>-1){m.returnValue=false;if(!($.browser.msie&&$.browser.version<9)){m.preventDefault();}window.location.href=r+"#flights";return;}else{return;}}};SKYSALES.ScrollTopAndFalse=function(){window.scrollTo(0,0);return false;};SKYSALES.loginDisp="show";SKYSALES.toggleLogin=function(){if(SKYSALES.loginDisp=="show"){$("#loginControl").removeClass("login_expand_icon").addClass("login_collapse_icon");$("#loginContainer").show("slide");SKYSALES.loginDisp="hide";}else{$("#loginControl").removeClass("login_collapse_icon").addClass("login_expand_icon");$("#loginContainer").hide("slide");SKYSALES.loginDisp="show";}};function toggleOneWayOnly(c,a,b){if($("#"+c).length>0){if($("#"+c).attr("checked")){$("#"+a).click();}else{$("#"+b).click();}}}function showDiv(a){if($("#"+a).length>0){if($("#"+a).attr("checked")){$("#termAndConditionAgm").css("backgroundColor","white");$("#termAndConditionAgm").css("border","none");$("#validationErrorContainerReadAlong").css("display","none");$("#validationErrorContainerStyle").css("display","none");}else{$("#termAndConditionAgm").css("backgroundColor","#FFFFCC");$("#termAndConditionAgm").css("border","1px solid #DD0000");$("#validationErrorContainerReadAlong").css("display","none");$("#validationErrorContainerStyle").css("display","none");}}}function saveOneClick(a){if($("#"+a).length>0){if($("#"+a).attr("checked")){$("#oneClickId").attr("value","true");}else{$("#oneClickId").attr("value","false");}}}function checkOneClick(){var b=$("td[class^='maskPan']").length;var e="";var l="true";if(thisPaymentInputContainer.defaultCreditCardsArray[thisPaymentInputContainer.getActivePayment()]!=null){activeCC=thisPaymentInputContainer.defaultCreditCardsArray[thisPaymentInputContainer.getActivePayment()];ccType=activeCC.contentId;ccShort=ccType.split("content_ExternalAccount:")[1];var c=$("#CONTROLGROUPPAYMENTBOTTOM_PaymentInputViewPaymentView_TextBoxACCTNO_"+ccShort).val();var f=c.substring((c.length-4),c.length);}for(var a=0;a<b;a++){e=$("td[class^='maskPan']")[a].innerHTML.split(" ");if(e[3]==f){l="false";}}if(l=="false"){$("#favOneClick").css("display","none");}else{$("#favOneClick").css("display","block");}}function getBillingCountry(c){var a=$("#"+c).val();var b=$("#GeoIP").val();if(b!=""){if(b=="MY"||b=="CA"||b=="US"){$("#CONTROLGROUPPAYMENTBOTTOM_ContactBillingInputPaymentView_TextBoxAvs__PostalCode").attr("required","required");$("#postCodeRed").css("display","block");}else{$("#CONTROLGROUPPAYMENTBOTTOM_ContactBillingInputPaymentView_TextBoxAvs__PostalCode").removeAttr("required");$("#postCodeRed").css("display","none");}}else{if(a=="MY"||a=="CA"||a=="US"){$("#CONTROLGROUPPAYMENTBOTTOM_ContactBillingInputPaymentView_TextBoxAvs__PostalCode").attr("required","required");$("#postCodeRed").css("display","block");}else{$("#CONTROLGROUPPAYMENTBOTTOM_ContactBillingInputPaymentView_TextBoxAvs__PostalCode").removeAttr("required");$("#postCodeRed").css("display","none");}}}SKYSALES.selectedFareCellId=new Array();SKYSALES.selectedFareRowId=new Array();SKYSALES.selectedFareColumnId=new Array();SKYSALES.selectedFareCellId[1]="";SKYSALES.selectedFareCellId[2]="";SKYSALES.selectedFareRowId[1]="";SKYSALES.selectedFareRowId[2]="";SKYSALES.selectedFareColumnId[1]="";SKYSALES.selectedFareColumnId[2]="";SKYSALES.hiliteFare=function(b,s,l,e,c,m){var f=$("#"+s);if(f.length>0){if(f.attr("checked")==undefined||f.attr("checked")==null){f.attr("checked","checked").click();}}fareCellId=s+"CellId";fradiocell=$("#"+fareCellId);if($("#"+fareCellId).length>0){var a=$("#"+SKYSALES.selectedFareCellId[b]);if(!a.length){a=$("#"+s+"CellId");}if(!a.length){a=$(".resultFareHilite"+m);}if(a.length){a.removeClass("resultFareHilite"+m).find(".limited-selected").removeClass("limited-selected").addClass("limited");a.closest("td").removeClass("selected");a.addClass("resultFare"+m);}fradiocell.removeClass("resultFare"+m).addClass("resultFareHilite"+m);fradiocell.closest("td").addClass("selected").find(".limited").removeClass("limited").addClass("limited-selected");SKYSALES.selectedFareCellId[b]=fareCellId;}var q=$("#"+l);if(q.length>0){var r=$("#"+SKYSALES.selectedFareRowId[b]);if(r){r.removeClass("selectedAirlineCodeHilite").addClass("selectedAirlineCode");}q.removeClass("selectedAirlineCode").addClass("selectedAirlineCodeHilite");SKYSALES.selectedFareRowId[b]=l;}if($("#"+e).length>0){if($("#"+SKYSALES.selectedFareColumnId[b])){$("#"+SKYSALES.selectedFareColumnId[b]).removeClass("resultClassHilite").addClass("resultClass");}$("#"+e).removeClass("resultClass").addClass("resultClassHilite");SKYSALES.selectedFareColumnId[b]=e;}};SKYSALES.CheckPQTCPrompter=function(b){var t="";var s="";var q="";var m="";var l="";var f="";var e="";var c="";var r=true;if(parseInt($(".selectedAirlineCodeHilite").find(".scheduleFlightNumber").length)<=2){var a=$(".selectedAirlineCodeHilite").find(".scheduleFlightNumber").find(".hotspot").find("span");t=a[0].getAttribute("class");if($(".selectedAirlineCodeHilite")[1]!=null){q=a[1].getAttribute("class");}l=t.substring(0,2);if(q!=""){e=q.substring(0,2);}if(b!=""){if(l=="PQ"||e=="PQ"||l=="Z2"||e=="Z2"){r=window.confirm(b);}else{r=true;}}}else{a=$(".selectedAirlineCodeHilite").find(".scheduleFlightNumber").find("span");t=a[0].getAttribute("Class");s=a[2].getAttribute("Class");if($(".selectedAirlineCodeHilite")[1]!=null){q=a[3].getAttribute("Class");}if($(".selectedAirlineCodeHilite")[1]!=null){m=a[5].getAttribute("Class");}l=t.substring(0,2);f=s.substring(0,2);if(q!=""){e=q.substring(0,2);}if(m!=""){c=m.substring(0,2);}if(b!=""){if(l=="PQ"||f=="PQ"||e=="PQ"||c=="PQ"||l=="Z2"||f=="Z2"||e=="Z2"||c=="Z2"){r=window.confirm(b);}else{r=true;}}}return r;};SKYSALES.CheckZ2Prompter=function(a){var q=false;if($("#hdZ2_AGENT_BLOCK").val()=="true"){var s="";var r="";var m="";var l="";var f="";var e="";var c="";var b="";if(parseInt($(".selectedAirlineCodeHilite .scheduleFlightNumber").length)<=2){s=$(".selectedAirlineCodeHilite .scheduleFlightNumber .hotspot span")[0].getAttribute("class");if($(".selectedAirlineCodeHilite .scheduleFlightNumber .hotspot span")[1]!=null){m=$(".selectedAirlineCodeHilite .scheduleFlightNumber .hotspot span")[1].getAttribute("class");}f=s.substring(0,2);if(m!=""){c=m.substring(0,2);}if(a!=""){if(c==""){c=f;}if(f=="Z2"&&c=="Z2"){q=true;}else{alert(a);}}}else{s=$(".selectedAirlineCodeHilite .scheduleFlightNumber span")[0].getAttribute("Class");r=$(".selectedAirlineCodeHilite .scheduleFlightNumber span")[2].getAttribute("Class");if($(".selectedAirlineCodeHilite .scheduleFlightNumber span")[3]!=null){m=$(".selectedAirlineCodeHilite .scheduleFlightNumber span")[3].getAttribute("Class");}if($(".selectedAirlineCodeHilite .scheduleFlightNumber span")[5]!=null){l=$(".selectedAirlineCodeHilite .scheduleFlightNumber span")[5].getAttribute("Class");}f=s.substring(0,2);e=r.substring(0,2);if(m!=""){c=m.substring(0,2);}if(l!=""){b=l.substring(0,2);}if(a!=""){if($(".selectedAirlineCodeHilite .scheduleFlightNumber span")[3]==""){c=f;b=f;}if(f=="Z2"&&e=="Z2"&&c=="Z2"&&b=="Z2"){q=true;}else{alert(a);}}}}else{q=true;}return q;};SKYSALES.changeTandCLink=function(a){if($("#termsAndConditionsLink")){$("#termsAndConditionsLink")[0].href="tandc_"+a+".html";}};SKYSALES.openTermsAndConditions=function(b,f){var e=SKYSALES.AK_defineLanguagePath(f);var a="http://www.airasia.com/"+e+"/about-us/terms-and-conditions.page";var c=window.open(a,"TermsAndConditions","width=600,height=500,toolbar=0,status=0,menubar=0,scrollbars=1,resizable=Yes");};SKYSALES.openFareRules=function(e){var c=SKYSALES.AK_defineLanguagePath(e);var a="http://www.airasia.com/"+c+"/our-fares/fare-rules.page ";var b=window.open(a,"FareRules","width=600,height=500,toolbar=0,status=0,menubar=0,scrollbars=1,resizable=Yes");};SKYSALES.openFerryTransfer=function(e){var c=SKYSALES.AK_defineLanguagePath(e);var a="http://www.airasia.com/"+c+"/our-connections/island-and-city-transfers-tnc.page ";var b=window.open(a,"FerryTransfer","width=600,height=500,toolbar=0,status=0,menubar=0,scrollbars=1,resizable=Yes");};SKYSALES.openPrivacyPolicy=function(e){var c=SKYSALES.AK_defineLanguagePath(e);var a="http://www.airasia.com/"+c+"/privacy-policy.page";var b=window.open(a,"PrivacyPolicy","width=600,height=500,toolbar=0,status=0,menubar=0,scrollbars=1,resizable=Yes");};SKYSALES.AK_defineLanguagePath=function(a){switch(a){case"ms-MY":language_path="my/ms";break;case"en-GB":language_path="my/en";break;case"en-TT":language_path="th/th";break;case"en-US":language_path="my/en";break;case"zh-CN":language_path="cn/zh";break;case"zh-HK":language_path="hk/zh";break;case"zh-TW":language_path="tw/zh";break;case"vi-VN":language_path="vn/vi";break;case"id-ID":language_path="id/id";break;case"ko-KR":language_path="kr/ko";break;case"ja-JP":language_path="jp/ja";break;case"fr-FR":language_path="fr/fr";break;case"fa-IR":language_path="ir/fa";break;case"ar-SY":language_path="sa/ar";break;case"fr":language_path="fr/fr";break;default:language_path="my/en";}return language_path;};SKYSALES.togglePriceSummary=function(b){var a="";if(b=="OtherTaxesAndFees"){a="#OtherTaxesAndFees";}else{if(b=="PriceMarket1"){a="#PriceMarket1";}else{if(b=="PriceMarket2"){a="#PriceMarket2";}}}if($(a).hasClass("expand_icon")){$(a).removeClass("expand_icon").addClass("collapse_icon");}else{$(a).removeClass("collapse_icon").addClass("expand_icon");}};SKYSALES.openAAGo=function(f){var c="";var q="";var e="";var r="";var b=window.location.href;if(b!=null){var l=b.split("/");if(l[3]!=null){e=l[3];e=e.toUpperCase();}if(l[4]!=null){r=l[4];r=r.toUpperCase();}}switch(e){case"AU":c="AUSTRALIA";break;case"BN":c="BRUNEI";break;case"CN":c="CHINA";break;case"HK":c="HONGKONG";break;case"IN":c="INDIA";break;case"ID":c="INDONESIA";break;case"MO":c="MACAU";break;case"MY":c="MALAYSIA";break;case"PH":c="PHILLIPPINES";break;case"SG":c="SINGAPORE";break;case"KR":c="KOREA";break;case"TW":c="TAIWAN";break;case"TH":c="THAILAND";break;case"GB":c="UK";break;case"JP":c="JAPAN";break;case"FR":c="FRANCE";break;case"NZ":c="NEWZEALAND";break;default:c="ROW";}switch(r){case"EN":q="en";break;case"ZH":q="zz";break;case"ID":q="id";break;case"MS":q="ms";break;case"KO":q="kr";break;case"TH":q="th";break;case"JA":q="jp";break;default:q="en";}if((e=="CN")&&(r=="ZH")){q="zh";}var a=f+q+c;var m=window.open(a,"_self","");};SKYSALES.get_url_param=function(b){b=b.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var a="[\\?&]"+b+"=([^&#]*)";var e=new RegExp(a);var c=e.exec(window.location.href);if(c==null){return"";}else{return c[1];}};SKYSALES.onClickTripNextFlight=function(f){var a=0,r=0,l={},q=0,m={};a=$(f).attr("data-currentIndex");var b=$(f).attr("data-proceed");if(b==="true"){$("#ControlGroupMultiCitySelectView_ButtonSubmit").click();}if(a>=0){q=parseInt(a)+2;r=parseInt(a)+1;l=$("#tripChangeDivId"+r);m=$("#tripChangeDivId"+q);if(SKYSALES.checkIfFlightIsSelected()===true){m.click();$(window).scrollTop($("#tpSelect").offset().top);}else{var e=$("#selectFlightValidationError"+r);e.removeClass("tripValidationHidden").addClass("tripValidationError");var c=l.position().top;e.css({top:c});}}};SKYSALES.checkIfFlightIsSelected=function(){var a={};a=$(".tpSelectedPanel");var b=$(a).find("div.flightInfoSelected").text();var c=a.children("div[id^='tripFlightInfoHeader']").attr("hasflight");if(b!==""||c==="false"){return true;}else{return false;}};SKYSALES.ShowContent=function(a){document.getElementById(d).style.display="block";}
/*!
This file is part of the Navitaire NewSkies application.
Copyright (C) Navitaire.  All rights reserved.
*/
;if(SKYSALES.Class.AvailabilityInput===undefined){SKYSALES.Class.AvailabilityInput=function(){var a=this;a.detailsLinks=null;a.journeyInfoArray=[];a.productClasses=[];a.fareClasses=[];a.fareCategories=[];a.changeLimits=[];a.departureDates=[null,null];a.submitButtonId="";a.restrictSameFareCategory="";a.sameCategoryMessage="";a.agreement24HrMessage="";a.incompleteFareSelection="";a.isNewBooking="true";a.mostRestrictiveCutOff=0;a.isWithinCutOffHours=[false,false];a.WithinTimeLimit=120;a.isWithinTimeLimit=[false,false];a.cutOffTimeOverRide=null;a.cutOffTime=null;a.agreement24HrsId="";a.agreement24HrsCheckboxId="";a.agreementCutOffHrsNoteId="";a.taxAndFeeProgressMessage="";a.infantAgeText="";a.submitButton=null;a.isExemptedFromCutoff=null;a.hideMarketIndex="";a.marketCount=null;a.preselectFares=null;a.clientId="";a.differentMarketMsg="";a.differentTransferMsg="";a.hiflyerFares=null;a.isFlightChange=false;a.marketDatesMessage="";a.userSelectedDateTime=[];a.offloadPassengers="";a.offloadPassengerMessage="";a.infantArray=[];a.culture="";a.addEvents=function(){a.addGetPriceItineraryInfoEvents();a.addEquipmentPropertiesAjaxEvents();a.submitButton.click(a.validateEvent);a.addFareCategoryDisplayEvents();a.agreementCheckBoxEvents();};a.setVars=function(){var b=(a.clientId).split("_");a.submitButtonId=b[0]+"_ButtonSubmit";a.detailsLinks=$(".showContent");a.submitButton=$("#"+a.submitButtonId);};a.agreementCheckBoxEvents=function(){$("#ControlGroupSelectView_AgreementInputSelectView_CheckBoxAgreement,#ControlGroupSelectChangeView_AgreementInputSelectChangeView_CheckBoxAgreement").click(function(){$("#validationErrorContainerReadAlong").hide();$("#validationErrorContainerReadAlongIFrame").hide();});};a.addFareCategoryDisplayEvents=function(){for(j=1;j<=2;j++){for(i=0;i<this.fareCategories.length;i++){if($("#icon"+this.fareCategories[i].fareCategoryName+j).length>0&&$("#description"+this.fareCategories[i].fareCategoryName).length>0){$("#icon"+this.fareCategories[i].fareCategoryName+j).addClass("pointer");$("#icon"+this.fareCategories[i].fareCategoryName+j).mouseover(function(){a.FareCategoryDisplayMouseover(this);});$("#icon"+this.fareCategories[i].fareCategoryName+j).mouseout(function(){a.FareCategoryDisplayMouseout(this);});}}}};a.FareCategoryDisplayMouseover=function(c){if(!c.classList){c.classList=c.className.split(" ");}if($("#description"+c.classList[0]).length>0){var b=parseInt($("#icon"+c.classList[1]).offset().top+35)+"px";var e=parseInt($("#icon"+c.classList[1]).offset().left-70)+"px";$("#description"+c.classList[0]).css({"top":b,"left":e}).show();}};a.FareCategoryDisplayMouseout=function(b){if(!b.classList){b.classList=b.className.split(" ");}if(b.classList){if($("#description"+b.classList[0]).length>0){$("#description"+b.classList[0]).hide();}}};a.initJourneyInfoContainers=function(){var b=0;var c=this.journeyInfoList;var e=null;for(b=0;b<c.length;b+=1){e=new SKYSALES.Class.JourneyInfo();e.init(c[b]);a.journeyInfoArray[a.journeyInfoArray.length]=e;}};a.getPriceItineraryInfo=function(){if(undefined!==SKYSALES.taxAndFeeInclusiveDisplayDataRequestHandler){var b=$("#selectMainBody div[class^='availabilityInputContent'] .rgMasterTable tr td[class^='resultFareCell'] div[class^='resultFare'] div[id^='fareRadio'] :radio[checked]");var c=[];$(b).each(function(e){var f=$(this).val().split("@");c[e]=f[0];});SKYSALES.taxAndFeeInclusiveDisplayDataRequestHandler(c,b.length,a.marketCount,a.hideMarketIndex,a.taxAndFeeProgressMessage,a.incompleteFareSelection);SKYSALES.fareRuleHandler(c,b.length,a.culture);SKYSALES.dgrGoodsNotify(c,b.length,a.culture);}};a.updateFareInfo=function(){var b=$("#selectMainBody div[class^='availabilityInputContent'] .rgMasterTable tr td[class^='resultFareCell'] div[class^='resultFare'] div[id^='fareRadio'] :radio[checked]");if($("#agreementInput").is(":hidden")){$("#agreementInput").show();var c=$("#ControlGroupSelectView_AgreementInputSelectView_CheckBoxAgreement");if(c.length>0){SKYSALES.Util.setAttribute(c,"required","true");}else{c=$("#ControlGroupSelectChangeView_AgreementInputSelectChangeView_CheckBoxAgreement");if(c.length>0){SKYSALES.Util.setAttribute(c,"required","true");}}}$(b).each(function(m){var t=$(this).val().split("@");var s=t[0].split("~");var f=new Date();var r=new Date();var l;if(a.hideMarketIndex==""){l=m;}else{if(a.hideMarketIndex==1){l=0;}else{l=1;}}a.fareClasses[l]=this.getAttribute("productClass");a.departureDates[l]=new Date(t[1]);var q=a.cutOffTime;if(a.changeLimits.length>0&&a.cutOffTimeOverRide!=true){q=parseInt(a.changeLimits[l].changeLimit);}r.setHours(f.getHours()+q+(f.getTimezoneOffset()/60));a.isWithinCutOffHours[l]=false;if((a.departureDates[l]<r)&&((a.hideMarketIndex=="")||(a.hideMarketIndex!=l))){a.isWithinCutOffHours[l]=true;if(q>a.mostRestrictiveCutOff){a.mostRestrictiveCutOff=q;}}var e=a.departureDates[l].getTime()-f.getTime();e=Math.ceil(e/(1000*60));a.isWithinTimeLimit[l]=false;if(e!=NaN){if((e<=a.WithinTimeLimit)&&((a.hideMarketIndex=="")||(a.hideMarketIndex!=l))){a.isWithinTimeLimit[l]=true;}}});a.update24HrCheckbox();a.updateCutOffHrNote();if($(".bookingnaHL").length>0){$(".operated-info").hide();$("#agreementInput").hide();$("#SpecialNeedssection").hide();}};a.update24HrCheckbox=function(){if(a.isNewBooking=="false"){var b=true;b=(!a.isWithinCutOffHours[0])&&(!a.isWithinCutOffHours[1]);if(b==true){$("#"+a.agreement24HrsId).hide();}else{$("#"+a.agreement24HrsId).show();}}};a.checkIfHiFlyer=function(e){var b=a.isFlightChange==true?(a.hiflyerFares!=null&&a.hiflyerFares.length>0):false;if(!b){return true;}for(var c=0;c<a.hiflyerFares.length;c++){if(a.hiflyerFares[c]==e){return true;}}return false;};a.updateCutOffHrNote=function(){var e=true;var c=false;if(a.hideMarketIndex=="0"){e=(!a.isWithinCutOffHours[1]);c=a.checkIfHiFlyer(1);}else{if(a.hideMarketIndex=="1"){e=(!a.isWithinCutOffHours[0]);c=a.checkIfHiFlyer(0);}else{e=(!a.isWithinCutOffHours[0])&&(!a.isWithinCutOffHours[1]);c=a.checkIfHiFlyer(0)&&a.checkIfHiFlyer(1);}}var b=a.isExemptedFromCutoff&&c;$("#mmbNoteCutOffHrs").css("display","none");if(!e&&b==false){$("#"+a.submitButtonId).hide();$("#agreementInputCheckbox").hide();$("#SpecialNeedssection").hide();$("#"+a.agreementCutOffHrsNoteId).html($("#"+a.agreementCutOffHrsNoteId).html().replace(/~hours~/g,a.mostRestrictiveCutOff)).show();a.mostRestrictiveCutOff=0;}else{$("#"+a.agreementCutOffHrsNoteId).hide();$("#agreementInput").show();$("#agreementInputCheckbox").show();$("#SpecialNeedssection").show();$("#"+a.submitButtonId).show();}};a.showPreselectedFares=function(b){for(var c=0;c<b.length;c+=1){if(b[c]!==null){$("#"+b[c]).click();}}};a.setPreselectedFares=function(){var r=$("#selectMainBody div[class^='availabilityInputContent'] .rgMasterTable tr td[class^='resultFareCell'] div[class^='resultFare'] div[id^='fareRadio']");var t=r.find(":radio[checked]").length;if(t===0){$("#taxAndFeeResult").html("");}else{if(t===1){$("#taxesAndFeesInclusiveDisplay_2").hide();}}var s=-1;var f=-1;var u="";var c="";var m=-1;var l=$("#"+this.clientId+"_HiddenFieldTabIndex1").val();var e=$("#"+this.clientId+"_HiddenFieldTabIndex2").val();var q=0;if($("td[class^='resultFareCell1']").length!==0){q=1;}else{if($("td[class^='resultFareCell2']").length!==0){q=2;}else{if($("td[class^='resultFareCell3']").length!==0){q=3;}else{q=4;}}}$("td[class^='resultFareCell"+q+"']",$("#fareTable1_"+l)).each(function(){var A=$(this);var v=$(this).closest("tr").height();var z=parseInt($(".resultFare"+q).css("padding-top").replace("px",""))+parseInt($(".resultFare"+q).css("padding-bottom").replace("px",""));A.children("div:first").css("height",v-z);var w=A.find(":radio[name$='market1']").attr("id");if(w){m=$.trim(A.find("div[class='price']").find("span").text());m=parseFloat(m.replace(/[^0-9\.]+/g,""));if(!isNaN(m)){if(m<s||s<0){s=m;u=w;}}}});$("#"+u).attr("checked","checked");$("td[class^='resultFareCell"+q+"']",$("#fareTable2_"+e)).each(function(){var A=$(this);var v=$(this).closest("tr").height();var z=parseInt($(".resultFare"+q).css("padding-top").replace("px",""))+parseInt($(".resultFare"+q).css("padding-bottom").replace("px",""));A.children("div:first").css("height",v-z);var w=A.find(":radio[name$='market2']").attr("id");if(w){m=$.trim(A.find("div[class='price']").find("span").text());m=parseFloat(m.replace(/[^0-9\.]+/g,""));if(!isNaN(m)){if(m<f||f<0){f=m;c=w;}}}});$("#"+c).attr("checked","checked");a.getPriceItineraryInfo();a.updateFareInfo();var b=[];b[0]=u;b[1]=c;a.showPreselectedFares(b);};a.addGetPriceItineraryInfoEvents=function(){$("#selectMainBody div[class^='availabilityInputContent'] table[id^='fareTable1'] tr td[class^='resultFareCell'] div[class^='resultFare'] div[id^='fareRadio'] :radio, #selectMainBody div[class^='availabilityInputContent'] table[id^='fareTable2'] tr td[class^='resultFareCell'] div[class^='resultFare'] div[id^='fareRadio'] :radio").click(function(){a.getPriceItineraryInfo();a.updateFareInfo();});};a.getFareCategory=function(b){var c="";for(i=0;i<a.fareCategories.length;i++){if(a.fareCategories[i].productClasses.indexOf("["+b+"]")>-1){c=a.fareCategories[i].fareCategoryName;}}return c;};a.checkInfantAge=function(){if(a.userSelectedDateTime!=null){var l=a.userSelectedDateTime[a.userSelectedDateTime.length-1].selectedFareDateTimeSchedSelect,b=a.userSelectedDateTime[0].selectedFareDateTimeSchedSelect,e=new SKYSALES.Class.TravelerAge(),c=0,f=null;if(l){for(c=0;c<a.infantArray.length;c+=1){f=a.infantArray[c];if(f){if(!e.isInfant(l,f,b)){alert(a.infantAgeText);return false;}}}}}};a.validateEvent=function(){var m=true;var l=false;var U=false;l=((a.isWithinCutOffHours[0])||(a.isWithinCutOffHours[1]));U=((a.isWithinTimeLimit[0])||(a.isWithinTimeLimit[1]));var e=$("#selectMainBody div[class^='availabilityInputContent'] .rgMasterTable");var ae=false;for(fareTableindex=0;fareTableindex<e.length;fareTableindex++){var S=$(e[fareTableindex]);if($.trim(S[0].parentNode.parentNode.parentNode.className)=="hidden"){continue;}var s=S.find("tr td[class^='resultFareCell'] div[class^='resultFare'] div[id^='fareRadio'] :radio[checked]");var B=S.find("tr");var q;for(rowindex=0;rowindex<B.length;rowindex++){q="";var I=$(B[rowindex]).find("td[class^='resultFareCell']");for(columnindex=0;columnindex<I.length;columnindex++){if($(I[columnindex]).find("div[class^='resultFare'] div[id^='fareRadio'] :radio[checked]").length>0&&columnindex<a.fareCategories.length){q=a.fareCategories[columnindex].productClasses;break;}}if(q&&q.length>0){break;}}if(s&&q&&s.length>0&&q.length>0){var aa=s[0].value;var H=q;var ag=aa.substring(aa.indexOf("|")+1,aa.length);var Q=ag.substring(0,ag.indexOf("~~")).replace(/\~/g,"");if(ag.indexOf("^")>0){var G=ag.substring(ag.indexOf("^")+1,ag.length);G=G.substring(0,G.indexOf("~~")).replace(/\~/g,"");Q=Q+"/"+G;}var ab=ag.substring(ag.indexOf("~~")+2,ag.length);var C=ab.substring(ab.indexOf("~")+1,ab.indexOf(" "));if(a.existJourney.length>0){var V=new Date(Date.parse(a.existJourney[fareTableindex].departuredate));var aj=new Date(Date.parse(C));var R=a.existJourney[fareTableindex].flightdesignator;var D="["+a.existJourney[fareTableindex].productclass+"]";if((V-aj===0)&&Q===R&&H.indexOf(D)>=0){ae=true;break;}else{ae=false;}}}}var u="";var E="";var M="";var al="";if(document.getElementById("GoDep")){u=document.getElementById("GoDep").value;}if(document.getElementById("GoArr")){E=document.getElementById("GoArr").value;}if(document.getElementById("GoDep2")){M=document.getElementById("GoDep2").value;}if(document.getElementById("GoArr2")){al=document.getElementById("GoArr2").value;}var O=u+"_"+E;var A=O+"_"+M+"_"+al;if(O!="_"){var c="";var v="";var L="";var ai="";if(document.getElementById("BackDep")){c=document.getElementById("BackDep").value;}if(document.getElementById("BackArr")){v=document.getElementById("BackArr").value;}if(document.getElementById("BackDep2")){L=document.getElementById("BackDep2").value;}if(document.getElementById("BackArr2")){ai=document.getElementById("BackArr2").value;}var N=c+"_"+v;var z=N+"_"+L+"_"+ai;var ak;var ah;var K;var ac;ak=document.getElementsByName("ControlGroupSelectChangeView$AvailabilityInputSelectChangeView$market1");ah=document.getElementsByName("ControlGroupSelectChangeView$AvailabilityInputSelectChangeView$market2");for(i=0;i<ak.length;i++){if(ak[i].checked==true){K=ak[i].value;break;}}for(i=0;i<ah.length;i++){if(ah[i].checked==true){ac=ah[i].value;break;}}var P="";var b=false,r=1;if(K!=null){if(K.indexOf("^")===-1){K=K.split("~");P=K[10+r]+"_"+K[12+r];}else{K=K.split("~");if(K.length>24){P=K[17+r]+"_"+K[19+r]+"_"+K[25+r]+"_"+K[27+r];}else{P=K[10+r]+"_"+K[12+r]+"_"+K[18+r]+"_"+K[20+r];}b=true;}}var af="";var X=false;if(ac!=null){if(ac.indexOf("^")===-1){ac=ac.split("~");af=ac[10+r]+"_"+ac[12+r];}else{ac=ac.split("~");if(ac.length>24){af=ac[17+r]+"_"+ac[19+r]+"_"+ac[25+r]+"_"+ac[27+r];}else{af=ac[10+r]+"_"+ac[12+r]+"_"+ac[18+r]+"_"+ac[20+r];}X=true;}}var W=false;var t=false;if(M!=""&&al!=""){W=true;}if(L!=""&&ai!=""){t=true;}if(W===b&&t===X){var f=false;if(K!=null){if(b===false){if(O!=P){f=true;}}else{if(A!=P){f=true;}}}if(ac!=null){if(X===false){if(N!=af){f=true;}}else{if(z!=af){f=true;}}}var T=false;if(f===true){if(K!=null){if(b===false){if(O!=P){T=true;}}else{var Z=A.split("_");var ad=P.split("_");if(Z[0]!=ad[0]&&Z[3]!=ad[3]){T=true;}}}if(ac!=null){if(X===false){if(N!=af){T=true;}}else{var Y=z.split("_");var J=af.split("_");if(Y[0]!=J[0]&&Y[3]!=J[3]){T=true;}}}}if(T===true){alert(a.differentMarketMsg);SKYSALES.RemoveLoadingBar();return false;}else{if(f===true){alert(a.differentTransferMsg);SKYSALES.RemoveLoadingBar();return false;}}}}if(ae){alert(a.changeSameFlightMessage);SKYSALES.RemoveLoadingBar();return false;}var F=$("#selectMainBody div[class^='availabilityInputContent'] .rgMasterTable tr td[class^='resultFareCell'] div[class^='resultFare'] div[id^='fareRadio'] :radio[checked]").length,w=$("#selectMainBody :visible div[class^='availabilityInputContent']").length;if(F===0||(!a.hideMarketIndex&&F<a.marketCount)||(F<w)){if($(".bookingnaHL").length>0){$("#validationErrorContainerReadAlong").hide();}alert(a.incompleteFareSelection);SKYSALES.RemoveLoadingBar();return false;}if(a.isExemptedFromCutoff==false){if(a.isNewBooking=="true"){if(l){SKYSALES.RemoveLoadingBar();return false;}}if(a.isNewBooking=="false"){if(U){return false;SKYSALES.RemoveLoadingBar();}if(l){if($("#"+a.agreement24HrsCheckboxId+":checked").length==0){alert(a.agreement24HrMessage);SKYSALES.RemoveLoadingBar();return false;}}}}if(m==true){if(a.restrictSameFareCategory=="True"){if(a.fareClasses.length>1){m=false;if(a.fareClasses[0]==a.fareClasses[1]){m=true;}else{if(a.getFareCategory(a.fareClasses[0])==a.getFareCategory(a.fareClasses[1])){m=true;}}}if(m==false){alert(a.sameCategoryMessage);SKYSALES.RemoveLoadingBar();return false;}}if(a.offloadPassengers&&a.offloadPassengerMessage&&a.offloadPassengers==="true"){if(confirm(a.offloadPassengerMessage)){return true;}else{SKYSALES.RemoveLoadingBar();return false;}}}return a.checkInfantAge();};a.GetDepartureDates=function(c){var b=[null,null],e=null,f=null;if(this.isFlightChange&&this.hideMarketIndex){f=c[0];e=new Date(this.userSelectedDateTime[this.hideMarketIndex].selectedFareDateTime);if(this.hideMarketIndex==="0"){b[1]=f;}else{b[0]=f;}b[this.hideMarketIndex]=e;return b;}return c;};a.ajaxEquipmentProperties=function(){};a.addEquipmentPropertiesAjaxEvent=function(){$(this).click(a.ajaxEquipmentProperties);};a.addEquipmentPropertiesAjaxEvents=function(){a.detailsLinks.each(a.addEquipmentPropertiesAjaxEvent);};a.init=function(){a.initJourneyInfoContainers();if(undefined!==SKYSALES.taxAndFeeInclusiveDisplayDataRequestHandler){a.setVars();if(a.preselectFares=="true"){a.setPreselectedFares();var c=$("#ControlGroupSelectView_AgreementInputSelectView_CheckBoxAgreement");if(c.length>0){SKYSALES.Util.setAttribute(c,"required","true");}else{c=$("#ControlGroupSelectChangeView_AgreementInputSelectChangeView_CheckBoxAgreement");if(c.length>0){SKYSALES.Util.setAttribute(c,"required","true");}}}else{a.updateFareInfo();$("#agreementInput").hide();var c=$("#ControlGroupSelectView_AgreementInputSelectView_CheckBoxAgreement");if(c&&c.length>0){var b=SKYSALES.Util.getAttributeValue(c,"required");if(b&&(b==="true"||b==="required")){SKYSALES.Util.removeRequiredAttribute(c);}}else{var e=$("#ControlGroupSelectChangeView_AgreementInputSelectChangeView_CheckBoxAgreement");if(e&&e.length>0){var b=SKYSALES.Util.getAttributeValue(e,"required");if(b&&(b==="true"||b==="required")){SKYSALES.Util.removeRequiredAttribute(e);}}}}a.addEvents();}};};}if(SKYSALES.Class.JourneyInfo===undefined){SKYSALES.Class.JourneyInfo=function(){var a=this;a.equipmentInfoUri="EquipmentPropertiesDisplayAjax-resource.aspx";a.key="";a.journeyContainerId="";a.activateJourneyId="";a.activateJourney=null;a.deactivateJourneyId="";a.deactivateJourney=null;a.journeyContainer=null;a.legInfoArray=[];a.clientName="EquipmentPropertiesDisplayControlAjax";a.init=function(b){this.setSettingsByObject(b);this.setVars();this.addEvents();};a.setVars=function(){a.journeyContainer=$("#"+a.journeyContainerId);a.activateJourney=$("#"+a.activateJourneyId);a.deactivateJourney=$("#"+a.deactivateJourneyId);};a.addEvents=function(){a.activateJourney.click(a.show);a.deactivateJourney.click(a.hide);};a.setSettingsByObject=function(b){var c="";for(c in b){if(a.hasOwnProperty(c)){a[c]=b[c];}}};a.showWithData=function(m){var r=$(m).html();var e=SKYSALES.Json.parse(r);var q=e.legInfo;var f=null;var c="";var u=null;var s="";var b=null;var l=0;var t=null;for(c in q){if(q.hasOwnProperty(c)){s="";f=q[c];if(f.legIndex!==undefined){u=$("#propertyContainer_"+a.key);b=f.equipmentPropertyArray;for(l=0;l<b.length;l+=1){t=b[l];s+="<div>"+t.name+": "+t.value+"</div>";}u.html(s);}}}a.journeyContainer.show("slow");};a.show=function(){var c=a.legInfoArray;var f=null;var b={};var m="";var e=0;var l=a.clientName;for(e=0;e<c.length;e+=1){f=c[e];for(m in f){if(f.hasOwnProperty(m)){b[l+"$legInfo_"+m+"_"+e]=f[m];}}}$.post(a.equipmentInfoUri,b,a.showWithData);};a.hide=function(){a.journeyContainer.hide();};return a;};
/*!
This file is part of the Navitaire NewSkies application.
Copyright (C) Navitaire.  All rights reserved.
*/
}if(!SKYSALES.Class.SsrPassengerInput){SKYSALES.Class.SsrPassengerInput=function(){var b=SKYSALES.Class.SkySales();var a=SKYSALES.Util.extendObject(b);a.ssrFormArray=null;a.ssrFeeArray=null;a.errorMsgOverMaxPerPassenger="There has been an error";a.ssrButtonIdArray=null;a.ssrButtonArray=null;a.buttonTrackId="";a.buttonTrack=null;a.init=function(c){this.setSettingsByObject(c);this.setVars();this.addEvents();$("table.ssrSoldContainer :input",this.container).attr("disabled","disabled");};a.setVars=function(){a.buttonTrack=$("#"+this.buttonTrackId);a.ssrButtonIdArray=this.ssrButtonIdArray||[];var l=[];var e=0;var c=null;var f="";for(e=0;e<this.ssrButtonIdArray.length;e+=1){f=this.ssrButtonIdArray[e];c=$("#"+f);if(c.length>0){l[l.length]=c;}}a.ssrButtonArray=l;};a.addEvents=function(){this.addButtonClickedEvents();};a.addButtonClickedEvents=function(){var e=0;var c=null;for(e=0;e<this.ssrButtonArray.length;e+=1){c=this.ssrButtonArray[e];c.click(this.updateButtonTrackHandler);}};a.updateButtonTrackHandler=function(){a.buttonTrack.val(this.id);};a.setSettingsByObject=function(m){b.setSettingsByObject.call(this,m);var l=0;var f=this.ssrFormArray||[];var q=null;for(l=0;l<f.length;l+=1){q=new SKYSALES.Class.SsrForm();q.index=l;q.ssrPassengerInput=this;q.init(f[l]);f[l]=q;}var e=this.ssrFeeArray||[];var c=null;for(l=0;l<e.length;l+=1){c=new SKYSALES.Class.SsrFormFee();c.index=l;c.ssrPassengerInput=this;c.init(e[l]);e[l]=c;}};a.deactivateSsrFormNotes=function(){var e=0;var c=this.ssrFormArray;var f=null;for(e=0;e<c.length;e+=1){f=c[e];f.deactivateNoteDiv();}};return a;};SKYSALES.Class.SsrPassengerInput.createObject=function(a){SKYSALES.Util.createObject("ssrPassengerInput","SsrPassengerInput",a);};}SKYSALES.Class.SsrForm=function(){var a=SKYSALES.Class.SkySales();var b=SKYSALES.Util.extendObject(a);b.maximumDropDownLimit=0;b.ssrPassengerId="";b.ssrPassenger=null;b.ssrCodeId="";b.ssrCode=null;b.ssrQuantityId="";b.ssrQuantity=null;b.ssrNoteId="";b.ssrNote=null;b.ssrNoteIframeId="";b.ssrNoteIframe=null;b.ssrNoteCloseId="";b.ssrNoteClose=null;b.ssrNoteDivId="";b.ssrNoteDiv=null;b.ssrNoteImageId="";b.ssrNoteImage=null;b.ssrNoteCancelId="";b.ssrNoteCancel=null;b.ssrFlightId="";b.ssrFlight=null;b.ssrAmountId="";b.ssrAmount=null;b.ssrCurrencyId="";b.ssrCurrency=null;b.index=-1;b.ssrPassengerInput=null;b.init=function(c){this.setSettingsByObject(c);this.setVars();this.addEvents();this.updateSsrAmount();};b.setVars=function(){b.ssrNote=$("#"+this.ssrNoteId);b.ssrNoteDiv=$("#"+this.ssrNoteDivId);b.ssrNoteClose=$("#"+this.ssrNoteCloseId);b.ssrNoteCancel=$("#"+this.ssrNoteCancelId);b.ssrNoteImage=$("#"+this.ssrNoteImageId);b.ssrNoteIframe=$("#"+this.ssrNoteIframeId);b.ssrQuantity=$("#"+this.ssrQuantityId);b.ssrPassenger=$("#"+this.ssrPassengerId);b.ssrCode=$("#"+this.ssrCodeId);b.ssrCurrency=$("#"+this.ssrCurrencyId);b.ssrFlight=$("#"+this.ssrFlightId);b.ssrAmount=$("#"+this.ssrAmountId);};b.addEvents=function(){this.addNoteEvents();this.addQuantityEvents();this.addSSRCodeEvents();this.addFlightEvents();};b.addFlightEvents=function(){this.ssrFlight.change(this.updateSsrAmountHandler);};b.updateSsrQuantityHandler=function(){b.updateSsrQuantity();};b.updateSsrAmountHandler=function(){b.updateSsrAmount();};b.addSSRCodeEvents=function(){this.ssrCode.change(this.updateSsrQuantityHandler);this.ssrCode.change(this.updateSsrAmountHandler);};b.addQuantityEvents=function(){this.ssrQuantity.change(this.updateSsrAmountHandler);this.ssrQuantity.blur(this.updateSsrAmountHandler);};b.updateSsrAmount=function(){var s=this.ssrAmount;var v=SKYSALES.Util.convertToLocaleCurrency("0.00");s.val(v);var u=this.ssrPassenger.val();var q=this.ssrCode.val();var l=this.ssrQuantity.val();l=$.trim(l);var w=/^[0-9]+$/;var m=0;var t=this.ssrPassengerInput;var c=t.ssrFeeArray;var e=null;var f="";var r=0;if(w.test(l)){f=this.ssrFlight.val();for(m=0;m<c.length;m+=1){e=c[m];if((f==="all")||(f===e.segmentKey)){if((u===e.passengerNumber)&&(q===e.ssrCode)){r+=(e.amount*l);}}}v=SKYSALES.Util.convertToLocaleCurrency(r);s.val(v);}else{this.ssrQuantity.val(0);}};b.updateSsrQuantity=function(){var w=this.maximumDropDownLimit;w=window.parseInt(w,10);var v=this.ssrPassenger.val();var s=this.ssrCode.val();var q=this.ssrFlight.val();var t=0;var r=0;var u=this.ssrPassengerInput;var e=u.ssrFeeArray;var f=null;var m=this.ssrQuantity.val();m=parseInt(m,10);var z=0;var c=null;var l=this.ssrQuantity.get(0);for(t=0;t<e.length;t+=1){f=e[t];if((q==="all")||(q===f.segmentKey)){if((v===f.passengerNumber)&&(s===f.ssrCode)){z=parseInt(f.maxPerPassenger,10);if(z===0){z=w;z=parseInt(z,10);if(m>=z){z=m;z=z+1;}}if(l.options){while(l.options.length>0){l.options[0]=null;}for(r=0;r<=z;r+=1){c=new window.Option(r,r);l.options[r]=c;if(m===r){this.ssrQuantity.val(r);}}}if(m>z){this.ssrQuantity.val(z);alert(this.getErrorMsgOverMaxPerPassenger());}else{this.ssrQuantity.val(m);}}}}};b.getErrorMsgOverMaxPerPassenger=function(){var c="";c=this.ssrPassengerInput.errorMsgOverMaxPerPassenger;return c;};b.clearAndDeactivateNoteDiv=function(){var e=this.ssrNote;var c=e.is(":disabled");if(c===false){e.val("");}this.deactivateNoteDiv();};b.deactivateNoteDiv=function(){this.ssrNoteDiv.hide();this.ssrNoteIframe.hide();};b.activateNoteDiv=function(){this.ssrPassengerInput.deactivateSsrFormNotes();var l=this.ssrNoteImage.get(0);var m=SKYSALES.Dhtml();var f=m.getX(l);var e=m.getY(l);this.ssrNoteDiv.css({"top":e+"px","left":f+"px"}).show();this.ssrNoteIframe.css({"top":e+"px","left":f+"px"}).show();var c=this.ssrNote.is(":disabled");if(c===false){this.ssrNote.click();}};b.ssrNoteCancelHandler=function(){b.clearAndDeactivateNoteDiv();};b.ssrNoteCloseHandler=function(){b.deactivateNoteDiv();};b.ssrNoteImageHandler=function(){b.activateNoteDiv();};b.addNoteEvents=function(){this.ssrNoteCancel.mouseup(this.ssrNoteCancelHandler);this.ssrNoteClose.mouseup(this.ssrNoteCloseHandler);this.ssrNoteImage.mouseup(this.ssrNoteImageHandler);};return b;};SKYSALES.Class.SsrFormFee=function(){var b=SKYSALES.Class.SkySales();var a=SKYSALES.Util.extendObject(b);a.journeyIndex=-1;a.segmentIndex=-1;a.segmentKey="";a.passengerNumber=-1;a.ssrCode="";a.feeCode="";a.amount=0;a.currencyCode="";a.maxPerPassenger=0;a.index=-1;a.ssrPassengerInput=null;return a;};SKYSALES.taxAndFeeInclusiveDisplayDataRequestHandler=function taxAndFeeInclusiveDisplayDataRequestHandler(t,r,c,a,b,m){var e=",";var f={flightKeys:t.join(e),numberOfMarkets:r,keyDelimeter:e};var l=0;var s=function(){var z=$("taxAndFeeInclusiveTotal");var v=$("allUpPricing");if(SKYSALES.common){SKYSALES.common.stripeTables(v);}var u=new SKYSALES.Class.ToggleView();var w={"elementId":"allUpPricing","hideId":"closeTotalPrice","showId":"taxAndFeeInclusiveTotal"};u.init(w);var A=function(){v.toggle();};if(z&&v){z.click(A);}};var q=function(u){if(u){u="<div>"+u+"</div>";if(window.$){$("#taxAndFeeResult").html(u);$("#taxAndFeeInclusiveDivHeader").before("<div id='tempDiv'></div>");$("#taxAndFeeInclusiveDivHeader").remove();$("#taxAndFeeInclusiveDivBody").remove();$("#tempDiv").after($(u).find("#taxAndFeeInclusiveDivHeader"));$("#taxAndFeeInclusiveDivHeader").after($(u).find("#taxAndFeeInclusiveDivBody"));$("#tempDiv").remove();if(r===1){$("table#taxesAndFeesInclusiveDisplay_2").hide();}}}else{inProcessHTMLString='<div id="taxAndFeeInclusiveDivBody" class="right-col-sidebar" style="padding: 0 5px 10px 0;">'+selectedFareError+"</div></div>";$("#taxAndFeeInclusiveDivBody").remove();$("#taxAndFeeInclusiveDivHeader").after(inProcessHTMLString);}s();};if(a!=""){l=1;}if(r===parseInt(c)-l){$.get("TaxAndFeeInclusiveDisplayAjax-resource.aspx",f,q);$("#taxAndFeeNoFaresSelected").remove();inProcessHTMLString='<div id="taxAndFeeInclusiveDivBody" class="right-col-sidebar" style="padding: 0 5px 10px 0;">'+b+'<div id="waitImg"></div></div>';$("#taxAndFeeInclusiveDivBody").remove();$("#taxAndFeeInclusiveDivHeader").after(inProcessHTMLString);}};if(!SKYSALES.Class.TravelerInputContainer){SKYSALES.Class.TravelerInputContainer=function(){var e=SKYSALES.Class.SkySales(),a=SKYSALES.Util.extendObject(e);a.submitButtonClicked=false;a.menuSectionId="";a.menuSection=null;a.menuListId="";a.menuList=null;a.mainTravelerId="";a.mainTraveler=null;a.travelerInputArray=null;a.submitButtonId="";a.submitButton=null;a.continueButtonId="";a.continueButton=null;a.confirmText="";a.linkButtonSkipId="";a.linkButtonSkip=null;a.nextButtonId="";a.nextButton=null;a.nextButtons=null;a.disableNames=null;a.disableContactNames=null;a.infantText="";a.infantPreText="";a.childText="";a.childPreText="";a.scpText="";a.PQAvailableNationality="";a.PQNationalityErrorText="";a.adultPreText="";a.adultText="";a.scpAgeText="";a.infantFutureBirthDateErrorPreText="";a.infantFutureBirthDateErrorPostText="";a.returnDate="";a.departDate="";a.passportExpDays="";a.adultPassportMsgText="";a.adultPassportMsgPreText="";a.childPassportMsgText="";a.childPassportMsgPreText="";a.infantPassportMsgText="";a.infantPassportMsgPreText="";a.adultTravelDocCountry="";a.childTravelDocCountry="";a.infantTravelDocCountry="";a.adultTravelDocInvalidDate="";a.childTravelDocInvalidDate="";a.infantTravelDocInvalidDate="";a.duplicateAdultTextPre="";a.duplicateAdultText="";a.friendsArray=null;a.addFriendsButtonId="";a.refreshFriendsButtonId="";a.addFriendsButton=null;a.refreshFriendsButton=null;a.addFriendsDiv="";a.addFriendsErrorText="";a.noTickedFriendsText="";a.continueButtonText="";a.submitButtonText="";a.paxTypesArray=null;a.changeCurrencyPrompter="";a.unmatchedPaxTypeErrorText="";a.passportNumber="";a.passportExpDate=null;a.passportExpMonth=null;a.passportExpYear=null;a.offloadPassengers="";a.offloadPassengerMessage="";a.flightChangeNotice="";a.travelDocRadioButtonName="";a.travelDocTypeId="";a.uncompletedTravelDocText="";a.insurancecontainerId="";a.dropdownSelectCountry="";a.insurancecontainer=null;var m=2;a.init=function(q){this.setSettingsByObject(q);this.setVars();this.addEvents();this.triggerAddOnControls();a.submitButton.attr("disabled","disabled").addClass("buttonDisabled").hide();$(".formoreaddons").hide();a.nextButton.show();if(a.travelerInputArray.length>0){for(i=0;i<a.travelerInputArray.length;i+=1){a.travelerInputArray[i].travelerInputArray=this.travelerInputArray;a.travelerInputArray[i].hideContent();if(a.travelerInputArray[i].paxType=="ADT"){var s=$(a.travelerInputArray[i].dropdownGender);SKYSALES.Util.removeRequiredAttribute(s);}if(a.travelerInputArray[i].paxType=="CHD"){var r=$(a.travelerInputArray[i].dropdownTitle);SKYSALES.Util.removeRequiredAttribute(r);}if(a.travelerInputArray[i].contentId=="content_0"||(a.addFriendsDiv!=null&&a.travelerInputArray[i].contentId==a.addFriendsDiv)){if(this.disableContactNames!=null&&this.disableContactNames!=""&&a.travelerInputArray[i].contentId=="content_0"){a.travelerInputArray[i].disableTextFields();}else{continue;}}else{if(this.disableNames!=null&&this.disableNames!=""){a.travelerInputArray[i].disableTextFields();}}}a.travelerInputArray[0].showContent();}if(this.changeCurrencyPrompter!=""){alert(this.changeCurrencyPrompter);}};a.setVars=function(){a.menuSection=$("#"+this.menuSectionId);a.menuList=$("#"+this.menuListId);a.mainTraveler=$("#"+this.mainTravelerId);a.submitButton=$("input[id='"+this.submitButtonId+"']");if(a.submitButtonText!=""){a.submitButton.attr("value",a.submitButtonText);}a.addFriendsButton=$("input[id='"+this.addFriendsButtonId+"']");a.continueButton=$("#"+this.continueButtonId);a.linkButtonSkip=$("#"+this.linkButtonSkipId);a.nextButton=$("input[type='button'][id='"+this.nextButtonId+"']");a.refreshFriendsButton=$("input[id='"+this.refreshFriendsButtonId+"']");a.passportNumber=$("#"+this.passportNumber+" input[id=TextBoxDocumentNumber]");a.passportExpDate=$("#"+this.passportExpDate+" select[id=DropDownListDocumentDateDay]");a.passportExpMonth=$("#"+this.passportExpMonth+" select[id=DropDownListDocumentDateMonth]");a.passportExpYear=$("#"+this.passportExpYear+" select[id=DropDownListDocumentDateYear]");a.insurancecontainer=$("#"+this.insurancecontainerId);};a.addEvents=function(){a.submitButton.click(a.submitButtonHandler);a.submitButton.click(a.pickSeatHandler);a.nextButton.click(a.nextTabHandler);a.addFriendsButton.click(a.addFriends);a.refreshFriendsButton.click(a.clearAllFriends);if(a.confirmText==null||a.confirmText==""){a.continueButton.attr("value",a.continueButtonText);a.continueButton.click(a.pickSeatHandler);}else{a.continueButton.click(a.confirmPageHandler);}a.linkButtonSkip.click(a.submitButtonHandler);a.linkButtonSkip.click(a.pickSeatHandler);};a.submitButtonHandler=function(q){$("#currentTab").text(true);};a.triggerAddOnControls=function(){var v=$("input:checkbox:checked"),t=$("input:radio:checked"),s=$('div[class*="SSRInput"]').find(".dynamic"),w=$(".ucmealpanel-item-sf-count-input[value!=0]"),u=$(".uccomfortkitpanel-item-sf-count-input[value!=0]"),r=$(".ucdutyfreepanel-item-sf-count-input[value!=0]"),q=$('select[id*="DropDownSkyBus"]');s.bind("change",function(){SKYSALES.Util.updatePriceDisplay($(this));});w.bind("change",function(){SKYSALES.Util.updatePriceDisplay($(this));});u.bind("change",function(){SKYSALES.Util.updatePriceDisplay($(this));});u.bind("change",function(){SKYSALES.Util.updatePriceDisplay($(this));});r.bind("change",function(){SKYSALES.Util.updatePriceDisplay($(this));});w.trigger("change");u.trigger("change");r.trigger("change");v.trigger("change");t.trigger("change");q.trigger("change");};a.pickSeatHandler=function(D){$(this).removeAttr("onclick");var z=a.validateForms();if(z!=false){$("[disabled]")?$("[disabled]").removeAttr("disabled"):"";SKYSALES.DisplayLoadingBar();}showMsg=false;var w=null;for(i=0;i<a.travelerInputArray.length;i+=1){w=$("#"+a.travelerInputArray[i].contentId).find(".validationError");if(w!=null&&w.length>0){var A=$(w[0]);var s=$("#validationErrorContainerReadAlong");var B=A.position().top,v=A.position().left,u=A.width(),r=A.height(),G=getCssValue("margin-top",A),t=getCssValue("padding-top",A),E=getCssValue("margin-bottom",A),q=getCssValue("padding-bottom",A),F=getCssValue("margin-left",s);var H=v+u+F,C=B-(r+G+t+E+q);if(A.attr("id").indexOf("CONTROLGROUP_OUTERTRAVELER_CONTROLGROUPTRAVELER_PassengerInputTravelerView_complimentaryMeal")<0){if($("#culture").text()!="ar-SY"){s.css({top:C,left:H});}}break;}}return z;};getCssValue=function(s,r){var t=0,q=r.css(s);if(q){q=q.replace("px","");if(!isNaN(q)){t=parseInt(q);}}return t;};a.addFriends=function(){var t=$("#"+a.addFriendsDiv+" :checked").length;var r=0;for(r=0;r<a.paxTypesArray.length;r++){a.paxTypesArray[r].remainingTabs=a.countPaxType(a.paxTypesArray[r].paxType);}var q=a.checkPaxTypeCount();if(t>0&&q){if($("#"+a.addFriendsDiv+" :checked").length>0){a.clearAllFriends();SKYSALES.RemoveLoadingBar();var s=0;$("#"+a.addFriendsDiv+" :checked").each(function(){var u=parseInt($(this).val());var v=a.uploadFriend(u);m=s==0?v:(m>v?v:m);s++;});a.travelerInputArray[m].toggleMenuHandler();}}else{if(t==0){alert(a.noTickedFriendsText);}else{if(t>(a.travelerInputArray.length-2)){alert(a.addFriendsErrorText);}else{if(!q){alert(a.unmatchedPaxTypeErrorText);}}}}};a.checkPaxTypeCount=function(){var r=0;for(r=0;r<a.paxTypesArray.length;r++){var v=a.paxTypesArray[r].paxType;var u=0;var w=false;var q=$("input[paxType="+v+"]:checked").length;if(q>0){var t=a.paxTypesArray[r].codesMatchArray;for(u=0;u<t.length;u++){var s=a.searchPaxTypeIndex(t[u].typeCode);if(q<=a.paxTypesArray[s].remainingTabs){w=true;a.paxTypesArray[s].remainingTabs-=q;break;}else{if(a.paxTypesArray[s].remainingTabs>0&&q>a.paxTypesArray[s].remainingTabs){q-=a.paxTypesArray[s].remainingTabs;a.paxTypesArray[s].remainingTabs=0;}}}if(w==false){return false;}}}return true;};a.searchPaxTypeIndex=function(q){var r=0;for(r=0;r<a.paxTypesArray.length;r++){if(a.paxTypesArray[r].paxType==q){return r;}}};var c=function(u,q){var t=0;for(t=0;t<a.paxTypesArray.length;t++){if(a.paxTypesArray[t].paxType==u){var s=0;var r=a.paxTypesArray[t].codesMatchArray;for(s=0;s<r.length;s++){var v=a.findPaxType(r[s].typeCode,q);if(v!=null){return v;}}break;}}return a.findPaxType(a.paxTypesArray[0].paxType,q);};var b=function(s){var q=0;var r=0;for(q=0;q<a.friendsArray.length;q++){if(a.friendsArray[q].sequence==s){r=q;break;}}return r;};a.clearAllFriends=function(){var q=0;SKYSALES.DisplayLoadingBar();for(q=2;q<a.travelerInputArray.length;q++){a.travelerInputArray[q].clearFriend();}};a.uploadFriend=function(t){var u=t>0?this.friendsArray[b(t)]:contactData;var s=t>0?c(u.paxType,false):c("ADT",false);var v=this.travelerInputArray[s];var q=t>0?u.customerNumber:u.ff;v.hasFriend=true;v.customerNumber.val(q);v.travelerName.firstName.val(u.firstName);v.travelerName.lastName.val(u.lastName);v.travelerName.writeNameHandler();v.dropdownTitle.val(u.title);v.dropdownNationality.val(u.nationality);if(u.gender!="NaN"&&(parseInt(u.gender)==2||parseInt(u.gender)==1)){v.dropdownGender.val(u.gender);}else{v.dropdownTitle.change();}v.dropdownBirthDateMonth.val(u.bdayMonth);v.dropdownBirthDateDay.val(u.bdayDay);v.dropdownBirthDateYear.val(u.bdayYear);var r=v.dropdownTitle.val();if(!r){v.dropdownTitle.val("CHD");}addNameChangeEvent=function(){var A=$("[id$=PassengerInputTravelerView_TextBoxCustomerNumber_0]");if(A.attr("disabled")!==undefined){var z=$("[id$=ContactInputTravelerView_TextBoxFirstName]").val();var B=$("[id$=ContactInputTravelerView_TextBoxLastName]").val();var C=$("[id$=PassengerInputTravelerView_TextBoxFirstName_0]").val();var w=$("[id$=PassengerInputTravelerView_TextBoxLastName_0]").val();if(z!=C||C!=w){A.removeAttr("disabled");}}};if(t==0&&v.customerNumber.val().length>0){v.customerNumber.attr("disabled","true");v.travelerName.firstName.change(addNameChangeEvent);v.travelerName.lastName.change(addNameChangeEvent);}else{if(v.customerNumber.attr("id").substring(v.customerNumber.attr("id").lastIndexOf("_")+1)=="0"&&t!=0){v.customerNumber.removeAttr("disabled");}}return s;};a.validateForms=function(){var s=this.continueButton.get(0);if(s==null){s=this.submitButton.get(0);}var r=a.validateInfants();if(r){var q=validate(s);if(!q){this.customValidateHandler();return false;}if(this.offloadPassengers&&this.offloadPassengerMessage&&this.offloadPassengers==="true"){return confirm(this.offloadPassengerMessage);}return q;}else{return false;}return true;};a.validateInfants=function(){var q=0;var r=0;for(q=0;q<a.travelerInputArray.length;q++){if((a.travelerInputArray[q].paxType=="ADT"||a.travelerInputArray[q].paxType=="INF"||a.travelerInputArray[q].paxType=="SCP"||a.travelerInputArray[q].paxType=="PWD"||a.travelerInputArray[q].paxType=="CHD")&&!f(q)){return false;}}return true;};a.confirmPageHandler=function(){var q=a.confirmPage();return q;};a.confirmPage=function(){var r=window.confirm(this.confirmText);if(r){document.getElementById(this.submitButtonId).click();return false;}else{var q=this.validateForms();if(q!=false){SKYSALES.DisplayLoadingBar();}return q;}};a.customValidateHandler=function(){var r=null;for(i=0;i<a.travelerInputArray.length;i+=1){r=$("#"+a.travelerInputArray[i].contentId).find("input.validationError, select.validationError, radio.validationError");if(r!=null&&r.length>0){var q=$("#list_"+i+"").hasClass("selected");if(!q){a.travelerInputArray[i].toggleMenuHandler();r[0].focus();}break;}}};a.nextTabHandler=function(){var t=null;var s=0,r=$('div[id="'+a.travelDocTypeId+'"]');for(s=0;s<a.travelerInputArray.length;s+=1){t=a.travelerInputArray[s];if(t.selectedTab==0){var q=true;if($("div[id*='"+t.contentId+"']").find("select[id*=DropDownListNationality]").length>0){q=SKYSALES.validateNationality($("div[id*='"+t.contentId+"']").find("select[id*=DropDownListNationality]"),true,false,true);}if(f(s)&&validateBySelector("div[id='"+t.contentId+"']")&&q){t.travelerInputArray[s].hideContent();a.travelerInputArray[s+1].showContent();$("html, body").animate({scrollTop:0},0);if(s+1==a.travelerInputArray.length-1){a.submitButton.removeAttr("disabled").removeClass("buttonDisabled").show();$(".formoreaddons").show();a.nextButton.hide();SKYSALES.validateNationality(null,false,true,false);}if(a.travelerInputArray[s+1].paxType!=""){a.insurancecontainer.show();}else{a.insurancecontainer.hide();}}break;}}return false;};a.checkDaysOfMonth=function(s,v,t){t=window.parseInt(t,10);v=window.parseInt(v,10);s=window.parseInt(s,10);var u=false;var q=-1;var r=null;if(t&&v&&s){v-=1;if((t%4)==0){q=29;}else{q=28;}r=[31,q,31,30,31,30,31,31,30,31,30,31];if(s<=r[v]){u=true;}}return u;};var f=function(r){var A=0;var u=0;var B=a.findPaxType("INF",null);var s=a.findPaxType("CHD",null);var t=0;var v=0;var w=a.findPaxType("SCP",null);var z=a.findPaxType("ADT",null);var q="";if(q!=""){a.travelerInputArray[r].toggleMenuHandler();alert(q);return false;}return true;};a.findPaxType=function(t,r){var q=null;var u=0;for(u=0;u<a.travelerInputArray.length;u++){var s=r!=null?a.travelerInputArray[u].paxType==t&&a.travelerInputArray[u].hasFriend==r:a.travelerInputArray[u].paxType==t;if(s==true){q=u;break;}}return q;};var l=function(t){var r=/^\d{1,4}[\.|\/|-]\d{1,2}[\.|\/|-]\d{1,4}$/,u=null,q=null;if(r.test(t)){t=t.replace(/0*(\d*)/gi,"$1");u=t.split(/[\.|\/|-]/);q=new Date(u[2],u[1],u[0]);if(q.getDate()!=u[0]||q.getMonth()!=u[1]||q.getFullYear()!=u[2]){return false;}else{return true;}}else{return false;}};a.countPaxType=function(r){var q=0;var s=0;for(s=2;s<a.travelerInputArray.length;s++){if(a.travelerInputArray[s].paxType==r){q++;}}return q;};a.setSettingsByObject=function(s){e.setSettingsByObject.call(this,s);var r=0;var u=this.travelerInputArray||[];var q=null;for(r=0;r<u.length;r+=1){q=new SKYSALES.Class.TravelerInput();q.travelDocRadioButtonName=this.travelDocRadioButtonName;q.travelDocTypeId=this.travelDocTypeId;q.init(u[r]);u[r]=q;}if(this.friendsArray!=null){r=0;var t=null;for(r=0;r<this.friendsArray.length;r+=1){t=new SKYSALES.Class.Friend();t.init(this.friendsArray[r]);}}a.travelerInputArray=u;};return a;};SKYSALES.Class.TravelerInputContainer.createObject=function(a){SKYSALES.Util.createObject("travelerInputContainer","TravelerInputContainer",a);};}if(!SKYSALES.Class.TravelerInput){SKYSALES.Class.TravelerInput=function(){var b=SKYSALES.Class.SkySales(),a=SKYSALES.Util.extendObject(b);a.linkId="";a.link=null;a.listId="";a.list=null;a.contentId="";a.content=null;a.tabId="";a.tab=null;a.tabStart=0;a.travelerInputArray=null;a.travelerName=null;a.travelerAge=null;a.travelerCompany=null;a.selectedTab=0;a.imThisTravellerCheckboxId="";a.imThisTravellerCheckbox=null;a.paxType="";a.paxNumber="";a.docType=null;a.passportNumber=null;a.passportCountry=null;a.passportExpDate=null;a.passportExpMonth=null;a.passportExpYear=null;a.submitButtonId="";a.submitButton=null;a.linkButtonSkipId="";a.linkButtonSkip=null;a.nextButtonId="NextButton";a.nextButton=null;a.dropdownTitleId="";a.dropdownGenderId="";a.dropdownTitle=null;a.dropdownGender=null;a.dropdownNationalityId="";a.dropdownNationality=null;a.dropdownBirthDateMonthId="";a.dropdownBirthDateMonth=null;a.dropdownBirthDateDayId="";a.dropdownBirthDateDay=null;a.dropdownBirthDateYearId="";a.dropdownBirthDateYear=null;a.passengerGivenNameId="";a.passengerGivenName=null;a.passengerSurnameId="";a.passengerSurname=null;a.travelDocRadioButtonName="";a.travelDocRadioButtons=null;a.travelDocTypeId="";a.customerNumberId="";a.customerNumber=null;a.hasFriend=false;a.setTabIndexes=function(){a.link.attr("tabindex",a.tabStart);var c=$("#"+a.contentId+" :input:visible, select:visible, :radio:visible");for(i=0;i<c.length;i++){if($(c[i])&&$(c[i]).attr("tabindex")==0){$(c[i]).attr("tabindex",a.tabStart+i+1);c[i].setAttribute("tabindex",a.tabStart+i+1);}}};a.paxCount="";a.insurancecontainerId="";a.dropdownSelectCountry="";a.insurancecontainer=null;a.init=function(v){this.setSettingsByObject(v);this.setVars();this.addEvents();setTimeout(a.setTabIndexes,2000);var e=null,l=$("#"+a.contentId).find("select[id*=DropDownListBirthDateMonth]"),r=$("#"+a.contentId).find("select[id*=DropDownListBirthDateDay]"),m=$("#"+a.contentId).find("select[id*=DropDownListBirthDateYear]");e=new SKYSALES.Class.TravelerAge();e.init(l,r,m);a.travelerAge=e;if(this.paxType=="INF"){a.travelerCompany=$("#"+a.contentId).find("select[id*=DropDownListAssign]");}if($("#"+a.contentId).find("input:text[id*=TextBoxFirstName]").val()==""){$("#"+a.contentId).find("input:text[id*=TextBoxFirstName]").val($("#"+a.contentId).find("input:text[id*=TextBoxLastName]").val());}var q=null,t=$("#"+a.contentId).find("input:text[id*=TextBoxFirstName]"),u=$("#"+a.contentId).find("input:text[id*=TextBoxLastName]"),s=$("#"+a.contentId).find("select:[id*=DropDownListTitle]"),f=a.tab;if(t.length>0||u.length>0){q=new SKYSALES.Class.TravelerName();q.init(t,u,s,f);a.travelerName=q;}var c=$("#"+a.contentId).find("select[id*=DropDownListNationality]");if(c.length>0){a.populateCountryInput(c);}};a.disableTextFields=function(){a.travelerName.disable();a.dropdownBirthDateDay.attr("disabled",true);a.dropdownBirthDateMonth.attr("disabled",true);a.dropdownBirthDateYear.attr("disabled",true);if(a.customerNumber.length>0&&a.customerNumber.val().length>0){a.customerNumber.attr("disabled",true);}};a.populateCountryInput=function(f){var l=$("#"+f[0].id+"_value").val();var c=SKYSALES.Util.getResource().countryInfo.CountryList;if(c.length==0||c[0].code!=""){c.unshift({InternationalDialCode:"",code:"",name:a.dropdownSelectCountry});}var e={"selectBox":f,"objectArray":c,"selectedItem":l,"showCode":false};SKYSALES.Util.populateSelect(e);};a.setVars=function(){a.link=$("#"+this.linkId);a.list=$("#"+this.listId);a.content=$("#"+this.contentId);a.tab=$("#"+this.tabId);a.imThisTravellerCheckbox=$("#"+this.imThisTravellerCheckboxId);a.dropdownTitle=$("#"+this.dropdownTitleId);a.dropdownGender=$("#"+this.dropdownGenderId);a.dropdownBirthDateMonth=$("#"+this.dropdownBirthDateMonthId);a.dropdownBirthDateDay=$("#"+this.dropdownBirthDateDayId);a.dropdownBirthDateYear=$("#"+this.dropdownBirthDateYearId);a.dropdownNationality=$("#"+this.dropdownNationalityId);a.customerNumber=$("#"+this.customerNumberId);a.submitButton=$('input[id="'+this.submitButtonId+'"]');a.linkButtonSkip=$("#"+this.linkButtonSkipId);a.nextButton=$("#"+this.nextButtonId);a.insurancecontainer=$("#"+this.insurancecontainerId);a.passengerGivenName=$("#"+this.passengerGivenNameId);a.passengerSurname=$("#"+this.passengerSurnameId);};a.addEvents=function(){a.link.focus(this.toggleMenuHandler);a.link.click(this.toggleMenuHandler);a.imThisTravellerCheckbox.click(this.populateTravelerTabHandler);a.dropdownTitle.change(this.updateGender);a.dropdownGender.change(this.updateTitle);a.dropdownBirthDateMonth.change(this.updateDays);a.dropdownBirthDateYear.change(this.updateDays);a.dropdownNationality.change(this.validateNationality);a.dropdownBirthDateDay.change(function(){if(this.value!=""){$("#"+this.id).removeClass("validationError");var e=$("#validationErrorContainerReadAlong");if($("#mainTraveler .validationError").length==0){e.hide();}else{var c=$("#mainTraveler .validationError")[0].offsetLeft+$("#mainTraveler .validationError")[0].offsetWidth;var f=$("#mainTraveler .validationError")[0].offsetTop-25;if($("#culture").text="ar-SY"){e.css("right",c+223);}else{e.css("left",c);}e.css("top",f);e.css("position","absolute");e.show();}}});a.dropdownBirthDateMonth.change(function(){if(this.value!=""){$("#"+this.id).removeClass("validationError");var e=$("#validationErrorContainerReadAlong");if($("#mainTraveler .validationError").length==0){e.hide();}else{var c=$("#mainTraveler .validationError")[0].offsetLeft+$("#mainTraveler .validationError")[0].offsetWidth;var f=$("#mainTraveler .validationError")[0].offsetTop-25;if($("#culture").text="ar-SY"){e.css("right",c+395);}else{e.css("left",c);}e.css("top",f);e.css("position","absolute");e.show();}}});a.dropdownBirthDateYear.change(function(){validateBySelector("div[id="+a.contentId+"]")?$("#validationErrorContainerReadAlong").hide():false;});$("#"+a.contentId+" .complimentaryMealVal").change(function(){validateBySelector("div[id="+a.contentId+"]")?$("#validationErrorContainerReadAlong").hide():false;});a.passengerGivenName.blur(a.changePlaceHolderStyling);a.passengerSurname.blur(a.changePlaceHolderStyling);a.passengerGivenName.focus(a.clearTextBox);a.passengerSurname.focus(a.clearTextBox);};a.clearTextBox=function(){var c=SKYSALES.Util.getAttributeValue($(this),"requiredempty");if(c===$(this).val()){$(this).val("");$(this).css("color","black");}};a.changePlaceHolderStyling=function(){var c=SKYSALES.Util.getAttributeValue($(this),"requiredempty");var f=false;if(c!=undefined&&c!=""){if($(this).val()==""){$(this).val(c);f=true;}else{if($(this).val()!=""&&c.toLowerCase()==$(this).val().toLowerCase()){f=true;}}}var e=(f==true)?($(this).css("color","rgba(16,16,16,0.6)")):($(this).css("color","black"));};a.validateNationality=function(){SKYSALES.validateNationality(this,true,true,true);};a.updateGender=function(){var c=a.dropdownTitle.val();var e=SKYSALES.Util.getResource().titleInfo.TitleList;for(i=0;i<e.length;i+=1){title=e[i];if(c==title.TitleKey){a.dropdownGender.val(title.GenderCode);break;}}};a.clearFriend=function(){a.customerNumber.val("");a.travelerName.firstName.val("");a.travelerName.lastName.val("");a.dropdownTitle.val("");a.travelerName.writeNameHandler();a.dropdownNationality.val("");a.dropdownGender.val("");a.dropdownBirthDateMonth.val("");a.dropdownBirthDateDay.val("");a.dropdownBirthDateYear.val("");a.hasFriend=false;};a.updateTitle=function(){var f=a.dropdownGender.val();var m=a.dropdownTitle.val();var q=SKYSALES.Util.getResource().titleInfo.TitleList;var c=q.length;for(i=0;i<c;i+=1){title=q[i];if(m!="CHD"&&f==title.GenderCode){a.dropdownTitle.val(title.TitleKey);break;}}var e=a.dropdownTitle.val();if(!e){a.dropdownTitle.val("CHD");}};a.updateDays=function(){var f=a.dropdownBirthDateMonth.val()-1;var e=a.dropdownBirthDateYear.val();var c=32-new Date(e,f,32).getDate();var m=a.dropdownBirthDateDay.val();var l=a.dropdownBirthDateDay[0].length-1;if(l<c){for(i=l+1;i<=c;i+=1){a.dropdownBirthDateDay.append('<option value="'+i+'">'+i+"</option>");}}else{if(l>c){for(i=l;i>c;i-=1){$("#"+a.dropdownBirthDateDayId+" option:eq("+i+")").remove();}}}if(m!=""&&m<=c){a.dropdownBirthDateDay.val(m);}else{a.dropdownBirthDateDay.val("");}};a.populateTravelerTabHandler=function(){a.travelerName.writeNameHandler();};a.toggleMenuHandler=function(){if(a.travelerInputArray!==null){var r=$("#"+a.listId+"").hasClass("selected");var q=function(){$(this).removeClass("validationError");};if(!r&&$("#currentTab").text()!="true"){$("#validationErrorContainerReadAlong").remove();if($("#mainTraveler ."+a.listId+" .validationError").length>0){$("#mainTraveler ."+a.listId+" .validationError").each(q);}}else{if(!r&&$("#currentTab").text()=="true"){var m=$("#mainTraveler #travelerList li.selected").length;for(i=1;i<=m;i+=1){var e=$("#mainTraveler #travelerList li.selected").attr("rel");if($("#mainTraveler #"+e+" .validationError").length>0){$("#mainTraveler #"+e+" .validationError").each(q);}}}}$("#currentTab").text("");var c=a.travelerInputArray.length;var f=$("#list_0").hasClass("selected");for(i=0;i<c;i+=1){a.travelerInputArray[i].hideContent();}if(a.paxType.length>0){a.insurancecontainer.show();}else{a.insurancecontainer.hide();}a.submitButton.attr("disabled","disabled").addClass("buttonDisabled").hide();$(".formoreaddons").hide();a.nextButton.show();a.showContent(f);}};a.showContent=function(q){var f=$("#mainTraveler").height();$(".noFriendsNMDiv").css("height",f);if($("input[id*=RedCarpet]").length==0){$("span#redcarpetlabel").closest(".SSRInput2").remove();}a.list.addClass("selected");var m=a.travelerInputArray.length-1;if(a==a.travelerInputArray[m]){a.nextButton.hide();a.submitButton.removeAttr("disabled").removeClass("buttonDisabled").show();$(".formoreaddons").show();if(a.content.find("select[id*=DropDownListNationality]").length>0){SKYSALES.validateNationality(a.content.find("select[id*=DropDownListNationality]"),false,true,true);}}if((a.paxNumber==1)&&(a.travelerInputArray[0].paxCount>1)&&(a.paxType!="INF")){$("#copySSRslink").show();}else{$("#copySSRslink").hide();}if(a.paxType.length>0){a.insurancecontainer.show();}else{a.insurancecontainer.hide();}a.content.show();var z=a.contentId.split("_");if(document.getElementById("CONTROLGROUP_OUTERTRAVELER_CONTROLGROUPTRAVELER_PassengerInputTravelerView_CheckBoxImFlying_0")&&document.getElementById("CONTROLGROUP_OUTERTRAVELER_CONTROLGROUPTRAVELER_PassengerInputTravelerView_CheckBoxImFlying_0").checked==false&&z[1]==1&&(q==undefined||q==true)&&$("#unTick").val()==""){var u=document.getElementById("CONTROLGROUP_OUTERTRAVELER_CONTROLGROUPTRAVELER_PassengerInputTravelerView_CheckBoxImFlying_0");u.click();}$("select[id*=DropDownListTitle][option[value!=CHD][selected]]").change();a.selectedTab=0;var v=a.content.find("div.add-ons-container");var s=v.children("ul.add-on-labels").length;if(s>1){v.each(function(B){var D=false;var A=false;var E=false;var C=$(this).children("ul");C.each(function(){$(this).children("li.portable").each(function(){if($(this).children("input").length>0){D=true;}});$(this).children("li.comfortkit").each(function(){if($(this).children("input").length>0){A=true;}});$(this).children("li.meal").each(function(){if($(this).find("dl").length>0){E=true;}});});if(!D){C.children("li.portable").remove();}if(!E){C.children("li.meals").remove();}});}if($.browser.msie&&$.browser.version<9){v.find("div.complimentarystar").css("display","inline");v.find("div.complimentarystar").css("zoom","1");}else{v.find("div.complimentarystar").css("display","inline-block");}var l=v.children().length;if(v.length>=2&&l>3){v.each(function(B){var D=0;var C=0;var E=$(this);var A=E.find('ul[rel="addoncontainer"]');A.each(function(F){$(this).children("li").each(function(G){var I=$(this);if(I.hasClass("meals-row")&&!I.find("dd").eq(0).is(":hidden")){I.find("dd").eq(0).hide();}h=I.height();if(h>22){C=G;var H=0;A.each(function(J){h2=$(this).children("li").eq(C).height();if(h2>H){H=h2;}});A.each(function(J){$(this).children("li").eq(C).css("height",H);});}});});});}else{var c=0;var w=0;var t=0;var e=0;var r=v.find('ul[rel="addoncontainer"]');r.each(function(A){$(this).children("li").each(function(B){if($(this).hasClass("meals-row")&&!$(this).find("dd").eq(0).is(":hidden")){$(this).find("dd").eq(0).hide();}h=$(this).height();if(h>22){t=h;w=B;c=A;r.each(function(C){$(this).children("li").eq(w).css("height",t);});}});});}};a.hideContent=function(){a.list.removeClass("selected");a.content.hide();a.selectedTab=1;};a.setSettingsByObject=function(c){b.setSettingsByObject.call(this,c);};return a;};SKYSALES.Class.TravelerInput.createObject=function(a){SKYSALES.Util.createObject("travelerInput","TravelerInput",a);};}if(!SKYSALES.Class.TravelerName){SKYSALES.Class.TravelerName=function(){var a=SKYSALES.Class.SkySales(),b=SKYSALES.Util.extendObject(a);b.firstName=null;b.lastName=null;b.nameLink=null;b.init=function(e,c,l,f){b.firstName=e;b.lastName=c;b.title=l;b.nameLink=f;this.addEvents();this.writeNameHandler();};b.disable=function(){b.firstName.attr("disabled",true);b.lastName.attr("disabled",true);b.title.attr("disabled",true);};b.addEvents=function(){b.firstName.change(this.writeNameHandler);b.lastName.change(this.writeNameHandler);};b.writeNameHandler=function(){var c=b.firstName.val();var e=b.lastName.val();var f=", ";var m=SKYSALES.Util.getAttributeValue(b.firstName,"requiredempty");var l=SKYSALES.Util.getAttributeValue(b.lastName,"requiredempty");if(m!=""&&m!=undefined&&m!=null||l!=""&&l!=undefined&&l!=null){if((e.toLowerCase()!=""&&c.toLowerCase()!="")&&e.toLowerCase()===l.toLowerCase()||c.toLowerCase()===c.toLowerCase()){e=(e.toLowerCase()===l.toLowerCase())?"":b.lastName.val();c=(c.toLowerCase()===m.toLowerCase())?"":b.firstName.val();}if(e===""||c===""){f="";}}else{var f=", ";if(b.lastName.val()===""||b.firstName.val()===""){f="";}}b.nameLink.text(e+f+c);};return b;};SKYSALES.Class.TravelerName.createObject=function(a){SKYSALES.Util.createObject("travelerName","TravelerName",a);};}if(!SKYSALES.Class.TravelerAge){SKYSALES.Class.TravelerAge=function(){var a=SKYSALES.Class.SkySales(),b=SKYSALES.Util.extendObject(a);b.dateMonth=null;b.dateDay=null;b.dateYear=null;b.init=function(e,f,c){b.dateMonth=e;b.dateDay=f;b.dateYear=c;};b.isInfant=function(u,s,m,t){var e=new Date(u);var q=null;if(s==null){q=new Date(parseInt(b.dateYear.val()),parseInt(b.dateMonth.val())-1,parseInt(b.dateDay.val()));}else{q=new Date(s);}if(!isNaN(q)&&!isNaN(e)){var r=b.computeAge(e,q);var c=new Date(m);var f=1000*60*60*24;var l=Math.ceil((c.getTime()-q.getTime())/(f));if(!(r<2)){if(t!=null){t.ErrType="1";}return false;}if(!(l>8)){if(t!=null){t.ErrType="0";}return false;}}return true;};b.isChild=function(q,m,f){var e=new Date(q);var l=null;if(m==null){l=new Date(parseInt(b.dateYear.val()),parseInt(b.dateMonth.val())-1,parseInt(b.dateDay.val()));}else{l=new Date(m);}if(!isNaN(l)&&!isNaN(e)){var c=b.computeAge(e,l);if(!(c>=2)){f.ErrType="1";return false;}if(!(c<12)){f.ErrType="0";return false;}}return true;};b.isAdult=function(m,l){var e=new Date(m);var f=null;if(l==null){f=new Date(parseInt(b.dateYear.val()),parseInt(b.dateMonth.val())-1,parseInt(b.dateDay.val()));}else{f=new Date(l);}if(!isNaN(f)&&!isNaN(e)){var c=b.computeAge(e,f);if(!(c>=12)){return false;}}return true;};b.isScpAge=function(r,q,m,f){var e=new Date(r);var l=null;if(q==null){l=new Date(parseInt(b.dateYear.val()),parseInt(b.dateMonth.val())-1,parseInt(b.dateDay.val()));}else{l=new Date(q);}if(!isNaN(l)&&!isNaN(e)){var c=b.computeAge(e,l);if(c<m&&f){return false;}if(c>=m&&!f){return false;}}return true;};b.isNotFutureDate=function(){var e=new Date(parseInt(b.dateYear.val()),parseInt(b.dateMonth.val())-1,parseInt(b.dateDay.val()));var c=new Date();if(!isNaN(e)){return(e<c);}return true;};b.computeAge=function(f,e){if(f>e){var c=f.getFullYear()-e.getFullYear();if(f.getMonth()<e.getMonth()||(f.getMonth()<=e.getMonth()&&f.getDate()<e.getDate())){c--;}return c;}return null;};return b;};SKYSALES.Class.TravelerAge.createObject=function(a){SKYSALES.Util.createObject("TravelerAge","TravelerAge",a);};}if(!SKYSALES.Class.Friend){SKYSALES.Class.Friend=function(){var b=SKYSALES.Class.SkySales(),a=SKYSALES.Util.extendObject(b);a.customerNumber=null;a.firstName=null;a.lastName=null;a.bdayDay=null;a.bdayMonth=null;a.bdayYear=null;a.sequence=null;a.documentDay=null;a.documentMonth=null;a.documentYear=null;a.gender=null;a.title=null;a.documentCountry=null;a.nationality=null;a.documentNumber=null;a.paxType=null;a.init=function(c){this.setSettingsByObject(c);};return a;};SKYSALES.Class.Friend.createObject=function(a){SKYSALES.Util.createObject("Friend","Friend",a);};
/*!
This file is part of the Navitaire Professional Services customization.
Copyright (C) Navitaire.  All rights reserved.
*/
}if(!SKYSALES.Class.AddOnsContainer){SKYSALES.Class.AddOnsContainer=function(){var a=SKYSALES.Class.SkySales(),b=SKYSALES.Util.extendObject(a);b.menuSectionId="";b.menuSection=null;b.menuListId="";b.menuList=null;b.AddOnsArray=null;b.submitButtonId="";b.submitButton=null;b.continueButtonId="";b.continueButton=null;b.AddOnsArrayLinks=null;b.init=function(c){this.setSettingsByObject(c);this.setVars();this.addEvents();for(i=0;i<b.AddOnsArray.length;i+=1){b.AddOnsArray[i].AddOnsArray=this.AddOnsArray;b.AddOnsArray[i].hideContent();}b.AddOnsArray[0].content.show();b.AddOnsArray[0].list.addClass("selected");};b.setVars=function(){b.menuSection=$("#"+this.menuSectionId);b.menuList=$("#"+this.menuListId);b.submitButton=$("#"+this.submitButtonId);b.continueButton=$("#"+this.continueButtonId);};b.addEvents=function(){b.continueButton.click(this.continueHandler);b.triggerAddOnControls();};b.setSettingsByObject=function(f){a.setSettingsByObject.call(this,f);var e=0;var l=this.AddOnsArray||[];var c=null;for(e=0;e<l.length;e+=1){c=new SKYSALES.Class.AddOns();l[e].linkId=this.AddOnsArrayLinks[e].linkId;l[e].contentId=this.AddOnsArrayLinks[e].contentId;l[e].listId=this.AddOnsArrayLinks[e].listId;c.init(l[e],e);l[e]=c;}this.AddOnsArray=l;};b.triggerAddOnControls=function(){var l=$("input:checkbox:checked"),f=$("input:radio:checked"),e=$("div#mainAddOns").find(".dynamic"),c=$('select[id*="DropDownSkyBus"]');e.bind("change",function(){SKYSALES.Util.updatePriceDisplay($(this));});l.trigger("change");f.trigger("change");c.trigger("change");};b.continueHandler=function(){var c=0;AddOnsArray=b.AddOnsArray||[];for(i=0;i<AddOnsArray.length;i+=1){if(AddOnsArray[i].list.hasClass("selected")){c=i;break;}}if((c+1)==AddOnsArray.length){if(b.validateAddOns()){SKYSALES.DisplayLoadingBar();document.getElementById(b.submitButtonId).click();}}else{b.AddOnsArray[c].triggerValidate();if(!b.AddOnsArray[c].isValidated()){b.AddOnsArray[c].toggleMenuHandler();return false;}b.AddOnsArray[c+1].toggleMenuHandler();}};b.isValidated=function(){var e=0;var f=this.AddOnsArray||[];var c=null;var l=true;for(e=0;e<f.length;e+=1){if(!f[e].isValidated()){l=false;}}return l;};b.validateAddOns=function(){var e=0;var f=this.AddOnsArray||[];var c=null;for(e=0;e<f.length;e+=1){f[e].triggerValidate();if(!f[e].isValidated()){f[e].toggleMenuHandler();return false;}}return true;};return b;};SKYSALES.Class.AddOnsContainer.createObject=function(a){SKYSALES.Util.createObject("AddOnsContainer","AddOnsContainer",a);};}if(!SKYSALES.Class.AddOns){SKYSALES.Class.AddOns=function(){var b=SKYSALES.Class.SkySales(),a=SKYSALES.Util.extendObject(b);a.linkLabel="";a.linkId="";a.link=null;a.listId="";a.list=null;a.contentId="";a.content=null;a.AddOnsArray=null;a.validateButtonId="";a.validateButton=null;a.validateValueId="";a.init=function(c){this.setSettingsByObject(c);this.setVars();this.addEvents();a.link.html(a.linkLabel);};a.setVars=function(){b.setVars.call(this);a.link=$("#"+this.linkId);a.list=$("#"+this.listId);a.content=$("#"+this.contentId);a.validateButtonId=this.validateButtonId;a.validateValueId=this.validateValueId;if(this.validateButtonId!=""){a.validateButton=$("#"+this.validateButtonId);}};a.addEvents=function(){b.addEvents.call(this);a.link.click(this.toggleMenuHandler);};a.toggleMenuHandler=function(){for(i=0;i<a.AddOnsArray.length;i+=1){a.AddOnsArray[i].hideContent();}a.list.addClass("selected");a.content.show();};a.triggerValidate=function(){if(this.validateButtonId!=""&&$("#"+this.validateButtonId).length>0){document.getElementById(this.validateButtonId).click();}};a.isValidated=function(){if(a.validateValueId!=""&&$("#"+a.validateValueId).length>0){if($("#"+a.validateValueId).val()=="false"){return false;}}return true;};a.hideContent=function(){a.list.removeClass("selected");a.content.hide();};a.setSettingsByObject=function(c){b.setSettingsByObject.call(this,c);};return a;};SKYSALES.Class.AddOns.createObject=function(a){SKYSALES.Util.createObject("AddOns","AddOns",a);};}SKYSALES.Util.addOnsJsonReplacer=function(){var c=this,b="";if(c){for(prop in c){if(c.hasOwnProperty(prop)&&(typeof c[prop]!=="function")){var a=prop+" "+c[prop].unitPrice+"|";b+=a;}}}return b.substring(0,b.length-1);};if(!SKYSALES.Class.AddOnsSSRs){SKYSALES.Class.AddOnsSSRs=function(){var a=new SKYSALES.Class.SkySales(),b=SKYSALES.Util.extendObject(a);b.ssrGroups=[];b.preSelectedSSRs=[];b.ssrDictionary={};b.passengerDropDowns=[];b.ssrAvailabilityJson={};b.ssrAvailabilityString="";b.isChangeBooking="";b.selectAddOnsLabel="";b.init=function(c){this.setSettingsByObject(c);this.setVars();this.addEvents();this.initializeDropDown();this.triggerChange();};b.setVars=function(){if(this.ssrAvailabilityJson){var c=this.ssrAvailabilityJson;c.toJSON=SKYSALES.Util.addOnsJsonReplacer;}b.ssrAvailabilityString=JSON.stringify(this.ssrAvailabilityJson).replace(/["]/g,"");};b.addEvents=function(){var f=this.passengerDropDowns.length;if(f>0){for(var c=0;c<f;c++){var e=$("#"+b.passengerDropDowns[c]);e.change(b.dropDownChangeHandler);}}};b.initializeDropDown=function(){for(groupCode in this.ssrGroups){var c=$("[id*='"+groupCode+"']");if(c&&c.length){c.find("option").each(function(){var q=$(this),m=q.val();if(q&&q.length&&m){var f=b.ssrAvailabilityJson[m].price;if(f){var l=q.get(0).innerHTML;if(l&&l.indexOf("[amount]")>-1){l=l.replace("[amount]",f);}else{l=l+" "+f;}q.html(l);}}});var e=b.ssrGroups[groupCode];if((this.isChangeBooking&&this.isChangeBooking=="False")||(e&&!e.selectedSSR)){c.append(new Option(this.selectAddOnsLabel,""));}if(e){c.val(e.selectedSSR);}}}};b.dropDownChangeHandler=function(){var H=b.ssrAvailabilityString,f=$(this),E=f.attr("id"),J=f.attr("name"),D=E.split("_"),w=D.length,c=D[w-2],A=D[w-1],s=f.val(),l=b.ssrAvailabilityJson[s],r=b.ssrGroups[c],q={removePrice:false};if(r){var u=r.flightKeys,m=r.ssrPriceDisplayClass,z=$("<select></select>"),G=z.get(0);z.attr("id",E).attr("name",J).attr("ssr-data",H).attr("price-display",m);G.options.add(new Option("",""));for(var I=this.options.length-1;I>-1;I--){if(this.options[I]&&this.options[I].value){var F=this.options[I].value,C=b.ssrAvailabilityJson[F]?b.ssrAvailabilityJson[F].priceDisplayText:"",B=new Option(C,F);G.options.add(B);}}z.val(s);for(var I=0;I<u.length;I++){var t=u[I],v=t.journeyIndex+"_"+A,e=t.flightKey;z.attr("journey-pax-index",v).attr("flight-ref",e);SKYSALES.Util.updatePriceDisplay(z,q);}}};b.triggerChange=function(){$(document).ready(function(){var f=b.passengerDropDowns.length;if(f>0){for(var c=0;c<f;c++){var e=$("#"+b.passengerDropDowns[c]);e.change();}}});};return b;};SKYSALES.Class.AddOnsSSRs.createObject=function(a){SKYSALES.Util.createObject("addOnsSSRs","AddOnsSSRs",a);};}function confirmEmail(e,a,c){var b;b=true;if(b==true){showMsg=false;SKYSALES.DisplayLoadingBar();__doPostBack(a,"");return true;}}SKYSALES.Class.MealPanel=function(){var a=new SKYSALES.Class.SkySales(),b=SKYSALES.Util.extendObject(a);b.panelId="";b.maxMeals=0;b.isdisabled=false;b.mealPanelBtn="";b.selectMealText="";b.selectedMealText="";b.selectedMealsText="";b.currencyCode="";b.decimalControl="";b.commaReplacement="";b.previousSelectedMeals="";b.MUPGCount="";b.upSizeCode="";b.freeMealCount=0;b.freeMealPolicy=0;b.init=function(c){this.setSettingsByObject(c);this.setVars();this.addEvents();};b.setVars=function(){};b.addEvents=function(){var w=this.maxMeals,c=(isNaN(this.freeMealCount))?0:this.freeMealCount,s=(isNaN(this.freeMealPolicy))?0:this.freeMealCount,e=(this.isdisabled=="")?false:true,f=this.selectedMealText.replace(" %CURRENCY%",""),q=this.selectedMealsText.replace(" %CURRENCY%",""),v=this.decimalControl.split(","),r=this.commaReplacement.split(","),u=this.currencyCode,z=this.previousSelectedMeals,m=this.MUPGCount,t=this.upSizeCode,l=this.selectMealText;$("#"+this.panelId).ucMealPanel({max:w,selectedTab:0,disabled:e,decimalSeparator:".",thousandSeparator:",",commaReplacement:r,freeMealCount:c,freeMealPolicy:s,previousSelectedMeals:z,MUPGCount:m,upSizeCode:t,onchange:function(C,A){var I=f;var F=q;var G=2;for(var D=0;D<v.length;D++){if(u==v[D]){G=0;}}if(A==undefined||A.count==undefined||A.count==null||A.count==0){$(C).closest("li.meals-row").find(".mealPanelBtn").find("span.label").html(l);}else{var J=false;for(var E=0;E<r.length;E++){if(A.currency==r[E]){J=true;break;}}var H=+A.totalPrice;if(J==true){var B=(H.toFixed(G)).toString().replace(/\B(?=(?:\d{3})+(?!\d))/g,",");}else{var B=H.toFixed(G);}$(C).closest("li.meals-row").eq(0).find(".mealPanelBtn").find("span.label").html(A.count==1?I.replace("%COUNT%",A.count).replace("%PRICE%",(B+" "+A.currency)):F.replace("%COUNT%",A.count).replace("%PRICE%",(B+" "+A.currency)));}}});};return b;};SKYSALES.Class.MealPanel.createObject=function(a){SKYSALES.Util.createObject("mealPanel","MealPanel",a);};SKYSALES.Class.ComfortKitPanel=function(){var b=new SKYSALES.Class.SkySales(),a=SKYSALES.Util.extendObject(b);a.panelId="";a.maxMeals=0;a.isdisabled=false;a.mealPanelBtn="";a.selectMealText="";a.selectedMealText="";a.selectedMealsText="";a.currencyCode="";a.decimalControl="";a.commaReplacement="";a.freeMealCount=0;a.freeMealPolicy=0;a.init=function(c){this.setSettingsByObject(c);this.setVars();this.addEvents();};a.setVars=function(){};a.addEvents=function(){var u=this.maxMeals,c=(isNaN(this.freeMealCount))?0:this.freeMealCount,r=(isNaN(this.freeMealPolicy))?0:this.freeMealCount,e=(this.isdisabled=="")?false:true,f=this.selectedMealText.replace(" %CURRENCY%",""),m=this.selectedMealsText.replace(" %CURRENCY%",""),t=this.decimalControl.split(","),q=this.commaReplacement.split(","),s=this.currencyCode,l=this.selectMealText;$("#"+this.panelId).ucComfortKitPanel({max:u,selectedTab:0,disabled:e,decimalSeparator:".",thousandSeparator:",",commaReplacement:q,freeMealCount:c,freeMealPolicy:r,onchange:function(z,v){var F=f;var C=m;var D=2;for(var A=0;A<t.length;A++){if(s==t[A]){D=0;}}if(v==undefined||v.count==undefined||v.count==null||v.count==0){$(z).closest("li.comforts-row").find(".comfortKitPanelBtn").find("span.label").html(l);}else{var G=false;for(var B=0;B<q.length;B++){if(v.currency==q[B]){G=true;break;}}var E=+v.totalPrice;if(G==true){var w=(E.toFixed(D)).toString().replace(/\B(?=(?:\d{3})+(?!\d))/g,",");}else{var w=E.toFixed(D);}$(z).parents("li.comforts-row").eq(0).find(".comfortKitPanelBtn span.label").html(v.count==1?F.replace("%COUNT%",v.count).replace("%PRICE%",(w+" "+v.currency)):C.replace("%COUNT%",v.count).replace("%PRICE%",(w+" "+v.currency)));}}});};return a;};SKYSALES.Class.ComfortKitPanel.createObject=function(a){SKYSALES.Util.createObject("comfortKitPanel","ComfortKitPanel",a);};SKYSALES.Class.DutyFreePanel=function(){var b=new SKYSALES.Class.SkySales(),a=SKYSALES.Util.extendObject(b);a.panelId="";a.maxMeals=0;a.isdisabled=false;a.mealPanelBtn="";a.selectMealText="";a.selectedMealText="";a.selectedMealsText="";a.currencyCode="";a.decimalControl="";a.commaReplacement="";a.freeMealCount=0;a.freeMealPolicy=0;a.init=function(c){this.setSettingsByObject(c);this.setVars();this.addEvents();};a.setVars=function(){};a.addEvents=function(){var u=this.maxMeals,c=(isNaN(this.freeMealCount))?0:this.freeMealCount,r=(isNaN(this.freeMealPolicy))?0:this.freeMealCount,e=(this.isdisabled=="")?false:true,f=this.selectedMealText.replace(" %CURRENCY%",""),m=this.selectedMealsText.replace(" %CURRENCY%",""),t=this.decimalControl.split(","),q=this.commaReplacement.split(","),s=this.currencyCode,l=this.selectMealText;$("#"+this.panelId).ucDutyFreePanel({max:u,selectedTab:0,disabled:e,decimalSeparator:".",thousandSeparator:",",commaReplacement:q,freeMealCount:c,freeMealPolicy:r,onchange:function(z,v){var F=f;var C=m;var D=2;for(var A=0;A<t.length;A++){if(s==t[A]){D=0;}}if(v==undefined||v.count==undefined||v.count==null||v.count==0){$(z).closest("li.comforts-row").find(".dutyFreePanelBtn").find("span.label").html(l);}else{var G=false;for(var B=0;B<q.length;B++){if(v.currency==q[B]){G=true;break;}}var E=+v.totalPrice;if(G==true){var w=(E.toFixed(D)).toString().replace(/\B(?=(?:\d{3})+(?!\d))/g,",");}else{var w=E.toFixed(D);}$(z).parents("li.comforts-row").eq(0).find(".dutyFreePanelBtn span.label").html(v.count==1?F.replace("%COUNT%",v.count).replace("%PRICE%",(w+" "+v.currency)):C.replace("%COUNT%",v.count).replace("%PRICE%",(w+" "+v.currency)));}}});};return a;};SKYSALES.Class.DutyFreePanel.createObject=function(a){SKYSALES.Util.createObject("dutyFreePanel","DutyFreePanel",a);};SKYSALES.Class.BaggageLegInput=function(){var a=new SKYSALES.Class.SkySales(),b=SKYSALES.Util.extendObject(a);b.clientId="";b.ssrAvailabilityArray=null;b.dropDownBaggageArray=[];b.currencyCode="";b.complimentaryTextArray=null;b.isFlightChange=false;b.disableMarket=null;b.isNewBookingModified=null;b.isBookingModified=null;b.isAgent=null;b.init=function(c){this.setSettingsByObject(c);this.setVars();this.addEvents();this.initSsrAvailabilityArray();this.initDropDownBaggageLegInputArray();};b.initSsrAvailabilityArray=function(){var f=0,l=this.ssrAvailabilityArray||[],c=l.length,e=null;for(f=0;f<c;f+=1){e=new SKYSALES.Class.SSRAvailability();e.init(l[f]);this.ssrAvailabilityArray[f]=e;}};b.initDropDownBaggageLegInputArray=function(){var e=0,l=this.dropDownBaggageArray||[],c=l.length,f=null;for(e=0;e<c;e+=1){f=new SKYSALES.Class.DropDownBaggageLegInput();f.complimentaryTextArray=this.complimentaryTextArray;if(this.disableMarket!="none"&&e<parseInt(this.disableMarket)){f.isDisabled=true;}f.isFlightChange=this.isFlightChange;f.isNewBookingModified=this.isNewBookingModified;f.isBookingModified=this.isBookingModified;f.isAgent=this.isAgent;f.init(l[e],this.ssrAvailabilityArray[0],this.currencyCode);this.dropDownBaggageArray[e]=f;}};return b;};SKYSALES.Class.BaggageLegInput.createObject=function(a){SKYSALES.Util.createObject("baggageLegInput","BaggageLegInput",a);};SKYSALES.Class.DropDownBaggageLegInput=function(){var b=new SKYSALES.Class.SkySales(),a=SKYSALES.Util.extendObject(b);a.dropDownBaggageId="";a.dropDownBaggage={};a.quantityPrefix="";a.del="";a.passengerNumber=0;a.flightReference="";a.selectedItem="";a.preSelectedItem="";a.currencyCode="";a.hiFlyerBaggageText="";a.arrvCountry="";a.destCountry="";a.arrvStation="";a.departStation="";a.samsam="";a.isNewBooking=true;a.complimentaryTextArray=null;a.prevSelected=null;a.isFlightChange=false;a.isDisabled=false;a.origDropDownId="";a.baggagePriceArray=null;a.baggageAlertCodeList="";a.baggageAlertMessage="";a.autoSelectBaggage=function(){if(this.selectedItem!=""&&$(this).is("select")){var z=a.dropDownBaggageId;var H=this.options[this.selectedIndex].text;var E=this.options[this.selectedIndex].value;var u=a.flightReference;var O=document.getElementsByTagName("select");var q="";var e=[];if((E.length>0||H.length>0)&&u.length>0){var t=E.substring(E.indexOf("ssrCode"),E.indexOf("flightReference")-1);var f=z.substring(z.indexOf("passengerNumber"),z.indexOf("flightReference")-1);for(var J=0,G=O.length;J<G;J++){if(!O[J].disabled){if(O[J].id&&O[J].id!=z&&O[J].id.indexOf(f)!=-1&&(O[J].id.indexOf("BaggageLegInputViewTravelerView")!=-1||O[J].id.indexOf("BaggageLegInputViewTravelerChangeView")!=-1||O[J].id.indexOf("BaggageLegInputViewTravelerFlightChangeView")!=-1||O[J].id.indexOf("BaggageLegInputViewSSRChangeView")!=-1)){e.push(O[J]);}}}if(e){for(var D=0,B=e.length;D<B;D++){var r=e[D].id;var L=u.substring(u.lastIndexOf("-")+1,u.length);var K=r.substring(r.lastIndexOf("-")+1,r.length);var C=L.substring(0,3);var w=L.substring(L.length-3,L.length);var c=K.substring(0,3);var N=K.substring(K.length-3,K.length);if(!(C==N&&c==w)&&(w==c||C==N)){var F=document.getElementById(r);q=F;if(t.length>0){var I=$(F).val();$(F).find('option[value*="'+t+'"]').attr("selected","selected");var M=$(F).attr("onchange");if(I!=$(F).find('option[value*="'+t+'"]').val()){SKYSALES.Util.updatePriceDisplay($(F));}}else{if(H.length>0){var I=$(F).val();var A=$(F).find("option").filter(function(){return $.trim($(this).text())==H;});A.attr("selected",true);var M=$(F).attr("onchange");if(I!=A){SKYSALES.Util.updatePriceDisplay($(F));}}}}}}}var l=a.baggageAlertCodeList;var s=l.split(",");for(var J=0;J<s.length;J++){var v=s[J];if(E.indexOf(v)!=-1){alert(a.baggageAlertMessage);break;}}}};a.autoSelectBaggageLink=function(){if(a.dropDownBaggage.selectedItem!=""){var u=a.dropDownBaggageId;var A=document.getElementById(u);var E=A.options[A.selectedIndex].text;var B=A.options[A.selectedIndex].value;var s=a.flightReference;var K=document.getElementsByTagName("select");var e=[];if((B.length>0||E.length>0)&&s.length>0){var r=B.substring(B.indexOf("ssrCode"),B.indexOf("flightReference")-1);var f=u.substring(u.indexOf("passengerNumber"),u.indexOf("flightReference")-1);for(var G=0,D=K.length;G<D;G++){if(!K[G].disabled){if(K[G].id&&K[G].id!=u&&K[G].id.indexOf(f)!=-1&&(K[G].id.indexOf("BaggageLegInputViewTravelerView")!=-1||K[G].id.indexOf("BaggageLegInputViewTravelerChangeView")!=-1||K[G].id.indexOf("BaggageLegInputViewTravelerFlightChangeView")!=-1||K[G].id.indexOf("BaggageLegInputViewSSRChangeView")!=-1)){e.push(K[G]);}}}if(e){for(var z=0,v=e.length;z<v;z++){var q=e[z].id;var I=s.substring(s.lastIndexOf("-")+1,s.length);var H=q.substring(q.lastIndexOf("-")+1,q.length);var w=I.substring(0,3);var t=I.substring(I.length-3,I.length);var c=H.substring(0,3);var J=H.substring(H.length-3,H.length);if(!(w==J&&c==t)&&(t==c||w==J)){var C=document.getElementById(q);if(r.length>0){for(var G=0,F=C.options.length;G<F;G++){o=C.options[G];if(o.value.indexOf(r)!=-1){o.selected=true;}}}else{if(E.length>0){for(var G=0,F=C.options.length;G<F;G++){o=C.options[G];if(o.text.indexOf(E)!=-1){o.selected=true;}}}}}}}}}};a.addEvents=function(){a.dropDownBaggage.change(this.autoSelectBaggage);$("#selectNoBaggage_"+a.flightReference+"_passengerNumber_"+this.passengerNumber).click(this.autoSelectBaggageLink);};a.init=function(f,e,c){this.setSettingsByObject(f);this.setVars();this.addEvents();this.currencyCode=c;this.initDropDownBaggageLegInput(e);if(this.dropDownBaggage){this.dropDownBaggage.val(this.selectedItem);}if(this.isDisabled){this.dropDownBaggage.attr("disabled",true);$("#"+this.origDropDownId).val(this.selectedItem);}a.dropDownBaggage.bind("change",function(){SKYSALES.Util.updatePriceDisplay($(this));});a.dropDownBaggage.trigger("change");};a.setVars=function(){this.hiFlyerBaggageText=$("#"+this.dropDownBaggageId+"_hiflyerBaggageText");if(this.isDisabled){this.origDropDownId=this.dropDownBaggageId;this.dropDownBaggageId=this.dropDownBaggageId+"_";}this.dropDownBaggage=$("#"+this.dropDownBaggageId);};a.showLabel=function(l,f){var c=0;var e=0;if($("#baggagecomplementary").text().length>0){for(c=0;c<this.complimentaryTextArray.length;c++){if(this.complimentaryTextArray[c].labelText==$("#baggagecomplementary").text()){e=c;break;}}}for(c=0;c<this.complimentaryTextArray.length;c++){if(this.complimentaryTextArray[c].SsrCode==l&&(this.prevSelected==null||c>this.prevSelected)){this.prevSelected=c;if(e==0||e<c){$("#baggagecomplementary").text(this.complimentaryTextArray[c].labelText);}if((this.isNewBooking||this.isFlightChange)&&!this.isDisabled){this.selectedItem=f;}break;}}};a.findMCCPrice=function(e){var c=0;if(this.baggagePriceArray!=null){for(c=0;c<this.baggagePriceArray.length;c++){if(this.baggagePriceArray[c].SsrCode==e){return this.baggagePriceArray[c].SsrPrice;}}}return"";};a.initDropDownBaggageLegInput=function(w){len1=w.SsrAvailabilityList.length;SSRAvailability=null;flightCarrierCode=null;var u=0,z=this.selectedItem?this.selectedItem.split("_"):null,t=z?z[jQuery.inArray("ssrCode",z)+1]:"",e=z?z[jQuery.inArray("ssrNum",z)+1]:"1",r="";this.selectedItem=t!==""?this.selectedItem:"";if(this.selectedItem!==""&&!this.isFlightChange){this.isNewBooking=false;}var v=$("#BaggagePreference").val();if(v==""){v="NAN";}for(u=0;u<len1;u+=1){SSRAvailability=w.SsrAvailabilityList[u];if(SSRAvailability.passengerNumber==this.passengerNumber){len2=SSRAvailability.flightParts.length;flightPart=null;for(j=0;j<len2;j+=1){flightPart=new SKYSALES.Class.FlightPart();flightPart.init(SSRAvailability.flightParts[j]);if(flightPart.flightKey!=null){flightDesignator="";if(flightPart.flightKey.flightDesignator!=null){flightCarrierCode=flightPart.flightKey.flightDesignator.CarrierCode;flightDesignator=flightPart.flightKey.flightDesignator.CarrierCode+flightPart.flightKey.flightDesignator.FlightNumber;flightDesignator=flightDesignator.split(" ").join("-");}flightRef=flightPart.flightKey.departureDate.getDate()+"-"+flightDesignator+"-"+flightPart.flightKey.departureStation+flightPart.flightKey.arrivalStation;if(this.flightReference==flightRef){len3=flightPart.availableSsrs.length;origSelectedItem=this.selectedItem;hasComplimentaryBaggage=false;for(k=0;k<len3;k+=1){if(this.dropDownBaggage){text=flightPart.availableSsrs[k].ssr.name;price=a.findMCCPrice(flightPart.availableSsrs[k].ssr.ssrCode);text=text+" ("+price+")";value=this.quantityPrefix+this.del+"passengerNumber"+this.del+this.passengerNumber+this.del+"ssrCode"+this.del+flightPart.availableSsrs[k].ssr.ssrCode+this.del+"ssrNum"+this.del+e+this.del+"flightReference"+this.del+flightRef;if(flightPart.availableSsrs[k].price==0){this.showLabel(flightPart.availableSsrs[k].ssr.ssrCode,value);hasComplimentaryBaggage=true;}else{if((hasComplimentaryBaggage)&&(value==origSelectedItem)&&(flightPart.availableSsrs[k].price>0)){this.selectedItem=value;}else{if((this.isNewBooking==true)&&(value==origSelectedItem)){this.selectedItem=value;}else{if((this.isNewBooking==true)&&(this.isNewBookingModified=="")&&(this.isBookingModified=="")){var c=["D7","XJ","XT"];if((flightCarrierCode=="AK")||(flightCarrierCode=="FD")||(flightCarrierCode=="QZ"&&this.arrvCountry!=this.destCountry)||(flightCarrierCode=="PQ")||(flightCarrierCode=="Z2")||(flightCarrierCode=="JW")){if(flightPart.availableSsrs[k].ssr.ssrCode=="PBAB"){this.selectedItem=value;}}else{if($.inArray(flightCarrierCode,c)!=-1){if(flightPart.availableSsrs[k].ssr.ssrCode=="PBAB"){this.selectedItem=value;}}}if(flightCarrierCode=="QZ"&&this.arrvCountry==this.destCountry){if(flightPart.availableSsrs[k].ssr.ssrCode=="PBAB"){this.selectedItem=value;}}if(v!="NAN"){if(v!=""){if(flightPart.availableSsrs[k].ssr.ssrCode==v){this.selectedItem=value;}else{if(v=="NO"){if(flightCarrierCode=="QZ"&&this.arrvCountry==this.destCountry){if(flightPart.availableSsrs[k].ssr.ssrCode=="PBAB"){this.selectedItem=value;}}else{this.selectedItem="";}}}}else{this.selectedItem="";}}}}}}r=this.dropDownBaggage.get(0);if(r&&r.options){r.options[r.options.length]=new window.Option(text,value,false,false);}}}if(r&&r.options){if((((flightCarrierCode=="QZ"&&this.arrvCountry==this.destCountry)||a.isBookingModified=="True")||(a.isAgent=="true"&&this.arrvStation=="KTM"&&this.departStation=="KUL")||(a.isAgent=="true"&&this.arrvStation=="KUL"&&this.departStation=="KTM"))&&this.selectedItem!=""){if(this.selectedItem.indexOf("__")==-1){r=this.dropDownBaggage.get(0);if(r&&r.options){for(var q=0,s=2;q<s;q++){o=r.options[q];if(q==0&&o.value==""){r.options[0]=null;var A=document.getElementById("selectNoBaggage_"+a.flightReference+"_passengerNumber_"+this.passengerNumber);if(A){A.setAttribute("class","hidden");}break;}}if(this.isBookingModified=="True"){var f=0;for(n=0;n<r.options.length;n++){if(this.selectedItem==r.options[n].value){f=n;break;}}for(p=0;p<f;p++){r.options[p].setAttribute("class","hidden");}}}}}}}}}}}};return a;};SKYSALES.Class.WheelchairInput=function(){var a=new SKYSALES.Class.SkySales(),b=SKYSALES.Util.extendObject(a);b.clientId="";b.ssrAvailabilityArray=null;b.dropDownWheelchairArray=[];b.currencyCode="";b.complimentaryTextArray=null;b.isFlightChange=false;b.disableMarket=null;b.isNewBookingModified=null;b.isBookingModified=null;b.isAgent=null;b.sWCHString=null;b.init=function(c){this.setSettingsByObject(c);this.setVars();this.addEvents();this.initSsrAvailabilityArray();this.initDropDownWheelchairInputArray();};b.initSsrAvailabilityArray=function(){var f=0,l=this.ssrAvailabilityArray||[],c=l.length,e=null;for(f=0;f<c;f+=1){e=new SKYSALES.Class.SSRAvailability();e.init(l[f]);this.ssrAvailabilityArray[f]=e;}};b.initDropDownWheelchairInputArray=function(){var e=0,f=this.dropDownWheelchairArray||[],c=f.length,l=null;for(e=0;e<c;e+=1){l=new SKYSALES.Class.DropDownWheelchairInput();l.complimentaryTextArray=this.complimentaryTextArray;if(this.disableMarket!="none"&&e<parseInt(this.disableMarket)){l.isDisabled=true;}l.isFlightChange=this.isFlightChange;l.isNewBookingModified=this.isNewBookingModified;l.isBookingModified=this.isBookingModified;l.isAgent=this.isAgent;l.init(f[e],this.ssrAvailabilityArray[0],this.currencyCode,this.sWCHString);this.dropDownWheelchairArray[e]=l;}};return b;};SKYSALES.Class.WheelchairInput.createObject=function(a){SKYSALES.Util.createObject("wheelchairInput","WheelchairInput",a);};SKYSALES.Class.DropDownWheelchairInput=function(){var b=new SKYSALES.Class.SkySales(),a=SKYSALES.Util.extendObject(b);a.dropDownWheelchairId="";a.dropDownWheelchair={};a.quantityPrefix="";a.del="";a.passengerNumber=0;a.flightReference="";a.selectedItem="";a.currencyCode="";a.arrvCountry="";a.destCountry="";a.isNewBooking=true;a.complimentaryTextArray=null;a.prevSelected=null;a.isFlightChange=false;a.isDisabled=false;a.origDropDownId="";a.wheelchairPriceArray=null;a.wheelchairAlertCodeList="";a.wheelchairAlertMessage="";a.autoSelectWheelchair=function(){if(this.selectedItem!=""&&$(this).is("select")){var u=a.dropDownWheelchairId;var F=this.options[this.selectedIndex].text;var B=this.options[this.selectedIndex].value;var s=a.flightReference;var M=document.getElementsByTagName("select");var l="";var e=[];if((B.length>0||F.length>0)&&s.length>0){var r=B.substring(B.indexOf("ssrCode"),B.indexOf("flightReference")-1);var f=u.substring(u.indexOf("passengerNumber"),u.indexOf("flightReference")-1);for(var H=0,E=M.length;H<E;H++){if(!M[H].disabled){if(M[H].id&&M[H].id!=u&&M[H].id.indexOf(f)!=-1&&(M[H].id.indexOf("WheelchairInputViewTravelerView")!=-1||M[H].id.indexOf("WheelchairInputViewTravelerChangeView")!=-1||M[H].id.indexOf("WheelchairInputViewTravelerFlightChangeView")!=-1||M[H].id.indexOf("WheelchairInputViewSSRChangeView")!=-1)){e.push(M[H]);}}}if(e){for(var A=0,w=e.length;A<w;A++){var q=e[A].id;var J=s.substring(s.lastIndexOf("-")+1,s.length);var I=q.substring(q.lastIndexOf("-")+1,q.length);var z=J.substring(0,3);var t=J.substring(J.length-3,J.length);var c=I.substring(0,3);var L=I.substring(I.length-3,I.length);if(!(z==L&&c==t)&&(t==c||z==L)){var D=document.getElementById(q);var C=document.getElementById(u);l=D;var G=$(D).val();var B=$(C).val();if(r.length>0){$(D).find('option[value*="'+r+'"]').attr("selected","selected");var K=$(D).attr("onchange");if(G!=$(D).find('option[value*="'+r+'"]').val()){SKYSALES.Util.updatePriceDisplay($(D));if(B!=G){$(D).change();}}}else{if(F.length>0){var v=$(D).find("option").filter(function(){return $.trim($(this).text())==F;});v.attr("selected",true);var K=$(D).attr("onchange");if(G!=v){SKYSALES.Util.updatePriceDisplay($(D));if(B!=G){$(D).change();}}}}}}}}}};a.addEvents=function(){a.dropDownWheelchair.change(this.autoSelectWheelchair);};a.init=function(f,e,c,l){this.setSettingsByObject(f);this.setVars();this.addEvents();this.currencyCode=c;this.initDropDownWheelchairInput(e,l);if(this.dropDownWheelchair){this.dropDownWheelchair.val(this.selectedItem);}if(this.isDisabled){this.dropDownWheelchair.attr("disabled",true);$("#"+this.origDropDownId).val(this.selectedItem);}a.dropDownWheelchair.bind("change",function(){SKYSALES.Util.updatePriceDisplay($(this));});a.dropDownWheelchair.trigger("change");};a.setVars=function(){this.hiFlyerWheelchairText=$("#"+this.dropDownWheelchairId+"_hiflyerWheelchairText");if(this.isDisabled){this.origDropDownId=this.dropDownWheelchairId;this.dropDownWheelchairId=this.dropDownWheelchairId+"_";}this.dropDownWheelchair=$("#"+this.dropDownWheelchairId);};a.showLabel=function(f,e){var c=0;for(c=0;c<this.complimentaryTextArray.length;c++){if(this.complimentaryTextArray[c].SsrCode==f&&(this.prevSelected==null||c>this.prevSelected)){this.prevSelected=c;$("#baggagecomplementary").text(this.complimentaryTextArray[c].labelText);if((this.isNewBooking||this.isFlightChange)&&!this.isDisabled){this.selectedItem=e;}break;}}};a.findMCCPrice=function(e){var c=0;if(this.wheelchairPriceArray!=null){for(c=0;c<this.wheelchairPriceArray.length;c++){if(this.wheelchairPriceArray[c].SsrCode==e){return this.wheelchairPriceArray[c].SsrPrice;}}}return"";};a.initDropDownWheelchairInput=function(u,s){len1=u.SsrAvailabilityList.length;SSRAvailability=null;flightCarrierCode=null;var t=0,v=this.selectedItem?this.selectedItem.split("_"):null,r=v?v[jQuery.inArray("ssrCode",v)+1]:"",c=v?v[jQuery.inArray("ssrNum",v)+1]:"1",e="";this.selectedItem=r!==""?this.selectedItem:"";if(this.selectedItem!==""&&!this.isFlightChange){this.isNewBooking=false;}for(t=0;t<len1;t+=1){SSRAvailability=u.SsrAvailabilityList[t];if(SSRAvailability.passengerNumber==this.passengerNumber){len2=SSRAvailability.flightParts.length;flightPart=null;for(j=0;j<len2;j+=1){flightPart=new SKYSALES.Class.FlightPart();flightPart.init(SSRAvailability.flightParts[j]);if(flightPart.flightKey!=null){flightDesignator="";if(flightPart.flightKey.flightDesignator!=null){flightCarrierCode=flightPart.flightKey.flightDesignator.CarrierCode;flightDesignator=flightPart.flightKey.flightDesignator.CarrierCode+flightPart.flightKey.flightDesignator.FlightNumber;flightDesignator=flightDesignator.split(" ").join("-");}flightRef=flightPart.flightKey.departureDate.getDate()+"-"+flightDesignator+"-"+flightPart.flightKey.departureStation+flightPart.flightKey.arrivalStation;if(this.flightReference==flightRef){len3=flightPart.availableSsrs.length;origSelectedItem=this.selectedItem;hasComplimentaryWheelchair=false;wchList=s.split(";");len4=wchList.length;for(q=0;q<len4;q++){for(k=0;k<len3;k+=1){if(this.dropDownWheelchair&&wchList[q]==flightPart.availableSsrs[k].ssr.ssrCode){text=flightPart.availableSsrs[k].ssr.name;price=a.findMCCPrice(flightPart.availableSsrs[k].ssr.ssrCode);text=text+" ("+price+")";value=this.quantityPrefix+this.del+"passengerNumber"+this.del+this.passengerNumber+this.del+"ssrCode"+this.del+flightPart.availableSsrs[k].ssr.ssrCode+this.del+"ssrNum"+this.del+c+this.del+"flightReference"+this.del+flightRef;e=this.dropDownWheelchair.get(0);if(e&&e.options){e.options[e.options.length]=new window.Option(text,value,false,false);}}}}if(e&&e.options){if((a.isBookingModified=="True")&&this.selectedItem!=""){if(this.selectedItem.indexOf("__")==-1){e=this.dropDownWheelchair.get(0);if(e&&e.options){for(var f=0,q=2;f<q;f++){o=e.options[f];if(f==0&&o.value==""){e.options[0]=null;break;}}}}}}}}}}}};return a;};SKYSALES.Class.SportsEquipment=function(){var b=new SKYSALES.Class.SkySales(),a=SKYSALES.Util.extendObject(b);a.clientId="";a.ssrAvailabilityArray=null;a.dropdownsportEquipmentarray=[];a.currencyCode="";a.disableMarket=null;a.isBookingModified="";a.init=function(c){this.setSettingsByObject(c);this.setVars();this.addEvents();this.initSsrAvailabilityArray();this.initdropdownSportEquipmentarray();};a.initSsrAvailabilityArray=function(){var f=0,l=this.ssrAvailabilityArray||[],c=l.length,e=null;for(f=0;f<c;f+=1){e=new SKYSALES.Class.SSRAvailability();e.init(l[f]);this.ssrAvailabilityArray[f]=e;}};a.initdropdownSportEquipmentarray=function(){var f=this.dropdownsportEquipmentarray||[],c=f.length;var l=null;for(var e=0;e<c;e++){l=new SKYSALES.Class.dropdownSportEquipment();if(this.disableMarket!="none"&&e<parseInt(this.disableMarket)){l.isDisabled=true;}l.isBookingModified=this.isBookingModified;l.init(f[e],this.ssrAvailabilityArray[0],this.currencyCode);this.dropdownsportEquipmentarray[e]=l;}};return a;};SKYSALES.Class.SportsEquipment.createObject=function(a){SKYSALES.Util.createObject("sportsEquipment","SportsEquipment",a);};SKYSALES.Class.dropdownSportEquipment=function(){var b=new SKYSALES.Class.SkySales(),a=SKYSALES.Util.extendObject(b);a.sportsdropdown={};a.sportsequipmentid="";a.quantityPrefix="";a.del="";a.passengerNumber=0;a.flightreference="";a.currencyCode="";a.selectedItem="";a.origDropDownId="";a.isDisabled=false;a.sportequipPriceArray=null;a.clientId="";a.isBookingModified="";a.sportsAlertCodeList="";a.sportsAlertMessage="";a.init=function(f,e,c){this.setSettingsByObject(f);this.setVars();this.addEvents();this.currencyCode=c;this.initDropDownSprotEquipment(e);if(this.sportsdropdown){this.sportsdropdown.val(this.selectedItem);}if(this.isDisabled){this.sportsdropdown.attr("disabled",true);$("#"+this.origDropDownId).val(this.selectedItem);}a.sportsdropdown.bind("change",function(){SKYSALES.Util.updatePriceDisplay($(this));});a.sportsdropdown.trigger("change");};a.setVars=function(){if(this.isDisabled){this.origDropDownId=this.sportsequipmentid;this.sportsequipmentid=this.sportsequipmentid+"_";}this.sportsdropdown=$("#"+this.sportsequipmentid);};a.findMCCPrice=function(e){var c=0;if(this.sportequipPriceArray!=null){for(c=0;c<this.sportequipPriceArray.length;c++){if(this.sportequipPriceArray[c].SsrCode==e){return this.sportequipPriceArray[c].SsrPrice;}}}return"";};a.initDropDownSprotEquipment=function(q){len1=q.SsrAvailabilityList.length;SSRAvailability=null;flightCarrierCode=null;var r=0;var e=null;selectedItemArray=this.selectedItem?this.selectedItem.split("_"):null,ssrNum=selectedItemArray?selectedItemArray[jQuery.inArray("ssrNum",selectedItemArray)+1]:"1";for(r=0;r<len1;r+=1){SSRAvailability=q.SsrAvailabilityList[r];if(SSRAvailability.passengerNumber==this.passengerNumber){len2=SSRAvailability.flightParts.length;flightPart=null;for(j=0;j<len2;j+=1){flightPart=new SKYSALES.Class.FlightPart();flightPart.init(SSRAvailability.flightParts[j]);if(flightPart.flightKey!=null){flightDesignator="";if(flightPart.flightKey.flightDesignator!=null){flightCarrierCode=flightPart.flightKey.flightDesignator.CarrierCode;flightDesignator=flightPart.flightKey.flightDesignator.CarrierCode+flightPart.flightKey.flightDesignator.FlightNumber;flightDesignator=flightDesignator.split(" ").join("-");}flightRef=flightPart.flightKey.departureDate.getDate()+"-"+flightDesignator+"-"+flightPart.flightKey.departureStation+flightPart.flightKey.arrivalStation;if(this.flightreference==flightRef){len3=flightPart.availableSsrs.length;for(k=0;k<len3;k+=1){if(this.sportsdropdown){text=flightPart.availableSsrs[k].ssr.name;price=a.findMCCPrice(flightPart.availableSsrs[k].ssr.ssrCode);text=text+" ("+price+")";value=this.quantityPrefix+this.del+"passengerNumber"+this.del+this.passengerNumber+this.del+"ssrCode"+this.del+flightPart.availableSsrs[k].ssr.ssrCode+this.del+"ssrNum"+this.del+ssrNum+this.del+"flightReference"+this.del+flightRef;e=this.sportsdropdown.get(0);if(e&&e.options){e.options[e.options.length]=new window.Option(text,value,false,false);}}}if(e&&e.options){if(a.isBookingModified=="True"&&this.selectedItem!=""){if(this.selectedItem.indexOf("__")==-1){e=this.sportsdropdown.get(0);if(e&&e.options){for(var c=0,f=2;c<f;c++){o=e.options[c];if(c==0&&o.value==""){e.options[0]=null;break;}}}}}}}}}}}};a.autoselectsport=function(){if(this.selectedItem!=""&&$(this).is("select")){var z=a.sportsequipmentid;var H=this.options[this.selectedIndex].text;var E=this.options[this.selectedIndex].value;var u=a.flightreference;var O=document.getElementsByTagName("select");var e=[];if((E.length>0||H.length>0)&&u.length>0){var s=E.substring(E.indexOf("ssrCode"),E.indexOf("flightReference")-1);var f=z.substring(z.indexOf("passengerNumber"),z.indexOf("flightReference")-1);var t=z.substring(0,z.lastIndexOf("flightReference")-1);for(var J=0,G=O.length;J<G;J++){if(!O[J].disabled){if(O[J].id&&O[J].id!=z&&O[J].id.indexOf(f)!=-1&&(O[J].id.indexOf(t)!=-1)){e.push(O[J]);}}}if(e){for(var D=0,B=e.length;D<B;D++){var q=e[D].id;var F=document.getElementById(q);var L=u.substring(u.lastIndexOf("-")+1,u.length);var K=q.substring(q.lastIndexOf("-")+1,q.length);var C=L.substring(0,3);var w=L.substring(L.length-3,L.length);var c=K.substring(0,3);var N=K.substring(K.length-3,K.length);if(!(C==N&&c==w)&&(w==c||C==N)){if(s.length>0){var I=$(F).val();$(F).find('option[value*="'+s+'"]').attr("selected","selected");var M=$(F).attr("onchange");if(I!=$(F).find('option[value*="'+s+'"]').val()){SKYSALES.Util.updatePriceDisplay($(F));}}else{if(H.length>0){var I=$(F).val();var A=$(F).find("option").filter(function(){return $.trim($(this).text())==H;});$(F).find("option").filter(function(){return $.trim($(this).text())==H;}).attr("selected",true);var M=$(F).attr("onchange");if(I!=A){SKYSALES.Util.updatePriceDisplay($(F));}}}}}}}var l=a.sportsAlertCodeList;var r=l.split(",");for(var J=0;J<r.length;J++){var v=r[J];if(E.indexOf(v)!=-1){alert(a.sportsAlertMessage);break;}}}};a.addEvents=function(){a.sportsdropdown.change(this.autoselectsport);};return a;};SKYSALES.Class.SSRAvailability=function(){var a=new SKYSALES.Class.SkySales(),b=SKYSALES.Util.extendObject(a);b.SsrAvailabilityList=[];b.init=function(c){this.setSettingsByObject(c);this.setVars();this.addEvents();this.initSsrAvailabilityList();};b.initSsrAvailabilityList=function(){var l=0,f=this.SsrAvailabilityList||[],c=f.length,e=null;for(l=0;l<c;l+=1){e=new SKYSALES.Class.SsrAvailabilityPassenger();e.init(f[l]);this.SsrAvailabilityList[l]=e;}};return b;};SKYSALES.Class.SsrAvailabilityPassenger=function(){var b=new SKYSALES.Class.SkySales(),a=SKYSALES.Util.extendObject(b);a.passengerNumber=0;a.flightParts=[];a.init=function(c){this.setSettingsByObject(c);this.setVars();this.addEvents();this.initFlightPartsArray();};a.initFlightPartsArray=function(){var e=0,l=this.flightParts||[],c=l.length,f=null;for(e=0;e<c;e+=1){f=new SKYSALES.Class.FlightPart();f.init(l[e]);this.flightParts[e]=f;}};return a;};SKYSALES.Class.FlightPart=function(){var b=new SKYSALES.Class.SkySales(),a=SKYSALES.Util.extendObject(b);a.flightKey=null;a.availableSsrs=[];a.init=function(c){this.setSettingsByObject(c);this.setVars();this.addEvents();this.initFlightKey();this.initAvailableSsrsArray();};a.initFlightKey=function(){var c=new SKYSALES.Class.FlightKey();c.init(this.flightKey);this.flightKey=c;};a.initAvailableSsrsArray=function(){var f=0,e=this.availableSsrs||[],c=e.length,l=null;for(f=0;f<c;f+=1){l=new SKYSALES.Class.AvailableSsr();l.init(e[f]);this.availableSsrs[f]=l;}};return a;};SKYSALES.Class.FlightKey=function(){var b=new SKYSALES.Class.SkySales(),a=SKYSALES.Util.extendObject(b);a.arrivalStation="";a.departureDate="";a.departureStation="";a.flightDesignator=null;a.init=function(c){this.setSettingsByObject(c);this.setVars();this.addEvents();this.initDepartureDate();this.initFlightDesignator();};a.initDepartureDate=function(){var c=SKYSALES.Class.Date();c.init(this.departureDate);this.departureDate=c;};a.initFlightDesignator=function(){var c=SKYSALES.Class.FlightDesignator();c.init(this.flightDesignator);this.flightDesignator=c;};return a;};SKYSALES.Class.FlightDesignator=function(){var b=new SKYSALES.Class.SkySales(),a=SKYSALES.Util.extendObject(b);a.CarrierCode="";a.FlightNumber="";a.init=function(c){this.setSettingsByObject(c);this.setVars();this.addEvents();};return a;};SKYSALES.Class.AvailableSsr=function(){var b=new SKYSALES.Class.SkySales(),a=SKYSALES.Util.extendObject(b);a.price="";a.ssr=null;a.init=function(c){this.setSettingsByObject(c);this.setVars();this.addEvents();this.initSSR();};a.initSSR=function(){var c=SKYSALES.Class.SSR();c.init(this.ssr);this.ssr=c;};return a;};SKYSALES.Class.SSR=function(){var a=new SKYSALES.Class.SkySales(),b=SKYSALES.Util.extendObject(a);b.name="";b.ssrCode="";b.init=function(c){this.setSettingsByObject(c);this.setVars();this.addEvents();};return b;};SKYSALES.AddOnsInputDataRequestHandler=function AddOnsInputDataRequestHandler(a,e,l,s,t,q,c,f){var r=s||false,b={inputParams:JSON.stringify(e),optOutAddOn:r,contactInput:JSON.stringify(l)},a=a+"Ajax-resource.aspx",m=(typeof q)=="number"?q:parseInt(q),f=f&&(typeof f==="string")?f:"POST";$.ajax({url:a,data:b,success:t,timeout:m,error:c,type:f});};if(SKYSALES.Class.InsuranceInput===undefined){SKYSALES.Class.InsuranceInput=function(){var e=new SKYSALES.Class.SkySales();var l=SKYSALES.Util.extendObject(e);l.clientId="";l.insuranceAcceptInputId="";l.insuranceAcceptInput=null;l.insuranceAcceptMessage="";l.yesInsuranceInputId="";l.yesInsuranceInput=null;l.submitButtonId="";l.submitButton=null;l.addFriendsButtonId="";l.addFriendsButton=null;l.linkButtonDeclineId="";l.linkButtonDecline=null;l.continueButtonId="";l.continueButton=null;l.validateValueId="";l.confirmCancelNote="";l.noAUSInsuranceInputId="";l.noAUSInsuranceInput=null;l.departCountryCode="";l.AUSNoCheckedAlert="";l.confirmCancelNoteOptOut="";l.insuranceAcceptMessageOptOut="";l.isChangeBooking="";l.isWarrantPayment="";l.isMulticityBooking="";l.focusOnInsurance="";l.waitImgLoadingMessage="";l.travelInsuranceHeaderLabel="";l.linkButtonDeclineInsAUSId="";l.linkButtonDeclineInsAUS=null;l.insuranceDivContainerId="";l.insuranceDivContainer=null;l.insuranceContactInputId="";l.insuranceContactInput=null;l.paxControlDetails=null;l.addOnsContactDetails=null;l.bookingPaxDetails=null;l.bookingContactDetails=null;l.contactDetails={};l.paxTravelAgeArray=[];l.insuranceAddOnsUrl="";l.insuranceFeeCode="";l.adultPreErrorText="";l.adultErrorText="";l.adultAgeLimitText="";l.childErrorPreText="";l.childErrorText="";l.infantErrorPreText="";l.infantErrorText="";l.infantBirthDateFutureErrorPreText="";l.infantBirthDateFutureErrorPostText="";l.duplicateAdultTextPre="";l.duplicateAdultText="";l.insuranceTimedOutMessage="";l.timeOutMilliseconds="10000";l.returnDate="";l.departDate="";var c=null;l.setSettingsByObject=function(q){e.setSettingsByObject.call(this,q);var r="";for(r in q){if(l.hasOwnProperty(r)){l[r]=q[r];}}};l.addEvents=function(){e.addEvents.call(this);if($("#"+l.yesInsuranceInputId).length>0){l.yesInsuranceInput.click(l.clickInsuranceInput);}if($("#"+l.insuranceAcceptInputId).length>0){if(l.departCountryCode=="AU"||l.departCountryCode=="NZ"||l.departCountryCode=="JP"){l.insuranceAcceptInput.click(l.clickYesInsuranceInputAUS);}l.continueButton.click(l.validateContinue);}if($("#"+l.linkButtonDeclineId).length>0){l.linkButtonDecline.click(l.confirmCancelInsuranceHandler);}if($("#"+l.noAUSInsuranceInputId).length>0){l.noAUSInsuranceInput.click(l.clickNoInsuranceInputAUS);l.continueButton.click(l.validateCancel);}if($("#"+l.submitButtonId).length>0){l.submitButton.click(l.submitInsuranceTravelerHandler);}if($("#"+l.addFriendsButtonId).length>0){l.addFriendsButton.click(l.insuranceTriggerHandler);}};l.setVars=function(){e.setVars.call(this);if($("#"+l.insuranceDivContainerId).length>0){l.insuranceDivContainer=$("#"+l.insuranceDivContainerId);}if($("#"+l.linkButtonDeclineInsAUSId).length>0){l.linkButtonDeclineInsAUS=$("#"+l.linkButtonDeclineInsAUSId);}if($("#"+l.insuranceAcceptInputId).length>0){l.insuranceAcceptInput=$("#"+l.insuranceAcceptInputId);}if($("#"+l.yesInsuranceInputId).length>0){l.yesInsuranceInput=$("#"+l.yesInsuranceInputId);}if($("#"+l.submitButtonId).length>0){l.submitButton=$("#"+l.submitButtonId);}if($("#"+l.addFriendsButtonId).length>0){l.addFriendsButton=$("#"+l.addFriendsButtonId);}if($("#"+l.continueButtonId).length>0){l.continueButton=$("#"+l.continueButtonId);}if($("#"+l.linkButtonDeclineId).length>0){l.linkButtonDecline=$("#"+l.linkButtonDeclineId);}if($("#"+l.noAUSInsuranceInputId).length>0){l.noAUSInsuranceInput=$("#"+l.noAUSInsuranceInputId);}if(l.paxControlDetails&&l.paxControlDetails.length>0){var q=l.paxControlDetails.length;for(var t=0;t<q;t++){var s=l.paxControlDetails[t],v=null;var w=s.hasOwnProperty("birthDateMonthId")?$("#"+s["birthDateMonthId"]):null,r=s.hasOwnProperty("birthDateDayId")?$("#"+s["birthDateDayId"]):null,u=s.hasOwnProperty("birthDateYearId")?$("#"+s["birthDateYearId"]):null;v=new SKYSALES.Class.TravelerAge();v.init(w,r,u);l.paxTravelAgeArray[t]=v;}}};l.addEventForInsuranceHandler=function(){if(l.paxControlDetails&&l.paxControlDetails.length>0){var q=l.paxControlDetails.length;for(var s=0;s<q;s++){var r=l.paxControlDetails[s];for(propName in r){if(r.hasOwnProperty(propName)){if(!propName.match(/^contentId$/)){var t=$("#"+r[propName]);if(t&&t.length>0){if(t[0].type&&/select/.test(t[0].type)){t.blur(l.insuranceTriggerHandler);}else{t.change(l.insuranceTriggerHandler);}}}}}}}};l.init=function(q){this.setSettingsByObject(q);this.setVars();this.addEvents();this.addEventForInsuranceHandler();if(l.collectPassengerData()){l.insuranceTriggerHandler();}else{if(l.isMulticityBooking!="true"&&l.collectBookingPassengerData()){var r=l.collectBookingPassengerData();l.addInsuranceHandler(r);}}this.supplant();};l.supplant=function(){if(this.focusOnInsurance&&this.focusOnInsurance=="true"&&this.insuranceDivContainer&&this.insuranceDivContainer.length){var r=this.insuranceDivContainer.offset(),q=r?(r.top-40)+"px":"550px";$("body").animate({scrollTop:q},"slow");}};l.insuranceTriggerHandler=function(){var t=false,r=$("#paxJsonDataFromRequest").val()||"";if(l.isWarrantPayment!="true"&&l.isMulticityBooking!="true"){t=l.collectPassengerData();}var q=a(t,r);if(t&&q){t=false;}if(t&&!l.validatePassengers()){t=false;}if(!q&&r){var s=$("#checkBoxInsuranceId");if(s&&s.val()){var u=$("#"+s.val());if(u){u.removeAttr("checked").change();}}}if(t!=false&&t!=null){l.addInsuranceHandler(t);}};l.validateContactDetails=function(){if(l.addOnsContactDetails["contactEmailId"]){var q=$("#"+l.addOnsContactDetails["contactEmailId"]).get(),r=q["regex"]!=undefined?q["regex"]:q.getAttribute("regex");}return false;};l.validatePassengers=function(){var w=null,v=null,r=null;var q=l.paxControlDetails.length;for(var s=0;s<q;s++){var t=l.paxControlDetails[s],u="";if(t.paxType=="INF"||t.paxType=="Infant"){if(w==null){w=s;}if(!l.paxTravelAgeArray[s].isNotFutureDate()){u=(l.infantBirthDateFutureErrorPreText+((s-w)+1)+l.infantBirthDateFutureErrorPostText);}else{if(!l.paxTravelAgeArray[s].isInfant(l.returnDate,null,l.departDate)){u=(l.infantErrorPreText+((s-w)+1)+l.infantErrorText);}}}else{if(t.paxType=="CHD"){if(v==null){v=s;}if(!l.paxTravelAgeArray[s].isNotFutureDate()){u=(l.childErrorPreText+((s-v)+1)+l.infantBirthDateFutureErrorPostText);}else{if(!l.paxTravelAgeArray[s].isChild(l.returnDate,null)){u=(l.childErrorPreText+((s-v)+1)+l.childErrorText);}}}else{if(t.paxType=="ADT"){if(r==null){r=s;}if(!l.paxTravelAgeArray[s].isNotFutureDate()){u=(l.adultPreErrorText+((s-r)+1)+l.infantBirthDateFutureErrorPostText);}else{if(!l.paxTravelAgeArray[s].isAdult(l.departDate,null)){u=(l.adultPreErrorText+((s-r)+1)+l.adultAgeLimitText);}else{if(!l.paxTravelAgeArray[s].isScpAge(l.departDate,null,"150",false)){u=(l.adultPreErrorText+((s-r)+1)+l.adultErrorText);}}}}}}if(u){return false;}}return true;};l.addInsuranceOptInHandler=function(){var q=l.collectPassengerData();l.addInsuranceHandler(q);};l.validateDuplicateTravelCompany=function(r){var t=null;for(var s=0;s<r.length;s+=1){if(r[s].isInfant==1){if(t==null){t=s;}for(var q=s;q<r.length;q+=1){if(r[q].isInfant==1&&q!=s){if(r[s].passengerNumber==r[q].passengerNumber){alert(l.duplicateAdultTextPre+(q-t+1)+l.duplicateAdultText);return false;}}}}}return true;};l.addInsuranceHandler=function(q){if(l.validateDuplicateTravelCompany(q)){if(SKYSALES.AddOnsInputDataRequestHandler){var r=[],s=l.contactDetails;r=q||l.collectPassengerData();if(r!=null||r!=false){SKYSALES.AddOnsInputDataRequestHandler(l.insuranceAddOnsUrl,r,s,null,l.insuranceResponseHandler,l.timeOutMilliseconds,l.insuranceTimedOutHandler);l.insuranceDivContainer.html("<h2>"+l.travelInsuranceHeaderLabel+'</h2><div id="waitImgLoadingAnimation"></div>');}}}};l.collectPassengerData=function(){var r=true,J=[],G={};if(l.paxControlDetails&&l.paxControlDetails.length>0){var E=l.paxControlDetails.length;for(var D=0;D<E;D++){var F=l.paxControlDetails[D],z="",u={};for(z in F){if(F.hasOwnProperty(z)&&r){if(F[z]!==undefined&&!z.match(/^contentId$/)){switch(z){case"imFlyingCheckBoxId":break;case"genderId":var t,H,s=$("#"+F[z]);t=z.replace("Id","");H=s.val();if(H){u[t]=s[0].options[H].text;}else{r=false;}break;case"birthDateDayId":case"birthDateMonthId":case"birthDateYearId":var C=$("#"+F.birthDateDayId).val(),I=$("#"+F.birthDateMonthId).val(),v=$("#"+F.birthDateYearId).val(),K=new Date(I.toString()+"/"+C.toString()+"/"+v.toString());if(!u.hasOwnProperty("dateOfBirth")&&(m(K,C,I,v))){u["dateOfBirth"]=SKYSALES.Util.dateDisplayFormat(I.toString()+"/"+C.toString()+"/"+v.toString(),"yy-mm-dd 00:00:00");}else{if(!m(K,C,I,v)){r=false;}}break;default:var t=z;if(z.indexOf("Id")==(z.length-2)){var w=$("#"+F[z]).val();t=z.replace("Id","");if(w){u[t]=w;}else{r=false;}}else{if(F[z]){u[z]=F[z];}else{r=false;}}break;}}}else{if(!r){return false;}}}J[D]=u;}}else{return false;}if(l.addOnsContactDetails){var B=l.addOnsContactDetails;for(contactPropName in B){if(B.hasOwnProperty(contactPropName)&&r){switch(contactPropName){case"contactFirstNameId":case"contactLastNameId":var q=$("#"+B["contactFirstNameId"]).val(),A=$("#"+B["contactLastNameId"]).val();if(q&&A){G["contactName"]=q+" "+A;}else{r=false;}break;default:var t=contactPropName;if(contactPropName.indexOf("Id")==(contactPropName.length-2)){var w=$("#"+B[contactPropName]).val();t=contactPropName.replace("Id","");if(w){G[t]=w;}else{r=false;}}else{if(B[contactPropName]){G[contactPropName]=B[contactPropName];}else{r=false;}}break;}}else{if(!r){return false;}}}l.contactDetails=G;}else{return false;}if(r){return J;}else{return false;}};l.collectBookingPassengerData=function(){if(!$.isEmptyObject(l.bookingContactDetails)&&!$.isEmptyObject(l.bookingPaxDetails)){l.contactDetails=l.bookingContactDetails;return l.bookingPaxDetails;}else{return false;}};var f=0,b=2;l.insuranceTimedOutHandler=function(q,s,r){if(s=="timeout"&&f<=b){$.ajax(this);f++;return;}else{l.insuranceDivContainer.html('<div class="vspacerSml"></div><p>'+l.insuranceTimedOutMessage+'</p><div class="vspacerSml"></div><div class="vspacerSml"></div>');}};l.insuranceResponseHandler=function(q){if(l.insuranceDivContainer&&l.insuranceDivContainer.length){l.insuranceDivContainer.html(q);l.insuranceCheckBoxChecked();l.addInsuranceCancelEvent();l.addInsuranceOptOutEvents();l.addInsuranceForAUSCheckBoxEvents();}};l.submitInsuranceTravelerHandler=function(){var s=$("#waitImgLoadingAnimation"),r=$("#checkBoxInsuranceId"),t=$("#checkBoxAUSNoInsuranceId");if(s&&s.length>0){alert(l.waitImgLoadingMessage);SKYSALES.RemoveLoadingBar();return false;}else{if((r&&r.val())||(t&&t.val())){var q=$("#"+r.val()),u=$("#"+t.val());if(q.length>0&&!q.is(":checked")){}}}return true;};l.insuranceCheckBoxChecked=function(){var q=$("#checkBoxInsuranceId");if(q&&q.val()){var r=$("#"+q.val());}};l.addInsuranceCancelEvent=function(){var q=$("#insuranceLinkCancelId");if(q&&q.val()){var r=$("#"+q.val());if(r.length>0){r.click(l.cancelInsuranceTravelerHandler);}}};l.addInsuranceOptOutEvents=function(){var r=$("#radioButtonNoInsuranceId"),q=$("#radioButtonYesInsuranceId");if(q&&q.val()){var s=$("#"+q.val());if(s.length>0){s.click(l.addInsuranceOptInHandler);}}};l.addInsuranceForAUSCheckBoxEvents=function(){var q=$("#checkBoxInsuranceId"),r=$("#checkBoxAUSNoInsuranceId");if(q&&r&&q.val()&&r.val()){var t=$("#"+q.val()),s=$("#"+r.val());if(t&&t.is(":checked")){t.trigger("change");}if(t&&s&&t.length>0&&s.length>0){t.click(function(){if($("#"+this.id).is(":checked")){s.attr("checked",false);}});s.click(function(){if($("#"+this.id).is(":checked")){t.attr("checked",false).trigger("change");if(!l.cancelInsuranceTravelerHandler()){t.attr("checked",true).trigger("change");$("#"+this.id).attr("checked",false);}}});}}};l.cancelInsuranceTravelerHandler=function(){if(SKYSALES.AddOnsInputDataRequestHandler){var q=l.collectPassengerData(),t=l.contactDetails;var s=$("#checkBoxInsuranceId").val(),r=$("#"+s);if(l.departCountryCode=="AU"||l.departCountryCode=="NZ"){if(confirm(l.confirmCancelNoteOptOut)){if(r&&r.is(":checked")){r.removeAttr("checked");r.trigger("change");}if(q!=null||q!=false){SKYSALES.AddOnsInputDataRequestHandler(l.insuranceAddOnsUrl,q,t,true,l.insuranceResponseHandler,l.timeOutMilliseconds,l.insuranceTimedOutHandler);l.insuranceDivContainer.html('<div id="waitImgLoadingAnimation"></div>');}}else{return false;}}else{if(confirm(l.confirmCancelNote)){if(r&&r.is(":checked")){r.removeAttr("checked").trigger("change");}if(q!=null||q!=false){SKYSALES.AddOnsInputDataRequestHandler(l.insuranceAddOnsUrl,q,t,true,l.insuranceResponseHandler,l.timeOutMilliseconds,l.insuranceTimedOutHandler);l.insuranceDivContainer.html('<div id="waitImgLoadingAnimation"></div>');}}else{return false;}}}$("#validationErrorContainerReadAlong").hide();return true;};var a=function(r,s){if(s){var w=JSON.parse(s);if(w&&w.length>0){var z=r.length;for(var u=0;u<z;u++){var t=r[u],A=w[u];if(t&&A){for(propName in t){if(t.hasOwnProperty(propName)&&A.hasOwnProperty(propName)){var q=$.trim(t[propName]),v=$.trim(A[propName]);if(q!=v){return false;}}}}}}else{return false;}}else{return false;}return true;};var m=function(t,q,r,s){if(t.getDate()!=Number(q)){return false;}else{if((t.getMonth()+1)!=Number(r)){return false;}else{if(t.getFullYear()!=Number(s)){return false;}}}return true;};l.confirmCancelInsuranceHandler=function(){if(l.departCountryCode=="AU"||l.departCountryCode=="NZ"||l.departCountryCode=="JP"){if(l.noAUSInsuranceInput.attr("checked")){if(window.confirm(l.confirmCancelNoteOptOut)){SKYSALES.DisplayLoadingBar();__doPostBack("CONTROLGROUPADDONS$InsuranceInputAddOnsView$LinkButtonInsuranceDecline","");}else{l.insuranceAcceptInput.attr("checked",true);l.noAUSInsuranceInput.attr("checked",false);return false;}}}else{if(window.confirm(l.confirmCancelNote)){SKYSALES.DisplayLoadingBar();}else{return false;}}};l.clickInsuranceInput=function(){SKYSALES.DisplayLoadingBar();document.getElementById(l.submitButtonId).click();};l.validateCancel=function(){if(l.departCountryCode=="AU"||l.departCountryCode=="NZ"||l.departCountryCode=="JP"){if(l.noAUSInsuranceInput.attr("checked")){$("#"+l.validateValueId).val("false");$("#"+l.linkButtonDeclineId).click();}}};l.validateContinue=function(){$("#"+l.validateValueId).val("true");};l.clickYesInsuranceInputAUS=function(){var s=l.insuranceAcceptInput!=null?l.insuranceAcceptInput.attr("checked"):true;var r=l.noAUSInsuranceInput!=null?l.noAUSInsuranceInput.attr("checked"):true;if(s&&r){var q=l.noAUSInsuranceInput==undefined?l.insuranceAcceptInput:l.noAUSInsuranceInput;q.attr("checked",false);}};l.clickNoInsuranceInputAUS=function(){if(l.insuranceAcceptInput.attr("checked")&&l.noAUSInsuranceInput.attr("checked")){l.insuranceAcceptInput.attr("checked",false);}};return l;};SKYSALES.Class.InsuranceInput.createObject=function(a){SKYSALES.Util.createObject("insuranceInput","InsuranceInput",a);};}SKYSALES.fareRuleHandler=function(t,m,e){if($("#CheckBoxAgreementLabel").length>0){$("#CheckBoxAgreementLabel").hide();}if($("#CheckBoxAgreementLabelAK").length>0){$("#CheckBoxAgreementLabelAK").hide();}if($("#CheckBoxAgreementLabelFD").length>0){$("#CheckBoxAgreementLabelFD").hide();}if($("#CheckBoxAgreementLabelQZ").length>0){$("#CheckBoxAgreementLabelQZ").hide();}if($("#CheckBoxAgreementLabelPQ").length>0){$("#CheckBoxAgreementLabelPQ").hide();}if($("#CheckBoxAgreementLabelZ2").length>0){$("#CheckBoxAgreementLabelZ2").hide();}if($("#CheckBoxAgreementLabelJW").length>0){$("#CheckBoxAgreementLabelJW").hide();}if($("#CheckBoxAgreementLabelD7").length>0){$("#CheckBoxAgreementLabelD7").hide();}if($("#CheckBoxAgreementLabelConnecting").length>0){$("#CheckBoxAgreementLabelConnecting").hide();}if($(".CheckBoxAgreementLabelBF").length>0){$(".CheckBoxAgreementLabelBF").hide();}if(t.length>0){var a="|";var c="~";var q="^";var b="";var s="";var r="BF";var l=false;flightInfos=t[0].split(a);if(flightInfos[1].indexOf("^")!=-1){carrierInfos=flightInfos[1].split(q);for(var f=0;f<carrierInfos.length;f++){if(carrierInfos[f].split(c).length>0){if(carrierInfos[f].split(c)[0]==r){l=true;break;}}}carrierKey1=carrierInfos[0].split(c);carrierKey2=carrierInfos[1].split(c);b=carrierKey1[0];s=carrierKey2[0];if(b!=s&&(b=="D7"||s=="D7")){b="Connecting";}}else{flightKeys=flightInfos[1].split(c);b=flightKeys[0];carrierInfos=flightInfos[1].split(q);for(var f=0;f<carrierInfos.length;f++){if(carrierInfos[f]==r){l=true;break;}}}if(l&&$("#CheckBoxAgreementLabel_"+r+"_"+e).length>0){$("#CheckBoxAgreementLabel_"+r+"_"+e).css("display","inline");}else{if(l&&$("#CheckBoxAgreementLabel_"+r+"_default").length>0){$("#CheckBoxAgreementLabel_"+r+"_default").css("display","inline");}else{if($("#CheckBoxAgreementLabel"+b).length>0){$("#CheckBoxAgreementLabel"+b).css("display","inline");}else{if($("#CheckBoxAgreementLabel").length>0){$("#CheckBoxAgreementLabel").css("display","inline");}}}}}else{$("#agreementInput").hide();$("#ControlGroupSelectView_ButtonSubmit").hide();}};SKYSALES.dgrGoodsNotify=function(f,b,a){if($("#DgrGoodNotifyJW").length>0){$("#DgrGoodNotifyJW").hide();}if($("#DgrGoodNotifyJW_Icon").length>0){$("#DgrGoodNotifyJW_Icon").hide();}if(f.length>0){var l="|";var m="~";var c="^";var e="";flightInfos=f[0].split(l);flightKeys=flightInfos[1].split(m);e=flightKeys[0];}if(e=="JW"&&(a=="ja-JP"||a=="en-GB"||a=="en-US")){$("#DgrGoodNotify"+e).css("display","inline");$("#DgrGoodNotifyJW_Icon").css("display","inline");$("#standard_disable-icon").hide();}};SKYSALES.Class.PaxSSRDisplayAtaGlance=function(){var a=new SKYSALES.Class.SkySales();var b=SKYSALES.Util.extendObject(a);b.paxNameDisplayId="";b.ssrListDisplayId="";b.paxNameDisplayObj=null;b.paxNameSpanDisplayObj=null;b.ssrListDisplayObj=null;b.init=function(c){this.setSettingsByObject(c);this.setVars();this.addEvents();};b.setVars=function(){b.paxNameSpanDisplayObj=$("#"+this.paxNameDisplayId+"span");b.paxNameDisplayObj=$("#"+this.paxNameDisplayId);b.ssrListDisplayObj=$("#"+this.ssrListDisplayId);};b.addEvents=function(){b.paxNameDisplayObj.click(this.hideShowSSRListHandler);b.paxNameSpanDisplayObj.click(this.hideShowSSRListHandler);};b.hideShowSSRListHandler=function(){if(b.paxNameDisplayObj.hasClass("expand_iconSml")){b.paxNameDisplayObj.removeClass("expand_iconSml").addClass("collapse_iconSml");}else{b.paxNameDisplayObj.removeClass("collapse_iconSml").addClass("expand_iconSml");}b.ssrListDisplayObj.slideToggle();};return b;};SKYSALES.Class.PaxSSRDisplayAtaGlance.createObject=function(a){SKYSALES.Util.createObject("paxSSRDisplayAtaGlance","PaxSSRDisplayAtaGlance",a);};function populatePassengerForAnonymous(a,e,c,b){if(contactData){contactData.title=$("#"+a+"_DropDownListTitle").val();if(contactData.title==="MR"){contactData.gender="1";}else{if(contactData.title==="MS"){contactData.gender="2";}}contactData.firstName=$("#"+a+"_TextBoxFirstName").val();contactData.middleName=$("#"+a+"_TextBoxMiddleName").val();contactData.lastName=$("#"+a+"_TextBoxLastName").val();contactData.ff="";contactData.bdayDay="";contactData.bdayMonth="";contactData.bdayYear="";contactData.nationality=$("#"+a+"_DropDownListCountry").val();contactData.countryOfResidence="";populatePassenger(e,c,b);}}function populatePassenger(c,m,b){if(contactData){var e=m-1;var a=$("#passengerInputContainer"+e);var u="";if(contactData.firstName!=""){u=contactData.firstName;}else{u=contactData.lastName;}var r=$("input[id=GeoIP]").val();var s=[{"name":"DropDownListTitle","value":contactData.title},{"name":"TextBoxFirstName","value":u},{"name":"TextBoxMiddleName","value":contactData.middleName},{"name":"TextBoxLastName","value":contactData.lastName},{"name":"TextBoxCustomerNumber","value":contactData.ff},{"name":"DropDownListBirthDateDay","value":contactData.bdayDay},{"name":"DropDownListBirthDateMonth","value":contactData.bdayMonth},{"name":"DropDownListBirthDateYear","value":contactData.bdayYear},{"name":"DropDownListGender","value":contactData.gender},{"name":"DropDownListNationality","value":(contactData.nationality==undefined)?r:contactData.nationality},{"name":"DropDownListResidentCountry","value":contactData.countryOfResidence},{"name":"TextBoxDocumentNumber0","value":contactData.passportNumber},{"name":"DropDownListDocumentCountry0","value":contactData.passportCountry},{"name":"DropDownListDocumentDateDay0","value":contactData.passportDay},{"name":"DropDownListDocumentDateMonth0","value":contactData.passportMonth},{"name":"DropDownListDocumentDateYear0","value":contactData.passportYear},{"name":"TextBoxDocumentNumber1","value":contactData.idCardNumber},{"name":"DropDownListDocumentCountry1","value":contactData.idCardCountry}];var q=$("option:selected",$("#CONTROLGROUP_OUTERTRAVELER_CONTROLGROUPTRAVELER_ContactInputTravelerView_DropDownListCountry")).index();if($("#"+c.id+":checked").val()==null&&b!="False"){$.map(s,function(v){if(v){$("input[id*="+v.name+"]",a).val("");if(v.name=="TextBoxFirstName"||v.name=="TextBoxLastName"){$("input[id*="+v.name+"]").trigger("change");}if(v.name=="DropDownListNationality"||v.name=="DropDownListBirthDateDay"||v.name=="DropDownListBirthDateMonth"||v.name=="DropDownListBirthDateYear"){$("select[id*="+v.name+"]").val("");}if(v.name=="DropDownListTitle"){$("select[id*="+v.name+"]")[1].selectedIndex=0;}if(v.name=="TextBoxCustomerNumber"){$("select[id*="+v.name+"]").val("");}}});$("#unTick").val("OFF");$("#CONTROLGROUP_OUTERTRAVELER_CONTROLGROUPTRAVELER_PassengerInputTravelerView_DropDownListTitle_0").removeAttr("disabled").change();$("#CONTROLGROUP_OUTERTRAVELER_CONTROLGROUPTRAVELER_PassengerInputTravelerView_TextBoxFirstName_0").removeAttr("disabled").change();$("#CONTROLGROUP_OUTERTRAVELER_CONTROLGROUPTRAVELER_PassengerInputTravelerView_TextBoxLastName_0").removeAttr("disabled").change();$("#CONTROLGROUP_OUTERTRAVELER_CONTROLGROUPTRAVELER_PassengerInputTravelerView_TextBoxCustomerNumber_0").removeAttr("disabled").change();}else{if(b!="False"){$.map(s,function(v){if(v.name.indexOf("TextBox")>=0){$("input[id*="+v.name+"]",a).val(v.value);}else{$("input[id*="+v.name+"]",a).val(v.value);$("select[id*="+v.name+"]",a).val(v.value);}if(v.name=="TextBoxFirstName"||v.name=="TextBoxLastName"){$("input[id*="+v.name+"]").trigger("change");}if(v.name=="TextBoxCustomerNumber"&&v.value>0){$("#CONTROLGROUP_OUTERTRAVELER_CONTROLGROUPTRAVELER_PassengerInputTravelerView_TextBoxCustomerNumber_0").attr("disabled","disabled");}});$("#unTick").val("ON");$("#CONTROLGROUP_OUTERTRAVELER_CONTROLGROUPTRAVELER_PassengerInputTravelerView_DropDownListTitle_0").attr("disabled","disabled").change();$("#CONTROLGROUP_OUTERTRAVELER_CONTROLGROUPTRAVELER_PassengerInputTravelerView_TextBoxFirstName_0").attr("disabled","disabled").change();$("#CONTROLGROUP_OUTERTRAVELER_CONTROLGROUPTRAVELER_PassengerInputTravelerView_TextBoxLastName_0").attr("disabled","disabled").change();}else{if($("#"+c.id+":checked").val()==null&&b=="False"){$.map(s,function(v){if(v){if((v.name!="TextBoxFirstName")&&(v.name!="TextBoxLastName")&&(v.name!="TextBoxCustomerNumber")){$("input[id*="+v.name+"]",a).val("");}}});}else{if(b=="False"){$.map(s,function(v){if(v){if((v.name!="TextBoxFirstName")&&(v.name!="TextBoxLastName")&&(v.name!="TextBoxCustomerNumber")){if(v.name.indexOf("TextBox")>=0){$("input[id*="+v.name+"]",a).val(v.value);}else{$("input[id*="+v.name+"]",a).val(v.value);$("select[id*="+v.name+"]",a).val(v.value);}}}});}}}}SKYSALES.validateNationality(null,false,true,true);if($.browser.msie||/chrome/.test(navigator.userAgent.toLowerCase())){var t=$("select[id*=DropDownListBirthDateYear]");if(t&&t.length>0){var f=t.length-1;var l=$("select[id*=DropDownListBirthDateYear_"+f+"]");if(l&&l.length>0){l.trigger("blur");}}}q=parseInt(q);$("#CONTROLGROUP_OUTERTRAVELER_CONTROLGROUPTRAVELER_ContactInputTravelerView_DropDownListCountry option").eq(q).prop("selected",true);$("input[id*='TextBoxFirstName']").blur();$("input[id*='TextBoxLastName']").blur();}}if(!SKYSALES.Class.ControlGroupBookingRetrieve){SKYSALES.Class.ControlGroupBookingRetrieve=function(){var b=new SKYSALES.Class.ControlGroup();var a=SKYSALES.Util.extendObject(b);a.bookingRetrieve=null;a.init=function(c){this.setSettingsByObject(c);var e=new SKYSALES.Class.BookingRetrieve();e.init(c);a.bookingRetrieve=e;this.setVars();this.addEvents();};a.validateHandler=function(){var c=a.validate();return c;};a.validate=function(){var e=false;var c=this.bookingRetrieve;e=c.isOneSectionPopulated();if(e){e=b.validate.call(this);}return e;};return a;};}if(!SKYSALES.Class.BookingRetrieve){SKYSALES.Class.BookingRetrieve=function(){var b=new SKYSALES.Class.FlightSearch();var a=SKYSALES.Util.extendObject(b);a.optionHeaderText=[];a.marketArray=[];a.missingInformation="";a.sectionValidation={};a.init=function(c){this.setSettingsByObject(c);this.setVars();this.addEvents();};a.setVars=function(){b.setVars.call(this);var f=0;var c=0;var m=this.sectionValidation;var e=[];var q="";var l=null;for(q in m){if(m.hasOwnProperty(q)){e=m[q]||[];c=e.length;for(f=0;f<c;f+=1){l=e[f];l.input=this.getById(l.id);}}}};a.isOneSectionPopulated=function(){var m=0;var q=0;var v=this.sectionValidation;var s=[];var c="";var r=null;var t=null;var f=false;var u="";var l="";var e=true;for(c in v){if(v.hasOwnProperty(c)){s=v[c]||[];q=s.length;e=true;for(m=0;m<q;m+=1){r=s[m];t=r.input.get(0);if(t){u=t.value;l=u.requiredempty||"";if(u===l){u="";}if(!u){e=false;break;}}}if(e){f=true;break;}}}if(!f){alert(this.missingInformation);SKYSALES.RemoveLoadingBar();}return f;};return a;};}SKYSALES.Class.MCCInput=function(){var a=SKYSALES.Class.SkySales(),e=SKYSALES.Util.extendObject(a),b=SKYSALES.Util.getResource();e.clientId="";e.contentId="";e.bookingCurrencyCode="";e.externalRateId="";e.defaultCurrencyValue="";e.dropDownListCurrencyId="";e.dropDownListCurrency=null;e.dropDownOrigin=null;e.currencyArray=[];e.externalRateInfo=b.externalRateInfo;e.currencyHash=b.currencyHash;e.stationHash=SKYSALES.Util.getResource().stationHash;e.applyMCCBtnId="";e.applyMCCButton=null;e.setVars=function(){e.dropDownListCurrency=this.getById(this.dropDownListCurrencyId);if(this.contentId){e.dropDownOrigin=$("#"+this.contentId+" :input[id*=TextBoxMarketOrigin1]");}else{e.dropDownOrigin=$("input[id*=TextBoxMarketOrigin1]");}if(e.applyMCCBtnId!=""){e.applyMCCButton=$("#"+e.applyMCCBtnId);if(e.applyMCCButton){e.applyMCCButton.attr("onclick","SKYSALES.DisplayLoadingBar()");}}};e.updateCurrencyHandler=function(){e.updateCurrency();};e.populateCurrency=function(){this.updateCurrency();};e.updateCurrency=function(){var r=this.externalRateInfo.ExternalRateList,B="",l="",v=[],C=null,u=null,m=null,w={},A="",z="",q=0,t={};if(this.externalRateInfo.ExternalRateList){r=this.externalRateInfo.ExternalRateList.sort(function(E,D){return E.collectedCurrency>D.collectedCurrency?1:-1;});}if(this.dropDownOrigin.length>0){z=this.dropDownOrigin.val();t=this.stationHash[z];}else{z=$("#MCCOriginCountry").val();t.countryCode=z;}if(z!==""&&z!==undefined){var s=this.currencyArray;for(q in s){if(s[q].countryCode===t.countryCode){u=this.currencyHash[s[q].currencyCode];if(u){A=s[q].currencyCode+" - "+u.name;}else{A=s[q].currencyCode;}w={"code":this.defaultCurrencyValue,"name":A};v[v.length]=w;for(B in r){if(r.hasOwnProperty(B)){C=r[B];if(C.quotedCurrency===s[q].currencyCode){u=this.currencyHash[C.collectedCurrency];if(u){C.name=u.code+" - "+u.name;}else{C.name=C.collectedCurrency;}v[v.length]=C;}}}break;}}if(!c(this.externalRateId,v)||!this.externalRateId||this.externalRateId==="null"){l="default";}else{l=this.externalRateId;}var f={"objectArray":v,"selectBox":this.dropDownListCurrency,"selectedItem":l,"showCode":false};SKYSALES.Util.populateSelect(f);$("#"+e.dropDownListCurrencyId+"").trigger("change");}};var c=function(l,f){if(l&&l!==null){for(objectIndex in f){if(f[objectIndex].code==l){return true;}}}return false;};e.addEvents=function(){this.dropDownOrigin.change(this.updateCurrencyHandler);};e.init=function(f){this.setSettingsByObject(f);this.setVars();this.addEvents();this.populateCurrency();};return e;};SKYSALES.Util.getRequiredFlag=function(){return"*";};SKYSALES.Util.getAttributeValue=function(f,c){var b=c+".validation",a=f.data(b);return a;};SKYSALES.Util.setAttribute=function(f,b,c){var a=b+".validation";f.data(a,c);};SKYSALES.Util.removeAttribute=function(c,b){var a=b+".validation";c.removeData(a);};SKYSALES.Util.setRequiredAttribute=function(c,m){var l="required",a="requirederror",f="true",b=SKYSALES.Util.setAttribute;b(c,l,f);if(m){b(c,a,m);}};SKYSALES.Util.removeRequiredAttribute=function(c){var f="required",b="requirederror",a=SKYSALES.Util.removeAttribute;a(c,f);a(c,b);};SKYSALES.Class.Property=function(){var b=new SKYSALES.Class.SkySales(),a=SKYSALES.Util.extendObject(b);a.propertyFieldHash={};a.init=function(c){this.setSettingsByObject(c);this.setVars();};a.setVars=function(){var B=SKYSALES.Class.Property.validationHash||{},e="",A=null,l=this.propertyFieldHash,r="",q=null,f=[],u=0,w=0,z=null,c="",v="",t={},s={},m="";for(r in l){if(l.hasOwnProperty(r)){f=l[r]||[];w=f.length;for(u=0;u<w;u+=1){q={};z=f[u];e=z.id||"";q.id=e;A=q.input;A=this.getById(e);A=A[0];q.propertyHash={};B=z.propertyHash||{};if(A){for(c in B){if(B.hasOwnProperty(c)){v=c.toLowerCase();t=B[c];s=$(A);m=v+".validation";s.data(m,t);}}}}}}};return a;};SKYSALES.Class.Property.validationHash={};if(!SKYSALES.Class.MCCSearchInput){SKYSALES.Class.MCCSearchInput=function(){var b=new SKYSALES.Class.SkySales();var a=SKYSALES.Util.extendObject(b);a.clientId="";a.contentId="";a.currencyArray=[];a.currencyInfoArray=[];a.MCCArray=[];a.dropDownCurrencyId="";a.selectedMCC="";a.resetPaymentsText="";a.hasUncommittedPayment="";a.applyButtonId="";a.dropDownOrigin=null;a.dropDownCurrency=null;a.applyButton=null;a.stationHash=SKYSALES.Util.getResource().stationHash;a.setVars=function(){b.setVars.call(this);a.dropDownOrigin=$("#"+this.contentId+" :input[id=TextBoxMarketOrigin1]");a.dropDownCurrency=$("#"+this.dropDownCurrencyId);a.applyButton=$("#"+this.applyButtonId)||{};};a.init=function(c){this.setSettingsByObject(c);this.setVars();this.addEvents();this.initializeCurrency();};a.addEvents=function(){this.dropDownOrigin.change(this.updateCurrencyHandler);this.applyButton.click(this.applyCurrencyHandler);};a.initializeCurrency=function(){this.updateCurrency();};a.getCurrencyDescription=function(e){var c=0;for(c in this.currencyInfoArray){if(this.currencyInfoArray[c].currencyCode===e){return this.currencyInfoArray[c].description;}}};a.applyCurrencyHandler=function(){a.applyCurrency();};a.applyCurrency=function(){if(this.hasUncommittedPayment==="true"){return confirm(this.resetPaymentsText);}};a.updateCurrencyHandler=function(){a.updateCurrency();};a.updateCurrency=function(){var f="",r=0;var e={};if(this.dropDownOrigin.length>0){f=this.dropDownOrigin.val();e=this.stationHash[f];}else{f=$("#MCCOriginCountry").val();e.countryCode=f;}if(f!==""&&f!==undefined){var l=this.currencyArray,c=0;var m=[];for(r in l){if(l[r].countryCode===e.countryCode){var q={};q.name=this.getCurrencyDescription(l[r].currencyCode);q.code=l[r].currencyCode;m.push(q);if(this.MCCArray&&this.MCCArray.length>0){for(c in this.MCCArray){if(this.MCCArray[c].buy===l[r].currencyCode){q={};q.name=this.getCurrencyDescription(this.MCCArray[c].sell);q.code=this.MCCArray[c].sell;m.push(q);}}}selectParamObj={"selectBox":this.dropDownCurrency,"objectArray":m,"showCode":true};SKYSALES.Util.populateSelect(selectParamObj);if(this.selectedMCC!==""){this.dropDownCurrency.val(this.selectedMCC);}else{this.dropDownCurrency.val(l[r].currencyCode);}break;}}if(m.length===0){selectParamObj={"selectBox":this.dropDownCurrency,"objectArray":[],"showCode":true};SKYSALES.Util.populateSelect(selectParamObj);}}};return a;};SKYSALES.Class.MCCSearchInput.createObject=function(a){SKYSALES.Util.createObject("mCCSearchInput","MCCSearchInput",a);};}if(!SKYSALES.Class.AdvancedBookingListSearchInput){SKYSALES.Class.AdvancedBookingListSearchInput=function(){var b=new SKYSALES.Class.SkySales();var a=SKYSALES.Util.extendObject(b);a.HyperLinkIdArray={};a.ReportLinkHash={};a.AttachPromptText="";a.ReportPromptText="";a.init=function(c){this.setSettingsByObject(c);this.setVars();this.addEvents();};a.setVars=function(){b.setVars.call(this);};a.addEvents=function(){var c="";for(c in this.HyperLinkIdArray){if(this.HyperLinkIdArray.hasOwnProperty(c)){if(this.HyperLinkIdArray[c].hasOwnProperty("attachId")){$("#"+this.HyperLinkIdArray[c].attachId).click(this.ShowAttachPrompterHandler);}if(this.HyperLinkIdArray[c].hasOwnProperty("reportId")){$("#"+this.HyperLinkIdArray[c].reportId).click(this.ShowReportPrompterHandler);this.ReportLinkHash[this.HyperLinkIdArray[c].reportId]=this.HyperLinkIdArray[c].reportLink;}}}};a.ShowAttachPrompterHandler=function(){return a.ShowPrompter(a.AttachPromptText)?SKYSALES.DisplayLoadingBar():false;};a.ShowReportPrompterHandler=function(){return a.ShowPrompter(a.ReportPromptText,this.id);};a.ShowPrompter=function(e,f){var c=this.ReportLinkHash[f]||"";if(confirm(e)){if(c!==""){window.open(c,"FeedbackURL","height=600,width=720,status=yes,toolbar=no,menubar=no,location=no");}else{return true;}}SKYSALES.RemoveLoadingBar();return false;};return a;};SKYSALES.Class.AdvancedBookingListSearchInput.createObject=function(a){SKYSALES.Util.createObject("advancedBookingListSearchInput","AdvancedBookingListSearchInput",a);};}SKYSALES.Util.itineraryDisable=function(b){$("div[class^='target']").hide();$("table[class^='target']").hide();if(b!=0){if($("#span"+b).attr("selected")){$("#span"+b).removeAttr("selected").removeAttr("class").addClass("arrow-double-down arrow-btn");return;}$("div[class^='target"+b+"']").show();$("table[class^='target"+b+"']").show();for(var e=1;e<=$("span[id^='span']").length;e++){if(document.getElementById("span"+e)){$("#span"+e).removeAttr("selected").removeAttr("class").addClass("arrow-double-down arrow-btn");}}for(var c=1;c<=$("span[id^='spanINF']").length;c++){if(document.getElementById("spanINF"+c)){$("#spanINF"+c).removeAttr("selected").removeAttr("class").addClass("arrow-double-down arrow-btn");}}$("#span"+b).removeAttr("class").addClass("arrow-double-up arrow-btn").attr("selected","true");}};SKYSALES.Util.itineraryPrint=function(b){window.print();};SKYSALES.Util.itineraryDisableINF=function(b){$("div[class^='target']").hide();$("table[class^='target']").hide();if(b!=0){if($("#spanINF"+b).attr("selected")){$("#spanINF"+b).removeAttr("selected").removeAttr("class").addClass("arrow-double-down arrow-btn");return;}$("div[class='targetINF"+b+"']").show();for(var e=1;e<=$("span[id^='span']").length;e++){if(document.getElementById("span"+e)){$("#span"+e).removeAttr("selected").removeAttr("class").addClass("arrow-double-down arrow-btn");}}for(var c=1;c<=$("span[id^='spanINF']").length;c++){if(document.getElementById("spanINF"+c)){$("#spanINF"+c).removeAttr("selected").removeAttr("class").addClass("arrow-double-down arrow-btn");}}$("#spanINF"+b).removeAttr("class").addClass("arrow-double-up arrow-btn").attr("selected","true");}};SKYSALES.Util.searchToggle=function(b){if(b=="up"){$("div[class^='ucSearchForm-ButtonItem']").hide(400);$("#SearchToggle").hide(400);$("#ShowSearch").show();$("#HideSearch").hide();}else{$("div[class^='ucSearchForm-ButtonItem']").show(400);$("#SearchToggle").show(400);$("#ShowSearch").hide();$("#HideSearch").show();}};SKYSALES.Util.flightDisplayToggle=function(a){if($("#HideFlight_"+a).attr("effect")=="up"){$("#hideSearchArrow_"+a).removeClass("flight-display-arrow-up").addClass("flight-display-arrow-down");$("#HideFlight_"+a).attr("effect","down");$("div[class^='flightDisplay_"+a+"']").slideUp("500");}else{$("#hideSearchArrow_"+a).removeClass("flight-display-arrow-down").addClass("flight-display-arrow-up");$("#HideFlight_"+a).attr("effect","up");$("div[class^='flightDisplay_"+a+"']").slideDown("500");}};SKYSALES.Util.AddOnsCollapsibleToggle=function(a,f){var b=$("#AddOnsGetThisDiv_"+a);var c=$("#AddOnsGetThisButtonImage_"+a);if(b.css("display")=="none"){b.slideDown("500");c.removeClass("AddOnsGetThisButtonImage").addClass("AddOnsGetThisButtonImageCollapsed");$(f).css("background-color","#999999");}else{b.slideUp("500");c.removeClass("AddOnsGetThisButtonImageCollapsed").addClass("AddOnsGetThisButtonImage");$(f).css("background-color","#333333 ");}};SKYSALES.Util.islandDisplayToggle=function(a){if($("#islandTransferShowLink"+a).attr("effect")=="up"){$("#islandTransferArrow_"+a).removeClass("island-display-arrow-up").addClass("island-display-arrow-down");$("#islandTransferShowLink"+a).attr("effect","down");$("div[id^='transferSegments"+a+"']").slideUp("500");}else{$("#islandTransferArrow_"+a).removeClass("island-display-arrow-down").addClass("island-display-arrow-up");$("#islandTransferShowLink"+a).attr("effect","up");$("div[id^='transferSegments"+a+"']").slideDown("500");}};SKYSALES.Util.CheckCounterCheckIn=function(b){var a="CounterCheckInInput";if($("#"+b.id).attr("checked")){$("#"+b.id.replace("RedCarpetInput",a)).attr("checked",false).attr("disabled",true);}else{$("#"+b.id.replace("RedCarpetInput",a)).removeAttr("disabled");}};SKYSALES.Util.isDateValid=function(f,a,c,e){var b=false;if(f&&f.toString().toLowerCase()!="invalid date"){a=a?a:f.getDate();c=c?c:f.getMonth()+1;e=e?e:f.getFullYear();if(f.getDate()!=Number(a)){b=false;}else{if((f.getMonth()+1)!=Number(c)){b=false;}else{if(f.getFullYear()!=Number(e)){b=false;}else{b=true;}}}}else{b=false;}return b;};SKYSALES.Util.updatePriceDisplay=function(az,ak){var Y={removePrice:true},aL=$.extend({},Y,ak),aC=$(az).attr("ssr-data"),aU=$(az).attr("journey-pax-index"),S=$(az).attr("price-display"),v=$(az).attr("ssr-label"),aS=$(az).attr("flight-ref");var u=function(a1){a1=a1.toString();if(isNaN(a1.charAt(0))&&a1.charAt(0)!="-"){aO=a1.charAt(0);a1=a1.replace(aO,"");w=true;}return a1.replace(/,/g,"");};var ah=function(a2){a2=a2.split(".");wholeNumber=a2[0];decimalNumber="";if(a2.length>1){decimalNumber=a2.length>1?a2[1]+"00":"0000";var a4=decimalNumber.substr(0,2);var a3=decimalNumber.substr(2,decimalNumber.length);decimalNumber=String(Math.round(a4+"."+a3));decimalNumber=decimalNumber.length>1?"."+decimalNumber:".0"+decimalNumber;}var a1=/(\d+)(\d{3})/;while(a1.test(wholeNumber)){wholeNumber=wholeNumber.replace(a1,"$1"+","+"$2");}return wholeNumber+decimalNumber;};az=$(az);var aY="",am="",N="",ac="",D=aU.split("_"),at=D[0],aP=D[1];if(az.attr("name").indexOf("meal")!=-1){aY=aC.split(",")[0];N=aC.split(" ")[0];am=v;}else{if(az.attr("name").indexOf("comfort")!=-1){aY=aC.split(",")[0];N=aC.split(" ")[0];am=v;}else{if(az.attr("name").indexOf("dutyFree")!=-1){aY=aC.split(",")[0];N=aC.split(" ")[0];am=v;}else{if(az.is("select")){aY=az.val();N=aY.split("_").length>1?aY.split("_")[4]:aY;ac=az.find(":selected");am=v?v+" "+ac.text():ac.text();}else{if(az.is(":checkbox")||az.is(":radio")){az.attr("disabled",true);aY=az.attr("name");N=aC.split(" ")[0];am=v;}else{if(az.attr("name").indexOf("CarTrawler")!=-1){aY=az.attr("name");N=aC.split(" ")[0];am=v;}}}}}}var G=function(a4,a5,a1,a3,a2){if(a5){a4.text(a1+ah(a3)+" "+a2);}else{a4.text(ah(a3)+" "+a2);}};var aT=function(a5,a6,a1,a4,a2){var a7='<span id="prevControl_'+a4+"_"+a2+'" class="right-text bold black2" style="display:none"></span>',a8='<span id="prevSelected_'+a4+"_"+a2+'" class="right-text bold black2" style="display:none"></span>',a3='<span id="'+a4+"PrevControlId_"+a2+'" class="right-text bold black2" style="display:none"></span>';if(a5==""&&a1=="1"){a6.append(a7+a8+a3);}else{if(a5==""&&parseInt(a1)>=2){aD.append(a7+a8+a3);}}};var F=aC.split("|"),P=0,aV=1,aH=2,z=$('div[id="ssrPrice_'+at+'"]'),Q=$('div[id="ssrCharges"]').length>0?$('div[id="ssrCharges"]'):$('div[id="ssrCharges_'+at+'"]'),aW=$('span[id="'+S+"Label_"+at+'"]'),av=$('div[id="'+S+"_"+L+"_"+at+'"]'),aq="",ai=parseFloat(u(av.text())),m=$("#totalJourneyPrice_"+at),ap=$('span[id="overallTotal"]'),e="",L="",K=0,aA="",Z=parseFloat(u($("#totalJourneyPrice_"+at).text())),aX=parseFloat(u($("#overallTotal").text())),l=$('span[id="'+S+"PrevAmount_"+aU+aS+'"]').text(),V="",A=$('span[id="'+S+"PrevControlId_"+aU+'"]').text(),O="",aJ=$('div[id="totalFeePrice_'+at+'"]'),aD=$('div[id="totalPrice_'+at+'"]'),r=false,w=false,aO="";if(isNaN($("#totalJourneyPrice_"+at).text().charAt(0))||isNaN($("#overallTotal").text().charAt(0))){w=true;aO=$("#totalJourneyPrice_"+at).text().charAt(0);}if(l==""&&at=="1"){aJ.append('<span id="'+S+"PrevAmount_"+aU+aS+'" class="right-text bold black2" style="display:none">0.00</span>');}else{if(l==""&&parseInt(at)>=2){aD.append('<span id="'+S+"PrevAmount_"+aU+aS+'" class="right-text bold black2" style="display:none">0.00</span>');}}var ay=F.length;for(var f=0;f<ay&&F[f].length>0;f++){F[f]=F[f].split(" ");r=F[f][aV].indexOf(".")!=-1?true:false;L=F[f][P];e=F[f][aH];K=parseFloat(u(F[f][aV]));aA=r?parseFloat(u(F[f][aV])).toFixed(2):parseFloat(u(F[f][aV]));l=parseFloat(u($("#"+S+"PrevAmount_"+aU+aS).text()));A=$("#"+S+"PrevControlId_"+aU).text();aq=$('div[id="'+S+"_"+L+"_"+at+'"]');if(N==F[f][P]){aW=$('span[id="'+S+"Label_"+L+"_"+at+'"]');av=$('span[id="'+S+"_"+L+"_"+at+'"]');ai=av.length>0?parseFloat(u(av.text().split(" ")[0])):parseFloat($('div[id="'+S+"_"+L+"_"+at+'"]').find('span[id="'+S+"_"+L+"_"+at+'"]').text().split(" ")[0]);if(az.attr("name").indexOf("meal")!=-1){var an=0,aw=0,b=$('input[id*=Meal][premium-meal-price="0"][flight-ref="'+aS+'"][pax-index="'+aP+'"]').length>0?$('input[premium-meal-price="0"][flight-ref="'+aS+'"][pax-index="'+aP+'"]'):"",ao=0,q=0,aG=0,a0=$("#complimentaryMealAmount_"+aU),aE=$('span[id="'+S+"PrevMealTotal_"+at+'"]').text();if(aE==""&&at=="1"){aJ.append('<span id="'+S+"PrevMealTotal_"+at+'" class="right-text bold black2" style="display:none">0.00</span>');}else{if(aE==""&&parseInt(at)>=2){aD.append('<span id="'+S+"PrevMealTotal_"+at+'" class="right-text bold black2" style="display:none">0.00</span>');}}aE=parseFloat(u($("#"+S+"PrevMealTotal_"+at).text()));q=$(b).val()>0&&$(b).attr("data-price")?($(b).attr("data-price").split(" ")[0]):0;q=parseFloat(u(q.toString()));$.each($('input[id*=Meal][class=ucmealpanel-item-sf-count-input][value!="0"][flight-ref="'+aS+'"][pax-index="'+aP+'"]'),function(){var a1=$(this).attr("rel");var a3=$(this).attr("pax-index");var a2=["MUPG","MXAK","MEUG","MUTX"];var a4=az.attr("ssr-data").split(" ")[0];if(K>q&&az.val()>0&&$.inArray(a4,a2)==-1){aG=q;aG=parseFloat(aG);a0=az.attr("ssr-data").split(" ")[0];q=K;$('input[id*=Meal][class=ucmealpanel-item-sf-count-input][flight-ref="'+aS+'"][pax-index="'+aP+'"][premium-meal-price="0"]').removeAttr("premium-meal-price");az.attr("premium-meal-price","0");}else{if(K>q&&az.val()==0){a0=$(this).attr("meal-code");ao=$(this).val()>0?-(parseFloat($(this).attr("data-price").split(" ")[0])):K;$('input[id*=Meal][class=ucmealpanel-item-sf-count-input][flight-ref="'+aS+'"][pax-index="'+aP+'"][premium-meal-price="0"]').removeAttr("premium-meal-price");$(this).attr("premium-meal-price","0");}else{if(az.val()==0){ao=-(parseFloat(K));}}}});if($('input[id*=Meal][class=ucmealpanel-item-sf-count-input][value!="0"][flight-ref="'+aS+'"][pax-index="'+aP+'"]').length==0&&$(b).val()==0){$(b).removeAttr("premium-meal-price");}$.each($('input[id*=Meal][class=ucmealpanel-item-sf-count-input][value!=0][id*="'+L+'"]'),function(){var a1=$(this).attr("flight-ref");if(a1==aS&&$(this).attr("pax-index")==aP){if($(this).attr("premium-meal-price")&&$(this).val()>1){an=an+((K*$(this).val())-parseFloat($(this).attr("data-price").split(" ")[0]));}else{if($(this).attr("premium-meal-price")&&$(this).val()==1){if($(this).attr("meal-code")=="LTML"){an+=parseFloat($(this).attr("data-price").split(" ")[0]);}else{an+=parseFloat($(this).attr("premium-meal-price"));}}else{an+=(K*$(this).val());}}}else{if($(this).attr("rel")==at&&typeof($(this).attr("meal-code"))=="undefined"){an+=(K*$(this).val());}}});var ae=az.val();var aQ=an;aT(V,aJ,at,S,aU);if(aq.length>0){aQ=r?parseFloat(aQ).toFixed(2):aQ;G($('span[id="'+S+"Amount"+"_"+L+"_"+at+'"]'),w,aO,aQ.toString(),e);$.each($("span[id*=mealSsrPriceAmount]"),function(){var a1=($(this).attr("id")).split("_")[2],a2=0,a3=$('input[id*=Meal][premium-meal-price="0"][flight-ref="'+aS+'"][pax-index="'+aP+'"]').attr("meal-code");if(b.length>0&&typeof(az.attr("premium-meal-price"))=="undefined"&&az.val()<=1){a2=0;}else{if($(this).attr("id").split("_")[1]==az.attr("ssr-data").split(" ")[0]&&az.val()>1){a2=$(this).is(":visible")&&a1==at?parseFloat(u($(this).text().replace(" "+e,""))):0;}}aw=parseFloat(aw)+parseFloat(a2);});var t=["MUPG","MXAK","MEUG","MUTX"];var C=az.attr("ssr-data").split(" ")[0];if($.inArray(C,t)!=-1){$("#"+S+"PrevMealTotal_"+at).text(ah(aw.toString()));}if(aw<aE&&aE>0){if(ao!=0){$('span[id="mealSsrPriceAmount_'+a0+"_"+at+'"]').text(aQ+" "+e);}if($.inArray(C,t)==-1&&az.val()>1){O=aG>0?aG+Z:parseFloat(u(aQ))+Z;aX=aG>0?aX+aG:aX+parseFloat(u(aQ));}else{O=aG>0?Z-(aE-aw)+aG:Z-(aE-aw);aX=aG>0?aX-(aE-aw)-aG:aX-(aE-aw);}ai=aE>=0!=""&&aQ>aE?ai-aE+aQ:ai-aE;}else{if(ao!=0){O=Z+ao;aX=aX+ao;$('span[id="mealSsrPriceAmount_'+a0+"_"+at+'"]').text(aQ+" "+e);}else{if($.inArray(C,t)==-1&&az.val()>1){O=aG>0?aG+Z:parseFloat(u(aQ))+Z;aX=aG>0?aX+aG:aX+parseFloat(u(aQ));}else{O=aG>0?Z+(aw-aE)+aG:Z+(aw-aE);aX=aG>0?aX+(aw-aE)+aG:aX+(aw-aE);}if(aG){$('span[id="mealSsrPriceAmount_'+a0+"_"+at+'"]').text(parseFloat(aG).toFixed(2)+" "+e);}}}var aZ=$('input[type=text][id*="'+L+'"][value!=0][rel="'+at+'"] ');if(aQ<=0&&az.val()<=0&&aZ.length==0){$('div[id="'+S+"_"+L+"_"+at+'"]').remove();}}else{O=aG>0?aG+Z:aQ+Z;aX=aG>0?aX+aG:aX+aQ;Q.removeAttr("style");aQ=r?parseFloat(aQ).toFixed(2):aQ;if(w&&aQ!=0){z.append('<div id="'+S+"_"+L+"_"+at+'" class="row1"><span id="'+S+"Amount"+"_"+L+"_"+at+'" class="right-text black2">'+aO+ah(aQ.toString())+" "+e+'</span> <span id="'+S+"Label_"+L+"_"+at+'" class="left-text black2">'+am+"</span> </div>");}else{if(aQ!=0){z.append('<div id="'+S+"_"+L+"_"+at+'" class="row1"><span id="'+S+"Amount"+"_"+L+"_"+at+'" class="right-text black2">'+ah(aQ.toString())+" "+e+'</span> <span id="'+S+"Label_"+L+"_"+at+'" class="left-text black2">'+am+"</span> </div>");}}$.each($("span[id*=mealSsrPriceAmount]"),function(){var a1=($(this).attr("id")).split("_")[2];var a2=$(this).is(":visible")&&a1==at?parseFloat(u($(this).text().replace(" "+e,""))):0;aw=parseFloat(aw)+parseFloat(a2);});if(aG>0){$.each($('input[id*=Meal][value!="0"][flight-ref="'+aS+'"][pax-index="'+aP+'"]'),function(){if(!($(this).attr("premium-meal-price"))){a0=$(this).attr("meal-code");if(a0){$('span[id="mealSsrPriceAmount_'+a0+"_"+at+'"]').text(parseFloat(aG).toFixed(2)+" "+e);}}});}var t=["MUPG","MXAK","MEUG","MUTX"];var C=az.attr("ssr-data").split(" ")[0];if($.inArray(C,t)!=-1){$("#"+S+"PrevMealTotal_"+at).text(ah(aw.toString()));}}}else{if(az.attr("name").indexOf("comfort")!=-1){var an=0,aw=0,b=$('input[id*=ComfortKit][premium-meal-price="0"][flight-ref="'+aS+'"][pax-index="'+aP+'"]').length>0?$('input[id*=ComfortKit][premium-meal-price="0"][flight-ref="'+aS+'"][pax-index="'+aP+'"]'):"",ao=0,q=0,aG=0,a0=$("#complimentaryMealAmount_"+aU),aE=$('span[id="'+S+"PrevMealTotal_"+at+'"]').text();if(aE==""&&at=="1"){aJ.append('<span id="'+S+"PrevMealTotal_"+at+'" class="right-text bold black2" style="display:none">0.00</span>');}else{if(aE==""&&parseInt(at)>=2){aD.append('<span id="'+S+"PrevMealTotal_"+at+'" class="right-text bold black2" style="display:none">0.00</span>');}}aE=parseFloat(u($("#"+S+"PrevMealTotal_"+at).text()));q=$(b).val()>0&&$(b).attr("data-price")?($(b).attr("data-price").split(" ")[0]):0;q=parseFloat(u(q.toString()));$.each($('input[id*=ComfortKit][class=uccomfortkitpanel-item-sf-count-input][value!="0"][flight-ref="'+aS+'"][pax-index="'+aP+'"]'),function(){var a1=$(this).attr("rel");var a2=$(this).attr("pax-index");if(K>q&&az.val()>0){aG=q;aG=parseFloat(aG);a0=$(this).attr("meal-code");q=K;$('input[id*=ComfortKit][class=uccomfortkitpanel-item-sf-count-input][flight-ref="'+aS+'"][pax-index="'+aP+'"][premium-meal-price="0"]').removeAttr("premium-meal-price");az.attr("premium-meal-price","0");}else{if(K>q&&az.val()==0){a0=$(this).attr("meal-code");ao=$(this).val()>0?-(parseFloat($(this).attr("data-price").split(" ")[0])):K;$('input[id*=ComfortKit][class=uccomfortkitpanel-item-sf-count-input][flight-ref="'+aS+'"][pax-index="'+aP+'"][premium-meal-price="0"]').removeAttr("premium-meal-price");$(this).attr("premium-meal-price","0");}else{if(az.val()==0){ao=-(parseFloat(K));}}}});if($('input[id*=ComfortKit][class=uccomfortkitpanel-item-sf-count-input][value!="0"][flight-ref="'+aS+'"][pax-index="'+aP+'"]').length==0&&$(b).val()==0){$(b).removeAttr("premium-meal-price");}$.each($('input[id*=ComfortKit][class=uccomfortkitpanel-item-sf-count-input][value!="0"][id*="'+L+'"]'),function(){var a2=$(this).attr("flight-ref");var a1=$(this).attr("ssr-data").split(" ")[1].replace(",","");if(a2==aS&&$(this).attr("pax-index")==aP){if($(this).attr("premium-meal-price")&&$(this).val()>1){an=an+((a1*$(this).val())-parseFloat($(this).attr("data-price").split(" ")[0]));}else{if($(this).attr("premium-meal-price")&&$(this).val()==1){an+=parseFloat($(this).attr("premium-meal-price"));}else{an+=(a1*$(this).val());}}}else{if($(this).attr("rel")==at&&typeof($(this).attr("meal-code"))=="undefined"){an+=(a1*$(this).val());}}});var ae=az.val();var aQ=an;aT(V,aJ,at,S,aU);if(aq.length>0){aQ=r?parseFloat(aQ).toFixed(2):aQ;G($('span[id="'+S+"Amount"+"_"+L+"_"+at+'"]'),w,aO,aQ.toString(),e);$.each($("span[id*=mealSsrPriceAmount]"),function(){var a1=($(this).attr("id")).split("_")[2],a2=0,a3=$('input[id*=ComfortKit][premium-meal-price="0"][flight-ref="'+aS+'"][pax-index="'+aP+'"]').attr("meal-code");if(b.length>0&&typeof(az.attr("premium-meal-price"))=="undefined"&&az.val()<=1){a2=0;}else{if(a3&&a3!=$(this).attr("id").split("_")[1]){a2=0;}else{a2=$(this).is(":visible")&&a1==at?parseFloat(u($(this).text().replace(" "+e,""))):0;}}aw=parseFloat(aw)+parseFloat(a2);});$("#"+S+"PrevMealTotal_"+at).text(ah(aw.toString()));if(aw<aE&&aE>0){if(ao!=0){$('span[id="mealSsrPriceAmount_'+a0+"_"+at+'"]').text(aQ+" "+e);}O=aG>0?Z-(aE-aw)+aG:Z-(aE-aw);aX=aG>0?aX-(aE-aw)-aG:aX-(aE-aw);ai=aE>=0!=""&&aQ>aE?ai-aE+aQ:ai-aE;}else{if(ao!=0){O=Z+ao;aX=aX+ao;$('span[id="mealSsrPriceAmount_'+a0+"_"+at+'"]').text(aQ+" "+e);}else{O=aG>0?Z+(aw-aE)+aG:Z+(aw-aE);aX=aG>0?aX+(aw-aE)+aG:aX+(aw-aE);if(aG){$('span[id="mealSsrPriceAmount_'+a0+"_"+at+'"]').text(parseFloat(aG).toFixed(2)+" "+e);}}}var aZ=$('input[id*=ComfortKit][type=text][id*="'+L+'"][value!="0"][rel="'+at+'"] ');if(aQ<=0&&az.val()<=0&&aZ.length==0){$('div[id="'+S+"_"+L+"_"+at+'"]').remove();}}else{O=aG>0?aG+Z:aQ+Z;aX=aG>0?aX+aG:aX+aQ;Q.removeAttr("style");aQ=r?parseFloat(aQ).toFixed(2):aQ;if(w){z.append('<div id="'+S+"_"+L+"_"+at+'" class="row1"><span id="'+S+"Amount"+"_"+L+"_"+at+'" class="right-text black2">'+aO+ah(aQ.toString())+" "+e+'</span> <span id="'+S+"Label_"+L+"_"+at+'" class="left-text black2">'+am+"</span> </div>");}else{z.append('<div id="'+S+"_"+L+"_"+at+'" class="row1"><span id="'+S+"Amount"+"_"+L+"_"+at+'" class="right-text black2">'+ah(aQ.toString())+" "+e+'</span> <span id="'+S+"Label_"+L+"_"+at+'" class="left-text black2">'+am+"</span> </div>");}$.each($("span[id*=mealSsrPriceAmount]"),function(){var a1=($(this).attr("id")).split("_")[2];var a2=$(this).is(":visible")&&a1==at?parseFloat(u($(this).text().replace(" "+e,""))):0;aw=parseFloat(aw)+parseFloat(a2);});if(aG>0){$.each($('input[id*=ComfortKit][value!=0][flight-ref="'+aS+'"][pax-index="'+aP+'"]'),function(){if(!($(this).attr("premium-meal-price"))){a0=$(this).attr("meal-code");if(a0){$('span[id="mealSsrPriceAmount_'+a0+"_"+at+'"]').text(parseFloat(aG).toFixed(2)+" "+e);}}});}$("#"+S+"PrevMealTotal_"+at).text(ah(aw.toString()));}}else{if(az.attr("name").indexOf("dutyFree")!=-1){var an=0,aw=0,b=$('input[id*=DutyFree][premium-meal-price="0"][flight-ref="'+aS+'"][pax-index="'+aP+'"]').length>0?$('input[id*=DutyFree][premium-meal-price="0"][flight-ref="'+aS+'"][pax-index="'+aP+'"]'):"",ao=0,q=0,aG=0,a0=$("#complimentaryMealAmount_"+aU),aE=$('span[id="'+S+"PrevMealTotal_"+at+'"]').text();if(aE==""&&at=="1"){aJ.append('<span id="'+S+"PrevMealTotal_"+at+'" class="right-text bold black2" style="display:none">0.00</span>');}else{if(aE==""&&at=="2"){aD.append('<span id="'+S+"PrevMealTotal_"+at+'" class="right-text bold black2" style="display:none">0.00</span>');}}aE=parseFloat(u($("#"+S+"PrevMealTotal_"+at).text()));q=$(b).val()>0&&$(b).attr("data-price")?($(b).attr("data-price").split(" ")[0]):0;q=parseFloat(u(q.toString()));$.each($('input[id*=DutyFree][class=ucdutyfreepanel-item-sf-count-input][value!="0"][flight-ref="'+aS+'"][pax-index="'+aP+'"]'),function(){var a1=$(this).attr("rel");var a2=$(this).attr("pax-index");if(K>q&&az.val()>0){aG=q;aG=parseFloat(aG);a0=$(this).attr("meal-code");q=K;$('input[id*=DutyFree][class=ucdutyfreepanel-item-sf-count-input][flight-ref="'+aS+'"][pax-index="'+aP+'"][premium-meal-price="0"]').removeAttr("premium-meal-price");az.attr("premium-meal-price","0");}else{if(K>q&&az.val()==0){a0=$(this).attr("meal-code");ao=$(this).val()>0?-(parseFloat($(this).attr("data-price").split(" ")[0])):K;$('input[id*=DutyFree][class=ucdutyfreepanel-item-sf-count-input][flight-ref="'+aS+'"][pax-index="'+aP+'"][premium-meal-price="0"]').removeAttr("premium-meal-price");$(this).attr("premium-meal-price","0");}else{if(az.val()==0){ao=-(parseFloat(K));}}}});if($('input[id*=DutyFree][class=ucdutyfreepanel-item-sf-count-input][value!="0"][flight-ref="'+aS+'"][pax-index="'+aP+'"]').length==0&&$(b).val()==0){$(b).removeAttr("premium-meal-price");}$.each($('input[id*=DutyFree][class=ucdutyfreepanel-item-sf-count-input][value!="0"][id*="'+L+'"]'),function(){var a2=$(this).attr("flight-ref");var a1=$(this).attr("ssr-data").split(" ")[1].replace(",","");if(a2==aS&&$(this).attr("pax-index")==aP){if($(this).attr("premium-meal-price")&&$(this).val()>1){an=an+((a1*$(this).val())-parseFloat($(this).attr("data-price").split(" ")[0]));}else{if($(this).attr("premium-meal-price")&&$(this).val()==1){an+=parseFloat($(this).attr("premium-meal-price"));}else{an+=(a1*$(this).val());}}}else{if($(this).attr("rel")==at&&typeof($(this).attr("meal-code"))=="undefined"){an+=(a1*$(this).val());}}});var ae=az.val();var aQ=an;aT(V,aJ,at,S,aU);if(aq.length>0){aQ=r?parseFloat(aQ).toFixed(2):aQ;G($('span[id="'+S+"Amount"+"_"+L+"_"+at+'"]'),w,aO,aQ.toString(),e);$.each($("span[id*=mealSsrPriceAmount]"),function(){var a1=($(this).attr("id")).split("_")[2],a2=0,a3=$('input[id*=DutyFree][premium-meal-price="0"][flight-ref="'+aS+'"][pax-index="'+aP+'"]').attr("meal-code");if(b.length>0&&typeof(az.attr("premium-meal-price"))=="undefined"&&az.val()<=1){a2=0;}else{if(a3&&a3!=$(this).attr("id").split("_")[1]){a2=0;}else{a2=$(this).is(":visible")&&a1==at?parseFloat(u($(this).text().replace(" "+e,""))):0;}}aw=parseFloat(aw)+parseFloat(a2);});$("#"+S+"PrevMealTotal_"+at).text(ah(aw.toString()));if(aw<aE&&aE>0){if(ao!=0){$('span[id="mealSsrPriceAmount_'+a0+"_"+at+'"]').text(aQ+" "+e);}O=aG>0?Z-(aE-aw)+aG:Z-(aE-aw);aX=aG>0?aX-(aE-aw)-aG:aX-(aE-aw);ai=aE>=0!=""&&aQ>aE?ai-aE+aQ:ai-aE;}else{if(ao!=0){O=Z+ao;aX=aX+ao;$('span[id="mealSsrPriceAmount_'+a0+"_"+at+'"]').text(aQ+" "+e);}else{O=aG>0?Z+(aw-aE)+aG:Z+(aw-aE);aX=aG>0?aX+(aw-aE)+aG:aX+(aw-aE);if(aG){$('span[id="mealSsrPriceAmount_'+a0+"_"+at+'"]').text(parseFloat(aG).toFixed(2)+" "+e);}}}var aZ=$('input[id*=DutyFree][type=text][id*="'+L+'"][value!="0"][rel="'+at+'"] ');if(aQ<=0&&az.val()<=0&&aZ.length==0){$('div[id="'+S+"_"+L+"_"+at+'"]').remove();}}else{O=aG>0?aG+Z:aQ+Z;aX=aG>0?aX+aG:aX+aQ;Q.removeAttr("style");aQ=r?parseFloat(aQ).toFixed(2):aQ;if(w){z.append('<div id="'+S+"_"+L+"_"+at+'" class="row1"><span id="'+S+"Amount"+"_"+L+"_"+at+'" class="right-text black2">'+aO+ah(aQ.toString())+" "+e+'</span> <span id="'+S+"Label_"+L+"_"+at+'" class="left-text black2">'+am+"</span> </div>");}else{z.append('<div id="'+S+"_"+L+"_"+at+'" class="row1"><span id="'+S+"Amount"+"_"+L+"_"+at+'" class="right-text black2">'+ah(aQ.toString())+" "+e+'</span> <span id="'+S+"Label_"+L+"_"+at+'" class="left-text black2">'+am+"</span> </div>");}$.each($("span[id*=mealSsrPriceAmount]"),function(){var a1=($(this).attr("id")).split("_")[2];var a2=$(this).is(":visible")&&a1==at?parseFloat(u($(this).text().replace(" "+e,""))):0;aw=parseFloat(aw)+parseFloat(a2);});if(aG>0){$.each($('input[id*=DutyFree][value!=0][flight-ref="'+aS+'"][pax-index="'+aP+'"]'),function(){if(!($(this).attr("premium-meal-price"))){a0=$(this).attr("meal-code");if(a0){$('span[id="mealSsrPriceAmount_'+a0+"_"+at+'"]').text(parseFloat(aG).toFixed(2)+" "+e);}}});}$("#"+S+"PrevMealTotal_"+at).text(ah(aw.toString()));}}else{if(az.is("select")){V=$("#prevControl_"+S+"_"+aU+aS).text();prevSelected=$("#prevSelected_"+S+"_"+aU+aS).text();var c=r?ah(aA.toString())+" "+e:ah(aA.toString())+" "+e;if(aL.removePrice&&aL.removePrice==true){am=am.replace(c,"");am=am.replace("(","");am=am.replace(")","");}var ax=$('span[id="'+S+"_"+L+"_"+at+'"]');aT(V,aJ,at,S,aU+aS);var I="";var au=$(az).attr("id").split("_");if(au.length>3&&au[3].indexOf("WheelchairInputView")>=0){I=au[3].substring(au[3].indexOf("WheelchairInputView"),au[3].indexOf("WheelchairInputView")+"WheelchairInputView".length);OKUTextBox=$("[id$=TextBoxOKUNumber_"+au[5]+"]");if(OKUTextBox&&OKUTextBox.val().split(" ").join("")!=""){var R=$(az).attr("WCHOverrideFee");K=parseFloat(R);}}if(l>0){Z=Z-l;aX=aX-l;}O=K+Z;aX=aX+K;var aN=K;if(V==S+"_"+L+"_"+at&&"WheelchairInputView"!=I){K=K+ai;K=r?parseFloat(K).toFixed(2):K;G($('span[id="'+S+"_"+L+"_"+at+'"]'),w,aO,K.toString(),e);var al=$('span[id="'+A+'"]').text().split(" ");var ag=parseFloat(u($('span[id="'+V+'"]').text().split(" ")[0]));ag-=l;ag=r?parseFloat(ag).toFixed(2):ag;G($('span[id="'+S+"_"+prevSelected+"_"+at+'"]'),w,aO,ag.toString(),e);if(ag<=0&&$.trim(A)!=""){$("div#"+A).remove();}}else{if(aq.length>0){K=K+ai;K=r?parseFloat(K).toFixed(2):K;if(w){ax.text(ah(aO+K.toString())+" "+e);}else{ax.text(ah(K.toString())+" "+e);}var ag=parseFloat(u($('span[id="'+V+'"]').text().split(" ")[0]));ag-=l;ag=r?parseFloat(ag).toFixed(2):ag;G($('span[id="'+S+"_"+prevSelected+"_"+at+'"]'),w,aO,ag.toString(),e);if(au.length>3&&au[3].indexOf("WheelchairInputView")>=0){var af=SKYSALES.numberSelectedWCH(prevSelected,aS);if(af==0){$('div[id="'+S+"_"+prevSelected+"_"+at+'"]').remove();}}else{if(ag<=0&&$.trim(prevSelected)!=""){$('div[id="'+S+"_"+prevSelected+"_"+at+'"]').remove();}}}else{K=r?parseFloat(K).toFixed(2):K;if(w){z.append('<div id="'+S+"_"+L+"_"+at+'" class="row1"><span id="'+S+"_"+L+"_"+at+'" class="right-text black2">'+aO+ah(K.toString())+" "+e+'</span> <span id="'+S+"Label_"+L+"_"+at+'" class="left-text black2">'+am+"</span> </div>");}else{z.append('<div id="'+S+"_"+L+"_"+at+'" class="row1"><span id="'+S+"_"+L+"_"+at+'" class="right-text black2">'+ah(K.toString())+" "+e+'</span> <span id="'+S+"Label_"+L+"_"+at+'" class="left-text black2">'+am+"</span> </div>");}var ag=parseFloat(u($('span[id="'+V+'"]').text().split(" ")[0]));ag-=l;ag=r?parseFloat(ag).toFixed(2):ag;G($('span[id="'+S+"_"+prevSelected+"_"+at+'"]'),w,aO,ag.toString(),e);if(au.length>3&&au[3].indexOf("WheelchairInputView")>=0){var af=SKYSALES.numberSelectedWCH(prevSelected,aS);if(af==0){$('div[id="'+S+"_"+prevSelected+"_"+at+'"]').remove();}}else{if(ag<=0&&$.trim(prevSelected)!=""){$('div[id="'+S+"_"+prevSelected+"_"+at+'"]').remove();}}}}$("#prevControl_"+S+"_"+aU+aS).text(S+"_"+L+"_"+at);$("#prevSelected_"+S+"_"+aU+aS).text(L);aN=r?parseFloat(aN).toFixed(2):aN;$("#"+S+"PrevAmount_"+aU+aS).text(ah(aN.toString()));if(prevSelected){$("#"+S+"PrevControlId_"+aU+aS).text(S+"_"+prevSelected+"_"+at);}Q.removeAttr("style");break;}else{if(az.is(":checkbox")||az.is(":radio")){if(az.is(":checked")){O=K+Z;aX=aX+K;$("#"+S+"PrevAmount_"+aU).text(ah(K.toString()));Q.removeAttr("style");if(aq.length>0){if(L=="INSA"){break;}K=K+ai;K=r?parseFloat(K).toFixed(2):K;G($('span[id="'+S+"_"+L+"_"+at+'"]'),w,aO,K.toString(),e);}else{K=r?parseFloat(K).toFixed(2):K;if(w){z.append('<div id="'+S+"_"+L+"_"+at+'" class="row1"><span id="'+S+"_"+L+"_"+at+'" class="right-text black2">'+aO+ah(K.toString())+" "+e+'</span> <span id="'+S+"Label_"+L+"_"+at+'" class="left-text black2">'+am+"</span> </div>");}else{z.append('<div id="'+S+"_"+L+"_"+at+'" class="row1"><span id="'+S+"_"+L+"_"+at+'" class="right-text black2">'+ah(K.toString())+" "+e+'</span> <span id="'+S+"Label_"+L+"_"+at+'" class="left-text black2">'+am+"</span> </div>");}}}else{var M=$('div[id*="'+S+'"]');O=M.length>0?Z-K:Z;aX=M.length>0?aX-K:aX;K=M.length>0?ai-K:0;K=r?parseFloat(K).toFixed(2):K;G($('span[id="'+S+"_"+L+"_"+at+'"]'),w,aO,K.toString(),e);if(K<=0){$('div[id="'+S+"_"+L+"_"+at+'"]').remove();}$("#"+S+"PrevAmount_"+aU).text(ah(K.toString()));}}else{if(az.attr("name").indexOf("CarTrawler")!=-1){z=$('div[id="carTrawlerAddOns_'+at+'"]');if(az.attr("name").indexOf("add")!=-1){if(z.children('div[id*="'+L+'"]').length==0){if(w){z.append('<div id="'+S+"_"+L+"_"+at+'" class="row1"><span id="'+S+"_"+L+"_"+at+'" class="right-text black2">'+aO+ah(K.toString())+" "+e+'</span> <span id="'+S+"Label_"+L+"_"+at+'" class="left-text black2">'+am+"</span> </div>");}else{z.append('<div id="'+S+"_"+L+"_"+at+'" class="row1"><span id="'+S+"_"+L+"_"+at+'" class="right-text black2">'+ah(K.toString())+" "+e+'</span> <span id="'+S+"Label_"+L+"_"+at+'" class="left-text black2">'+am+"</span> </div>");}$('div[id="carRental_'+at+'"]').show();}var aI=az.attr("price-per-day").split(" ")[0];var aR=["January","February","March","April","May","June","July","August","September","October","November","December"];var W=new Date($("#ct_s1_pickup_date").val());var J=aR[W.getMonth()];var ab=W.getFullYear();var a=W.getDate();var H=new Date($("#ct_s1_dropoff_date").val());var X=aR[H.getMonth()];var U=H.getFullYear();var aM=H.getDate();var B=$("#ctw_selectedDateTime").text();var ad=B.split("(");var aK=new Array();for(var T=1;T<ad.length;T++){aK.push(ad[T].split(")")[0]);}var aj=$("#ct_s1_pickup_date").val()+"|"+aK[0];var s=$("#ct_s1_dropoff_date").val()+"|"+aK[1];var aF=aj+","+s;$('input[id*="HiddenTextBoxSelectedCarPosition"]').val(az.attr("data-car"));$('input[id*="HiddenTextBoxSelectedCarModel"]').val(v);$('input[id*="HiddenTextBoxSelectedCarPrice"]').val(aI);$('input[id*="HiddenTextBoxSelectedCarTotalPrice"]').val(K.toString());$('input[id*="HiddenTextBoxSelectedCarDateTime"]').val(aF);$('input[id*="HiddenTextBoxSelectedReferenceType"]').val($("#referenceType_"+az.attr("data-car")).val());$('input[id*="HiddenTextBoxSelectedReferenceID"]').val($("#referenceID_"+az.attr("data-car")).val());$('input[id*="HiddenTextBoxSelectedReferenceIDContext"]').val($("#referenceIDContext_"+az.attr("data-car")).val());$('input[id*="HiddenTextBoxSelectedReferenceDateTime"]').val($("#referenceDateTime_"+az.attr("data-car")).val());$('input[id*="HiddenTextBoxSelectedReferenceUrl"]').val($("#referenceUrl_"+az.attr("data-car")).val());var E=az.siblings('input[name*="PBCR"]').attr("name");$('input[name="'+E+'"]').val("1");}else{if(az.attr("name").indexOf("remove")!=-1){var M=$('div[id="carRental_'+at+'"]');M.parent().children().not(M).remove();M.hide();$('input[id*="HiddenTextBoxSelectedCarPosition"]').val("");$('input[id*="HiddenTextBoxSelectedCarModel"]').val("");$('input[id*="HiddenTextBoxSelectedCarPrice"]').val("");$('input[id*="HiddenTextBoxSelectedCarTotalPrice"]').val("");$('input[id*="HiddenTextBoxSelectedCarDateTime"]').val("");$('input[id*="HiddenTextBoxSelectedReferenceType"]').val("");$('input[id*="HiddenTextBoxSelectedReferenceID"]').val("");$('input[id*="HiddenTextBoxSelectedReferenceIDContext"]').val("");$('input[id*="HiddenTextBoxSelectedReferenceDateTime"]').val("");$('input[id*="HiddenTextBoxSelectedReferenceUrl"]').val("");$('input[name^="CONTROLGROUPADDONSFLIGHTVIEW$CarTrawlerAddOnsFlightView$SsrQuantity_passengerNumber_"]').val("0");}}}}}}}}}else{if(az.is("select")){if(ac.index()==0||ac.val()==""){K=0;if(typeof(prevSelected)!="undefined"){V=V==""&&prevSelected==""?$("#prevControl_"+S+"_"+aU+aS).text():S+"_"+prevSelected+"_"+at;prevSelected=$("#prevSelected_"+S+"_"+aU+aS).text()!=""?$("#prevSelected_"+S+"_"+aU+aS).text():prevSelected;}else{prevSelected=$("#prevSelected_"+S+"_"+aU+aS).text();}var ax=$('span[id="'+S+"_"+prevSelected+"_"+at+'"]');ai=parseFloat(u(ax.text().split(" ")[0]));if(V==""&&at=="1"){aJ.append('<span id="prevControl_'+S+"_"+aU+aS+'" class="right-text bold black2" style="display:none"></span>').append('<span id="prevSelected_'+S+"_"+aU+aS+'" class="right-text bold black2" style="display:none"></span>').append('<span id="'+S+"PrevControlId_"+aU+aS+'" class="right-text bold black2" style="display:none"></span>');}else{if(l==""&&parseInt(at)>=2){aD.append('<span id="prevControl_'+S+"_"+aU+aS+'" class="right-text bold black2" style="display:none"></span>').append('<span id="prevSelected_'+S+"_"+aU+aS+'" class="right-text bold black2" style="display:none"></span>').append('<span id="'+S+"PrevControlId_"+aU+aS+'" class="right-text bold black2" style="display:none"></span>');}}if(l>0){Z=Z-l;aX=aX-l;}O=K+Z;aX=aX+K;var aN=K;var ar=ai>0?ai-l:K;ar=r?parseFloat(ar).toFixed(2):ar;K=r?parseFloat(K).toFixed(2):K;G(ax,w,aO,ar.toString(),e);if($.trim(A)!=""&&$('span[id="'+A+'"]').length>0){var ag=parseFloat(u($('span[id="'+A+'"]').text().split(" ")[0]));}else{if($.trim(V)!=""){var ag=parseFloat(u($('span[id="'+V+'"]').text().split(" ")[0]));A=V;}}ag=r?parseFloat(ag).toFixed(2):ag;if(w){if($.trim(A)!=""){$('span[id="'+A+'"]').text(aO+ah(ag.toString())+" "+e);}}else{if($.trim(A)!=""){$('span[id="'+A+'"]').text(ah(ag.toString())+" "+e);}}if((isNaN(ag)==false&&ag<=0)&&$.trim(prevSelected)!=""){$('div[id="'+S+"_"+prevSelected+"_"+at+'"]').remove();}if(ar<=0&&$.trim(ax.attr("id"))!=""){$('div[id="'+ax.attr("id")+'"]').remove();}$("#prevControl_"+S+"_"+aU+aS).text("");$("#prevSelected_"+S+"_"+aU+aS).text("");$("#"+S+"PrevAmount_"+aU+aS).text(ah(aN.toString()));break;}}}}if(az.attr("name").indexOf("CarTrawler")==-1){if(z.children().length<=1){Q.attr("style","display:none;");}var aB=0;$.each($("#flightDisplayToggle_"+at).find('span[class="right-text black2"]'),function(){var a2=$(this).text().lastIndexOf(" ");var a4=$(this).text().substring(0,a2);if(a4.indexOf(" x ")>-1){var a3=parseFloat(u(a4.split(" x ")[0]));var a1=parseFloat(u(a4.split(" x ")[1]));aB+=a3*a1;}else{aB+=parseFloat(u(a4));}});O=r?parseFloat(aB).toFixed(2):aB;if(w){m.text(aO+ah(O.toString())+" "+e);}else{m.text(ah(O.toString())+" "+e);}var aa=0;$.each($("[id^=totalJourneyPrice_]"),function(){var a1=$(this).text().lastIndexOf(" ");var a2=$(this).text().substring(0,a1);aa+=parseFloat(u(a2));});aX=r?parseFloat(aa).toFixed(2):aa;if(w){ap.text(aO+ah(aX.toString()));}else{ap.text(ah(aX.toString()));}}if(!az.is("select")){az.removeAttr("disabled");}};SKYSALES.expandDisplayEvent=function(a){if($(a).hasClass("expand_iconSml")){$(a).removeClass("expand_iconSml").addClass("collapse_iconSml");}else{$(a).removeClass("collapse_iconSml").addClass("expand_iconSml");}};if(!SKYSALES.Class.AccountTransactionHistory){SKYSALES.Class.AccountTransactionHistory=function(){var b=new SKYSALES.Class.SkySales();var a=SKYSALES.Util.extendObject(b);a.linkedDates={};a.yearMonthId="";a.dayInputId="";a.transactionDateFormat="";a.init=function(c){this.setSettingsByObject(c);this.setVars();this.initDatePicker();};a.setVars=function(){b.setVars.call(this);};a.initDatePicker=function(){for(var e=0;e<this.linkedDates.length;e++){var c=new SKYSALES.Class.DatePickerManager();c.isAOS=false;c.textBoxInputId=$("#"+this.linkedDates[e].textBoxDateInputId);c.controlInputId=$("#"+this.linkedDates[e].controlInputId);c.linkedDate=$("#"+this.linkedDates[e].inputId);c.transactionDateFormat=this.transactionDateFormat;c.init();}};return a;};SKYSALES.Class.AccountTransactionHistory.createObject=function(a){SKYSALES.Util.createObject("accountTransactionHistory","AccountTransactionHistory",a);};}OpenAccountTransactionsWindow=function(){var b=(screen.width-800)/2,a=(screen.height-500)/2;window.open("AccountTransactionHistory.aspx",null,"height="+500+",width="+800+",left="+b+",top="+a+",status=no,toolbar=no,menubar=no,location=no,scrollbars=yes");return false;};if(!SKYSALES.Class.WebCheckIn){SKYSALES.Class.WebCheckIn=function(){var a=new SKYSALES.Class.SkySales(),b=SKYSALES.Util.extendObject(a);b.showWebCheckInPrompt="";b.webCheckInPrompt="";b.webCheckInButtonId="";b.init=function(c){this.setSettingsByObject(c);b.displayPrompt();};b.displayPrompt=function(){$(document).ready(function(){if(b.showWebCheckInPrompt==="true"&&$("#"+b.webCheckInButtonId)!=null){if(confirm(b.webCheckInPrompt)){$("#"+b.webCheckInButtonId).click();}}});};return b;};SKYSALES.Class.WebCheckIn.createObject=function(a){SKYSALES.Util.createObject("webCheckIn","WebCheckIn",a);};}SKYSALES.AutoSubmit=function(){if(document.getElementById("AutoSubmit")!=null){var a=document.getElementById("AutoSubmit").value;if(a==="True"){$("#loadingDimmer").show();$("#loadingBarBox").show();if(document.getElementById("ControlGroupSearchView_ButtonSubmit")){document.getElementById("ControlGroupSearchView_ButtonSubmit").click();}else{if(document.getElementById("ControlGroupMultiCitySearchView_ButtonSubmit")){document.getElementById("ControlGroupMultiCitySearchView_ButtonSubmit").click();}else{document.getElementById("ControlGroupAvailabilitySearchInputSelectView_ButtonSubmit").click();}}}}};SKYSALES.imageClick=function(b){var c=b.id;var a=$(b).prop("clicked");if(a!==undefined&&a!=="false"){$(b).attr("clicked","false").change();}else{$(b).attr("clicked","true").change();}return true;};SKYSALES.inputClick=function(b,c){var a=$(b).prop("checked");if(a!==undefined&&a!=="false"){$("#imgPDUV"+c).attr("clicked","true").change();}else{$("#imgPDUV"+c).attr("clicked","false").change();}return true;};SKYSALES.checkInsuranceValidate=function(c){if($.browser.msie&&$.browser.version<=9){$(".insuranceLabel SPAN").css("margin-top","-13px");}if(c.checked==true){var b=c.id.split("InsuranceInputControlAddOnsViewAjax_");validate(b[0]+"InsuranceInputControlAddOnsViewAjax",b[1]);}};SKYSALES.updateSearch=function(c){var b=c.id.split("DropDownListPassengerType_");if(c.selectedIndex>0&&c.selectedOptions&&$("#search"+b[1]).length>0){$("#search"+b[1]).text(c.selectedOptions.item().text);}else{$("#search"+b[1]).text("");}};SKYSALES.pdClick=function(b,a){if(b.checked==true){a.selectedIndex=0;}else{a.selectedIndex=1;}};SKYSALES.TnCCookies=function(f){var l=f;var c=1;var b="TnCId";var q=new Date();q.setTime(q.getTime()+(30*1000));var m=escape(l)+((c==null)?"":"; expires="+q.toUTCString());document.cookie=b+"="+m;var e=document.cookie;var a=e.indexOf(" "+b+"=");if(a==-1){a=e.indexOf(b+"=");}if(a==-1){e=null;}else{a=e.indexOf("=",a)+1;var r=e.indexOf(";",a);if(r==-1){r=e.length;}e=unescape(e.substring(a,r));}};SKYSALES.hideInsuranceMsg=function(b,a){if(b.checked==true){$(".insuranceMsg").hide();$("#CONTROLGROUP_InsuranceInputControlAddOnsViewAjax_CheckBoxInsuranceAccept").attr("required",false);$("#validationErrorContainerReadAlong").hide();a.checked=false;SKYSALES.checkInsuranceValidate(a);SKYSALES.Util.updatePriceDisplay(a);}};SKYSALES.showInsuranceMsg=function(a){$("#CONTROLGROUP_InsuranceInputControlAddOnsViewAjax_CheckBoxInsuranceAccept").attr("checked",false);if(a.checked==true){$(".insuranceMsg").show();$("#CONTROLGROUP_InsuranceInputControlAddOnsViewAjax_CheckBoxInsuranceAccept").attr("required",true);SKYSALES.checkInsuranceValidate($("#CONTROLGROUP_InsuranceInputControlAddOnsViewAjax_CheckBoxInsuranceAccept"));SKYSALES.Util.updatePriceDisplay($("#CONTROLGROUP_InsuranceInputControlAddOnsViewAjax_CheckBoxInsuranceAccept"));}};SKYSALES.hideAddOnInsuranceMsg=function(b,a){if(b.checked==true){$(".insuranceMsg").hide();$("#CONTROLGROUP_CONTROLGROUPADDONS_InsuranceInputAddOnsView_CheckBoxInsuranceAccept").attr("required",false);$("#validationErrorContainerReadAlong").hide();a.checked=false;}};SKYSALES.showAddOnInsuranceMsg=function(a){if(a.checked==true){$(".insuranceMsg").show();$("#CONTROLGROUP_CONTROLGROUPADDONS_InsuranceInputAddOnsView_CheckBoxInsuranceAccept").attr("checked",true);$("#CONTROLGROUP_CONTROLGROUPADDONS_InsuranceInputAddOnsView_CheckBoxInsuranceAccept").attr("required",true);}};SKYSALES.GenerateTimePicker=function(m,e,a,b){var f=$("#"+m);for(var c=e;c<a;c=c+b){var l=c;if(c<10){l="0"+l;}f.append('<option value="'+l+'">'+l+"</option>");}};SKYSALES.CheckOnlyDigitAllow=function(c){var a=(c)?c:window.event;var b=(a.keyCode)?a.keyCode:a.which;if(b!=null){b=parseInt(b,10);if((b<48||b>57)&&(b<96||b>105)){if(!jsIsUserFriendlyChar(b)){return false;}}else{if(a.shiftKey){return false;}}}return true;};function jsIsUserFriendlyChar(b,a){if(b==8||b==9||b==13||b==45||b==46){return true;}if((b>16&&b<21)||(b>34&&b<41)){return true;}return false;}SKYSALES.Class.TripPlannerHelp=function(){var b=new SKYSALES.Class.SkySales(),a=SKYSALES.Util.extendObject(b);a.containerId="tripPlannerHelpLink";a.container=null;a.init=function(c){this.setSettingsByObject(c);this.setVars();this.addEvents();};a.setVars=function(){this.container=this.getById(this.containerId);};a.addEvents=function(){this.addHelp();};a.addHelp=function(){var e=new SKYSALES.Class.ToggleView(),c={"elementId":"tripPlannerHelp","hideId":"tripPlannerHelpLink","showId":"tripPlannerHelpLink"};e.init(c);e.updateHide();};return a;};SKYSALES.Class.PassengerTypeDropDowns=function(){var c=new SKYSALES.Class.SkySales(),e=SKYSALES.Util.extendObject(c),f,b,a;e.passengerTypes={};e.maximumPassengersPerType=7;e.passengerTypeDropDownArray=[];e.passengerTypesCountHash={};e.setVars=function(){f=this.getById("tripPlannerPassengerTypeTemplateId");b=this.getById("tripPlannerPassengerTypesContainer");};e.getHtml=function(){var m=f.text(),t="",l="",r=this.passengerTypes,q="",s="",u={};for(s in r){if(r.hasOwnProperty(s)&&s!=="INF"){u=r[s];q=u.name;t=m.replace(/\[key\]/g,s);t=t.replace(/\[name\]/g,q);l+=t;}}return l;};e.getPassengerTypeArray=function(m){var l=[],q=0,r=this.maximumPassengersPerType;for(q=0;q<=r;q+=1){l[q]={"code":q,"name":q+" "+m.name};}return l;};e.populatePassengerTypeDropDown=function(m,q){var r=$("#paxTypeCountDictionary_"+m),l={"input":r,"objectArray":a,"selectedItem":q};SKYSALES.Util.populate(l);e.passengerTypeDropDownArray.push(r);};e.populatePassengerTypeDropDowns=function(){var l=this.passengerTypes,s=this.passengerTypesCountHash,r=0,m="",q={};for(m in l){a=this.getPassengerTypeArray(l[m]);if(l.hasOwnProperty(m)){q=l[m];if(s[m]===undefined){r=0;}else{r=s[m];}e.populatePassengerTypeDropDown(m,r);}}};e.draw=function(){var l="";var m=$(b).find("#paxTypeList");l=this.getHtml();m.html(l);};e.init=function(l){this.setSettingsByObject(l);this.setVars();this.draw();this.populatePassengerTypeDropDowns();};return e;};SKYSALES.Class.TripPlannerSearchFlight=function(){var m=new SKYSALES.Class.SkySales(),f=SKYSALES.Util.extendObject(m),c="tripFlight_0",a="tripIsUnavailable_0",s="tripHasNoFares_0",r="",b="",q="",e="",l="";f.index=0;f.tripFlightTemplateHtml="";f.tripPlannerSearchFlights={};f.market={};f.flightDate=new Date();f.container={};f.fullDateFormatString="yy-mm-dd";f.tripIsUnavailable={};f.tripHasNoFares={};f.datePickerManager={};f.lowFare={};f.lowFareDom={};f.origin="";f.originInput={};f.originInputDom={};f.destination="";f.destinationInput={};f.destinationInputDom={};f.dayInput={};f.yearMonthInput={};f.flightLabel={};f.closeButton={};f.selectedClass="tpSelectedFlight";f.journeyFareSellKey="";f.isAddFlight=false;f.maxFlightsToShow=3;f.minFlightsToShow=2;f.islandTransferCode="";f.readOnlyPanelCountries=[];f.islandGroupText="";f.setVars=function(){var v=this.tripPlannerSearchFlights.tripPlannerSearch,A=v.flightContainerIdFormat,t=v.tripIsUnavailableIdFormat,w=v.tripHasNoFaresIdFormat,z=v.lowFareIdFormat,u=v.originStationIdFormat,C=v.destinationStationIdFormat,D=v.flightLabelIdFormat,B=v.closeFlightButtonIdFormat;c=A.replace("[index]",this.index);a=t.replace("[index]",this.index);s=w.replace("[index]",this.index);q=z.replace("[index]",this.index);r=u.replace("[index]",this.index);b=C.replace("[index]",this.index);e=D.replace("[index]",this.index);l=B.replace("[index]",this.index);f.islandTransferCode=v.islandTransferCode;f.readOnlyPanelCountries=v.readOnlyPanelCountries;f.islandGroupText=v.islandGroupText;};f.getHtml=function(){var u=this.tripFlightTemplateHtml.replace(/\[index\]/g,this.index),t=this.index+1;u=u.replace(/\[oneBasedIndex\]/g,t);return u;};f.draw=function(){var t=this.tripPlannerSearchFlights.tripFlightsContainer,u=this.getHtml();t.append(u);};f.setVarsAfterDrawAndInitMarket=function(){f.container=this.getById(c);f.tripIsUnavailable=this.getById(a);f.tripHasNoFares=this.getById(s);f.lowFare=this.getById(q);f.lowFareDom=this.lowFare[0];f.originInput=this.getById(r);f.originInputDom=this.originInput[0];f.flightLabel=this.getById(e);this.originInput.val(this.origin);f.destinationInput=this.getById(b);f.destinationInputDom=this.destinationInput[0];this.destinationInput.val(this.destination);f.closeButton=this.getById(l);};f.populateFromDom=function(){var t=null,w=this.market||{},v=w.marketDateArray||[],u=null;f.destination=this.destinationInput.val()||"";f.origin=this.originInput.val()||"";if(v.length){u=v[0].marketDate||$([]);t=u.val()||"";t=SKYSALES.Util.parseIsoDate(t);}if(t){f.flightDate=t;}};f.initMarket=function(){var E=this.index,C=this.tripPlannerSearchFlights.tripPlannerSearch,t=C.flightSearch,D=C.marketDateFormat,A=(C.controlGroupId+C.marketAltDateIdFormat).replace("[index]",E+1),B=C.controlGroupId+C.marketMonthYearIdFormat.replace("[index]",E+1),w=(C.controlGroupId+C.marketDateIdFormat).replace("[index]",E+1),v=(C.controlGroupId+C.marketDayIdFormat).replace("[index]",E+1),H=B.replace("[index]",E),G={},z={"marketInputIdArray":[{"originId":r,"destinationId":b}],"stationInputIdArray":[r,b],"lowFareAvailabilityArray":[{"showId":q,"tripPlannerSearchFlight":this,"marketDateId":w,"originId":r,"destinationId":b}],"marketDateIdArray":[{"marketDateId":w,"marketDayId":v,"marketMonthYearId":H,"useJQueryDatePicker":false,"fullDateFormatString":this.fullDateFormatString,"marketAltDateId":A,"marketDateFormat":D,"isAddFlight":this.isAddFlight}]};f.market=new SKYSALES.Class.FlightSearchMarket();f.market.flightSearch=t;f.market.index=E;this.market.init(z);G=this.market.marketDateArray[0].datePickerManager;var F=$("#MarketDayMonthContainer");if(G.day.length==0){$("<select id="+G.day.selector.replace("#","")+" name="+G.day.selector.replace("_","$")+"></select>").appendTo(F);var u=$(G.day.selector.replace(this.index+1,this.index));$(G.day.selector).append(u.find("option").clone(true));$(G.day.selector).val(f.flightDate.getDate().toString());G.day=$(G.day.selector);}if(G.yearMonth.length==0||G.yearMonth.val()==""){if(G.yearMonth.length==0){$("<select id="+G.yearMonth.selector.replace("#","")+" name="+G.yearMonth.selector.replace("_","$")+"></select>").appendTo(F);}var u=$(G.yearMonth.selector.replace(this.index+1,this.index));$(G.yearMonth.selector).append(u.find("option").clone(true));$(G.yearMonth.selector).val(f.flightDate.getFullYear().toString());G.yearMonth=$(G.yearMonth.selector);}f.datePickerManager=G;G.currentDate=this.flightDate;f.dayInput=G.day;f.yearMonthInput=G.yearMonth;};f.selectFlight=function(){this.container.addClass(this.selectedClass);};f.unselectFlight=function(){this.container.removeClass(this.selectedClass);};f.selectCurrentFlight=function(){this.tripPlannerSearchFlights.unselectAll();this.selectFlight();};f.focusOrigin=function(){this.originInput.focus();};f.selectCurrentFlightHandler=function(){f.selectCurrentFlight();};f.removeCurrentFlightHandler=function(){f.removeCurrentFlight();};f.reapplyDateBoundsHandler=function(){f.tripPlannerSearchFlights.reapplyDateBounds();};f.removeCurrentFlight=function(){var t=this.tripPlannerSearchFlights,u=t.tripPlannerSearch;if(t){t.removeSelectedFlight(this);u.updateRetainedJourneyFareSellKeys();}};f.requireOriginAndDestination=function(){var t=SKYSALES.Util.setRequiredAttribute;t(this.originInput);t(this.destinationInput);};f.dontRequireOriginAndDestination=function(){var t=SKYSALES.Util.removeRequiredAttribute;t(this.originInput);t(this.destinationInput);};f.validate=function(){this.tripPlannerSearchFlights.dontRequireOriginAndDestinationOnFlights();this.requireOriginAndDestination();return SKYSALES.Util.validate(this.lowFareDom);};f.validateHandler=function(){return f.validate();};f.setNextFlightDestinationToThisFlightOrigin=function(){this.tripPlannerSearchFlights.setNextFlightDestinationToThisFlightOrigin(this);};f.setNextFlightDestinationToThisFlightOriginHandler=function(){f.setNextFlightDestinationToThisFlightOrigin();};f.addEvents=function(){this.closeButton.click(this.removeCurrentFlightHandler);this.originInput.focus(this.selectCurrentFlightHandler);this.yearMonthInput.focus(this.selectCurrentFlightHandler);this.destinationInput.blur(this.setNextFlightDestinationToThisFlightOriginHandler);};f.initRetainedJourneys=function(){this.originInput.multicoldd("value",this.origin);f.setTripPlannerRetainedJourneys(this.originInput,this.destinationInput,this.origin);this.destinationInput.multicoldd("value",this.destination);var w="",u="",A=("0"+(this.flightDate.getMonth()+1)).slice(-2),t=parseInt(this.flightDate.getDate()),v=this.flightDate.getFullYear(),z=$("#"+this.datePickerManager.linkedAltDateId);w=t+"/"+A+"/"+v;u=A+"/"+t+"/"+v;z.val(w);z.siblings("#calDiv").find("input").val(u);f.dayInput.val(t);f.yearMonthInput.val(v+"-"+A);f.datePickerManager.currentDate=this.flightDate;};f.setTripPlannerRetainedJourneys=function(F,z,C){var G=SKYSALES.Util.getResource().marketHash;var E=SKYSALES.Util.getResource().stationHash;var A=SKYSALES.Util.getResource().countryStationHash;var D=SKYSALES.Util.getResource().countryHash;var w=this.islandTransferCode,B=[],u=this.readOnlyPanelCountries,t=[];var v=function(O){O=C;var K=[],P=[],L={},M={},H=$(E[O]).attr("country"),J=$(E[O]).attr("countryCode");t=[];var I="";$.each(A,function(){var R=$(this).attr("country");K=[];P=[];$.each(G[O],function(){var U=$(E[$(this).attr("code")]);if($(E[$(this).attr("code")]).attr("country")==R){if(w&&$(E[$(this).attr("code")]).attr("provinceStateCode")==w){if(B&&B.length>0){for(stationArrayIndex in B){if($.inArray($(this).attr("code"),B[stationArrayIndex].destStationArray)>=0&&O==B[stationArrayIndex].originStation){P.push({"label":$(this).attr("name"),"value":$(this).attr("code")});break;}}}else{if($.inArray($(U).attr("stationCategories"),I)<0){P.push({"label":$(this).attr("name"),"value":$(this).attr("code")});}}}else{if(B&&B.length>0){for(stationArrayIndex in B){if($.inArray($(this).attr("code"),B[stationArrayIndex].destStationArray)>=0&&O==B[stationArrayIndex].originStation){K.push({"label":$(this).attr("name")+" ("+$(this).attr("code")+")","value":$(this).attr("code")});break;}}}else{if($.inArray($(U).attr("stationCategories"),I)<0){if($(this).attr("macCode")==null||$(this).attr("macCode")==""){var T=false;for(var V=0,S=K.length;V<S&&T===false;V++){if(K[V]["value"]===$(this).attr("code")){T=true;}}if(T===false){K.push({"label":$(this).attr("name")+" ("+$(this).attr("code")+")","value":$(this).attr("code")});}}}}}}});if(K.length>0){t.push({"category":$(this).attr("country"),"id":$(this).attr("countryCode"),"items":K});}if(P.length>0){t.push({"category":f.islandGroupText,"id":$(this).attr("countryCode"),"items":P});}});t.sort(function(T,R){var U=T.category.toLowerCase(),S=R.category.toLowerCase();if(U<S){return -1;}if(U>S){return 1;}return 0;});$.each(G[O],function(){L[$(this).attr("code")]=$(this).attr("name");});var Q=(u.length>0&&(B.length==0))?u.split(","):"";if(J&&Q.length>0&&$.inArray(J,Q)!=-1){z.multicoldd("option","cols",6);var N=F.multicoldd("option","data");$.each(N,function(S,T){var R={category:T.category,items:[],panel:1};$.each(T.items,function(U,V){if(!L[V.value]){R.items.push({label:V.label,value:V.value,disabled:true});L[V.value]=E[V.value].name;}});if(R.items.length){t.push(R);}});}else{z.multicoldd("option","cols",6);}z.multicoldd({data:t});};v();};f.init=function(t){this.setSettingsByObject(t);this.setVars();this.draw();this.initMarket();this.setVarsAfterDrawAndInitMarket();this.addEvents();if(this.origin&&this.destination){this.initRetainedJourneys();this.populateFirstTextBoxMarketOrigin();}};f.populateFirstTextBoxMarketOrigin=function(u){if(this.index===0){var t=$("#"+this.tripPlannerSearchFlights.tripPlannerSearch.flightSearch.textBoxOriginStationId.replace("[index]",this.index+1));t.val(this.origin);}};f.reinitializeFlight=function(t){this.setSettingsByObject(t);this.setVars();this.initMarket();this.setVarsAfterDrawAndInitMarket();this.addEvents();};f.showTripIsUnavailable=function(){this.tripIsUnavailable.show();};f.hideTripIsUnavailable=function(){this.tripIsUnavailable.hide();};f.showTripHasNoFares=function(){this.tripHasNoFares.show();};f.hideTripHasNoFares=function(){this.tripHasNoFares.hide();};f.show=function(){this.container.show();};f.hide=function(){this.container.hide();};f.setOrigin=function(t){f.origin=t;this.originInput.val(t);};f.clearStationPair=function(){var t=this.destinationInput.val(),u=this.originInput.val();if(t===""){this.originInput.val("");}if(u===""){this.destinationInput.val("");}};return f;};SKYSALES.Class.TripPlannerSearchFlights=function(){var a=new SKYSALES.Class.SkySales(),b=SKYSALES.Util.extendObject(a);b.flightSearch={};b.tripFlightsContainer={};b.tripFlightTemplateHtml="";b.flights=[];b.tripPlannerSearch={};b.numberOfDaysApart=3;b.firstDisplayedFlightIndex=0;b.addFlightId="addFlight";b.removeFlightId="removeFlight";b.scrollLeftArrowId="tpLeftMove";b.scrollRightArrowId="tpRightMove";b.addFlightLink={};b.removeFlightLink={};b.multiColumnOrigin="";b.multiColumnDestination="";b.multiColumnOriginFull="";b.multiColumnDestinationFull="";b.multiColumnEmptyText="";b.multiColumnEmptyResult="";b.multiColumnCloseTooltip="";b.multiColumnMarketError="";b.multiColumnOriginError="";b.multiColumnDestinationError="";b.multiColumnReadOnlyPanelText="";b.multiColumnRequiredField="";b.maxFlightsToShow=3;b.minFlightsToShow=2;b.setVars=function(){b.tripFlightsContainer=$("#tripFlightsContainer");b.tripFlightTemplateHtml=$("#tripFlightTemplate").text();b.addFlightLink=this.getById(this.addFlightId);b.removeFlightLink=this.getById(this.removeFlightId);b.scrollLeftArrow=this.getById(this.scrollLeftArrowId);b.scrollRightArrow=this.getById(this.scrollRightArrowId);};b.getPreviousFlightDate=function(e){var c=new Date(),f={};if(e>0){f=this.flights[e-1];c=f.datePickerManager.getDate();}return c;};b.setJsonOriginToPreviousFlightDestination=function(c,f){var e,l="";if(c>0){e=this.flights[c-1];l=e.destinationInput.val();if(l!==""){f.origin=l;}}return f;};b.setNextFlightDestinationToThisFlightOrigin=function(f){var e=f.index,c={};if(e<(this.flights.length-1)){c=this.flights[e+1];c.setOrigin(f.destinationInput.val());}};b.addFlightWithIndex=function(e){var f=new SKYSALES.Class.TripPlannerSearchFlight(),c=this.getPreviousFlightDate(e),l=c,m={},q=this.tripPlannerSearch.controlGroupId||"";l.setDate(c.getDate()+this.numberOfDaysApart);m={"tripFlightTemplateHtml":this.tripFlightTemplateHtml.replace(/\[controlGroupId\]/g,q),"tripPlannerSearchFlights":this,"index":e,"flightDate":l,"isAddFlight":true,"maxFlightsToShow":this.maxFlightsToShow,"minFlightsToShow":this.minFlightsToShow};m=this.setJsonOriginToPreviousFlightDestination(e,m);f.init(m);b.flights[e]=f;};b.toggleAddRemoveLinks=function(){var c=this.flights.length;if(c===this.minFlightsToShow){this.removeFlightLink.hide();this.addFlightLink.show();}else{if(c===this.maxFlightsToShow){this.removeFlightLink.show();this.addFlightLink.hide();}else{this.removeFlightLink.show();this.addFlightLink.show();}}};b.addFlight=function(){var c=this.flights.length;this.initMarketDropdowns(c);this.addFlightWithIndex(c);this.addDateDisplayforTripPlanner(c);this.showLastXFlights();this.toggleAddRemoveLinks();this.toggleRemoveFlightLabel();this.toggleScrollArrows();SKYSALES.Util.initializeBrowserWorkarounds();};b.removeFlight=function(){var e=this.tripPlannerSearch,f=this.flights.length-1,c=this.flights[f];c.container.remove();this.flights.splice(f,1);if(e){e.updateRetainedJourneyFareSellKeys();}this.showLastXFlights();this.toggleAddRemoveLinks();this.toggleRemoveFlightLabel();this.toggleScrollArrows();};b.removeSelectedFlight=function(c){var f=this.flights,l=0,e=0;if(c){e=c.index;c.container.remove();f.splice(c.index,1);l=f.length;this.tripFlightsContainer.hide();this.reinitializeAndRedrawFlights();if(l-e<=this.maxFlightsToShow){this.showLastXFlights();}else{if(e<this.maxFlightsToShow){this.showFlightsFromIndex(0);}else{this.showFlightsFromIndex(e);}}this.tripFlightsContainer.show();this.toggleScrollArrows();this.toggleRemoveFlightLabel();this.toggleAddRemoveLinks();this.flights=f;}};b.reinitializeAndRedrawFlights=function(){var l=0,e=this.flights,c={},q=e.length,m=[],r={},f="",s=this.tripPlannerSearch.controlGroupId||"";for(l=0;l<q;l+=1){c=e[l];c.index=l;c.populateFromDom();r={"destination":c.destination,"flightDate":c.flightDate,"index":c.index,"origin":c.origin,"tripFlightTemplateHtml":c.tripFlightTemplateHtml.replace(/\[controlGroupId\]/g,s),"tripPlannerSearchFlights":c.tripPlannerSearchFlights,"journeyFareSellKey":c.journeyFareSellKey};m.push(r);f=f+c.getHtml();}this.tripFlightsContainer.html(f);for(l=0;l<q;l+=1){c=e[l];c.reinitializeFlight(m[l]);e[l]=c;}this.flights=e;};b.toggleRemoveFlightLabel=function(){var e=this.flights,f=e.length,c={};if(f>1){c=e[0];c.closeButton.show();}if(f===1){c=e[0];c.closeButton.hide();}};b.addFlightHandler=function(){if(b.flights.length<b.maxFlightsToShow){b.addFlight();}};b.removeFlightHandler=function(){if(b.flights.length>b.minFlightsToShow){b.removeFlight();}};b.unselectAll=function(){var f=this.flights.length,e=0,c={};for(e=0;e<f;e+=1){c=this.flights[e];c.unselectFlight();}};b.parseDate=function(q){var f=q.split("-"),c=f[0],e=f[1],m=f[2],l=new Date(c,e-1,m);return l;};b.addFlightFromViewModel=function(e,c){var f=new SKYSALES.Class.TripPlannerSearchFlight(),r=this.tripPlannerSearch.controlGroupId||"",l=c.departureDate,m=this.parseDate(l),q={"tripFlightTemplateHtml":this.tripFlightTemplateHtml.replace(/\[controlGroupId\]/g,r),"tripPlannerSearchFlights":this,"index":e,"flightDate":m,"origin":c.originStation,"destination":c.destinationStation,"journeyFareSellKey":this.tripPlannerSearch.originalJourneyFareSellKeys[e]||"","maxFlightsToShow":this.maxFlightsToShow,"minFlightsToShow":this.minFlightsToShow};f.init(q);b.flights[e]=f;};b.initMarketDropdowns=function(l){var r=this.tripPlannerSearch.controlGroupId;var q=$("#"+this.tripPlannerSearch.marketDayMonthContainer);var f=r+this.tripPlannerSearch.marketMonthYearIdFormat.replace("[index]",l+1);var c=r+this.tripPlannerSearch.marketDayIdFormat.replace("[index]",l+1);var e=$("#"+r+this.tripPlannerSearch.marketMonthYearIdFormat.replace("[index]",l));var m=$("#"+r+this.tripPlannerSearch.marketDayIdFormat.replace("[index]",l));if(!$("<select id="+c+" name="+c.replace("_","$")+"></select>").val()){$("<select id="+c+" name="+c.replace("_","$")+"></select>").appendTo(q);$("<select id="+f+" name="+f.replace("_","$")+"></select>").appendTo(q);$("#"+f).append($(e).find("option").clone(true));$("#"+c).append($(m).find("option").clone(true));}};b.addDateDisplayforTripPlanner=function(e){var l=this.tripPlannerSearch.controlGroupId;var f=$("#"+l+"date_picker_display_id_"+(e+1)),c=$("#"+l+"date_picker_id_"+f.selector.slice(f.selector.length-1));f.click(function(){$(this).parent().find(".datepicker_trigger:visible").click();f.select();});};b.selectFirstFlight=function(){var c=this.flights[0];c.selectCurrentFlight();c.focusOrigin();};b.initFlights=function(){var e=0,l=this.tripPlannerSearch.dateMarkets,f=l.length,c={};for(e=0;e<f;e+=1){c=l[e];this.addFlightFromViewModel(e,c);}this.showFlightsFromIndex(0);this.toggleAddRemoveLinks();this.toggleScrollArrows();this.selectFirstFlight();};b.toggleScrollArrows=function(){var c=this.flights.length,e=this.firstDisplayedFlightIndex;if(c<=4){this.scrollLeftArrow.hide();this.scrollRightArrow.hide();}else{if(e===0){this.scrollLeftArrow.hide();this.scrollRightArrow.show();}else{if(e===c-4){this.scrollLeftArrow.show();this.scrollRightArrow.hide();}else{this.scrollLeftArrow.show();this.scrollRightArrow.show();}}}};b.scrollLeft=function(){this.showFlightsFromIndex(this.firstDisplayedFlightIndex-1);this.toggleScrollArrows();};b.scrollRight=function(){var c=this.flights.length;this.showFlightsFromIndex(this.firstDisplayedFlightIndex+1,c);this.toggleScrollArrows();};b.scrollLeftHandler=function(){b.scrollLeft();};b.scrollRightHandler=function(){b.scrollRight();};b.addEvents=function(){this.addFlightLink.click(this.addFlightHandler);this.removeFlightLink.click(this.removeFlightHandler);this.scrollLeftArrow.click(this.scrollLeftHandler);this.scrollRightArrow.click(this.scrollRightHandler);};b.init=function(c){this.setSettingsByObject(c);this.setVars();this.initFlights();this.toggleRemoveFlightLabel();this.addEvents();};b.showFlightsFromIndex=function(e,m){var l=m||this.flights.length,f=this.maxFlightsToShow,c=0;for(c=0;c<l;c+=1){if((c>=e)&&(c<=f)){this.flights[c].show();}else{this.flights[c].hide();}}b.firstDisplayedFlightIndex=e;};b.showLastXFlights=function(){var e=this.flights.length,c=0;if(e>=this.maxFlightsToShow){c=e-this.maxFlightsToShow;this.showFlightsFromIndex(c,e);}};b.validateDateBounds=function(){var q=0,u=this.flights,r=u.length,m=r-1,z={},v=new Date(),l=new Date(),w=new Date(),f={},t={},c={},e={},s={};l.setDate(v.getDate()-1);w.setYear(v.getFullYear()+1);f=l;for(q=0;q<r;q+=1){z=u[q];if(q>0){c=u[q-1];f=c.datePickerManager.getDate();}if(q===m){t=w;}else{e=u[q+1];t=e.datePickerManager.getDate();}s=z.datePickerManager;s.setBeginDateBound(f);s.setEndDateBound(t);s.datePopulate();}};b.dontRequireOriginAndDestinationOnFlights=function(){var f=this.flights||[],l=f.length,e=0,c={};for(e=1;e<l;e+=1){c=f[e];c.dontRequireOriginAndDestination();}};b.firstFlightRequireOriginAndDestination=function(){var e=this.flights,c=e[0];this.dontRequireOriginAndDestinationOnFlights();c.requireOriginAndDestination();};b.clearIncompleteFlights=function(){var c={},f=this.flights,l=f.length,e=0;for(e=0;e<l;e+=1){c=f[e];c.clearStationPair();}};return b;};SKYSALES.Class.TripPlannerSearch=function(){var b=new SKYSALES.Class.SkySales(),a=SKYSALES.Util.extendObject(b);a.controlGroupId="";a.flightSearchJson={};a.flightSearch={};a.tripPlannerSearchDataJson={};a.preferredFareDropDownId="preferredFareDropDown";a.passengerDiscountDropDownId="passengerDiscountDropDown";a.flightContainerIdFormat="tripFlight_[index]";a.tripIsUnavailableIdFormat="tripIsUnavailable_[index]";a.tripHasNoFaresIdFormat="tripHasNoFares_[index]";a.originStationIdFormat="";a.destinationStationIdFormat="";a.lowFareIdFormat="";a.submitButtonId="";a.submitButton={};a.marketDateFormat="";a.marketDateIdFormat="date_picker_id_[index]";a.marketAltDateIdFormat="date_picker_display_id_[index]";a.marketDayIdFormat="_DropDownListMarketDay[index]";a.marketMonthYearIdFormat="_DropDownListMarketMonth[index]";a.addFlightId="addFlight";a.removeFlightId="removeFlight";a.flightLabelIdFormat="flightNumber_[index]";a.closeFlightButtonIdFormat="closeFlightButton_[index]";a.tripFlights={};a.numberOfDaysApart=4;a.preferredFareDropDown={};a.passengerDiscountDropDown={};a.passengerTypes={};a.fareTypes={};a.tripPlannerHelp=null;a.maximumPassengersPerType=0;a.passengerDiscounts={};a.dateMarkets=[];a.passengerTypesCount=[];a.passengerTypesCountHash={};a.discountCode="";a.preferredFare="";a.residentCountry="";a.originalJourneyFareSellKeys="";a.retainedJourneyFareSellKeysId="retainedJourneyFareSellKeys";a.retainedJourneyFareSellKeys={};a.marketDayMonthContainer="";a.maxFlightsToShow=3;a.minFlightsToShow=2;a.islandTransferCode="";a.readOnlyPanelCountries=[];a.islandGroupText="";a.populatePassengerTypesCountHash=function(){var e=this.passengerTypesCount,l=this.passengerTypesCountHash,c="",f={};for(c in e){if(e.hasOwnProperty(c)){f=e[c];l[c]=f;}}};a.setVars=function(){this.preferredFareDropDown=this.getById(this.preferredFareDropDownId);this.passengerDiscountDropDown=this.getById(this.passengerDiscountDropDownId);this.submitButton=this.getById(this.submitButtonId);this.retainedJourneyFareSellKeys=this.getById(this.retainedJourneyFareSellKeysId);this.populatePassengerTypesCountHash();this.originalJourneyFareSellKeys=this.originalJourneyFareSellKeys.split(",");};a.initRetainedJourneyFareSellKeys=function(){var c=this.originalJourneyFareSellKeys||[];this.retainedJourneyFareSellKeys.val(c.join());};a.updateRetainedJourneyFareSellKeys=function(){var f=this.tripFlights||{},m=f.flights||{},e={},q=m.length||0,l=0,c="";for(l=0;l<q;l+=1){e=m[l];if(c===""){c=e.journeyFareSellKey;}else{c=c+","+e.journeyFareSellKey;}}this.retainedJourneyFareSellKeys.val(c);};a.createPreferredFareDropDownArray=function(){var f=[],e=this.fareTypes||{},c="",l={};for(c in e){if(e.hasOwnProperty(c)){l=e[c];f.push({"code":c,"name":l.name});}}return f;};a.populatePreferredFareDropDown=function(){var e=this.createPreferredFareDropDownArray(),c={"input":this.preferredFareDropDown,"objectArray":e,"selectedItem":this.preferredFare};SKYSALES.Util.populate(c);};a.createPassengerDiscountDropDownArray=function(){var l=[],c=this.passengerDiscounts||{},e="",f={};for(e in c){if(c.hasOwnProperty(e)){f=c[e];l.push({"code":e,"name":f.name});}}return l;};a.populateDiscountDropDown=function(){var e=this.createPassengerDiscountDropDownArray(),c={"input":this.passengerDiscountDropDown,"objectArray":e,"selectedItem":this.discountCode};SKYSALES.Util.populate(c);};a.initFlightSearch=function(){var e={},c=SKYSALES.Util.setRequiredAttribute;a.flightSearchJson.countryInputIdArray[0].defaultCountry=this.residentCountry;a.flightSearch=new SKYSALES.Class.FlightSearch();this.flightSearch.init(this.flightSearchJson);e=this.flightSearch.countryInputArray[0].input;c(e);};a.createAndPopulateDropDowns=function(){var c={"passengerTypes":this.passengerTypes,"maximumPassengersPerType":this.maximumPassengersPerType,"passengerTypesCountHash":this.passengerTypesCountHash};a.passengerTypeDropDowns=new SKYSALES.Class.PassengerTypeDropDowns();this.passengerTypeDropDowns.init(c);};a.initTripFlights=function(){var c={};a.tripFlights=new SKYSALES.Class.TripPlannerSearchFlights();c={"tripPlannerSearch":this,"numberOfDaysApart":this.numberOfDaysApart,"addFlightId":this.addFlightId,"removeFlightId":this.removeFlightId,"maxFlightsToShow":this.maxFlightsToShow,"minFlightsToShow":this.minFlightsToShow};this.tripFlights.init(c);};a.validateFirstFlight=function(){this.tripFlights.firstFlightRequireOriginAndDestination();return SKYSALES.Util.validate(this.submitButton[0]);};a.validate=function(){var c=null;c=this.validateFirstFlight();if(c){this.tripFlights.clearIncompleteFlights();}return c;};a.validateHandler=function(){var c=a.validate();return c;};a.addEvents=function(){this.submitButton.click(this.validateHandler);};a.init=function(c){this.setSettingsByObject(c);this.setSettingsByObject(this.tripPlannerSearchDataJson);this.setVars();this.initRetainedJourneyFareSellKeys();this.initFlightSearch();this.initTripFlights();this.flightSearch.initDateDisplayforTripPlanner();this.addEvents();};return a;};SKYSALES.Class.TripPlannerSelect=function(){var a=new SKYSALES.Class.SkySales(),b=SKYSALES.Util.extendObject(a);b.tripContainerId="tripContainerId";b.tripContainer=null;b.tripFlightTemplateId="tripFlightTemplateId";b.tripFlightTemplate=null;b.tripFlightInfoTemplateId="tripFlightInfoTemplateId";b.tripFlightInfoTemplate=null;b.tripFlightInfoLegDetailsId="tripFlightInfoLegDetailsId";b.tripFlightInfoLegDetails=null;b.journeyContainerId="tpSelect";b.journeyContainer=null;b.tripJourneyInfoTemplateId="journeyTableTemplateId";b.tripJourneyInfoTemplate=null;b.itinerarySummaryContainerId="tpItinSummary";b.fareCategoriesTemplateId="faresCategoriesTemplateId";b.itinerarySummaryContainer=null;b.itineraryTableTemplateId="itineraryTableTemplateId";b.itineraryTableTemplate=null;b.TripAvailabilityResponse={};b.ErrorsOccurred=null;b.leftPageButtonId="tpLeftMove";b.leftPageButton=null;b.rightPageButtonId="tpRightMove";b.rightPageButton=null;b.tripSelectedClass="tpSelectedPanel";b.tripSelectClass="tpSelectPanel";b.radioButtonSelectedClass="checked";b.itineraryJourneyInfoTemplateId="itineraryJourneyInfoTemplate";b.itineraryJourneyInfoTemplate=null;b.itineraryJourneyInfoStripedTemplateId="itineraryJourneyInfoStripedTemplate";b.itineraryJourneyInfoStripedTemplate=null;b.selectViewPricesCurrencyInfoTemplateId="selectViewPricesCurrencyInfoTemplate";b.selectViewPricesCurrencyInfoTemplate=null;b.tripFlightHeaderInfoTemplateId="tripFlightHeaderInfoTemplateId";b.tripFlightHeaderInfoTemplate=null;b.tripFlightHeaderInfoContainerId="tripFlightHeaderInfo";b.noFlightFoundID="noFlightFoundID";b.tripFlightHeaderInfoContainer=null;b.noFlights="";b.lowFareIndicator="true";b.conflictFlights="";b.limitMonths="";b.daysToSlide="";b.daysToShowOnColumnView="";b.tripPlannerHelp=null;b.sellKeysInputId="tripPlannerSellKeys";b.sellKeysInput=null;b.JourneyFareSellKeys="";b.productClasses=null;b.userSelections=null;b.userSelectionIndeces=null;b.postBackFunction=null;b.tabsHeaderWrapperClass="tabsHeaderWrapper";b.dayTabsClass="dayTabLink";b.dateFormatHidden="yy-mm-dd";b.specialProductClasses=null;b.existingFlights=null;b.seatsBeforeLimited="";b.paxTypeLabels=[];b.schedulesArray=[];b.tripSellKeyArray=[];b.itinerarySummary=null;b.infantSsrFeeDetails=[];b.hasInfant="";b.tripTableHeaderId="tripFlightInfoTableHeaderId";b.tripTableHeader={};b.tripNextButtonTemplateId="tripNextButtonTemplateId";b.tripNextButtonTemplate={};b.tripContinueButtonId="tripContinueButtonId";b.tripContinueButton={};b.taxAndFeeProgressMessage="";b.incompleteFareSelection="";b.mccConvertedAmounts=[];b.externalRateId="";b.externalCurrencyCode="";b.flightInfoDestinationClass="";b.journeyIndexRetain="";b.init=function(f){this.setSettingsByObject(f);this.setVars();this.initUserSelections();this.itinerarySummary=new SKYSALES.Class.TripPlannerItinerarySummarySelect();this.itinerarySummary.init();this.itinerarySummary.drawSelectViewItinerarySummary=this.drawItinerarySummaryInfo;this.initSchedulesArray();this.draw();this.setVarsAfterDraw();this.addEvents();this.selectAndDrawInitialTrip();this.setVarsAfterDrawSchedulesJourneyInfo();this.createHiddenInputforSellKeys();this.initSellKeyArray();this.tripPlannerHelp=new SKYSALES.Class.TripPlannerHelp();this.tripPlannerHelp.init();this.initDisplay();var e=0,m=this.schedulesArray||[],c=m.length,q=null,l=false;for(e=0;e<c;e+=1){q=m[e];q.addEvents();if(q.getSelectedJourneyFareSellKey()!="|"){l=true;}}if(l==true){$("#taxAndFeeNoFaresSelected").removeClass("noFareLabelFormat");}else{$("#taxAndFeeInclusiveDivBody").remove();$("#taxAndFeeNoFaresSelected").addClass("noFareLabelFormat");}};b.setVars=function(){b.tripContainer=this.getById(this.tripContainerId);b.tripFlightTemplate=this.getById(this.tripFlightTemplateId);b.tripFlightInfoTemplate=this.getById(this.tripFlightInfoTemplateId);b.tripFlightInfoLegDetails=this.getById(this.tripFlightInfoLegDetailsId);b.journeyContainer=this.getById(this.journeyContainerId);b.tripJourneyInfoTemplate=this.getById(this.tripJourneyInfoTemplateId);b.itineraryTableTemplate=this.getById(this.itineraryTableTemplateId);b.leftPageButton=this.getById(this.leftPageButtonId);b.rightPageButton=this.getById(this.rightPageButtonId);b.itineraryJourneyInfoStripedTemplate=this.getById(this.itineraryJourneyInfoStripedTemplateId);b.itineraryJourneyInfoTemplate=this.getById(this.itineraryJourneyInfoTemplateId);b.schedulesArray=this.TripAvailabilityResponse.Schedules||[];b.sellKeysInput=this.getById(this.sellKeysInputId);b.selectViewPricesCurrencyInfoTemplate=this.getById(this.selectViewPricesCurrencyInfoTemplateId);b.tripFlightHeaderInfoTemplate=this.getById(this.tripFlightHeaderInfoTemplateId);b.tripFlightHeaderInfoContainer=this.getById(this.tripFlightHeaderInfoContainerId);b.fareCategoriesTemplate=this.getById(this.fareCategoriesTemplateId);b.tripTableHeader=this.getById(this.tripTableHeaderId);b.tripNextButtonTemplate=this.getById(this.tripNextButtonTemplateId);b.tripContinueButton=this.getById(this.tripContinueButtonId);b.noFlightFoundTemplate=this.getById(this.noFlightFoundID);};b.initUserSelections=function(){var q=this.userSelections,e=q.length;for(var l=0;l<e;l++){var f=q[l],c=new SKYSALES.Class.STASTD();c.Day=parseInt(f.selectedDay);c.Month=parseInt(f.selectedMonth);c.Year=parseInt(f.selectedYear);c.init();b.userSelections[l].date=c.date;var m=b.userSelections[l].marketIndex;b.userSelections[l].marketIndex=parseInt(m);}};b.createHiddenInputforSellKeys=function(){var m=b.schedulesArray,f=m.length;if(f!=null&&parseInt(f)!=0){for(var c=0;c<f;c++){var e=$('<input type="text" />').attr({"id":"SelectedRd_"+c,"class":"hidden"}),l=m[c].getSelectedJourneyFareSellKey();if(l!=="|"){e.val(l);}$("body").append(e);}}};b.initSchedulesArray=function(){this.JourneyFareSellKeys=this.JourneyFareSellKeys.split(",");var e=0,m=this.TripAvailabilityResponse.Schedules||[],c=m.length,q=null,l=this.journeyIndexRetain?parseInt(this.journeyIndexRetain):null;for(e=0;e<c;e+=1){var f=this.userSelectionIndeces[e];f=parseInt(f.marketIndex);q=new SKYSALES.Class.Schedule();q.index=e;q.flightIndex=f;q.deactivateAllSchedules=this.deactivateAllSchedules;q.updateTripSellKeyArray=this.updateTripSellKeyArray;q.productClasses=this.productClasses;q.userSelections=this.userSelections;q.userSelection=this.userSelections[f];q.postBackFunction=this.postBackFunction;q.dayTabsClass=this.dayTabsClass;q.noFlights=this.noFlights;q.lowFareIndicator=this.lowFareIndicator;q.dateFormatHidden=this.dateFormatHidden;q.conflictFlights=this.conflictFlights;q.limitMonths=this.limitMonths;q.daysToSlide=this.daysToSlide;q.isScheduleHasSelectedFare=this.isScheduleHasSelectedFare;q.infantSsrFeeDetails=this.infantSsrFeeDetails;q.hasInfant=this.hasInfant;q.specialProductClasses=this.specialProductClasses;q.existingFlights=this.existingFlights;q.seatsBeforeLimited=this.seatsBeforeLimited;q.marketCount=c;q.taxAndFeeProgressMessage=this.taxAndFeeProgressMessage;q.incompleteFareSelection=this.incompleteFareSelection;q.fromMultiCity=true;if(this.JourneyFareSellKeys[e]!==undefined&&l!==null&&l!==f){q.journeyFareSellKey=this.JourneyFareSellKeys[e];}q.updateTrips=this.updateTripsHandler;q.isShowing=true;q.mccConvertedAmounts=this.mccConvertedAmounts;q.externalRateId=this.externalRateId;q.externalCurrencyCode=this.externalCurrencyCode;q.init(m[e]);m[e]=q;}};b.setVarsAfterDraw=function(){var e=0,f=this.schedulesArray||[],c=f.length,l=null;for(e=0;e<c;e+=1){l=f[e];l.setVarsAfterDraw();}};b.setVarsAfterDrawSchedulesJourneyInfo=function(){var e=0,f=this.schedulesArray||[],c=f.length,l=null;for(e=0;e<c;e+=1){l=f[e];if(l.selected===true){l.container.removeClass(this.tripSelectClass);l.container.addClass(this.tripSelectedClass);b.updateNextButton(e);SKYSALES.Util.tripPlannerUpdateSelectedLabel(e,true);}else{SKYSALES.Util.tripPlannerUpdateSelectedLabel(e,false);}}};b.initDisplay=function(){$("#specialNeedsSection").appendTo($("#flightTypeDetailsID"));};b.addEvents=function(){b.addTripContainerEvents();var e=0,l=this.schedulesArray||[],c=l.length,m=null,f=false;for(e=0;e<c;e+=1){m=l[e];m.addEvents();}};b.addTripContainerEvents=function(){this.leftPageButton.click(this.updateTripsLeftHandler);this.rightPageButton.click(this.updateTripsRightHandler);};b.isScheduleHasSelectedFare=function(l){var e=b.schedulesArray,m=$.grep(e,function(q){return q.index==l;});if(m){var c=e[l].getSelectedTripJourneyFare(),f=c.match(/fare[0-9]*/);f=f&&f.length?f[0].match(/\d+/):null;f=f&&f.length?parseInt(f,10):-1;if(f<0){return false;}else{return true;}}else{return false;}};b.updateTripsLeftHandler=function(){var f=0,l=-1,m=b.schedulesArray||[],e=m.length,r=null,s=-1,q=-1,c=null;if(e>4){for(f=e-1;f>-1;f-=1){r=m[f];if(r.isShowing===true){l=f;}}f=0;if(l>0){c=m[l-1];if(c!==undefined&&c!==null){q=l-1;s=l+3;for(f=0;f<e;f+=1){r=m[f];r.isShowing=false;r.selected=false;}for(f=q;f<s;f+=1){r=m[f];if(f===q){r.selected=true;}r.isShowing=true;}b.tripContainer.empty();b.drawTripsInfo();b.drawTripHeaderInfo();b.setVarsAfterDraw();b.addEvents();b.drawScheduleJourneysInfo();b.setVarsAfterDrawSchedulesJourneyInfo();b.updateSelectedRadioButtons();}}}};b.updateTripsRightHandler=function(){var f=0,e=-1,m=b.schedulesArray||[],c=m.length,r=null,s=-1,q=-1,l=null;if(c>4){for(f=0;f<c;f+=1){r=m[f];if(r.isShowing===true){e=f;}}f=0;if(e<12){l=m[e+1];if(l!==undefined&&l!==null){s=e+1;q=s-3;for(f=0;f<c;f+=1){r=m[f];r.isShowing=false;r.selected=false;}for(f=q;f<=s;f+=1){r=m[f];if(f===s){r.selected=true;}r.isShowing=true;}b.tripContainer.empty();b.drawTripsInfo();b.drawTripHeaderInfo();b.setVarsAfterDraw();b.addEvents();b.drawScheduleJourneysInfo();b.setVarsAfterDrawSchedulesJourneyInfo();b.updateSelectedRadioButtons();}}}};b.updateTripContainerHandler=function(){var e=0,f=b.schedulesArray||[],c=f.length,l=null;for(e=0;e<c;e+=1){l=f[e];l.container.removeClass(b.tripSelectedClass);l.container.addClass(b.tripSelectClass);if(l.selected===true){l.container.removeClass(b.tripSelectClass);l.container.addClass(b.tripSelectedClass);b.journeyContainer.empty();b.drawScheduleJourneysInfo();b.updateSelectedRadioButtons();b.updateNextButton(e);SKYSALES.Util.tripPlannerUpdateSelectedLabel(e,true);}else{SKYSALES.Util.tripPlannerUpdateSelectedLabel(e,false);}}$(window).scrollTop($("#tpSelect").offset().top);};b.updateNextButton=function(m){var l={},r={},f="tripSelectedSpan",e=0;nextIndex=0,schedulesArray=b.schedulesArray||[],len=schedulesArray.length,buttonText="",totalAvailableFlights=0,totalSelectedFares=0;continueButtonText="",nextFlightNumber=0;if(this.schedulesArray.length-1>=m+1){nextFlightNumber=this.schedulesArray[m+1].flightIndex+1;}nextIndex=m+2;l=$("#tripPlannerNextButton");continueButtonText=b.getTripContinueButton();for(var q=0;q<len;q++){var c=schedulesArray[q].getSelectedTripJourneyFare();if(c!=="journey-1fare-1"){totalSelectedFares++;}}totalAvailableFlights=$("."+this.flightInfoDestinationClass+":not([data-retain])").length;r=$("#ControlGroupMultiCitySelectView_ButtonSubmit");r.hide();buttonText=this.getTripNextButtonTemplate();buttonText=SKYSALES.Util.replace(buttonText,/\[currentFlighNumber\]/g,nextFlightNumber);if(m!=null){l.attr("data-currentIndex",m);if(len==1){l.val(continueButtonText);}if(m!=null){l.attr("data-currentIndex",m);if(len==1){l.val(continueButtonText);}if(totalSelectedFares==totalAvailableFlights){if($(".tripUnavailable").length>0&&nextIndex<=len){l.val(buttonText);l.show();l.unbind("click");l.removeAttr("data-proceed");}else{l.val(continueButtonText);l.attr("data-proceed","true");}}else{if((nextIndex<=len)){l.val(buttonText);l.show();l.unbind("click");l.removeAttr("data-proceed");}else{l.val(continueButtonText);l.attr("data-proceed","false");}}}}};b.deactivateAllSchedules=function(){var e=0,f=b.schedulesArray||[],c=f.length,l=null;for(e=0;e<c;e+=1){l=f[e];l.selected=false;}};b.selectAndDrawInitialTrip=function(){var f=0,l=this.schedulesArray||[],c=l.length,m=null,e=this.journeyIndexRetain?parseInt(this.journeyIndexRetain):null;for(f=0;f<c;f+=1){m=l[f];if(f===0&&!e){m.selected=true;break;}else{if(m.flightIndex===e){m.selected=true;break;}}}b.drawScheduleJourneysInfo();};b.getTripsHeaderInfoHtml=function(){var q="",m=0,c=-1,f="",t="",e=this.schedulesArray||[],s=e.length,l=SKYSALES.Resource||{},u=l.stationHash,r=null;for(m=0;m<s;m+=1){r=e[m];if(r.selected===true){if(r.userSelection){f=u[r.userSelection.arrivalStation].name;t=u[r.userSelection.departureStation].name;}c=m+1;}}q=this.tripFlightHeaderInfoTemplate.text();q=SKYSALES.Util.replace(q,/\[firstShowingFligt\]/g,c);q=SKYSALES.Util.replace(q,/\[arrivalStation\]/g,f);q=SKYSALES.Util.replace(q,/\[departureStation\]/g,t);return q;};b.getTripsHtml=function(){var l="",e="",f=0,r=this.schedulesArray||[],q=this.userSelections||[],c=q.length,s=null,m=0;for(f=0;f<c;f+=1){if(q[f].modifyBookingStatus!="retain"){s=r[m];if(s.isShowing===true){l+=this.tripFlightTemplate.text();e=s.getTripsHtml();l=SKYSALES.Util.replace(l,/\[tripFlightInfo\]/g,e);l=SKYSALES.Util.replace(l,/\[index\]/g,m+1);l=SKYSALES.Util.replace(l,/\[flightInfoNumber\]/g,f+1);}m++;}else{if(q[f].modifyBookingStatus==="retain"){l+=this.getRetainTripsHtml(q[f],f+1);}}}return l;};b.getRetainTripsHtml=function(m,f){var l="",c=this.tripFlightTemplate.text(),s=this.tripFlightInfoTemplate.text(),e=this.tripFlightInfoLegDetails.text(),r=new SKYSALES.Class.STASTD(),q=new SKYSALES.Class.STASTD();r.Hour=m.arrivalHour;r.Minute=m.arrivalMinute;r.Month=parseInt(m.arrivalMonth);r.Day=parseInt(m.arrivalDay);r.Year=parseInt(m.arrivalYear);r.init();q.Hour=m.departureHour;q.Minute=m.departureMinute;q.Month=parseInt(m.departureMonth);q.Day=parseInt(m.departureDay);q.Year=parseInt(m.departureYear);q.init();c=SKYSALES.Util.replace(c,/\[index\]/g,"");c=SKYSALES.Util.replace(c,/index\=/g,"");c=SKYSALES.Util.replace(c,/id\=\"tripFlightContainer\"/g,"");s=SKYSALES.Util.replace(s,/\[index\]/g,"");s=SKYSALES.Util.replace(s,/\[flightInfoNumber\]/g,f);s=SKYSALES.Util.replace(s,/\[depStation]/g,m.departureStationDesc);s=SKYSALES.Util.replace(s,/\[arrStation]/g,m.arrivalStationDesc);s=SKYSALES.Util.replace(s,/\[depDate]/g,$.datepicker.formatDate("dd MM yy",q.date));s=SKYSALES.Util.replace(s,/\[selected]/g,"");s=SKYSALES.Util.replace(s,/\[change]/g,"");s=SKYSALES.Util.replace(s,/\[retain]/g,"data-retain");e=SKYSALES.Util.replace(e,/\[CC\] \[FN\]/g,m.flightDesignator);e=SKYSALES.Util.replace(e,/\[STD\]/g,q.getTime()+"("+m.departureStation+")");e=SKYSALES.Util.replace(e,/\[STA\]/g,r.getTime()+"("+m.arrivalStation+")");s=SKYSALES.Util.replace(s,/\[FlightLegDetails]/g,e);c=SKYSALES.Util.replace(c,/\[tripFlightInfo]/g,s);l=c;return l;};b.bindEvent=function(){$("div[id^='tripChangeDivId']").unbind("click").bind("click",this.clickChangeLinkHandler);$("span[id^='tripChangeSpanId']").unbind("click").bind("click",this.clickChangeLinkHandler);};b.clickChangeLinkHandler=function(){if(SKYSALES.checkIfFlightIsSelected()===true){var e=this.id;var c=0;c=e.match(/[0-9]/);if(c!==null){c=c[0].match(/\d+/);c=c[0];c=parseInt(c,10);}var f=$("#tripFlightAltContainer"+c);if(f!==undefined){f.click();}b.updateTripContainerHandler();}else{SKYSALES.onClickTripNextFlight("#tripPlannerNextButton");}};b.getFareCategories=function(){var f="",e=0,c=this.productClasses.length;for(e=0;e<c;e+=1){var l=this.fareCategoriesTemplate.text();l=SKYSALES.Util.replace(l,/\[fareCategoryId\]/,this.productClasses[e].productClass);l=SKYSALES.Util.replace(l,/\[fareCategory\]/g,this.productClasses[e].productClassText);l=SKYSALES.Util.replace(l,/\[fareCategoryDesc\]/g,this.productClasses[e].productClassDesc);var m=$(l);m.find("#"+this.productClasses[e].productClass).attr("onmouseover",$("#desc_"+this.productClasses[e].productClass).attr("onmouseover"));l=m.prop("outerHTML");f+=l;}return f;};b.getFareCategoriesDescription=function(e){var c=$("#desc_"+e).attr("onmouseover");return c;};b.getJourneyHtml=function(){var q="",e="",m=0,v="",f=this.schedulesArray||[],s=f.length,l=false,r=null;for(m=0;m<s;m+=1){r=f[m];if(r.selected===true){q=this.tripJourneyInfoTemplate.text();var t=this.getTripsHeaderInfoHtml();q=SKYSALES.Util.replace(q,/\[tripFlightInfo\]/g,t);var c=r.getLowFaresColumnHtml();c=SKYSALES.Util.replace(c,/\[tabsHeaderWrapperClass\]/g,this.tabsHeaderWrapperClass);q=SKYSALES.Util.replace(q,/\[lowFareColumnsTemplate\]/g,c);r.paxTypeLabels=b.paxTypeLabels;e+=r.getJourneyHtml();v="trip"+m;e=SKYSALES.Util.replace(e,/\[radioButtonIdTrip\]/g,v);e=SKYSALES.Util.replace(e,/\[radioGroupName\]/g,v);e=SKYSALES.Util.replace(e,/\[marketIndex\]/g,(m+1));q=SKYSALES.Util.replace(q,/\[jouneyInfoAndFares\]/,e);for(var u=0;u<r.JourneyDateMarketList.length;u+=1){if(r.JourneyDateMarketList[u].isSelectedJourney()){if(r.JourneyDateMarketList[u].Journeys.length>0){fareCategoriesHtml=this.getFareCategories();}else{fareCategoriesHtml=this.getNoFlightFoundText();}}}q=SKYSALES.Util.replace(q,/\[fareCategories\]/,fareCategoriesHtml);}}return q;};b.getNoFlightFoundText=function(){var c="";c+=this.noFlightFoundTemplate.text();return c;};b.getFlightTypeDetails=function(){var c="";c+=this.flightTypeDetails.text();return c;};b.draw=function(){b.drawTripsInfo();b.drawTripHeaderInfo();};b.drawScheduleJourneysInfo=function(){var f=b.getJourneyHtml(),e=0,l=this.schedulesArray||[],c=l.length,m=null;b.journeyContainer.html(f);for(e=0;e<c;e+=1){m=l[e];if(m.selected){m.setVarsAfterDraw("radioInput_"+"trip"+e);m.addEventsAfterDraw();}}if(SKYSALES.common){SKYSALES.common.stripeTables();}};b.drawTripHeaderInfo=function(){var c=this.getTripsHeaderInfoHtml();this.tripFlightHeaderInfoContainer.html(c);};b.drawTripsInfo=function(){var c=this.getTripsHtml();var e=this.getTripTableHeader();c=e+c;this.tripContainer.html(c);b.bindEvent();};b.drawItinerarySummaryInfo=function(){var c=b.getItineraryHtml();b.itinerarySummaryContainer.html(c);if(SKYSALES.common){SKYSALES.common.stripeTables();}};b.updateSelectedRadioButtons=function(){var f=0,l="",e=null,m=b.schedulesArray||[],c=m.length,r=null;for(f=0;f<c;f+=1){r=m[f];if(r.selected===true){l="radioInput_trip"+f+r.getSelectedTripJourneyFare();break;}}e=this.getById(l);if(e!==null){e.attr(this.radioButtonSelectedClass,this.radioButtonSelectedClass);e.parents(".resultFareCell3").addClass("selected");e.parents(".resultFare3").removeClass("resultFare3").addClass("resultFareHilite3");var q=e.parents(".resultFareHilite3").children(".limited");if(q!==null){q.removeClass("limited").addClass("limited-selected");}}};b.initSellKeyArray=function(){var e=0,q="",f=b.schedulesArray||[],c=f.length,m=null,l=false;for(e=0;e<c;e+=1){m=f[e];q=m.getSelectedJourneyFareSellKey();if(q!=="|"){b.tripSellKeyArray[e]=q;l=true;}else{b.tripSellKeyArray[e]="";}}b.sellKeysInput.value=this.tripSellKeyArray.toString();b.sellKeysInput.val(this.tripSellKeyArray.toString());this.itinerarySummary.sellKeys.val(this.tripSellKeyArray.toString());b.sellKeysInput.siblings("input:hidden").val(this.tripSellKeyArray.toString());if(l){SKYSALES.taxAndFeeInclusiveDisplayDataRequestHandler(b.tripSellKeyArray,b.tripSellKeyArray.length,c,"",b.taxAndFeeProgressMessage,b.incompleteFareSelection);}};b.updateItinerarySummary=function(){b.itinerarySummary.getPriceItineraryResponse(b.tripSellKeyArray.toString());};b.updateTripSellKeyArray=function(c,e){if(b.tripSellKeyArray[c]!==undefined){b.tripSellKeyArray[c]=e;b.sellKeysInput.value="";b.sellKeysInput.value=b.tripSellKeyArray.toString();b.sellKeysInput.val(b.tripSellKeyArray.toString());b.sellKeysInput.siblings("input:hidden").val(b.tripSellKeyArray.toString());}};b.updateTripsHandler=function(){b.updateTrips();};b.updateTrips=function(){this.drawTripsInfo();var e=0,f=b.schedulesArray||[],c=f.length,l=null;for(e=0;e<c;e+=1){l=f[e];l.setVarsAfterDraw();if(l.selected===true){l.container.removeClass(b.tripSelectClass);l.container.addClass(b.tripSelectedClass);SKYSALES.Util.tripPlannerUpdateSelectedLabel(e,true);b.updateNextButton(e);}else{SKYSALES.Util.tripPlannerUpdateSelectedLabel(e,false);}}this.addEvents();};b.getTripTableHeader=function(){var c="";c+=this.tripTableHeader.text();return c;};b.getTripNextButtonTemplate=function(){var c="";c+=this.tripNextButtonTemplate.text();return c;};b.getTripContinueButton=function(){var c="";c+=this.tripContinueButton.text();return c;};return b;};SKYSALES.Class.Schedule=function(){var a=new SKYSALES.Class.SkySales(),b=SKYSALES.Util.extendObject(a);b.JourneyDateMarketList=null;b.index=-1;b.flightIndex=-1;b.selected=false;b.isShowing=false;b.containerId="";b.container=null;b.altContainerId="";b.altContainer=null;b.deactivateAllSchedules=null;b.journeyItinerarySummaryInfoTemplateId="journeyItinerarySummaryInfoTemplate";b.allPassengerFeesItinerarySummaryInfoTemplateId="allPassengerFeesItinerarySummaryInfoTemplate";b.journeyItinerarySummaryInfoTemplate=null;b.updateTripSellKeyArray=null;b.updateItinerarySummary=null;b.updateTrips=null;b.journeyFareSellKey="";b.tripUnavailableTextId="tripUnavailableErrorText";b.tripUnavailableText="";b.tripHasNoFaresTextId="tripHasNoFaresErrorText";b.tripHasNoFaresText="";b.productClasses=null;b.userSelections=[];b.userSelection=null;b.postBackFunction=null;b.dayTabsClass="";b.lowFareColumnsTemplateId="lowFareColumnsTemplate";b.lowFareColumnsTemplate=null;b.lowFareRowTabsTemplateId="lowFareRowTabsTemplate";b.lowFareRowTabsTemplate=null;b.lowFareRowTabsTemplateId="lowFareRowTabsTemplate";b.lowFareRowTabsTemplate=null;b.previousWeekLinkTemplateId="previousWeekLinkTemplate";b.previousWeekLinkTemplate=null;b.nextWeekLinkTemplateId="nextWeekLinkTemplate";b.nextWeekLinkTemplate=null;b.lowFareTabsTemplateId="lowFareTabsTemplate";b.lowFareTabsTemplate=null;b.lowFareImageTabSeparatorTemplateId="lowFareImageTabSeparatorTemplate";b.lowFareImageTabSeparatorTemplate=null;b.dayHeaderClass="dayHeaders";b.dayHeaderTodayClass="dayHeadersLarge";b.dayHeaderImageClass="dayHeaderImage";b.dayHeaderImageTodayClass="dayHeaderTodayImage";b.noFlights="";b.lowFareIndicator="";b.conflictFlights="";b.limitMonths="14";b.daysToSlide="7";b.dateFormatHidden="yy-mm-dd";b.infantSsrFeeDetails=[];b.hasInfant="";b.paxTypeLabels=[];b.paxOtherLabel="";b.specialProductClasses=[];b.existingFlights=null;b.seatsBeforeLimited="";b.marketCount="";b.taxAndFeeProgressMessage="";b.incompleteFareSelection="";b.fromMultiCity="";b.validationReadAlong=null;b.isScheduleHasSelectedFare=null;b.mccConvertedAmounts=[];b.externalRateId="";b.externalCurrencyCode="";b.init=function(c){this.setSettingsByObject(c);this.initJourneyDateMarketListArray();this.setVars();};b.initJourneyDateMarketListArray=function(){var l=0,e=this.JourneyDateMarketList||[],c=e.length,f=null;for(l=0;l<c;l+=1){f=new SKYSALES.Class.JourneyDateMarketList();f.updateTripSellKeyArray=this.updateTripSellKeyArray;f.updateItinerarySummary=this.updateItinerarySummary;f.updateTrips=this.updateTrips;f.selectedJourneyFareSellKey=this.journeyFareSellKey;f.tripIndex=this.index;f.journeyIndex=l;f.productClasses=this.productClasses;f.userSelection=this.userSelection;f.postBackFunction=this.postBackFunction;f.dayTabsClass=this.dayTabsClass;f.noFlights=this.noFlights;f.lowFareIndicator=this.lowFareIndicator;f.dateFormatHidden=this.dateFormatHidden;f.infantSsrFeeDetails=this.infantSsrFeeDetails;f.hasInfant=this.hasInfant;f.specialProductClasses=this.specialProductClasses;f.existingFlights=this.existingFlights;f.seatsBeforeLimited=this.seatsBeforeLimited;f.marketCount=this.marketCount;f.taxAndFeeProgressMessage=this.taxAndFeeProgressMessage;f.incompleteFareSelection=this.incompleteFareSelection;f.fromMultiCity=this.fromMultiCity;f.mccConvertedAmounts=this.mccConvertedAmounts;f.externalRateId=this.externalRateId;f.externalCurrencyCode=this.externalCurrencyCode;f.init(e[l]);e[l]=f;}};b.setVars=function(){var e={},c={};b.journeyItinerarySummaryInfoTemplate=this.getById(this.journeyItinerarySummaryInfoTemplateId);b.allPassengerFeesItinerarySummaryInfoTemplate=this.getById(this.allPassengerFeesItinerarySummaryInfoTemplateId);e=this.getById(this.tripUnavailableTextId);if(e.length>0){b.tripUnavailableText=e.text();}c=this.getById(this.tripHasNoFaresTextId);if(c.length>0){b.tripHasNoFaresText=c.text();}b.lowFareColumnsTemplate=this.getById(this.lowFareColumnsTemplateId);b.lowFareRowTabsTemplate=this.getById(this.lowFareRowTabsTemplateId);b.previousWeekLinkTemplate=this.getById(this.previousWeekLinkTemplateId);b.nextWeekLinkTemplate=this.getById(this.nextWeekLinkTemplateId);b.lowFareTabsTemplate=this.getById(this.lowFareTabsTemplateId);b.lowFareImageTabSeparatorTemplate=this.getById(this.lowFareImageTabSeparatorTemplateId);};b.setVarsAfterDraw=function(q){var m=this.index+1,l=0,e=this.JourneyDateMarketList||[],c=e.length,f=null;b.containerId="tripFlightContainer"+m;b.container=this.getById(this.containerId);b.altContainerId="tripFlightAltContainer"+m;b.altContainer=this.getById(this.altContainerId);for(l=0;l<c;l+=1){f=e[l];if(f){f.setVarsAfterDraw(q);}}};b.addEvents=function(){this.altContainer.click(this.updateScheduleSelectionHandler);};b.addEventsAfterDraw=function(){var r=this.index+1,q=0,f=this.JourneyDateMarketList||[],c=f.length,m=null,l=$("a[data-tripIndex='"+this.index+"']");if(l&&l.length){l.each(function(){var t=$(this);if(this.className.indexOf("leftArrowButton")>-1){t.click(b.previousWeekLinkHandler);}else{if(this.className.indexOf("rightArrowButton")>-1){t.click(b.nextWeekLinkHandler);}}});}b.containerId="tripFlightContainer"+r;b.container=this.getById(this.containerId);for(q=0;q<c;q+=1){m=f[q];if(m.isSelectedJourney()){m.addEventsAfterDraw();}else{var e=$("div[data-journeyIndex='"+q+"']");if(e&&e.length){var s=e.find("[class='"+this.dayTabsClass+"']");s.click(b.dayTabHandler);}}}};b.dayTabHandler=function(){b.removeValidation();var f=$(this);if(f&&f.length){var l=f.find('span[class*="tabDate"]'),c=l.text(),q=b.flightIndex,e=b.userSelection,m=e.hiddenFieldId;if(!b.violatePreviousJourneys(q,c)&&!b.violateNextJourneys(q,c)){$("#"+m).val(c);e.postBackFunction();}else{return b.outputErrorValidation();}}else{return false;}};b.nextWeekLinkHandler=function(){b.removeValidation();var f=$(this);if(f&&f.length){var l=f.find('span[class*="tabDate"]'),c=l.text(),q=b.flightIndex,e=b.userSelection,m=e.hiddenFieldId;if(!b.violateNextJourneys(q,c)){$("#"+m).val(l.text());e.postBackFunction();}else{return b.outputErrorValidation();}}else{return false;}};b.previousWeekLinkHandler=function(){b.removeValidation();var f=$(this);if(f&&f.length){var l=f.find('span[class*="tabDate"]'),c=l.text(),q=b.flightIndex,e=b.userSelection,m=e.hiddenFieldId;if(!b.violatePreviousJourneys(q,c)){$("#"+m).val(l.text());e.postBackFunction();}else{return b.outputErrorValidation();}}else{return false;}};b.violatePreviousJourneys=function(e,q){var m=b.userSelections,r=false;q=$.datepicker.parseDate(b.dateFormatHidden,q);for(var l=e-1;l>-1;l--){var c=m[l],f=c.date;if(q<f&&(c.modifyBookingStatus=="change"||c.modifyBookingStatus=="new")&&b.isScheduleHasSelectedFare(c.marketIndex)){r=true;break;}}return r;};b.violateNextJourneys=function(l,r){var q=b.userSelections,c=q.length,s=false;r=$.datepicker.parseDate(b.dateFormatHidden,r);for(var m=l+1;m<c;m++){var e=q[m],f=e.date;if(r>f&&(e.modifyBookingStatus=="change"||e.modifyBookingStatus=="new")&&b.isScheduleHasSelectedFare(e.marketIndex)){s=true;break;}}return s;};b.outputErrorValidation=function(){if(!b.validationReadAlong){b.validationReadAlong=new SKYSALES.ValidationErrorReadAlong();}var e=$("#"+b.validationReadAlong.getValidationErrorDivId()),c='<ul class="validationErrorList" ><li class="validationErrorListItem" >'+b.conflictFlights+"</li></ul>";if(!e||!e.length){b.validationReadAlong.addValidationErrorDiv(true);e=$("#"+b.validationReadAlong.getValidationErrorDivId());}e.find("p.close").html("<a/>").click(b.validationReadAlong.remove);$(document).click(b.validationReadAlong.remove);$("#"+b.validationReadAlong.getValidationErrorListId()).empty().html(c);e.offset(b.getSelectedJourneyDivOffset());return false;};b.removeValidation=function(){if(b.validationReadAlong){b.validationReadAlong.remove();}};b.getSelectedJourneyDivOffset=function(){var f=$('[data-tripIndex="'+b.index+'"][data-selected="true"]');if(!f||!f.length){var e=Math.round(b.JourneyDateMarketList.length/2);f=$('[data-tripIndex="'+b.index+'"][data-journeyIndex="'+e+'"]');}var m=f.offset(),l=f.width(),c={top:m.top,left:m.left+l};return c;};b.updateScheduleSelectionHandler=function(){if(b.deactivateAllSchedules!==null){b.deactivateAllSchedules();}b.selected=true;};b.getSelectedTripJourneyFare=function(){var l=0,m="",e=this.JourneyDateMarketList||[],c=e.length,f=null;for(l=0;l<c;l+=1){f=e[l];if(f&&f.isSelectedJourney()){m=f.getSelectedJourneyFare();}}return m;};b.getSelectedJourneyFareSellKey=function(){var l=0,m="",e=this.JourneyDateMarketList||[],c=e.length,f=null;for(l=0;l<c;l+=1){f=e[l];if(f.isSelectedJourney()){m=f.getSelectedJourneyFareSellKey();break;}}return m;};b.getTripsHtml=function(){var e,c=b.JourneyDateMarketList.length,l=undefined,m=false;for(var f=0;f<c;f++){if(b.JourneyDateMarketList[f]&&b.JourneyDateMarketList[f].isSelectedJourney()){l=b.JourneyDateMarketList[f];}}if(l===undefined){e=this.tripUnavailableText;m=false;}else{if(l.hasFares()){e=l.getTripsHtml();m=true;}else{e=this.tripHasNoFaresText;m=false;}}e=SKYSALES.Util.replace(e,/\[hasflight\]/g,m.toString());return e;};b.getJourneyHtml=function(){var m=0,l="",e=this.JourneyDateMarketList||[],c=e.length,f=null;for(m=0;m<c;m+=1){f=e[m];f.marketIndex=(this.index+1);f.paxTypeLabels=this.paxTypeLabels;f.paxOtherLabel=this.paxOtherLabel;if(f.isSelectedJourney()){l+=f.getJourneyHtml();}f.selectJourneys();}return l;};b.getLowFaresColumnHtml=function(){var O=0,l=this.index,C="",I=12,e=typeof this.daysToSlide==="string"?parseInt(this.daysToSlide):7,r=Math.round(e/2),N=this.JourneyDateMarketList||[],Q=N.length,H=null,L=this.userSelection,K=false,s=false,M=$.datepicker.parseDate(this.dateFormatHidden,L.selectedDateFormatted),P=$.datepicker.parseDate(this.dateFormatHidden,L.selectedDateFormatted),q=$.datepicker.parseDate(this.dateFormatHidden,L.selectedDateFormatted);if(P!="Invalid Date"){var f=$.datepicker.addDays(P,-1*e),J=$.datepicker.getCurrentDateNoTimePortion(),E=$.datepicker.addDays(J,-1),w=N.length?N[0].DepartureDate.date:$.datepicker.addDays(M,-1*r);if(w>J){K=true;}if(f<E){f=$.datepicker.addDays(null,r);}P=f;}else{P=new Date();}if(q!="Invalid Date"){var c=$.datepicker.addDays(q,e),S=typeof this.limitMonths==="string"?parseInt(this.limitMonths):this.limitMonths,U=$.datepicker.addMonths(null,S),R=$.datepicker.getDaysInMonth(U),T=Q?N[Q-1].DepartureDate.date:$.datepicker.addDays(M,r);U.setDate(R);if(c>U){c=U;}if(T<=U){s=true;}q=c;}else{q=new $.datepicker.addDays(null,e);}C=this.lowFareColumnsTemplate.text();var v=this.lowFareRowTabsTemplate.text(),A=this.previousWeekLinkTemplate.text(),G=this.nextWeekLinkTemplate.text(),t=this.lowFareImageTabSeparatorTemplate.text();C=SKYSALES.Util.replace(C,/\[lowFareRowTabs\]/g,v);if(K){A=SKYSALES.Util.replace(A,/\[prevDepartureDate\]/g,$.datepicker.formatDate(this.dateFormatHidden,P));C=SKYSALES.Util.replace(C,/\[previousWeekLink\]/g,A);}else{C=SKYSALES.Util.clearReplace(C,/\[previousWeekLink\]/g);}if(s){G=SKYSALES.Util.replace(G,/\[nextDepartureDate\]/g,$.datepicker.formatDate(this.dateFormatHidden,q));C=SKYSALES.Util.replace(C,/\[nextWeekLink\]/g,G);}else{C=SKYSALES.Util.clearReplace(C,/\[nextWeekLink\]/g);}var V="";for(var O=0;O<Q;O++){var m=this.lowFareTabsTemplate.text(),z="false",B=this.dayHeaderClass,F=this.dayHeaderImageClass,D=this.JourneyDateMarketList[O],u=D.getLowFare();if(D.isSelectedJourney()){B=this.dayHeaderTodayClass;F=this.dayHeaderImageTodayClass;z="true";}m=SKYSALES.Util.replace(m,/\[lowFareImageTab\]/g,u);m=SKYSALES.Util.replace(m,/\[dayHeaderClass\]/g,B);m=SKYSALES.Util.replace(m,/\[dayHeaderImageClass\]/g,F);m=SKYSALES.Util.replace(m,/\[isSelectedJourney\]/g,z);V=V+m;if(O==(Q-1)){V=V+t;}}C=SKYSALES.Util.replace(C,/\[lowFareTabs\]/g,V);C=SKYSALES.Util.replace(C,/\[tripIndex\]/g,this.index);C=SKYSALES.Util.replace(C,/\[lowFareImageTabSeparator\]/g,t);return C;};b.getJourneyFares=function(){var m=0,l="",e=this.JourneyDateMarketList||[],c=e.length,f=null;for(m=0;m<c;m+=1){f=e[m];l+=f.getJourneyFares();}return l;};b.getItineraryHtml=function(){var l=0,m="",u="",r=this.JourneyDateMarketList||[],q=r.length,s=null,e=0,f=[],t=0,c=null;for(l=0;l<q;l+=1){s=r[l];e=0;f=s.Journeys||[];t=f.length;c=null;for(e=0;e<t;e+=1){c=f[e];if(c.selected===true){m=this.journeyItinerarySummaryInfoTemplate.text();m=SKYSALES.Util.replace(m,/\[stationPair\]/,c.DepartureStation+" to "+c.ArrivalStation);m=SKYSALES.Util.replace(m,/\[deptArriveTimes\]/,c.DepartureDate.date.toTimeString()+" to "+c.ArrivalDate.date.toTimeString());m=SKYSALES.Util.replace(m,/\[flightDesignator\]/,c.FlightDesignator);m=SKYSALES.Util.replace(m,/\[journeyDate\]/,c.DepartureDate.date.toDateString());u=m;}}}return u;};return b;};SKYSALES.Class.JourneyDateMarketList=function(){var a=new SKYSALES.Class.SkySales(),b=SKYSALES.Util.extendObject(a);b.ArrivalStation="";b.DepartureDate="";b.DepartureStation="";b.Journeys=[];b.journeyTableInfoTemplateId="journeyTableInfoTemplateId";b.journeyTableInfoTemplate=null;b.journeyTableInfoStripedTemplateId="journeyTableInfoStripedTemplateId";b.journeyTableInfoStripedTemplate=null;b.updateTripSellKeyArray=null;b.updateItinerarySummary=null;b.updateTrips=null;b.faresInfoTemplateId="faresInfoTemplateId";b.selectedJourneyFareSellKey="";b.selectedJourneyKey="";b.selectedFareKey="";b.tripIndex=0;b.tripFlightInfoTemplateId="tripFlightInfoTemplateId";b.tripFlightInfoTemplate={};b.productClasses=null;b.hasInfant="";b.specialProductClasses=[];b.infantSsrFeeDetails=[];b.existingFlights=null;b.seatsBeforeLimited="";b.displayIconId="displayIconId";b.popUpMessageDisplayId="popUpMessageDisplayId";b.displayIconHotSpotId="displayIconHotSpotId";b.userSelection=null;b.postBackFunction=null;b.dayTabsClass="";b.journeyIndex=0;b.noFlights="";b.lowFareIndicator="";b.lowFareImageTabTemplateId="lowFareImageTabTemplate";b.lowFareImageTabTemplate=null;b.dateFormat="dd M D";b.dateFormatHidden="yy-mm-dd";b.blankFareTemplateId="blankFareTemplateId";b.blankFareTemplate={};b.marketIndex=0;b.paxTypeLabels=[];b.tripFlightInfoLegDetailsId="tripFlightInfoLegDetailsId";b.tripFlightInfoLegDetails={};b.tripSelectId="tripSelectedId";b.tripSelect={};b.tripChangeId="tripChangeId";b.tripChange={};b.marketCount="";b.taxAndFeeProgressMessage="";b.incompleteFareSelection="";b.fromMultiCity="";b.mccConvertedAmounts=[];b.externalRateId="";b.externalCurrencyCode="";b.init=function(c){b.setSettingsByObject(c);b.initDepatureDate();b.initSelectedSellKeys();b.initJourneysArray();b.setVars();b.selectJourneys();};b.initDepatureDate=function(){var c=SKYSALES.Class.STASTD();c.init(this.DepartureDate);b.DepartureDate=c;};b.initSelectedSellKeys=function(){if(this.selectedJourneyFareSellKey.length>0){this.selectedJourneyFareSellKey=this.selectedJourneyFareSellKey.split("|");if(this.selectedJourneyFareSellKey[1]!==undefined){this.selectedJourneyKey=this.selectedJourneyFareSellKey[1];}if(this.selectedJourneyFareSellKey[0]!==undefined){this.selectedFareKey=this.selectedJourneyFareSellKey[0];}}};b.initJourneysArray=function(){var e=0,l=this.Journeys||[],c=l.length,f=null;for(e=0;e<c;e+=1){f=new SKYSALES.Class.JourneyDateMarket();f.updateTripSellKeyArray=this.updateTripSellKeyArray;f.updateItinerarySummary=this.updateItinerarySummary;f.updateTrips=this.updateTrips;f.selectedFareKey=this.selectedFareKey;f.updateSelectedJourney=this.updateSelectedJourneyHandler;f.tripIndex=this.tripIndex;f.journeyIndex=e;f.productClasses=this.productClasses;f.userSelection=this.userSelection;f.hasInfant=this.hasInfant;f.infantSsrFeeDetails=this.infantSsrFeeDetails;f.specialProductClasses=this.specialProductClasses;f.existingFlights=this.existingFlights;f.seatsBeforeLimited=this.seatsBeforeLimited;f.marketCount=this.marketCount;f.taxAndFeeProgressMessage=this.taxAndFeeProgressMessage;f.incompleteFareSelection=this.incompleteFareSelection;f.fromMultiCity=this.fromMultiCity;f.mccConvertedAmounts=this.mccConvertedAmounts;f.externalRateId=this.externalRateId;f.externalCurrencyCode=this.externalCurrencyCode;f.init(l[e]);l[e]=f;}};b.setVars=function(){b.tripFlightInfoTemplate=this.getById(this.tripFlightInfoTemplateId);b.journeyTableInfoTemplate=this.getById(this.journeyTableInfoTemplateId);b.journeyTableInfoStripedTemplate=this.getById(this.journeyTableInfoStripedTemplateId);b.faresInfoTemplate=this.getById(this.faresInfoTemplateId);b.displayIcon=this.getById(this.displayIconId);b.popUpMessageDisplay=this.getById(this.popUpMessageDisplayId);b.displayIconHotSpot=this.getById(this.displayIconHotSpotId);b.blankFareTemplate=this.getById(this.blankFareTemplateId);b.tripFlightInfoLegDetails=this.getById(this.tripFlightInfoLegDetailsId);b.tripSelect=this.getById(this.tripSelectId);b.tripChange=this.getById(this.tripChangeId);b.lowFareImageTabTemplate=this.getById(this.lowFareImageTabTemplateId);};b.setVarsAfterDraw=function(l){var e=0,m=this.Journeys||[],c=m.length,f=null;for(e=0;e<c;e+=1){f=m[e];f.setVarsAfterDraw(l+"journey"+e);}};b.addEventsAfterDraw=function(){var e=0,l=this.Journeys||[],c=l.length,f=null;for(e=0;e<c;e+=1){f=l[e];f.addEventsAfterDraw();}};b.getFaresInfoHtml=function(){var f="",e=0,c=this.productClasses.length;for(e=0;e<c;e+=1){f+=this.faresInfoTemplate.text();}return f;};b.getLowFare=function(){var w="",f=$.datepicker.formatDate(this.dateFormat,this.DepartureDate.date),l=$.datepicker.formatDate(this.dateFormatHidden,this.DepartureDate.date),v=this.Journeys||[],A=v.length,e=this.lowFareImageTabTemplate.text(),t=this.lowFareIndicator;e=SKYSALES.Util.replace(e,/\[departureDateString\]/g,f);e=SKYSALES.Util.replace(e,/\[departureDate\]/g,l);e=SKYSALES.Util.replace(e,/\[dayTabCommonClass\]/g,this.dayTabsClass);e=SKYSALES.Util.replace(e,/\[tripIndex\]/g,this.tripIndex);e=SKYSALES.Util.replace(e,/\[journeyIndex\]/g,this.journeyIndex);if(t==="false"){e=SKYSALES.Util.clearReplace(e,/\[amount\]/g);e=SKYSALES.Util.clearReplace(e,/\[space\]/g);e=SKYSALES.Util.clearReplace(e,/\[hidden\]/g);e=SKYSALES.Util.clearReplace(e,/\[currencyCode\]/g);}else{if(v.length){var s=v[0],r=s.getMarketLowestFare();if(this.isSelectedJourney()){for(var u=0;u<A;u++){var z=v[u],q=z.getLowestFareObj();if(q!=null){if(u===0||!r){r=q;}else{if(q.TotalFareAmount<r.TotalFareAmount){r=q;}}}}}if(r){var m=SKYSALES.Util.convertToLocaleCurrency(r.TotalFareAmount),c=r.CurrencyCode;e=SKYSALES.Util.replace(e,/\[amount\]/g,m);e=SKYSALES.Util.replace(e,/\[space\]/g," ");e=SKYSALES.Util.replace(e,/\[hidden\]/g,"");e=SKYSALES.Util.replace(e,/\[currencyCode\]/g,c);}else{e=SKYSALES.Util.replace(e,/\[amount\]/g,"");e=SKYSALES.Util.replace(e,/\[space\]/g,"");e=SKYSALES.Util.replace(e,/\[hidden\]/g,"hidden");e=SKYSALES.Util.replace(e,/\[currencyCode\]/g,this.noFlights);}}else{e=SKYSALES.Util.replace(e,/\[amount\]/g,"");e=SKYSALES.Util.replace(e,/\[space\]/g,"");e=SKYSALES.Util.replace(e,/\[hidden\]/g,"hidden");e=SKYSALES.Util.replace(e,/\[currencyCode\]/g,this.noFlights);}}w+=e;return w;};b.getTripsHtml=function(){var w=this.Journeys[0],B=0,A=this.Journeys||[],C=A.length,s=null,m=-1,q=this.tripFlightInfoTemplate.text()||"",e="",t={},u={},E={},c=SKYSALES.Resource||{},v=c.stationHash,l=this.tripIndex,f="",r="",D="";for(B=0;B<C;B+=1){s=A[B];if(s.selected===true){w=s;}}var z=this.getFareSelected();if(w&&w.Segments){m=w.Segments.length;q=SKYSALES.Util.replace(q,/\[departureStation\]/g,w.Segments[0].DepartureStation);q=SKYSALES.Util.replace(q,/\[departureTime\]/g,w.Segments[0].Std.getTime());q=SKYSALES.Util.replace(q,/\[arrivalStation\]/g,w.Segments[m-1].ArrivalStation);q=SKYSALES.Util.replace(q,/\[arrivalTime\]/g,w.Segments[m-1].Sta.getTime());q=SKYSALES.Util.replace(q,/\[depStation\]/g,v[w.Segments[0].DepartureStation].name);q=SKYSALES.Util.replace(q,/\[arrStation\]/g,v[w.Segments[m-1].ArrivalStation].name);u=w.Segments[0]||{};E=u.FlightDesignator||{};t=new SKYSALES.Class.Leg();t.init(u.Legs[0]);e=E.getFlightDesignator()+t.getOperatingDisclosureTypeToolTip()+t.getCodeShareTypeToolTip()+u.getSubjToGovtApprovalSuperscript();q=SKYSALES.Util.replace(q,/\[departureDate\]/,$.datepicker.formatDate(u.fullDateFormatString,u.Std.date));q=SKYSALES.Util.replace(q,/\[depDate\]/,$.datepicker.formatDate("dd MM yy",u.Std.date));for(B=1;B<m;B+=1){u=w.Segments[B]||{};E=u.FlightDesignator||{};t=new SKYSALES.Class.Leg();t.init(u.Legs[0]);e=e+"/"+E.getFlightDesignator()+t.getOperatingDisclosureTypeToolTip()+t.getCodeShareTypeToolTip()+u.getSubjToGovtApprovalSuperscript();}if(z){f=this.getTripFlightInfoLegHtml();r=this.getTripSelectDetails();tripChangeDetails=this.getTripChangeDetails();}else{f="";r="";tripChangeDetails="";}q=SKYSALES.Util.replace(q,/\[FlightLegDetails\]/,f);q=SKYSALES.Util.replace(q,/\[flightNumber\]/,e);q=SKYSALES.Util.replace(q,/\[selected\]/,r);q=SKYSALES.Util.replace(q,/\[change\]/,tripChangeDetails);return q;}};b.getTripFlightInfoLegHtml=function(){var F=0,r="",A="",u="",q="",C=this.Journeys||[],G=C.length,E=this.productClasses.length,v=null,K="",c="",D=[],m=-1,e="",z=1;tripIndex=this.tripIndex;for(F=0;F<G;F+=1){v=C[F];if(v.selected===true){journey=v;}}if(journey&&journey.Segments){D=journey.Segments;m=D.length;if(D&&m>0){K=journey.Segments[0].Std.getTime();c=journey.Segments[m-1].Sta.getTime();}var l=K+"("+journey.DepartureStation+")"+"<br />"+c+"("+journey.ArrivalStation+")";var I=this.getTripFlightInfoLegDetails();var s="";for(var t=0;t<journey.Segments.length;t++){var H=journey.Segments[t];for(var f=0;f<H.Legs.length;f++){var B="";var J=H.Legs[f];var w=new SKYSALES.Class.Leg();w.init(J);if((w.LayoverTime.Hours>0)||(w.LayoverTime.Minutes>0)){B+=w.getLayoverTimeHtml();B="<div class='tripLayOverTime'>"+SKYSALES.Util.replace(B,/<br \/>/g,"")+"</div>";}B+=I;B=SKYSALES.Util.replace(B,/\[CC\]/,J.FlightDesignator.CarrierCode);B=SKYSALES.Util.replace(B,/\[FN\]/,J.FlightDesignator.FlightNumber);B=SKYSALES.Util.replace(B,/\[STD\]/,w.Std.getTime()+"("+H.DepartureStation+")");B=SKYSALES.Util.replace(B,/\[STA\]/,w.Sta.getTime()+"("+H.ArrivalStation+")");B=SKYSALES.Util.replace(B,/\[Hour\]/,w.TravelTime.Hours);B=SKYSALES.Util.replace(B,/\[Mins\]/,w.TravelTime.Minutes);s+=B;}}I=s;A+=I;}return A;};b.getFareSelected=function(l){var e=this.getSelectedJourneyFare(),c=-1,f=-1;c=e.match(/journey[0-9]*/);c=c[0].match(/\d+/);if(c!==null){c=c[0];c=parseInt(c,10);}f=e.match(/fare[0-9]*/);f=f[0].match(/\d+/);if(f!==null){f=f[0];f=parseInt(f,10);}if((c!=null||f!=null)&&(c>-1||f>-1)){return true;}else{return false;}};b.selectJourneys=function(){var l=0,q=false,f=-1,s=-1,r=this.Journeys||[],c=r.length,m=null,e=false;if(this.selectedJourneyKey.length>0){for(l=0;l<c;l+=1){m=r[l];if(m.SellKey===this.selectedJourneyKey){m.selected=true;m.selectedFareKey=this.selectedFareKey;e=m.selectPreselectedFare();if(e===false){}}}}q=this.journeyIsSelected();if(q===false){for(l=0;l<c;l+=1){m=r[l];if(m.getLowestFare()<f&&m.getLowestFare()>-1){f=m.getLowestFare();s=l;}else{if(f===-1&&m.getLowestFare()>-1){f=m.getLowestFare();s=l;}}if(l===c-1&&f>-1){m=r[s];r[s]=m;}}}};b.journeyIsSelected=function(){var e=0,l=false,m=this.Journeys||[],c=m.length,f=null;for(e=0;e<c;e+=1){f=m[e];if(f.selected===true){l=true;break;}}return l;};b.hasFares=function(){var c=false,l=this.Journeys||[],f=l.length||0,e;for(e=0;e<f;e+=1){if(l[e].hasFares()){c=true;break;}}return c;};b.isSelectedJourney=function(){var c=false;if(!$.isEmptyObject(this.userSelection)){c=this.userSelection.departureStation==this.DepartureStation&&this.userSelection.arrivalStation==this.ArrivalStation&&this.userSelection.selectedDay==this.DepartureDate.Day&&this.userSelection.selectedMonth==this.DepartureDate.Month&&this.userSelection.selectedYear==this.DepartureDate.Year;}return c;};b.getSelectedJourneyFare=function(){var l=0,e=-1,f=-1,q=this.Journeys||[],c=q.length,m=null;for(l=0;l<c;l+=1){m=q[l];if(m.selected===true){f=l;e=m.getSelectedPaxFaresIndex();break;}}return"journey"+f+"fare"+e;};b.getSelectedJourneyFareSellKey=function(){var l=0,e="",f="",q=this.Journeys||[],c=q.length,m=null;for(l=0;l<c;l+=1){m=q[l];if(m.selected===true){e=m.SellKey;f=m.getSelectedPaxFaresSellKey();break;}}return f+"|"+e;};b.updateSelectedJourneyHandler=function(c){b.updateSelectedJourney(c);};b.updateSelectedJourney=function(f){this.deactivateAllJourneys();var e=0,m=this.Journeys||[],c=m.length,l=null;for(e=0;e<c;e+=1){l=m[e];if(f===e){l.selected=true;break;}}};b.deactivateAllJourneys=function(){var e=0,l=this.Journeys||[],c=l.length,f=null;for(e=0;e<c;e+=1){f=l[e];f.selected=false;}};b.getJourneyFares=function(){var f=0,e="",l="",q=this.Journeys||[],c=q.length,m=null;for(f=0;f<c;f+=1){m=q[f];e+=m.getAllFares();}return(e);};b.getJourneyHtml=function(){var K=0,t="",F="",z="",s="",H=this.Journeys||[],M=H.length,J=this.productClasses.length,A=null,R="",c="",I=[],r=-1,f="",E=1;tripIndex=this.tripIndex;for(K=0;K<M;K+=1){A=H[K];if(K%2!==0){t=this.journeyTableInfoTemplate.text();}else{t=this.journeyTableInfoStripedTemplate.text();}faresInfoHtml=this.getFaresInfoHtml();t=SKYSALES.Util.replace(t,/\[faresInfo\]/,faresInfoHtml);I=A.Segments;r=I.length;if(I&&r>0){R=A.Segments[0].Std.getTime();c=A.Segments[r-1].Sta.getTime();}var m=R+"("+A.DepartureStation+")"+"<br />"+c+"("+A.ArrivalStation+")";var v=this.getDisplayPopUpHtml();var L=this.getDisplayIconHtml();var D=this.getDisplayIconHotSpotHtml();var u="";var Q="";for(var w=0;w<A.Segments.length;w++){var N=A.Segments[w];for(var l=0;l<N.Legs.length;l++){var C="";var e=L;var P=N.Legs[l];var B=new SKYSALES.Class.Leg();B.init(P);e=SKYSALES.Util.replace(e,/\[legCarrierCode1\]/,P.FlightDesignator.CarrierCode);if((B.LayoverTime.Hours>0)||(B.LayoverTime.Minutes>0)){C+=B.getLayoverTimeHtml();}C+=v;C=SKYSALES.Util.replace(C,/\[CC\]/,P.FlightDesignator.CarrierCode);C=SKYSALES.Util.replace(C,/\[FN\]/,P.FlightDesignator.FlightNumber);C=SKYSALES.Util.replace(C,/\[STD\]/,B.Std.getTime()+"("+N.DepartureStation+")");C=SKYSALES.Util.replace(C,/\[STA\]/,B.Sta.getTime()+"("+N.ArrivalStation+")");C=SKYSALES.Util.replace(C,/\[Hour\]/,B.TravelTime.Hours);C=SKYSALES.Util.replace(C,/\[Mins\]/,B.TravelTime.Minutes);u+=C;Q+=e;}}v=u;L=Q;D=SKYSALES.Util.replace(D,/\[popMsg\]/,v);t=SKYSALES.Util.replace(t,/\[departureTime\]/,R);t=SKYSALES.Util.replace(t,/\[arrivalTime\]/,c);t=SKYSALES.Util.replace(t,/\[flightNumber\]/,A.FlightNumber);t=SKYSALES.Util.replace(t,/\[journeyType\]/,A.JourneyType);t=SKYSALES.Util.replace(t,/\[flightDetails\]/,m);D=SKYSALES.Util.replace(D,/\[flightDisplayIconHotSpot\]/,L);t=SKYSALES.Util.replace(t,/\[flightDisplayIcon\]/,D);f=A.getJourneyDetailsHtml();t=SKYSALES.Util.replace(t,/\[journeyDetails\]/,f);var G=K+1;var q=tripIndex+1;E=1;for(j=0;j<J;j+=1){var O=this.blankFareTemplate.text();A.paxTypeLabels=this.paxTypeLabels;z=A.getFareInfoHtml(this.productClasses[j],A.SellKey);if(z===""){O=SKYSALES.Util.replace(O,/\[fareCount\]/g,J);if(j<(J-1)){O+="[ProductClass]";}else{O=SKYSALES.Util.replace(O,/\[ProductClass\]/g,"");}t=SKYSALES.Util.replace(t,/\[ProductClass\]/g,O);}else{if(j<(J-1)){z+="[ProductClass]";}t=SKYSALES.Util.replace(t,/\[ProductClass\]/g,z);t=SKYSALES.Util.replace(t,/\[fareID\]/g,E);E++;}t=SKYSALES.Util.replace(t,/\[classCount\]/g,J);t=SKYSALES.Util.replace(t,/\[fareRowID\]/g,(this.marketIndex+"_"+1+"_"+G));t=SKYSALES.Util.replace(t,/\[dateMarketIndex\]/g,K);t=SKYSALES.Util.replace(t,/\[dateMarketIndexOneBase\]/g,1);t=SKYSALES.Util.replace(t,/\[carrierCode\]/g,P.FlightDesignator.CarrierCode);}t=SKYSALES.Util.replace(t,/\[fareInfo\]/g,z);t=SKYSALES.Util.replace(t,/\[journeySellKey\]/g,A.SellKey);t=SKYSALES.Util.replace(t,/\[tripIndex\]/g,q);t=SKYSALES.Util.replace(t,/\[journeyIndex\]/g,K);s="journey"+K;t=SKYSALES.Util.replace(t,/\[radioButtonIdJourney\]/g,s);F+=t;}return F;};b.getDisplayIconHtml=function(){var c="";c+=this.displayIcon.text();return c;};b.getDisplayIconHotSpotHtml=function(){var c="";c+=this.displayIconHotSpot.text();return c;};b.getDisplayPopUpHtml=function(){var c="";c+=this.popUpMessageDisplay.text();return c;};b.getTripFlightInfoLegDetails=function(){var c="";c+=this.tripFlightInfoLegDetails.text();return c;};b.getTripSelectDetails=function(){var c="";c+=this.tripSelect.text();return c;};b.getTripChangeDetails=function(){var c="";c+=this.tripChange.text();return c;};return b;};SKYSALES.Class.JourneyDateMarket=function(){var b=new SKYSALES.Class.SkySales(),a=SKYSALES.Util.extendObject(b);a.JourneyFares=[];a.NotForGeneralUse="";a.Segments=[];a.ArrivalStation="";a.DepartureDate="";a.ArrivalDate="";a.DepartureStation="";a.JourneyType="";a.SalesDate="";a.SellKey="";a.FlightDesignator="";a.selected=false;a.updateTripSellKeyArray=null;a.updateItinerarySummary=null;a.updateSelectedJourney=null;a.updateTrips=null;a.journeyDetailsTemplate={};a.journeyDetailsTemplateId="journeyDetailsTemplate";a.selectedFareKey="";a.journeyIndex=0;a.tripIndex=0;a.productClasses=null;a.userSelection=null;a.infantSsrFeeDetails=[];a.hasInfant="";a.specialProductClasses=null;a.existingFlights=null;a.seatsBeforeLimited=null;a.marketCount="";a.taxAndFeeProgressMessage="";a.incompleteFareSelection="";a.fromMultiCity="";a.mccConvertedAmounts=[];a.externalRateId="";a.externalCurrencyCode="";a.init=function(c){this.setSettingsByObject(c);this.initSegmentsArray();this.initJourneyFares();this.addCodeShareIndicators();this.initDates();this.setVars();};a.initJourneyFares=function(){var f=0,e=this.JourneyFares||[],c=e.length,l=null;for(f=0;f<c;f+=1){l=new SKYSALES.Class.JourneyPaxFares();l.updateTripSellKeyArray=this.updateTripSellKeyArray;l.updateItinerarySummary=this.updateItinerarySummary;l.updateSelectedJourney=this.updateSelectedJourney;l.updateSelectedFare=this.updateSelectedFareHandler;l.productClasses=this.productClasses;l.infantSsrFeeDetails=this.infantSsrFeeDetails;l.hasInfant=this.hasInfant;l.specialProductClasses=this.specialProductClasses;l.existingFlights=this.existingFlights;l.seatsBeforeLimited=this.seatsBeforeLimited;l.updateTrips=this.updateTrips;l.marketCount=this.marketCount;l.taxAndFeeProgressMessage=this.taxAndFeeProgressMessage;l.incompleteFareSelection=this.incompleteFareSelection;l.fromMultiCity=this.fromMultiCity;l.mccConvertedAmounts=this.mccConvertedAmounts;l.externalRateId=this.externalRateId;l.externalCurrencyCode=this.externalCurrencyCode;l.init(e[f]);e[f]=l;}};a.initDates=function(){var c=SKYSALES.Class.STASTD(),e=SKYSALES.Class.STASTD();c.init(this.DepartureDate);a.DepartureDate=c;e.init(this.DepartureDate);a.ArrivalDate=e;};a.initSegmentsArray=function(){var f=0,e=this.Segments||[],c=e.length,l=null;for(f=0;f<c;f+=1){l=new SKYSALES.Class.Segment();l.init(e[f]);e[f]=l;}};a.setVarsAfterDraw=function(e){var l=0,f=this.JourneyFares||[],c=f.length,m=null;for(l=0;l<c;l+=1){m=f[l];m.setVarsAfterDraw(e+"fare"+l);}};a.journeyInfoJson=function(){var e=this.journeyIndex,s=this.tripIndex,f=[],r={},c=[],q={},m={},l={"tripIndex":s,"marketIndex":"0","dateMarketIndex":"0","journeyIndex":e,"key":s.toString()+"_0_0_"+e.toString(),"activateJourneyId":"activateJourney_"+s+"_"+e,"deactivateJourneyId":"deactivateJourney_"+s+"_"+e,"journeyContainerId":"journey_"+s+"_"+e};f=this.Segments;if(f&&f.length>0){r=f[0];c=r.Legs;if(c&&c.length>0){q=c[0];m=q.LegInfo;if(m){l.legInfoArray=[{"legIndex":"0","equipmentType":m.EquipmentType,"equipmentTypeSuffix":m.EquipmentTypeSuffix,"departureStation":r.DepartureStation,"arrivalStation":r.ArrivalStation,"carrierCode":m.OperatingCarrier,"flightNumber":m.OperatingFlightNumber,"opSuffix":m.OperatingOpSuffix,"marketingCode":"","marketingOverride":false}];}}}return l;};a.addEventsAfterDraw=function(){var f=0,e=this.JourneyFares||[],c=e.length,m=null,q=new SKYSALES.Class.JourneyInfo(),l=this.journeyInfoJson();q.init(l);for(f=0;f<c;f+=1){m=e[f];m.addEventsAfterDraw();}};a.setVars=function(){this.journeyDetailsTemplate=this.getById(this.journeyDetailsTemplateId);};a.selectPreselectedFare=function(){var l=false,f=0,e=[],c=0,m=null;if(this.selected===true&&this.selectedFareKey.length>0){f=0;e=this.JourneyFares||[];c=e.length;m=null;for(f=0;f<c;f+=1){m=e[f];if(m.SellKey===this.selectedFareKey){m.selected=true;l=true;break;}}}return l;};a.hasFares=function(){var f=this.JourneyFares,m=f.length,e,l,c=false;for(e=0;e<m;e+=1){l=f[e].JourneyPaxFares||[];if(l.length>0){c=true;break;}}return c;};a.getLowestFare=function(){var m=0,e=-1,f=-1,l=this.JourneyFares||[],c=l.length,q=null;for(m=0;m<c;m+=1){q=l[m];if(m===0){e=q.getLowestFare();f=m;}else{if(q.getLowestFare<e){e=q.getLowestFare();f=m;}}if(m===c-1&&e>-1){q=l[f];q.selected=true;}}return e;};a.getLowestFareObj=function(){var m=0,e=-1,f=null,l=this.JourneyFares||[],c=l.length,q=null,s="";for(m=0;m<c;m+=1){q=l[m];if(m===0){f=q.getLowestFare(true);}else{if(q.getLowestFare(true).TotalFareAmount<f.TotalFareAmount){f=q.getLowestFare(true);}}}if(this.externalRateId&&this.mccConvertedAmounts&&this.mccConvertedAmounts.length){var r=this.mccConvertedAmounts.filter(function(t){return t.fareSellKey==a.SellKey&&t.productClass==l[0].ProductClass&&t.paxType==f.PaxType;});if(r&&r.length){f.Amount=parseFloat((r[0].amount).replace(",",""));f.CurrencyCode=this.externalCurrencyCode;f.DiscountedFareAmount=parseFloat((r[0].discountedFareAmount).replace(",",""));f.PublishedFareAmount=parseFloat((r[0].publishedFareAmount).replace(",",""));f.TotalFareAmount=parseFloat(r[0].amount.replace(",",""));}}return f;};a.getMarketLowestFare=function(){var m=0,e=null,f=-1,l=this.JourneyFares||[],c=l.length;if(l.length){e=l[0].JourneyPaxFares[0];var r;for(m=0;m<c;m+=1){r=l[m];if(m===0){e=r.getLowestFare(true);}else{if(r.getLowestFare(true).TotalFareAmount<e.TotalFareAmount){e=r.getLowestFare(true);}}}}if(this.externalRateId&&this.mccConvertedAmounts&&this.mccConvertedAmounts.length){var s=this.mccConvertedAmounts.filter(function(t){return t.fareSellKey==a.SellKey&&t.productClass==l[0].ProductClass&&t.paxType==e.PaxType;});if(s&&s.length){var q=s[0].amount;e.Amount=parseFloat(q.replace(",",""));e.CurrencyCode=this.externalCurrencyCode;e.DiscountedFareAmount=parseFloat((s[0].discountedFareAmount).replace(",",""));e.PublishedFareAmount=parseFloat((s[0].publishedFareAmount).replace(",",""));e.TotalFareAmount=parseFloat(q.replace(",",""));}}return e;};a.getSelectedPaxFaresIndex=function(){var l=0,e=-1,f=this.JourneyFares||[],c=f.length,m=null;for(l=0;l<c;l+=1){m=f[l];if(m.selected===true){e=l;break;}}return e;};a.getSelectedPaxFaresSellKey=function(){var l=0,e=-1,f=this.JourneyFares||[],c=f.length,m=null;for(l=0;l<c;l+=1){m=f[l];if(m.selected===true){e=m.SellKey;break;}}return e;};a.updateSelectedFareHandler=function(c){a.updateSelectedFare(c);};a.updateSelectedFare=function(l){this.deactivateAllFares();var f=0,e=this.JourneyFares||[],c=e.length,m=null;for(f=0;f<c;f+=1){m=e[f];if(f===l){m.selected=true;break;}}};a.deactivateAllFares=function(){var f=0,e=this.JourneyFares||[],c=e.length,l=null;for(f=0;f<c;f+=1){l=e[f];l.selected=false;}};a.addCodeShareIndicators=function(){var B=this.FlightDesignator||"",e=B.split("/")||[],m=e.length,r="",v=this.Segments||[],s=v.length,u={},t={},c=0,l=[],q=l.length,A={},f={},w={},z="";if(m&&m===s){for(c=0;c<s;c+=1){r=e[c]||" ";r=r.substring(0,r.length-1);u=v[c]||{};t=new SKYSALES.Class.Segment();t.init(u);l=u.Legs||[];q=l.length;A=l[0]||{};f=new SKYSALES.Class.Leg();f.init(A);w=A.FlightDesignator||{};if(w.CarrierCode+w.FlightNumber===r||SKYSALES.Util.replace(w.FlightNumber,/ /g,"")===r){z=z+r+f.getOperatingDisclosureTypeToolTip()+f.getCodeShareTypeToolTip()+t.getSubjToGovtApprovalSuperscript();if(s>1&&s-1!==c){z=z+" /";}}}}a.FlightDesignator=z;};a.getJourneyDetailsHtml=function(){var t="",c=this.journeyDetailsTemplate.text(),q=this.Segments,r={},m=0,v=[],u={},f={},l=0,s=0,e=0;if(q){m=q.length;if(m>0){for(s=0;s<m;s+=1){r=q[s];v=r.Legs;if(v){l=v.length;if(l>0){for(e=0;e<l;e+=1){u=v[e];f=new SKYSALES.Class.Leg();f.init(u);t+=f.getLegHtml();}}}}}}c=SKYSALES.Util.replace(c,/\[segmentDetails\]/g,t);c=SKYSALES.Util.replace(c,/\[tripIndex\]/g,this.tripIndex);c=SKYSALES.Util.replace(c,/\[journeyIndex\]/g,this.journeyIndex);return c;};a.getAllFares=function(){var l=0,f="",e=this.JourneyFares||[],c=e.length,m=null;for(l=0;l<c;l+=1){m=e[l];f+=m;}return f;};a.getFareInfoHtml=function(m,t){var q=0,r="",u=this.JourneyFares||[],s=u.length,c=null,v=[],f=true,w=-1,l=a.specialProductClasses,z=a.existingFlights;for(q=0;q<s;q+=1){f=true;if(m.productClassName.indexOf("["+u[q].ProductClass+"]")==-1){f=false;}if(l.length>0&&z.length>0){for(x=0;x<l.length;x+=1){if(l[x].productClass==z[a.tripIndex].productClassCode&&l[x].productClassName.indexOf("["+u[q].productClass+"]")!=-1){f=false;}}}if(f){v.push(u[q]);w=q;c=u[q];break;}}if(c!=null){c.paxTypeLabels=this.paxTypeLabels;var e=this.mccConvertedAmounts.filter(function(A){return A.fareSellKey===t&&(m.productClassName.indexOf("["+A.productClass+"]")>-1);});r+=c.getFareInfoHtml(t,e);r=SKYSALES.Util.replace(r,/\[classSuffix\]/g,m.productClass);r=SKYSALES.Util.replace(r,/\[radioButtonIdFare\]/g,"fare"+w);}return r;};return a;};SKYSALES.Class.JourneyPaxFares=function(){var a=new SKYSALES.Class.SkySales(),b=SKYSALES.Util.extendObject(a);b.JourneyPaxFares=[];b.ClassOfService="";b.ProductClass="";b.Amount="";b.SellKey="";b.journeyFareInfoRadioButtonTemplateId="journeyFareInfoRadioButtonTemplateId";b.journeyFareInfoRadioButtonTemplate=null;b.journeyFarePaxTypeTemplateId="journeyFarePaxTypeTemplateId";b.journeyFarePaxTypeTemplate=null;b.containerId="";b.container=null;b.selected=false;b.updateTripSellKeyArray=null;b.updateItinerarySummary=null;b.updateSelectedJourney=null;b.updateSelectedFare=null;b.updateTrips=null;b.productClasses=null;b.hasInfant="";b.infantSsrFeeDetails=[];b.specialProductClasses=null;b.existingFlights=null;b.AvailableCount=null;b.seatsBeforeLimited="";b.paxTypeLabels=[];b.marketCount="";b.taxAndFeeProgressMessage="";b.incompleteFareSelection="";b.keys=[];b.fromMultiCity="";b.mccConvertedAmounts=[];b.externalRateId="";b.externalCurrencyCode="";b.init=function(c){b.setSettingsByObject(c);b.initJourneyPaxFares();b.setVars();};b.initJourneyPaxFares=function(){var f=0,e=this.JourneyPaxFares||[],c=e.length,l=null;for(f=0;f<c;f+=1){l=new SKYSALES.Class.JourneyPaxFare();l.productClasses=this.productClasses;l.infantSsrFeeDetails=this.infantSsrFeeDetails;l.init(e[f]);e[f]=l;}};b.setVars=function(){this.journeyFareInfoRadioButtonTemplate=this.getById(this.journeyFareInfoRadioButtonTemplateId);this.journeyFarePaxTypeTemplate=this.getById(this.journeyFarePaxTypeTemplateId);};b.setVarsAfterDraw=function(c){this.container=this.getById(c);};b.addEventsAfterDraw=function(){if(this.container){this.container.click(this.fareClickHandler);}};b.fareClickHandler=function(q){var c=q.target.value,e=-1,s=-1,v=-1;e=q.target.id.match(/trip[0-9]*/);e=e[0].match(/\d+/);e=e[0];e=parseInt(e,10);s=q.target.id.match(/journey[0-9]*/);s=s[0].match(/\d+/);s=s[0];s=parseInt(s,10);v=q.target.id.match(/fare[0-9]*/);v=v[0].match(/\d+/);v=v[0];v=parseInt(v,10);b.updateTripSellKeyArray(e,c);if(SKYSALES.taxAndFeeInclusiveDisplayDataRequestHandler!==undefined){if(b.fromMultiCity==true){var l="",m="",u="";m=$(this).val();l=m;if($("input[id^='SelectedRd_"+e+"']").val()!=l){$("input[id^='SelectedRd_"+e+"']").val(l);u=$("input[id^='SelectedRd_']").length;for(var f=0;f<u;f++){var t=$("input[id^='SelectedRd_"+f+"']").val();b.keys[f]=t;}SKYSALES.taxAndFeeInclusiveDisplayDataRequestHandler(b.keys,b.keys.length,b.marketCount,"",b.taxAndFeeProgressMessage,b.incompleteFareSelection);}}else{var r=$("#selectMainBody div[class^='availabilityInputContent'] .rgMasterTable tr td[class^='resultFareCell'] div[class^='resultFare'] div[id^='fareRadio'] :radio[checked]");var w=[];$(r).each(function(z){var A=$(this).val().split("@");w[z]=A[0];});SKYSALES.taxAndFeeInclusiveDisplayDataRequestHandler(w,r.length,thisAvailabilityInput.marketCount,thisAvailabilityInput.hideMarketIndex,thisAvailabilityInput.taxAndFeeProgressMessage,thisAvailabilityInput.incompleteFareSelection);SKYSALES.fareRuleHandler(w,r.length,thisAvailabilityInput.culture);SKYSALES.dgrGoodsNotify(w,r.length,thisAvailabilityInput.culture);}}b.updateSelectedJourney(s);b.updateSelectedFare(v);b.updateTrips();};b.getLowestFare=function(q){var m=0,f=-1,l=null,e=this.JourneyPaxFares||[],c=e.length,r=null;if(c>0){for(m=0;m<c;m+=1){r=e[m];if(m===0&&r.TotalFareAmount>-1){f=r.TotalFareAmount;l=r;}else{if(r.TotalFareAmount<f){f=r.TotalFareAmount;l=r;}}}}if(q){return l;}else{return f;}};b.getFareInfoHtml=function(t,f){var m=0,w=0,r="",z="",u="",l=this.JourneyPaxFares||[],s=l.length,e=null;r=this.journeyFareInfoRadioButtonTemplate.text();for(m=0;m<s;m+=1){e=l[m];z=this.journeyFarePaxTypeTemplate.text();w=SKYSALES.Util.convertToLocaleCurrency(e.TotalFareAmount);var q=true;if(this.externalRateId&&f){var c=$.grep(f,function(A){return A.paxType===e.PaxType;})[0];if(c){w=c.convertedAmount;z=SKYSALES.Util.replace(z,/\[farePrice\]/,w);q=false;}}if(q){z=SKYSALES.Util.replace(z,/\[farePrice\]/,w+" "+e.CurrencyCode);}z=this.setPaxTypeLabel(e.PaxType,z);if(b.seatsBeforeLimited>=b.AvailableCount){r=SKYSALES.Util.replace(r,/\[isLimited\]/,"limited");}else{r=SKYSALES.Util.replace(r,/\[isLimited\]/,"");}u+=z;}if(this.hasInfant&&this.hasInfant=="True"){z=this.journeyFarePaxTypeTemplate.text();var v=$(e.infantSsrFeeDetails).filter(function(){return this.journeySellKey==t;})[0];if(v!==null){if(v.price.match(/[a-zA-Z]/g)){z=SKYSALES.Util.replace(z,/\[farePrice\]/,v.price);}else{z=SKYSALES.Util.replace(z,/\[farePrice\]/,v.price+" "+v.priceCurrencyCode);}z=this.setPaxTypeLabel(v.paxType,z);u+=z;}}r=SKYSALES.Util.replace(r,/\[fareSellKey\]/g,this.SellKey);r=SKYSALES.Util.replace(r,/\[paxTypeDisplay\]/g,u);return r;};b.setPaxTypeLabel=function(f,e){var c=$(this.paxTypeLabels).filter(function(){return this.paxType==f;})[0];if(c!==null){e=SKYSALES.Util.replace(e,/\[paxType\]/g,c.paxLabel);}return e;};return b;};SKYSALES.Class.JourneyPaxFare=function(){var b=new SKYSALES.Class.SkySales(),a=SKYSALES.Util.extendObject(b);a.CurrencyCode="";a.DiscountedFareAmount="";a.Amount="";a.PaxType="";a.TotalFareAmount="";a.PublishedFareAmount="";a.PaxDiscountCode="";a.productClasses="";a.infantSsrFeeDetails=[];a.init=function(c){this.setSettingsByObject(c);};return a;};SKYSALES.Class.Segment=function(){var a=new SKYSALES.Class.SkySales(),b=SKYSALES.Util.extendObject(a);b.ArrivalStation="";b.Sta="";b.DepartureStation="";b.Std="";b.FlightDesignator=null;b.fullDateFormatString="D, M dd, yy";b.Legs={};b.init=function(c){this.setSettingsByObject(c);this.initSta();this.initStd();this.initFlightDesignator();};b.initFlightDesignator=function(){var c=SKYSALES.Class.FlightDesignator();c.init(this.FlightDesignator);b.FlightDesignator=c;};b.initSta=function(){var c=SKYSALES.Class.STASTD();c.init(this.Sta);this.Sta=c;};b.initStd=function(){var c=SKYSALES.Class.STASTD();c.init(this.Std);this.Std=c;};b.getSubjToGovtApprovalSuperscript=function(){var q=this.Legs||[],e=q.length,l=0,m={},f="subjToGovtApprovalToolTipTemplate",c="";for(l=0;l<e;l+=1){m=q[l].LegInfo||{};if(m.SubjectToGovtApproval==="True"){c=this.getById(f).text();break;}}return c;};return b;};SKYSALES.Class.Leg=function(){var a=new SKYSALES.Class.SkySales(),b=SKYSALES.Util.extendObject(a);b.legTemplateId="legDetailsTemplate";b.legTemplate=null;b.layoverTimeTemplateId="layoverTimeTemplate";b.layoverTimeTemplate=null;b.optCarrierInfoTemplateId="optCarrierDisclosureTemplate";b.optCarrierInfoTemplate=null;b.ArrivalStation="";b.DepartureStation="";b.FlightDesignator={};b.Sta="";b.Std="";b.OperationsInfo={};b.LegInfo={};b.TravelTime={};b.LayoverTime={};b.fullDateFormatString="D, M dd, yy";b.init=function(c){this.setSettingsByObject(c);this.initSta();this.initStd();this.initFlightDesignator();this.setVars();};b.setVars=function(){this.legTemplate=this.getById(this.legTemplateId);this.layoverTimeTemplate=this.getById(this.layoverTimeTemplateId);this.optCarrierInfoTemplate=this.getById(this.optCarrierInfoTemplateId);};b.initFlightDesignator=function(){var c=SKYSALES.Class.FlightDesignator();c.init(this.FlightDesignator);b.FlightDesignator=c;};b.initSta=function(){var c=SKYSALES.Class.STASTD();c.init(this.Sta);b.Sta=c;};b.initStd=function(){var c=SKYSALES.Class.STASTD();c.init(this.Std);b.Std=c;};b.getLayoverTimeHtml=function(){var f="",l=this.LayoverTime,c=l.Hours,e=l.Minutes;if(c>0||e>0){f=this.layoverTimeTemplate.text();f=SKYSALES.Util.replace(f,/\[layoverTimeHours\]/g,c);f=SKYSALES.Util.replace(f,/\[layoverTimeMinutes\]/g,e);}return f;};b.getLegHtml=function(){var q=this.legTemplate.text(),s=this.FlightDesignator,e=s.CarrierCode,f=SKYSALES.Resource||{},r=f.carrierHash[e]||{},c=r.name||"",t=f.stationHash,v=this.DepartureStation,u=t[v].name,m=this.ArrivalStation,l=t[m].name;q=SKYSALES.Util.replace(q,/\[carrierName\]/g,c);q=SKYSALES.Util.replace(q,/\[flightNumber\]/g,s.FlightNumber);q=SKYSALES.Util.replace(q,/\[departureDate\]/,$.datepicker.formatDate(this.fullDateFormatString,this.Std.date));q=SKYSALES.Util.replace(q,/\[departureStation\]/g,u);q=SKYSALES.Util.replace(q,/\[departureTime\]/g,this.Std.getTime());q=SKYSALES.Util.replace(q,/\[arrivalStation\]/g,l);q=SKYSALES.Util.replace(q,/\[arrivalTime\]/g,this.Sta.getTime());q=SKYSALES.Util.replace(q,/\[travelTimeHours\]/g,this.TravelTime.Hours);q=SKYSALES.Util.replace(q,/\[travelTimeMinutes\]/g,this.TravelTime.Minutes);q=SKYSALES.Util.replace(q,/\[layoverTime\]/g,this.getLayoverTimeHtml());q=SKYSALES.Util.replace(q,/\[optDisclosureSymbol\]/g,this.getOperatingInfoSymbol());q=SKYSALES.Util.replace(q,/\[optDisclosureType\]/g,this.getCodeShareSymbol());q=SKYSALES.Util.replace(q,/\[optCarrierDisclosure\]/g,this.getOptDisclosureText());return q;};b.getOptDisclosureText=function(){var c=this.optCarrierInfoTemplate||"",f=this.LegInfo||{},e=SKYSALES.Resource||{},t=f.OperatingCarrier||"",l=e.carrierHash[t]||{},q=l.name||t,s=f.OperatingFlightNumber,r=s.length,m="";if(t){m=f.OperatedByText;if(!m&&q){m=c.text();m=SKYSALES.Util.replace(m,/\[optCarrierName\]/g,q);m=SKYSALES.Util.replace(m,/\[optCarrierCode\]/g,t);m=SKYSALES.Util.replace(m,/\[optFlightNumber\]/g,s);if(!s||(r>0&&s.charAt(r-1)===" ")){m=m.substring(0,m.indexOf("["));}else{m=SKYSALES.Util.replace(m,/\[/g,"");m=SKYSALES.Util.replace(m,/\]/g,"");}}}return m;};b.getOperatingInfoSymbol=function(){var f=this.LegInfo||{},c=f.OperatingCarrier||"",e="";if(c){e=String.fromCharCode(42);}return e;};b.getCodeShareSymbol=function(){var f=this.LegInfo||{},e=f.CodeShareIndicator||"",c="";if(e.toUpperCase()==="L"){c=String.fromCharCode(8225);}if(e.toUpperCase()==="S"){c=String.fromCharCode(8224);}return c;};b.getCodeShareTypeToolTip=function(){var l=this.LegInfo||{},e=l.CodeShareIndicator||"",c="",f="codeShareToolTipTemplate",m="wetLeaseToolTipTemplate";if(e.toUpperCase()==="L"){c=this.getById(f).text();}if(e.toUpperCase()==="S"){c=this.getById(m).text();}return c;};b.getOperatingDisclosureTypeToolTip=function(){var l=this.LegInfo||{},c=l.OperatingCarrier||"",m=this.getOptDisclosureText()||"",f="diclosureTypeToolTipTemplate",e="";if(c&&m){e=this.getById(f).text();e=SKYSALES.Util.replace(e,/\[disclosureTitle\]/g,m);}return e;};return b;};SKYSALES.Class.FlightDesignator=function(){var b=new SKYSALES.Class.SkySales(),a=SKYSALES.Util.extendObject(b);a.CarrierCode="";a.FlightNumber="";a.init=function(c){this.setSettingsByObject(c);};a.getFlightDesignator=function(){return this.CarrierCode+" "+this.FlightNumber;};return a;};SKYSALES.Class.STASTD=function(){var b=new SKYSALES.Class.SkySales(),a=SKYSALES.Util.extendObject(b);a.Day="";a.Month="";a.Hour="";a.Minute="";a.Second="";a.Year="";a.date=null;a.init=function(c){this.setSettingsByObject(c);this.initDateTime();};a.initDateTime=function(){this.date=new Date();this.date.setHours(this.Hour,this.Minute,this.Second,0);this.date.setFullYear(this.Year,this.Month-1,this.Day);};a.getTime=function(){var c=this.Hour;if(c.toString().length===1){c="0"+c;}var e=this.Minute;if(isNaN(e)===false){if(e.toString().length===1){e="0"+e;}}var f=c+e;return f;};return a;};SKYSALES.Class.TripPlannerItinerarySummarySelect=function(){var b=new SKYSALES.Class.SkySales(),a=SKYSALES.Util.extendObject(b);a.containerId="";a.container=null;a.sellKeysId="summaryTripPlannerSellKeys";a.sellKeys=null;a.ErrorsOccurred="";a.Booking=null;a.itineraryResponse=null;a.drawSelectViewItinerarySummary=null;a.url="TripPlannerItinerarySummaryAjax-resource.aspx";a.init=function(c){this.setSettingsByObject(c);this.setVars();};a.setVars=function(){a.container=this.getById(this.containerId);a.sellKeys=this.getById(this.sellKeysId);};a.initBooking=function(e,c,f){a.Booking=new SKYSALES.Class.Booking();this.Booking.init(e);this.Booking.initBookingPricing(c);this.Booking.initAllPassengerFees(f);a.Booking.AllPassengerFees=this.Booking.AllPassengerFees.AllPassengerFees;};a.addEventsAfterItinerarySummaryDraw=function(){var l=$("[id^='journeyPricingDetails_']"),m=0,r=null,q=l||[],c=q.length,f=null,e={};for(m=0;m<c;m+=1){f=q[m];r=new SKYSALES.Class.ToggleView();e={"elementId":"journeyPricingDetails_"+m,"hideId":"journeyTotalPrice_"+m,"showId":"journeyTotalPrice_"+m};r.init(e);r.updateHide();}};a.updateItinerarySummaryInfoHandler=function(c){a.updateItinerarySummaryInfo(c);};a.updateItinerarySummaryInfo=function(l){var e=$(l),c=e.html(),f=SKYSALES.Json.parse(c);this.initBooking(f.Booking,f.BookingPricing,f.AllPassengerFees);if(f.ErrorsOccurred===0){if(this.drawSelectViewItinerarySummary!==null){this.drawSelectViewItinerarySummary();this.addEventsAfterItinerarySummaryDraw();}}};a.getPriceItineraryResponse=function(c){this.sellKeys.val(c);$.post(this.url,{"ItinerarySummary.JourneyFareSellKeys":c},this.updateItinerarySummaryInfoHandler);};a.getSelectViewItineraryJourneysHtml=function(){if(this.Booking!==null){return this.Booking.getSelectViewItineraryJourneysHtml();}else{return"";}};a.getSelectViewItineraryAllPassengerFeesHtml=function(){if(this.Booking!==null){return this.Booking.getSelectViewItineraryAllPassengerFeesHtml();}else{return"";}};return a;};SKYSALES.Class.TripPlannerItinerarySummaryConfirm=function(){var a=new SKYSALES.Class.SkySales(),b=SKYSALES.Util.extendObject(a);b.containerId="itinerarySummaryInfoContainer";b.container=null;b.ErrorsOccurred="";b.Booking=null;b.init=function(c){this.setSettingsByObject(c);this.setVars();this.initBooking(c);this.Booking.drawConfirmView();};b.setVars=function(){b.container=this.getById(this.containerId);};b.initBooking=function(c){this.Booking=new SKYSALES.Class.Booking();this.Booking.init(c.Booking);this.Booking.initBookingPricing(c.BookingPricing);};b.updateItinerarySummaryInfo=function(){};return b;};SKYSALES.Util.clearReplace=function(b,a){return SKYSALES.Util.replace(b,a,"");};SKYSALES.Util.replace=function(e,b,c){var f="",a=typeof b;c=String(c);a=a.toLowerCase();e=String(e);if(a==="object"){c=c.replace(/\$/g,"$$$$");}f=e.replace(b,c);return f;};SKYSALES.FBShareInitData=function(){var c=$("#taxAndFeeResult").find("#taxAndFeeInclusiveDivBody");var r=$(c).children(".total-amount-bg").find(".total-currency").text();var B=$(c).children(".total-amount-bg").find(".total-value").text();var b=$(c).find(".depart-return-msg").text();var v=b.split("(");var I=new Array();for(var F=1;F<v.length;F++){I.push(v[F].split(")")[0]);}var a=I[0];var t=I[1];var z="";if(SKYSALES.Resource.stationHash[t]!=undefined){z=SKYSALES.Resource.stationHash[t].name;}var C=$(c).find("#journey-section").children('div[id^="flightDisplayToggle"]').children("div:nth-child(3)").children(".left-text");var H=$("#availabilityInputContent1 .tabsHeader").children(".dayHeadersLarge.dayHeaderTodayImage").find(".todayDate").text().split("/");var s=H[1];var K=H[0];if(K.toString().length==1){K="0"+K;}var w=H[2];var e=w+"-"+K;var A=$("#availabilityInputContent2 .tabsHeader").children(".dayHeadersLarge.dayHeaderTodayImage").find(".todayDate").text().split("/");var u="";var l="";var m="";var L="";if(A!=""){u=A[1];l=A[0];if(l.toString().length==1){l="0"+l;}m=A[2];L=m+"-"+l;}var f=$(c).find("#journey-section:first").find('div[id^="flightDisplayToggle"]').last().children('div[class^="row"]').children(".left-text");f=$(f).text().split("(s)");if(f[f.length-1]===null||f[f.length-1].match(/^ *$/)!==null){f.pop();}var J=$("#adtPaxCount").val()==""?0:$("#adtPaxCount").val();var q=$("#chdPaxCount").val()==""?0:$("#chdPaxCount").val();var D=$("#infPaxCount").val()==""?0:$("#infPaxCount").val();var G=Math.floor((Math.random()*100)+1);var E=window.open("FBSharePopUp.aspx","popupWindow"+G,"width=600,height=600,scrollbars=yes");$(E).load(function(){var M=$(E.document);M.find("#fbShare_parentPage").val("SelectView");M.find("#fbShare_full_destStation").val(z==""?$("#fbShare_full_destStation_mmb").val():z);M.find("#fbShare_originStation").val(a);M.find("#fbShare_destStation").val(t);M.find("#fbShare_departDay").val(s);M.find("#fbShare_departYearMonth").val(e);M.find("#fbShare_returnDay").val(u);M.find("#fbShare_returnYearMonth").val(L);M.find("#fbShare_adult").val(J);M.find("#fbShare_kid").val(q);M.find("#fbShare_infant").val(D);M.find("#fbShareSubmit").click();});};SKYSALES.FBShareItineraryInitData=function(){var a=$("#socialIntergration_Itinerary");var c=Math.floor((Math.random()*100)+1);var b=window.open("FBSharePopUp.aspx","popupWindow"+c,"width=600,height=600,scrollbars=yes");$(b).load(function(){var e=$(b.document);e.find("#fbShare_parentPage").val("ItineraryView");e.find("#fbShare_full_destStation").val(a.children("#fbShareItinerary_Destination_Full").val());e.find("#fbShare_originStation").val(a.children("#fbShareItinerary_Origin").val());e.find("#fbShare_destStation").val(a.children("#fbShareItinerary_Destination").val());e.find("#fbShare_departDay").val(a.children("#fbShareItinerary_Day1").val());e.find("#fbShare_departYearMonth").val(a.children("#fbShareItinerary_MonthYear1").val());e.find("#fbShare_returnDay").val(a.children("#fbShareItinerary_Day2").val());e.find("#fbShare_returnYearMonth").val(a.children("#fbShareItinerary_MonthYear2").val());e.find("#fbShare_adult").val(a.children("#fbShareItinerary_NoOfAdult").val());e.find("#fbShare_kid").val(a.children("#fbShareItinerary_NoOfKid").val());e.find("#fbShare_infant").val(a.children("#fbShareItinerary_NoOfInfant").val());e.find("#fbShareSubmit").click();});};SKYSALES.FBSharePostData=function(){var c=$("#fbShare_parentPage").val();var f=$("#fbShare_name_param").val();var b=$("#fbShare_desc_param").val();if(c=="ItineraryView"){f=$("#fbShare_name_paramItinerary").val();b=$("#fbShare_desc_paramItinerary").val();}var a=String(f||"");var l=$("#fbShare_culture").val();a=a.replace("~DESTINATION~",$("#fbShare_full_destStation").val());$("#fbShare_name_parameter").val(a);$("#fbShare_description_parameter").val(b);var e=$("#fbShare_link_parameter").val();if($("#fbShare_returnYearMonth").val()!=""){e=e.replace("~ORIGIN~",$("#fbShare_originStation").val()).replace("~DESTINATION~",$("#fbShare_destStation").val()).replace("~DAY1~",$("#fbShare_departDay").val()).replace("~DAY2~",$("#fbShare_returnDay").val()).replace("~MONTHYEAR1~",$("#fbShare_departYearMonth").val()).replace("~MONTHYEAR2~",$("#fbShare_returnYearMonth").val()).replace("~NOOFADULT~",$("#fbShare_adult").val()).replace("~NOOFKID~",$("#fbShare_kid").val()).replace("~NOOFINFANT~",$("#fbShare_infant").val()).replace("~CULTURE~",$("#fbShare_culture").val());}else{e=e.replace("~ORIGIN~",$("#fbShare_originStation").val()).replace("~DESTINATION~",$("#fbShare_destStation").val()).replace("~DAY1~",$("#fbShare_departDay").val()).replace("Day2=~DAY2~&amp;","").replace("~MONTHYEAR1~",$("#fbShare_departYearMonth").val()).replace("MonthYear2=~MONTHYEAR2~&amp;",$("#fbShare_returnYearMonth").val()).replace("~NOOFADULT~",$("#fbShare_adult").val()).replace("~NOOFKID~",$("#fbShare_kid").val()).replace("~NOOFINFANT~",$("#fbShare_infant").val()).replace("~CULTURE~",l);}var m=e.split("?");m[1]=escape(m[1]);e=$("#fbShare_hostUrl").val()+m[0]+"?"+m[1];$("#fbShare_link_parameter").val(e);document.PostForm.submit();};SKYSALES.selectDirectDebitRadio=function(b){var a=b;$("#CONTROLGROUPPAYMENTBOTTOM_PaymentInputViewPaymentView_"+a).attr("checked",true);};SKYSALES.validateTravelerTax=function(c){var l=$("#"+c);var b=l.find("input[type=checkbox][ssr-label]");var m=l.find("input.input-terms-condition[type=checkbox]");m.removeAttr("required");for(var f=0,a=b.length;f<a;f++){var e=$(b[f]);if(e.prop("checked")){m.attr("required","required");return;}}};SKYSALES.SetEnableTravelerTaxCheckbox=function(){var b=$(".TravelerTaxAddOnsCheckBox");var a=b.find("input[type=checkbox][ssr-label]");a.prop("disabled",false);};if(!Array.prototype.filter){Array.prototype.filter=function(c){if(this===void 0||this===null){throw new TypeError();}var l=Object(this);var a=l.length>>>0;if(typeof c!=="function"){throw new TypeError();}var f=[];var b=arguments.length>=2?arguments[1]:void 0;for(var e=0;e<a;e++){if(e in l){var m=l[e];if(c.call(b,m,e,l)){f.push(m);}}}return f;};}